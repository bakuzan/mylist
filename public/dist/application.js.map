{"version":3,"sources":["application.js"],"names":["_typeof6","Symbol","iterator","obj","constructor","prototype","_typeof5","_typeof4","_typeof3","_typeof2","_typeof","ApplicationConfiguration","applicationModuleName","applicationModuleVendorDependencies","registerModule","moduleName","dependencies","angular","module","requires","push","config","$locationProvider","hashPrefix","run","$rootScope","$state","Authentication","$on","event","toState","name","user","_id","preventDefault","go","element","document","ready","window","location","hash","bootstrap","Menus","addMenuItem","addSubMenuItem","$stateProvider","state","url","templateUrl","controller","AnimeitemsController","$inject","$scope","$stateParams","$location","Animeitems","Mangaitems","fileUpload","$sce","$window","ItemService","ListService","NotificationFactory","AnimeFactory","spinnerService","TagService","$uibModal","ctrl","authentication","filterConfig","ongoingList","showingCount","expandFilters","sortType","sortReverse","ratingLevel","undefined","ratingActions","maxRating","percent","overStar","search","searchTags","tagsForFilter","taglessItem","areTagless","selectListOptions","statTags","commonArrays","getCommonArrays","getItemsAvailable","viewItem","findOne","latestDate","pageConfig","currentPage","pageSize","remove","tickOff","trustAsResourceUrl","update","usedTags","viewItemHistory","whichController","getSelectListOptions","animeitem","confirmation","$remove","i","animeitems","splice","path","warning","item","episodes","latest","Date","updated","modalInstance","open","animation","size","resolve","data","type","result","then","console","log","meta","get","animeitemId","$promise","getAnime","value","loading","query","status","checkForTagless","buildStatTags","onHold","CreateAnimeController","addedEpisodes","addTag","title","updateHistory","create","dropTag","finalNumbers","find","findManga","imgPath","itemUpdate","init","removeTag","sections","showAdditional","showCompletion","showItemTags","setInSeason","submit","tagArray","tagArrayRemove","uploadFile","isCreate","start","newTag","text","tags","finalEpisode","reWatching","end","season","year","substring","image","convertDateToSeason","disc","manga","$save","response","success","errorResponse","error","message","mangaitems","myFile","uploadFileToUrl","WatchAnimeController","$timeout","saved","localStorage","getItem","playVideo","startRewatch","videoFile","processed","file","number","watchedList","JSON","parse","updateWatchedList","setItem","stringify","$watch","nVal","oVal","video","files","findWithAttr","URL","createObjectURL","parseInt","length","WatchListController","WatchAnime","$filter","watchAnime","id","sortOptions","sortOption","v","directive","animeItemModel","restrict","replace","fileModel","$parse","link","scope","attrs","model","modelSetter","assign","bind","$apply","keycuts","postLink","e","altKey","keyCode","isList","view","listBack","css","listFilters","items","page","elem","passTag","tag","indexOf","split","hoveringOver","itemsAvailable","collapseFilters","swOnplay","el","addEventListener","pageControls","pageCount","Math","ceil","last","first","next","prev","ctrlKey","filter","endedMonth","array","month","substr","endedSeason","moment","num","startMonth","startYear","diff","weeks","pad","slice","ratingFilter","rating","seasonForCharacterAnime","anime","startFrom","input","statisticsDetailFilter","division","filterPart","summaryYear","factory","episodeRating","concatenateTagArrays","itemHistory","itemRevisits","reWatchCount","$update","href","AnimeitemsFactory","$resource","method","service","$http","uploadUrl","fd","FormData","append","post","transformRequest","identity","headers","err","popup","buildOverview","buildRatingsDistribution","completeByMonth","completeBySeason","deleteHistory","endingYears","getRatingValues","maxCompleteMonth","maxTagCount","ratingsWeighted","setSeason","date","getFullYear","getMonth","seasons","Number","history","latestHistory","chapters","reReading","now","temp","forEach","past","count","currentPart","finalPart","repeating","index","revisits","today","displayDate","toISOString","fromNow","format","overview","ongoing","completed","modeMap","maxCount","tempRating","maxRatedCount","averageRating","values","averageItemRating","add","checkedRating","itemCount","len","ratedCount","ratings","ratingAdded","ratingAvg","ratingWeighted","weights","unratedCount","total","k","isNaN","possibleValues","ratingsDistribution","colour","percentage","toFixed","years","itemYears","monthDetails","completeByMonthItems","months","max","seasonDetails","completeBySeasonItems","maxCompleteSeason","$q","groupItemsByProperties","manipulateString","numberOfPages","stringReverse","weekEndingForDate","string","reverse","join","pagingDetails","attr","groupProperties","reject","groupedArrays","groupBy","getGroupProperties","groups","group","f","o","Object","keys","map","transform","onlyFirst","toLowerCase","charAt","toUpperCase","convertToSunday","day","getDay","getDate","wkEnd","setDate","endOf","n","searchName","media","mediaType","repeatType","itemTags","alreadyAdded","j","itemTypes","categories","days","summaryFunctions","CharactersController","Characters","CharacterService","seriesFilter","voiceActors","series","findAnime","findOneAnime","findOneManga","maxItemCount","mangaitem","character","voice","characters","buildCharacterTags","buildVoiceActors","buildSeriesList","characterId","mangaitemId","characterBack","clearTagValues","characterTags","deleteSearchTag","disableNgAnimate","$animate","enabled","deletingItem","$parent","enterTag","which","$eval","entry_type","slider","slides","interval","bindToController","controllerAs","self","timer","_autoSlide","currentIndex","enter","goToSlide","isFullscreen","leave","repeater","toggleFullscreen","slide","filteredSlides","locked","cancel","visible","autoSlide","sliderController","childElementCount","mediaFilter","seriesDetailFilter","detailSeriesName","tagFilter","found","tagsToSearch","buildGenderDistribution","check","gender","buildRelatedCharacterTags","tagDetailCollection","tagDetailResult","bit","statSeries","CharacterFactory","HeaderController","changeTheme","isActive","isCollapsed","isTimedTheme","menu","getMenu","styles","theme","timedTheme","toggleCollapsibleMenu","viewLocation","timeOfDayTheme","time","getHours","storedValue","getElementById","lastIndexOf","anywhereButHere","$document","body","on","inThing","target","inheritedData","ignore","ngShow","clickPass","stopPropagation","click","formatDate","require","modelCtrl","$formatters","modelValue","loadingSpinner","transclude","active","api","show","hide","toggle","_register","_unregister","myProgress","val","html","calendarFilter","datesSelected","currentWkEnd","iDate","itemDate","currentDate","dateSuffix","suffixes","dtfilter","relevantDigits","suffix","dateArray","dayFilter","daySelected","ds","numberFixedLen","FunctionService","width","padChar","Array","defaultRoles","menus","shouldRender","roles","userRoleIndex","roleIndex","isPublic","validateMenuExistance","menuId","Error","addMenu","removeMenu","menuItemTitle","menuItemURL","menuItemType","menuItemUIRoute","position","menuItemClass","uiRoute","rootMenuItemURL","itemIndex","removeMenuItem","removeSubMenuItem","submenuItemURL","subitemIndex","toastr","options","swal","thenDo","showCancelButton","closeOnConfirm","confirmButtonText","confirmButtonColor","SpinnerService","spinners","queue","loads","hasOwnProperty","optionsOrPromise","spinner","always","promise","extend","$urlRouterProvider","otherwise","HistoryController","AnimeHistory","MangaHistory","HistoryService","buildHistory","historyFilter","happenedWhen","historyGroups","buildHistoryList","animeHistory","mangaHistory","newValue","when","ViewHistoryController","$uibModalInstance","historyStore","close","dismiss","historySeparator","level","timeframe","startOf","filterItemHistory","extractHistory","getEndsOfWeek","getSetDaysAgo","groupItemHistory","weekBeginning","weekEnding","endsOfWeek","mondays","sundays","thisMonday","thisSunday","thisEnd","daysAgo","newDate","subtract","wkBeg","deferred","defer","sort","a","b","dateA","dateB","cutoff","prevItem","groupedHistory","oldest","thisDate","MangaitemsController","MangaFactory","volumes","finalChapter","finalVolume","hardcopy","mangaItemModel","reReadCount","MangaitemsFactory","CompleteOrdersController","order","newPrice","company","price","editOrder","nextVolume","prices","completeOrder","rrp","paid","controllerId","CreateOrdersController","Orders","isCreateMode","orderId","orderCopy","volume","orderHistory","stepConfig","stepHeaders","currentStep","stepCount","_this","copy","takeStep","step","direction","processOrder","openBoughtDialog","OrderHistoryController","processHistory","cost","purchaseDate","rrpInstance","saving","OrdersController","orders","openOrderHistoryDialog","OrdersFactory","RatingsController","StatisticsService","episodeScore","itemScore","modelOptions","debounce","viewEpisodeRatings","getItems","score","isEqual","buildSummaryFunctions","finished","focusOnShow","myValue","focus","StatisticsController","Toptens","colours","red","green","blue","dataStore","toptens","detail","isVisible","divisionText","summary","isEpisodeRatings","tagDetail","topten","isRanked","isFavourite","generateSeasons","getFilteredItems","getToptenItemStatistics","historyDetail","historyDetails","tableDetail","tableDetails","listCount","getItemStatistics","ratingValues","buildToptenModeList","totalListCount","buildToptenDataStructure","toptenType","filteredItems","getSummaryFunctions","buildYearSummary","yearSummary","episodeSummaryFunctions","buildEpisodeSummaries","summaryType","historyChange","filtered","detailSeasonYear","detailSeason","detectFlood","overflowCheck","scrollWidth","offsetWidth","classList","percentageBarContainer","border","template","percentageBar","display","percentageBarContainerCtrl","tabContainer","tabs","currentTab","listShift","addTab","tab","disable","disabledTab","disabled","select","selectedTab","heading","shiftTabs","elWidth","ulWidth","ul","children","$viewValue","$setViewValue","shift","style","left","tabView","tabContainerCtrl","getModeMap","occuranceCounter","highestRating","lowestRating","modeRating","sum","metric","processYearSummary","results","filteredArray","arrayOfArrays","listType","itemLen","CreateTaskController","Tasks","TaskFactory","newTaskModel","addChecklistItem","backStep","dropChecklistItem","setNewTask","newTask","description","linked","repeat","category","daily","checklist","checklistItems","isAddTask","checklistItem","complete","task","completeTimes","updateCheck","process","valid","linkItems","linkType","ScheduleCalendarTaskController","refresh","timeDiff","abs","getTime","daysFromToday","events","insertChecklistItem","removeTask","tickOffChecklist","updateTask","weekEnds","floor","aDate","bDate","newChecklistItem","TasksController","createTask","dateOptions","dateDisabled","formatYear","maxDate","minDate","startingDay","refreshItems","setTabFilterDay","tabFilter","tabName","getWeekBeginning","tasks","checkStatus","parts","single","all","change","dailyRefresh","UpdateAnimeTaskController","episodeCompleted","episodeNumber","isComplete","ratingLimit","UpdateMangaTaskController","loseInterest","interesting","elm","tagName","alsoInteresting","scheduleCalendar","_removeTime","hour","minute","second","millisecond","_buildMonth","done","monthIndex","_buildWeek","isCurrentMonth","isToday","isSame","_displayEvents","selected","previous","shadowModel","att","shadow","taskItemModel","passClick","passTo","updateAnimeitem","updateMangaitem","errorMessage","userCheck","removeTaskProcess","launchMangaUpdateDialog","checklistIndex","itemOriginal","launchAnimeUpdateDialog","isLinked","animeDialog","dialog","taskId","CreateToptenController","toptenCopy","animeList","mangaList","characterList","conditions","limit","imgSize","height","pushCondition","pushItem","removeCondition","removeItem","steps","listGen","itemsCached","displayList","seriesList","typeDisplay","toptenItem","seriesLimit","tagLimit","limitMin","swapping","one","two","swappingItems","typeSetItemPopulate","getYears","callback","indexTwo","inital","toptenId","StatisticsTopten","list","toptenInfo","ToptensController","openListStats","viewConfig","displayType","linkSuffix","horizontalListItem","horizontalListCtrl","itemWidth","register","horizontalList","clicks","moveItems","setVisibility","child","settings","listSettings","ngMax","$isDirty","isEmpty","isUndefined","maxValidator","Infinity","$setValidity","$parsers","ngMin","minValidator","min","oneStep","stepsController","stepNumber","stepControls","sticky","evt","stickyClass","stickyInnerClass","scrollTop","inner","viewportOffset","getBoundingClientRect","distance_from_top","top","toptenFilter","ToptensFactory","$httpProvider","interceptors","responseError","rejection","AuthenticationController","signin","signup","credentials","username","loginBody","askForPasswordReset","resetUserPassword","token","passwordDetails","Users","hasConnectedAdditionalSocialAccounts","provider","additionalProvidersData","isConnectedSocialAccount","removeUserSocialAccount","delete","params","updateUserProfile","isValid","submitted","changeUserPassword","AuthenticationFactory","_data","UsersFactory"],"mappings":"AAAA,aAAa;0OACb,GAAIA,UAAS,MAAOC,OAAP,GAAgB,UAAhB,EAA4B,SAAOA,OAAOC,QAAd,IAAyB,QAArD,CAA8D,SAASC,GAAT,CAAa,CAAC,aAAcA,IAAd,oCAAcA,GAAd,EAAmB,CAA/F,CAAgG,SAASA,GAAT,CAAa,CAAC,MAAOA,MAAK,MAAOF,OAAP,GAAgB,UAArB,EAAiCE,IAAIC,WAAJ,GAAkBH,MAAnD,EAA2DE,MAAMF,OAAOI,SAAxE,CAAkF,QAAlF,OAAkGF,IAAlG,oCAAkGA,GAAlG,CAAP,CAA8G,CAAzO,CAA0O,GAAIG,UAAS,MAAOL,OAAP,GAAgB,UAAhB,EAA4BD,SAASC,OAAOC,QAAhB,IAA4B,QAAxD,CAAiE,SAASC,GAAT,CAAa,CAAC,MAAO,OAAOA,IAAP,GAAa,WAAb,CAAyB,WAAzB,CAAqCH,SAASG,GAAT,CAA5C,CAA2D,CAA1I,CAA2I,SAASA,GAAT,CAAa,CAAC,MAAOA,MAAK,MAAOF,OAAP,GAAgB,UAArB,EAAiCE,IAAIC,WAAJ,GAAkBH,MAAnD,EAA2DE,MAAMF,OAAOI,SAAxE,CAAkF,QAAlF,CAA2F,MAAOF,IAAP,GAAa,WAAb,CAAyB,WAAzB,CAAqCH,SAASG,GAAT,CAAvI,CAAsJ,CAA5T,CAA6T,GAAII,UAAS,MAAON,OAAP,GAAgB,UAAhB,EAA4BK,SAASL,OAAOC,QAAhB,IAA4B,QAAxD,CAAiE,SAASC,GAAT,CAAa,CAAC,MAAO,OAAOA,IAAP,GAAa,WAAb,CAAyB,WAAzB,CAAqCG,SAASH,GAAT,CAA5C,CAA2D,CAA1I,CAA2I,SAASA,GAAT,CAAa,CAAC,MAAOA,MAAK,MAAOF,OAAP,GAAgB,UAArB,EAAiCE,IAAIC,WAAJ,GAAkBH,MAAnD,EAA2DE,MAAMF,OAAOI,SAAxE,CAAkF,QAAlF,CAA2F,MAAOF,IAAP,GAAa,WAAb,CAAyB,WAAzB,CAAqCG,SAASH,GAAT,CAAvI,CAAsJ,CAA5T,CAA6T,GAAIK,UAAS,MAAOP,OAAP,GAAgB,UAAhB,EAA4BM,SAASN,OAAOC,QAAhB,IAA4B,QAAxD,CAAiE,SAASC,GAAT,CAAa,CAAC,MAAO,OAAOA,IAAP,GAAa,WAAb,CAAyB,WAAzB,CAAqCI,SAASJ,GAAT,CAA5C,CAA2D,CAA1I,CAA2I,SAASA,GAAT,CAAa,CAAC,MAAOA,MAAK,MAAOF,OAAP,GAAgB,UAArB,EAAiCE,IAAIC,WAAJ,GAAkBH,MAAnD,EAA2DE,MAAMF,OAAOI,SAAxE,CAAkF,QAAlF,CAA2F,MAAOF,IAAP,GAAa,WAAb,CAAyB,WAAzB,CAAqCI,SAASJ,GAAT,CAAvI,CAAsJ,CAA5T,CAA6T,GAAIM,UAAS,MAAOR,OAAP,GAAgB,UAAhB,EAA4BO,SAASP,OAAOC,QAAhB,IAA4B,QAAxD,CAAiE,SAASC,GAAT,CAAa,CAAC,MAAO,OAAOA,IAAP,GAAa,WAAb,CAAyB,WAAzB,CAAqCK,SAASL,GAAT,CAA5C,CAA2D,CAA1I,CAA2I,SAASA,GAAT,CAAa,CAAC,MAAOA,MAAK,MAAOF,OAAP,GAAgB,UAArB,EAAiCE,IAAIC,WAAJ,GAAkBH,MAAnD,EAA2DE,MAAMF,OAAOI,SAAxE,CAAkF,QAAlF,CAA2F,MAAOF,IAAP,GAAa,WAAb,CAAyB,WAAzB,CAAqCK,SAASL,GAAT,CAAvI,CAAsJ,CAA5T,CAA6T,GAAIO,SAAQ,MAAOT,OAAP,GAAgB,UAAhB,EAA4BQ,SAASR,OAAOC,QAAhB,IAA4B,QAAxD,CAAiE,SAASC,GAAT,CAAa,CAAC,MAAO,OAAOA,IAAP,GAAa,WAAb,CAAyB,WAAzB,CAAqCM,SAASN,GAAT,CAA5C,CAA2D,CAA1I,CAA2I,SAASA,GAAT,CAAa,CAAC,MAAOA,MAAK,MAAOF,OAAP,GAAgB,UAArB,EAAiCE,IAAIC,WAAJ,GAAkBH,MAAnD,EAA2DE,MAAMF,OAAOI,SAAxE,CAAkF,QAAlF,CAA2F,MAAOF,IAAP,GAAa,WAAb,CAAyB,WAAzB,CAAqCM,SAASN,GAAT,CAAvI,CAAsJ,CAA3T,CAA4T,GAAIQ,0BAAyB,UAAU,CAAC;AACl0D,GAAIC,uBAAsB,QAA1B,CAAmC,GAAIC,qCAAoC,CAAC,YAAD,CAAc,WAAd,CAA0B,WAA1B,CAAsC,SAAtC,CAAgD,YAAhD,CAA6D,WAA7D,CAAyE,cAAzE,CAAwF,UAAxF,CAAmG,mBAAnG,CAAuH,eAAvH,CAAxC,CAAgL;AACnN,GAAIC,gBAAe,QAASA,eAAT,CAAwBC,UAAxB,CAAmCC,YAAnC,CAAgD,CAAC;AACpEC,QAAQC,MAAR,CAAeH,UAAf,CAA0BC,cAAc,EAAxC,EAA4C;AAC5CC,QAAQC,MAAR,CAAeN,qBAAf,EAAsCO,QAAtC,CAA+CC,IAA/C,CAAoDL,UAApD,EAAiE,CAFjE,CAEkE,MAAM,CAACH,sBAAsBA,qBAAvB,CAA6CC,oCAAoCA,mCAAjF,CAAqHC,eAAeA,cAApI,CAAN,CAA2J,CAJ0lD,EAA7B,CAI1jD,aAAa;AAC7OG,QAAQC,MAAR,CAAeP,yBAAyBC,qBAAxC,CAA8DD,yBAAyBE,mCAAvF,EAA4H;AAC5HI,QAAQC,MAAR,CAAeP,yBAAyBC,qBAAxC,EAA+DS,MAA/D,CAAsE,CAAC,mBAAD,CAAqB,SAASC,iBAAT,CAA2B,CAACA,kBAAkBC,UAAlB,CAA6B,GAA7B,EAAmC,CAApF,CAAtE,EAA6JN,QAAQC,MAAR,CAAeP,yBAAyBC,qBAAxC,EAA+DY,GAA/D,CAAmE,CAAC,YAAD,CAAc,QAAd,CAAuB,gBAAvB,CAAwC,SAASC,UAAT,CAAoBC,MAApB,CAA2BC,cAA3B,CAA0C,CAACF,WAAWG,GAAX,CAAe,mBAAf,CAAmC,SAASC,KAAT,CAAeC,OAAf,CAAuB,CAAC,GAAGA,QAAQC,IAAR,GAAe,QAAlB,CAA2B,CAAC,GAAGJ,eAAeK,IAAf,CAAoBC,GAAvB,CAA2B,CAACJ,MAAMK,cAAN,GAAuBR,OAAOS,EAAP,CAAU,WAAV,EAAwB,CAA3E,IAA+E,CAAC,OAAQ,CAAC,IAAG,CAACR,eAAeK,IAAnB,CAAwB,CAACH,MAAMK,cAAN,GAAuBR,OAAOS,EAAP,CAAU,QAAV,EAAqB,CAAC,CAAtP,EAAyP,CAA5U,CAAnE,EAAkZ;AAC/iBlB,QAAQmB,OAAR,CAAgBC,QAAhB,EAA0BC,KAA1B,CAAgC,UAAU,CAAC;AAC3C,GAAGC,OAAOC,QAAP,CAAgBC,IAAhB,GAAuB,MAA1B,CAAiCF,OAAOC,QAAP,CAAgBC,IAAhB,CAAqB,IAArB,CAA0B;AAC3DxB,QAAQyB,SAAR,CAAkBL,QAAlB,CAA2B,CAAC1B,yBAAyBC,qBAA1B,CAA3B,EAA8E,CAF9E,EAEgF,aAAa;AAC7FD,yBAAyBG,cAAzB,CAAwC,YAAxC,EAAsD,aAAa;AACnEH,yBAAyBG,cAAzB,CAAwC,YAAxC,EAAsD,aAAa;AACnEH,yBAAyBG,cAAzB,CAAwC,MAAxC,EAAgD,aAAa;AAC7DH,yBAAyBG,cAAzB,CAAwC,SAAxC,EAAmD,aAAa;AAChEH,yBAAyBG,cAAzB,CAAwC,YAAxC,EAAsD,aAAa;AACnEH,yBAAyBG,cAAzB,CAAwC,QAAxC,EAAkD,aAAa;AAC/DH,yBAAyBG,cAAzB,CAAwC,SAAxC,EAAmD,aAAa;AAChEH,yBAAyBG,cAAzB,CAAwC,YAAxC,EAAsD,aAAa;AACnEH,yBAAyBG,cAAzB,CAAwC,OAAxC,EAAiD,aAAa;AAC9DH,yBAAyBG,cAAzB,CAAwC,SAAxC,EAAmD,aAAa;AAChEH,yBAAyBG,cAAzB,CAAwC,OAAxC,EAAiD,aAAa;AAC9DG,QAAQC,MAAR,CAAe,YAAf,EAA6BM,GAA7B,CAAiC,CAAC,OAAD,CAAS,SAASmB,KAAT,CAAe,CAAC;AAC1DA,MAAMC,WAAN,CAAkB,QAAlB,CAA2B,YAA3B,CAAwC,YAAxC,CAAqD,UAArD,EAAiED,MAAME,cAAN,CAAqB,QAArB,CAA8B,YAA9B,CAA2C,iBAA3C,CAA6D,YAA7D,EAA2EF,MAAME,cAAN,CAAqB,QAArB,CAA8B,YAA9B,CAA2C,kBAA3C,CAA8D,uBAA9D,EAAuFF,MAAME,cAAN,CAAqB,QAArB,CAA8B,YAA9B,CAA2C,eAA3C,CAA2D,mBAA3D,EAAiF,CADnR,CAAjC,EACuT,aAAa;AACpU5B,QAAQC,MAAR,CAAe,YAAf,EAA6BG,MAA7B,CAAoC,CAAC,gBAAD,CAAkB,SAASyB,cAAT,CAAwB,CAAC;AAC/EA,eAAeC,KAAf,CAAqB,gBAArB,CAAsC,CAACC,IAAI,aAAL,CAAmBC,YAAY,2DAA/B,CAA2FC,WAAW,8BAAtG,CAAtC,EAA6KH,KAA7K,CAAmL,qBAAnL,CAAyM,CAACC,IAAI,wBAAL,CAA8BC,YAAY,2DAA1C,CAAsGC,WAAW,6BAAjH,CAAzM,EAA0VH,KAA1V,CAAgW,iBAAhW,CAAkX,CAACC,IAAI,oBAAL,CAA0BC,YAAY,4DAAtC,CAAlX,EAAudF,KAAvd,CAA6d,eAA7d,CAA6e,CAACC,IAAI,0BAAL,CAAgCC,YAAY,0DAA5C,CAA7e,EAAslBF,KAAtlB,CAA4lB,eAA5lB,CAA4mB,CAACC,IAAI,+BAAL,CAAqCC,YAAY,4DAAjD,CAA5mB,EAA4tBF,KAA5tB,CAAkuB,gBAAluB,CAAmvB,CAACC,IAAI,gCAAL,CAAsCC,YAAY,2DAAlD,CAAnvB,EAAo2B,CADh0B,CAApC,EACu2B,CAAC,UAAU,CAAC,aAAahC,QAAQC,MAAR,CAAe,YAAf,EAA6BgC,UAA7B,CAAwC,sBAAxC,CAA+DC,oBAA/D,EAAqFA,qBAAqBC,OAArB,CAA6B,CAAC,QAAD,CAAU,cAAV,CAAyB,WAAzB,CAAqC,gBAArC,CAAsD,YAAtD,CAAmE,YAAnE,CAAgF,YAAhF,CAA6F,MAA7F,CAAoG,SAApG,CAA8G,aAA9G,CAA4H,aAA5H,CAA0I,qBAA1I,CAAgK,cAAhK,CAA+K,gBAA/K,CAAgM,YAAhM,CAA6M,WAA7M,CAA7B,CAAuP,QAASD,qBAAT,CAA8BE,MAA9B,CAAqCC,YAArC,CAAkDC,SAAlD,CAA4D5B,cAA5D,CAA2E6B,UAA3E,CAAsFC,UAAtF,CAAiGC,UAAjG,CAA4GC,IAA5G,CAAiHC,OAAjH,CAAyHC,WAAzH,CAAqIC,WAArI,CAAiJC,mBAAjJ,CAAqKC,YAArK,CAAkLC,cAAlL,CAAiMC,UAAjM,CAA4MC,SAA5M,CAAsN,CAAC,GAAIC,MAAK,IAAT,CAAcA,KAAKC,cAAL,CAAoB1C,cAApB,CAAmCyC,KAAKE,YAAL,CAAkB,CAACC,YAAY,IAAb,CAAkBC,aAAa,CAA/B,CAAiCC,cAAc,KAA/C,CAAqDC,SAAS,EAA9D,CAAiEC,YAAY,IAA7E,CAAkFC,YAAYC,SAA9F,CAAwGC,cAAc,CAACC,UAAU,EAAX,CAAcC,QAAQH,SAAtB,CAAgCI,SAAS,IAAzC,CAAtH,CAAqKC,OAAO,EAA5K,CAA+KC,WAAW,EAA1L,CAA6LC,cAAc,EAA3M,CAA8MC,YAAY,KAA1N,CAAgOC,WAAW,KAA3O,CAAiPC,kBAAkB,EAAnQ,CAAsQC,SAAS,EAA/Q,CAAkRC,aAAa3B,YAAY4B,eAAZ,EAA/R,CAA6TC,kBAAkBA,iBAA/U,CAAiWC,SAAS,EAA1W,CAAlB,CAAgYxB,KAAKyB,OAAL,CAAaA,OAAb,CAAqBzB,KAAK0B,UAAL,CAAgBA,UAAhB,CAA2B1B,KAAK2B,UAAL,CAAgB,CAACC,YAAY,CAAb,CAAeC,SAAS,EAAxB,CAAhB,CAA4C7B,KAAK8B,MAAL,CAAYA,MAAZ,CAAmB9B,KAAK+B,OAAL,CAAaA,OAAb,CAAqB/B,KAAKgC,kBAAL,CAAwBA,kBAAxB,CAA2ChC,KAAKiC,MAAL,CAAYA,MAAZ,CAAmBjC,KAAKkC,QAAL,CAAc,EAAd,CAAiB;AACviElC,KAAKmC,eAAL,CAAqBA,eAArB,CAAqCnC,KAAKoC,eAAL,CAAqB,WAArB,CAAiCpC,KAAKE,YAAL,CAAkBiB,iBAAlB,CAAoCzB,YAAY2C,oBAAZ,CAAiCrC,KAAKoC,eAAtC,CAApC,CAA2F;AACjK,QAASJ,mBAAT,CAA4BpD,GAA5B,CAAgC,CAAC,MAAOW,MAAKyC,kBAAL,CAAwBpD,GAAxB,CAAP,CAAqC;AACtE,QAASkD,OAAT,CAAgBQ,SAAhB,CAA0B,CAAC;AAC3B3C,oBAAoB4C,YAApB,CAAiC,UAAU,CAAC,GAAGD,SAAH,CAAa,CAACA,UAAUE,OAAV,GAAoB,IAAI,GAAIC,EAAR,GAAazC,MAAK0C,UAAlB,CAA6B,CAAC,GAAG1C,KAAK0C,UAAL,CAAgBD,CAAhB,IAAqBH,SAAxB,CAAkC,CAACtC,KAAK0C,UAAL,CAAgBC,MAAhB,CAAuBF,CAAvB,CAAyB,CAAzB,EAA6B,CAAC,CAAC,CAAlI,IAAsI,CAACzC,KAAKsC,SAAL,CAAeE,OAAf,CAAuB,UAAU,CAACrD,UAAUyD,IAAV,CAAe,YAAf,EAA8B,CAAhE,EAAmE,qBAAoBC,OAApB,CAA4B,UAA5B,CAAuC,iCAAvC,EAA2E,CAAjU,EAAoU;AACpU,QAASZ,OAAT,EAAiB,CAAC,GAAIK,WAAUtC,KAAKsC,SAAnB,CAA6BtC,KAAKsC,SAAL,CAAe7B,SAAf,CAAyBb,aAAaqC,MAAb,CAAoBK,SAApB,CAA8B7B,SAA9B,CAAwC,IAAxC,CAA6CA,SAA7C,EAAyD,SAASsB,QAAT,CAAiBe,IAAjB,CAAsB,CAACA,KAAKC,QAAL,EAAe,CAAf,CAAiBD,KAAKE,MAAL,CAAY,GAAIC,KAAJ,EAAZ,CAAuB;AAChMjD,KAAKsC,SAAL,CAAeQ,IAAf,CAAoB9C,KAAKiC,MAAL,GAAe;AACnC,QAASP,WAAT,CAAoBsB,MAApB,CAA2BE,OAA3B,CAAmC,CAAC,MAAOzD,aAAYiC,UAAZ,CAAuBsB,MAAvB,CAA8BE,OAA9B,CAAP,CAA+C,SAASf,gBAAT,EAA0B,CAAC,GAAIgB,eAAcpD,UAAUqD,IAAV,CAAe,CAACC,UAAU,IAAX,CAAgBxE,YAAY,0CAA5B,CAAuEC,WAAW,sCAAlF,CAAyHwE,KAAK,IAA9H,CAAmIC,QAAQ,CAACC,KAAK,QAASA,KAAT,EAAe,CAAC,MAAM,CAAChC,SAASxB,KAAKE,YAAL,CAAkBsB,QAA5B,CAAqCiC,KAAK,OAA1C,CAAN,CAA0D,CAAhF,CAA3I,CAAf,EAA8OC,MAA9O,CAAqPC,IAArP,CAA0P,SAASD,MAAT,CAAgB,CAACE,QAAQC,GAAR,CAAY,kBAAZ,CAA+BH,MAA/B,CAAsC1D,KAAKE,YAAL,CAAkBsB,QAAlB,CAA2BsC,IAAjE,EAAuE,GAAGJ,MAAH,CAAU,CAAC1D,KAAKsC,SAAL,CAAetC,KAAKE,YAAL,CAAkBsB,QAAjC,CAA0CxB,KAAKiC,MAAL,GAAe,CAAC,CAAvZ,CAAlB,CAA4a;AAC1hB,QAASR,QAAT,EAAkB,CAACrC,WAAW2E,GAAX,CAAe,CAACC,YAAY9E,aAAa8E,WAA1B,CAAf,EAAuDC,QAAvD,CAAgEN,IAAhE,CAAqE,SAASD,MAAT,CAAgB,CAAC1D,KAAKsC,SAAL,CAAeoB,MAAf,CAAsBE,QAAQC,GAAR,CAAY7D,KAAKsC,SAAjB,EAA6B,CAAzI,EAA4I;;WAEpJ,QAAS4B,SAAT,CAAkBC,KAAlB,CAAwB,CAACtE,eAAeuE,OAAf,CAAuB,OAAvB,CAA+BhF,WAAWiF,KAAX,CAAiB,CAACC,OAAOH,KAAR,CAAjB,EAAiCF,QAAjC,CAA0CN,IAA1C,CAA+C,SAASD,MAAT,CAAgB,CAAC1D,KAAK0C,UAAL,CAAgBgB,MAAhB,CAAuB1D,KAAKE,YAAL,CAAkBgB,UAAlB,CAA6BxB,YAAY6E,eAAZ,CAA4Bb,MAA5B,CAA7B,CAAiE1D,KAAKE,YAAL,CAAkBkB,QAAlB,CAA2B3B,YAAY+E,aAAZ,CAA0Bd,MAA1B,CAAiC,CAAjC,CAA3B,CAAgE,CAAxN,CAA/B,EAA2P;AAC/R,QAASnC,kBAAT,EAA4B,CAACvB,KAAK0C,UAAL,CAAgBjC,SAAhB,CAA0B,GAAGT,KAAKE,YAAL,CAAkBC,WAAlB,GAAgC,IAAnC,CAAwC,CAACH,KAAKE,YAAL,CAAkBY,MAAlB,CAAyB2D,MAAzB,CAAgC,KAAhC,CAAsCzE,KAAKE,YAAL,CAAkBY,MAAlB,CAAyBwD,MAAzB,CAAgC,EAAhC,CAAmCJ,SAAS,CAAT,EAAa,CAA/H,IAAmI,CAAClE,KAAKE,YAAL,CAAkBY,MAAlB,CAAyB2D,MAAzB,CAAgC,EAAhC,CAAmCzE,KAAKE,YAAL,CAAkBY,MAAlB,CAAyBwD,MAAzB,CAAgC,KAAhC,CAAsCJ,SAAS,CAAT,EAAa,CAAC,MAAKhE,YAAL,CAAkBqB,iBAAlB,GAAuC,CAAC,CAX6iB,IAWziB,CAAC,UAAU,CAAC,aAAa1E,QAAQC,MAAR,CAAe,YAAf,EAA6BgC,UAA7B,CAAwC,uBAAxC,CAAgE4F,qBAAhE,EAAuFA,sBAAsB1F,OAAtB,CAA8B,CAAC,QAAD,CAAU,cAAV,CAAyB,WAAzB,CAAqC,gBAArC,CAAsD,YAAtD,CAAmE,YAAnE,CAAgF,YAAhF,CAA6F,MAA7F,CAAoG,SAApG,CAA8G,aAA9G,CAA4H,aAA5H,CAA0I,qBAA1I,CAAgK,cAAhK,CAA+K,gBAA/K,CAAgM,YAAhM,CAA9B,CAA4O,QAAS0F,sBAAT,CAA+BzF,MAA/B,CAAsCC,YAAtC,CAAmDC,SAAnD,CAA6D5B,cAA7D,CAA4E6B,UAA5E,CAAuFC,UAAvF,CAAkGC,UAAlG,CAA6GC,IAA7G,CAAkHC,OAAlH,CAA0HC,WAA1H,CAAsIC,WAAtI,CAAkJC,mBAAlJ,CAAsKC,YAAtK,CAAmLC,cAAnL,CAAkMC,UAAlM,CAA6M,CAAC,GAAIE,MAAK,IAAT,CAAcgE,YAAY9E,aAAa8E,WAAvC,CAAmDhE,KAAK2E,aAAL,CAAmBA,aAAnB,CAAiC3E,KAAK4E,MAAL,CAAYA,MAAZ,CAAmB5E,KAAKsC,SAAL,CAAe,EAAf,CAAkBtC,KAAKC,cAAL,CAAoB1C,cAApB,CAAmCyC,KAAK/C,MAAL,CAAY,CAAC4H,MAAM,QAAP,CAAgBC,cAAc,KAA9B,CAAoCpE,cAAc,CAACC,UAAU,EAAX,CAAcC,QAAQH,SAAtB,CAAgCI,SAAS,IAAzC,CAAlD,CAAiGO,SAAS,EAA1G,CAA6GC,aAAa3B,YAAY4B,eAAZ,EAA1H,CAAZ,CAAqKtB,KAAK+E,MAAL,CAAYA,MAAZ,CAAmB/E,KAAKgF,OAAL,CAAaA,OAAb,CAAqBhF,KAAKiF,YAAL,CAAkB,KAAlB,CAAwB;AACzuCjF,KAAKkF,IAAL,CAAUA,IAAV,CAAelF,KAAKyB,OAAL,CAAaA,OAAb,CAAqBzB,KAAKmF,SAAL,CAAeA,SAAf,CAAyBnF,KAAKoF,OAAL,CAAa,EAAb,CAAgB;AAC7EpF,KAAKqF,UAAL,CAAgB,GAAIpC,KAAJ,EAAhB,CAA2B;AAC3BjD,KAAKsF,IAAL,CAAUA,IAAV,CAAetF,KAAKuF,SAAL,CAAeA,SAAf,CAAyBvF,KAAKwF,QAAL,CAAc,CAACC,eAAe,KAAhB,CAAsBC,eAAe,KAArC,CAA2CC,aAAa,KAAxD,CAAd,CAA6E3F,KAAK4F,WAAL,CAAiBA,WAAjB,CAA6B5F,KAAK6F,MAAL,CAAYA,MAAZ,CAAmB7F,KAAK8F,QAAL,CAAc,EAAd,CAAiB;AACtL9F,KAAK+F,cAAL,CAAoB,EAApB,CAAuB/F,KAAKiC,MAAL,CAAYA,MAAZ,CAAmBjC,KAAKgG,UAAL,CAAgBA,UAAhB,CAA2BhG,KAAKkC,QAAL,CAAc,EAAd,CAAiB;AACtF,QAASoD,KAAT,EAAe,CAACtF,KAAK/C,MAAL,CAAYgJ,QAAZ,CAAqBjC,cAAcvD,SAAnC,CAA6C,GAAGT,KAAK/C,MAAL,CAAYgJ,QAAf,CAAwB,CAACjG,KAAKsC,SAAL,CAAeS,QAAf,CAAwB,CAAxB,CAA0B/C,KAAKsC,SAAL,CAAe4D,KAAf,CAAqBlG,KAAKqF,UAA1B,CAAqCrF,KAAKsC,SAAL,CAAeU,MAAf,CAAsBhD,KAAKqF,UAA3B,CAAuC,CAA/H,IAAoI,IAAG,CAACrF,KAAK/C,MAAL,CAAYgJ,QAAhB,CAAyB,CAACjG,KAAK/C,MAAL,CAAY4H,KAAZ,CAAkB,MAAlB,CAAyB7E,KAAKyB,OAAL,GAAgB,MAAKyD,IAAL,GAAYlF,KAAKmF,SAAL,GAAkB,MAAKG,IAAL,GAAY;AAC9S,QAASV,OAAT,EAAiB,CAAC9E,WAAW8E,MAAX,CAAkB5E,KAAK8F,QAAvB,CAAgC9F,KAAKmG,MAArC,EAA6CnG,KAAKmG,MAAL,CAAY,EAAZ,CAAgB;AAC/E,QAASnB,QAAT,CAAiBoB,IAAjB,CAAsB,CAACtG,WAAWkF,OAAX,CAAmBhF,KAAK8F,QAAxB,CAAiCM,IAAjC,EAAwC;AAC/D,QAASb,UAAT,CAAmBa,IAAnB,CAAwB,CAACtG,WAAWkF,OAAX,CAAmBhF,KAAKsC,SAAL,CAAe+D,IAAlC,CAAuCD,IAAvC,EAA8C,SAASzB,cAAT,EAAwB,CAAC3E,KAAKsC,SAAL,CAAeU,MAAf,CAAsBhD,KAAKqF,UAA3B,CAAsCrF,KAAK/C,MAAL,CAAY6H,aAAZ,CAA0B,IAA1B,CAA+B,GAAG9E,KAAKsC,SAAL,CAAeS,QAAf,GAA0B/C,KAAKsC,SAAL,CAAegE,YAAzC,EAAuDtG,KAAKsC,SAAL,CAAegE,YAAf,GAA8B,CAArF,EAAwFtG,KAAKsC,SAAL,CAAeiE,UAAf,GAA4B,KAAvH,CAA6H,CAACvG,KAAKsC,SAAL,CAAekE,GAAf,CAAmBxG,KAAKqF,UAAxB,CAAoC,IAAGrF,KAAKsC,SAAL,CAAeS,QAAf,CAAwB/C,KAAKsC,SAAL,CAAegE,YAAvC,EAAqDtG,KAAKsC,SAAL,CAAegE,YAAf,GAA8B,CAAtF,CAAwF,CAACtG,KAAKsC,SAAL,CAAeS,QAAf,CAAwB/C,KAAKsC,SAAL,CAAegE,YAAvC,CAAqD,CAAC,SAASV,YAAT,EAAsB,CAAC,GAAG5F,KAAKsC,SAAL,CAAemE,MAAf,CAAsBA,MAAtB,GAA+B,IAAlC,CAAuC,CAACzG,KAAKsC,SAAL,CAAemE,MAAf,CAAsBC,IAAtB,CAA2B,IAA3B,CAAiC,CAAzE,IAA6E,CAAC1G,KAAKsC,SAAL,CAAemE,MAAf,CAAsBC,IAAtB,CAA2B1G,KAAKsC,SAAL,CAAe4D,KAAf,CAAqBS,SAArB,CAA+B,CAA/B,CAAiC,CAAjC,CAA3B,CAAgE,CAAC;AAC5nB,QAAS5B,OAAT,EAAiB,CAAC;AAClB,GAAIzC,WAAU,GAAIlD,WAAJ,EAAd,CAA+BkD,UAAU,GAAIlD,WAAJ,CAAe,CAACyF,MAAM7E,KAAKsC,SAAL,CAAeuC,KAAtB,CAA4B9B,SAAS/C,KAAKsC,SAAL,CAAeS,QAApD,CAA6DmD,MAAMlG,KAAKsC,SAAL,CAAe4D,KAAlF,CAAwFlD,OAAOhD,KAAKsC,SAAL,CAAeU,MAA9G,CAAqHsD,aAAatG,KAAKsC,SAAL,CAAegE,YAAjJ,CAA8JM,MAAM5G,KAAKoF,OAAzK,CAAiLqB,OAAOzG,KAAKyG,MAAL,GAAc,IAAd,CAAmBhH,YAAYoH,mBAAZ,CAAgC,GAAI5D,KAAJ,CAASjD,KAAKsC,SAAL,CAAe4D,KAAxB,CAAhC,CAAnB,CAAmF,EAA3Q,CAA8QY,KAAK9G,KAAKsC,SAAL,CAAewE,IAAlS,CAAuSC,MAAM/G,KAAKsC,SAAL,CAAeyE,KAAf,GAAuBtG,SAAvB,EAAkCT,KAAKsC,SAAL,CAAeyE,KAAf,GAAuB,IAAzD,CAA8D/G,KAAKsC,SAAL,CAAeyE,KAAf,CAAqBlJ,GAAnF,CAAuFmC,KAAKsC,SAAL,CAAeyE,KAAnZ,CAAyZV,KAAKrG,KAAK8F,QAAna,CAA4alI,KAAKoC,KAAKpC,IAAtb,CAAf,CAAV,CAAsd;AACrf0E,UAAU0E,KAAV,CAAgB,SAASC,QAAT,CAAkB,CAAC9H,UAAUyD,IAAV,CAAe,eAAeqE,SAASpJ,GAAvC,EAA4C8B,oBAAoBuH,OAApB,CAA4B,QAA5B,CAAqC,8BAArC,EAAsE,CAArJ,CAAsJ,SAASC,aAAT,CAAuB,CAACnH,KAAKoH,KAAL,CAAWD,cAAc3D,IAAd,CAAmB6D,OAA9B,CAAsC1H,oBAAoByH,KAApB,CAA0B,QAA1B,CAAmCD,cAAc3D,IAAd,CAAmB6D,OAAtD,EAAgE,CAApR,EAAuR;AACvR,QAASpF,OAAT,EAAiB,CAAC,GAAIK,WAAUtC,KAAKsC,SAAnB,CAA6BtC,KAAKsC,SAAL,CAAe7B,SAAf,CAAyBb,aAAaqC,MAAb,CAAoBK,SAApB,CAA8BtC,KAAK8F,QAAnC,CAA4C9F,KAAK/C,MAAL,CAAY6H,aAAxD,CAAsE9E,KAAKoF,OAA3E,EAAqF,SAASS,OAAT,EAAiB,CAAC,GAAG7F,KAAK/C,MAAL,CAAYgJ,QAAf,CAAwBjG,KAAK+E,MAAL,GAAc,GAAG,CAAC/E,KAAK/C,MAAL,CAAYgJ,QAAhB,CAAyBjG,KAAKiC,MAAL,GAAe;AAC7P,QAASiD,KAAT,EAAe,CAAC9F,WAAWiF,KAAX,GAAmBJ,QAAnB,CAA4BN,IAA5B,CAAiC,SAASD,MAAT,CAAgB,CAAC1D,KAAK0C,UAAL,CAAgBgB,MAAhB,CAAuB1D,KAAK/C,MAAL,CAAYmE,QAAZ,CAAqB3B,YAAY+E,aAAZ,CAA0Bd,MAA1B,CAAiC,CAAjC,CAArB,CAA0D,CAAnI,EAAsI;AACtJ,QAASjC,QAAT,EAAkB,CAAC5B,eAAeuE,OAAf,CAAuB,WAAvB,CAAmChF,WAAW2E,GAAX,CAAe,CAACC,YAAYA,WAAb,CAAf,EAA0CC,QAA1C,CAAmDN,IAAnD,CAAwD,SAASD,MAAT,CAAgB,CAAC1D,KAAKsC,SAAL,CAAeoB,MAAf,CAAsBE,QAAQC,GAAR,CAAY7D,KAAKsC,SAAjB,EAA6B,CAA5H,CAAnC,EAAmK;AACtL,QAAS6C,UAAT,EAAoB,CAACnF,KAAKsH,UAAL,CAAgBjI,WAAWgF,KAAX,EAAhB,CAAoC;AACzD,QAAS2B,WAAT,EAAqB,CAAChG,KAAKoF,OAAL,CAAa,2BAA2BpF,KAAKuH,MAAL,CAAY5J,IAApD,CAAyD2B,WAAWkI,eAAX,CAA2BxH,KAAKuH,MAAhC,CAAuC,kBAAvC,EAA4D,CAAC,CAAC,CAhBiL,IAgB7K,CAAC,UAAU,CAAC,aAAa1K,QAAQC,MAAR,CAAe,YAAf,EAA6BgC,UAA7B,CAAwC,sBAAxC,CAA+D2I,oBAA/D,EAAqFA,qBAAqBzI,OAArB,CAA6B,CAAC,QAAD,CAAU,gBAAV,CAA2B,cAA3B,CAA0C,UAA1C,CAAqD,YAArD,CAAkE,MAAlE,CAAyE,aAAzE,CAAuF,cAAvF,CAA7B,CAAoI,QAASyI,qBAAT,CAA8BxI,MAA9B,CAAqC1B,cAArC,CAAoD2B,YAApD,CAAiEwI,QAAjE,CAA0EtI,UAA1E,CAAqFG,IAArF,CAA0FG,WAA1F,CAAsGE,YAAtG,CAAmH,CAAC,GAAII,MAAK,IAAT,CAAc2H,MAAMC,aAAaC,OAAb,CAAqB,SAArB,CAApB,CAAoD7H,KAAKC,cAAL,CAAoB1C,cAApB,CAAmCyC,KAAKyB,OAAL,CAAaA,OAAb,CAAqBzB,KAAK8H,SAAL,CAAeA,SAAf,CAAyB9H,KAAK+H,YAAL,CAAkBA,YAAlB,CAA+B/H,KAAKiC,MAAL,CAAYA,MAAZ,CAAmBjC,KAAKgI,SAAL,CAAe,CAACC,UAAU,EAAX,CAAcC,KAAK,EAAnB,CAAsBC,OAAO,EAA7B,CAAgCd,QAAQ,2BAAxC,CAAf,CAAoFrH,KAAKoI,WAAL,CAAiBR,aAAaC,OAAb,CAAqB,SAArB,IAAkC,IAAlC,CAAuCQ,KAAKC,KAAL,CAAWX,KAAX,CAAvC,CAAyD,EAA1E,CAA6E,QAASY,kBAAT,EAA4B,CAACX,aAAaY,OAAb,CAAqB,SAArB,CAA+BH,KAAKI,SAAL,CAAezI,KAAKoI,WAApB,CAA/B,EAAiEpI,KAAKoI,WAAL,CAAiBC,KAAKC,KAAL,CAAWV,aAAaC,OAAb,CAAqB,SAArB,CAAX,CAAjB,CAA8D,QAAOa,MAAP,CAAc,UAAd,CAAyB,SAASC,IAAT,CAAcC,IAAd,CAAmB,CAAC,GAAGD,IAAH,CAAQ,CAAC3I,KAAKgI,SAAL,CAAeX,OAAf,CAAuB,EAAvB,CAA0B;AAC3jCrH,KAAKgI,SAAL,CAAeE,IAAf,CAAoBS,KAAKhL,IAAzB,CAA8BqC,KAAKgI,SAAL,CAAeG,MAAf,CAAsBnI,KAAKsC,SAAL,CAAeuG,KAAf,CAAqBC,KAArB,CAA2BpJ,YAAYqJ,YAAZ,CAAyB/I,KAAKsC,SAAL,CAAeuG,KAAf,CAAqBC,KAA9C,CAAoD,MAApD,CAA2DH,KAAKhL,IAAhE,CAA3B,EAAkGwK,MAAxH,CAA+HnI,KAAKgI,SAAL,CAAeC,SAAf,CAAyB1I,KAAKyC,kBAAL,CAAwB7D,OAAO6K,GAAP,CAAWC,eAAX,CAA2BN,IAA3B,CAAxB,CAAzB,CAAoF,CAAC,CADyvB,EACvvB,QAASb,UAAT,EAAoB,CAAC9H,KAAKoI,WAAL,CAAiBpI,KAAKgI,SAAL,CAAeE,IAAhC,EAAsC,IAAtC,CAA2CK,oBAAoB,GAAGvI,KAAKsC,SAAL,CAAeiE,UAAf,EAA2B7G,YAAYqJ,YAAZ,CAAyB/I,KAAKsC,SAAL,CAAeuG,KAAf,CAAqBC,KAA9C,CAAoD,MAApD,CAA2D9I,KAAKgI,SAAL,CAAeE,IAA1E,EAAgF,CAAC,CAA/G,CAAiH,CAAClI,KAAKsC,SAAL,CAAeS,QAAf,CAAwBmG,SAASlJ,KAAKgI,SAAL,CAAeG,MAAxB,CAA+B,EAA/B,CAAxB,CAA2DnI,KAAKiC,MAAL,GAAe,CAAC,SAAS8F,aAAT,EAAuB,CAACnE,QAAQC,GAAR,CAAY,gBAAZ,EAA8B,GAAIpB,GAAEzC,KAAKsC,SAAL,CAAeuG,KAAf,CAAqBC,KAArB,CAA2BK,MAAjC,CAAwC,MAAM1G,GAAN,CAAU,CAACzC,KAAKoI,WAAL,CAAiBpI,KAAKsC,SAAL,CAAeuG,KAAf,CAAqBC,KAArB,CAA2BrG,CAA3B,EAA8ByF,IAA/C,EAAqD,KAArD,CAA4D,qBAAoBlI,KAAKsC,SAAL,CAAeS,QAAf,CAAwB,CAAxB,CAA0B/C,KAAKiC,MAAL,GAAe;AACvuB,QAASA,OAAT,EAAiB,CAACjC,KAAKsC,SAAL,CAAeU,MAAf,CAAsB,GAAIC,KAAJ,EAAtB,CAAiCrD,aAAaqC,MAAb,CAAoBjC,KAAKsC,SAAzB,CAAmC7B,SAAnC,CAA6C,KAA7C,CAAmD,EAAnD,EAAwD;AAC3G,QAASgB,QAAT,EAAkB,CAACrC,WAAW2E,GAAX,CAAe,CAACC,YAAY9E,aAAa8E,WAA1B,CAAf,EAAuDC,QAAvD,CAAgEN,IAAhE,CAAqE,SAASD,MAAT,CAAgB,CAAC1D,KAAKsC,SAAL,CAAeoB,MAAf,CAAsBE,QAAQC,GAAR,CAAY7D,KAAKsC,SAAjB,EAA6B,CAAzI,EAA4I,MAAKb,OAAL,GAAgB,CAAC,CAH/B,IAGmC,CAAC,UAAU,CAAC,aAAa5E,QAAQC,MAAR,CAAe,YAAf,EAA6BgC,UAA7B,CAAwC,qBAAxC,CAA8DsK,mBAA9D,EAAmFA,oBAAoBpK,OAApB,CAA4B,CAAC,QAAD,CAAU,gBAAV,CAA2B,QAA3B,CAAoC,MAApC,CAA2C,gBAA3C,CAA4D,aAA5D,CAA0E,aAA1E,CAAwF,YAAxF,CAAqG,SAArG,CAA5B,CAA4I,QAASoK,oBAAT,CAA6BnK,MAA7B,CAAoC1B,cAApC,CAAmDD,MAAnD,CAA0DiC,IAA1D,CAA+DM,cAA/D,CAA8EJ,WAA9E,CAA0FC,WAA1F,CAAsG2J,UAAtG,CAAiHC,OAAjH,CAAyH,CAAC,GAAItJ,MAAK,IAAT,CAAcA,KAAKC,cAAL,CAAoB1C,cAApB,CAAmCyC,KAAKE,YAAL,CAAkB,CAACC,YAAY,IAAb,CAAkBC,aAAa,CAA/B,CAAiCC,cAAc,KAA/C,CAAqDC,SAAS,EAA9D,CAAiEC,YAAY,IAA7E,CAAkFC,YAAYC,SAA9F,CAAwGC,cAAc,CAACC,UAAU,EAAX,CAAcC,QAAQH,SAAtB,CAAgCI,SAAS,IAAzC,CAAtH,CAAqKC,OAAO,EAA5K,CAA+KC,WAAW,EAA1L,CAA6LC,cAAc,EAA3M,CAA8MC,YAAY,KAA1N,CAAgOC,WAAW,KAA3O,CAAiPC,kBAAkB,EAAnQ,CAAsQC,SAAS,EAA/Q,CAAkRC,aAAa3B,YAAY4B,eAAZ,EAA/R,CAAlB,CAAgVtB,KAAKkF,IAAL,CAAUA,IAAV,CAAelF,KAAK0B,UAAL,CAAgBA,UAAhB,CAA2B1B,KAAK2B,UAAL,CAAgB,CAACC,YAAY,CAAb,CAAeC,SAAS,EAAxB,CAAhB,CAA4C7B,KAAKgC,kBAAL,CAAwBA,kBAAxB,CAA2ChC,KAAKuJ,UAAL,CAAgBA,UAAhB,CAA2BvJ,KAAKoC,eAAL,CAAqB,OAArB,CAA6B,QAASmH,WAAT,CAAoBC,EAApB,CAAuB,CAAClM,OAAOS,EAAP,CAAU,gBAAV,CAA2B,CAACiG,YAAYwF,EAAb,CAA3B,EAA8C;AACtqC,QAAStE,KAAT,EAAe,CAAClF,KAAKE,YAAL,CAAkBiB,iBAAlB,CAAoCzB,YAAY2C,oBAAZ,CAAiCrC,KAAKoC,eAAtC,CAApC,CAA2FpC,KAAKE,YAAL,CAAkBI,QAAlB,CAA2BN,KAAKE,YAAL,CAAkBiB,iBAAlB,CAAoCsI,WAApC,CAAgDzJ,KAAKE,YAAL,CAAkBiB,iBAAlB,CAAoCuI,UAApF,EAAgGC,CAA3H,CAA6H;AACxO9J,eAAeuE,OAAf,CAAuB,OAAvB,CAA+BiF,WAAWhF,KAAX,GAAmBJ,QAAnB,CAA4BN,IAA5B,CAAiC,SAASD,MAAT,CAAgB,CAAC1D,KAAK0C,UAAL,CAAgBgB,MAAhB,CAAuBE,QAAQC,GAAR,CAAY,cAAZ,CAA2BH,MAA3B,CAAkC,gBAAlC,CAAmD1D,KAAKE,YAAxD,EAAuE,CAAhJ,CAA/B,EAAmL,MAAKgF,IAAL,GAAY;AAC/L,QAASlD,mBAAT,CAA4BpD,GAA5B,CAAgC,CAAC,MAAOW,MAAKyC,kBAAL,CAAwBpD,GAAxB,CAAP,CAAqC;AACtE,QAAS8C,WAAT,CAAoBsB,MAApB,CAA2BE,OAA3B,CAAmC,CAAC,MAAOzD,aAAYiC,UAAZ,CAAuBsB,MAAvB,CAA8BE,OAA9B,CAAP,CAA+C,CAAC,CAAC,CAJ+F,IAI3F,CAAC,UAAU,CAAC,aAAarG,QAAQC,MAAR,CAAe,OAAf,EAAwB8M,SAAxB,CAAkC,gBAAlC,CAAmDC,cAAnD,EAAmE,QAASA,eAAT,EAAyB,CAAC,MAAM,CAACC,SAAS,GAAV,CAAcC,QAAQ,IAAtB,CAA2BlL,YAAY,8CAAvC,CAAN,CAA8F,CAAC,CAArN,IAAyN,CAAC,UAAU,CAAC,aAAahC,QAAQC,MAAR,CAAe,YAAf,EAA6B8M,SAA7B,CAAuC,WAAvC,CAAmDI,SAAnD,EAA8DA,UAAUhL,OAAV,CAAkB,CAAC,QAAD,CAAlB,CAA6B,QAASgL,UAAT,CAAmBC,MAAnB,CAA0B,CAAC,MAAM,CAACH,SAAS,GAAV,CAAcI,KAAK,QAASA,KAAT,CAAcC,KAAd,CAAoBnM,OAApB,CAA4BoM,KAA5B,CAAkC,CAAC,GAAIC,OAAMJ,OAAOG,MAAMJ,SAAb,CAAV,CAAkC,GAAIM,aAAYD,MAAME,MAAtB,CAA6BvM,QAAQwM,IAAR,CAAa,QAAb,CAAsB,UAAU,CAACL,MAAMM,MAAN,CAAa,UAAU,CAACH,YAAYH,KAAZ,CAAkBnM,QAAQ,CAAR,EAAW8K,KAAX,CAAiB,CAAjB,CAAlB,EAAwC,CAAhE,EAAmE,CAApG,EAAuG,CAA5N,CAAN,CAAqO,CAAC,CAArX,IAAyX,CAAC,UAAU,CAAC,aAAajM,QAAQC,MAAR,CAAe,YAAf,EAA6B8M,SAA7B,CAAuC,SAAvC,CAAiDc,OAAjD,EAA0D,QAASA,QAAT,EAAkB,CAAC,MAAM,CAACZ,SAAS,GAAV,CAAcI,KAAK,QAASS,SAAT,CAAkBR,KAAlB,CAAwBnM,OAAxB,CAAgCoM,KAAhC,CAAsC,CAAC;AACj1BD,MAAM3M,GAAN,CAAU,YAAV,CAAuB,SAASC,KAAT,CAAemN,CAAf,CAAiB,CAAC;AACzC,GAAGA,EAAEC,MAAF,EAAUD,EAAEE,OAAF,GAAY,EAAzB,CAA4B,CAAC,GAAGX,MAAMY,MAAN,GAAe,MAAlB,CAAyB,CAACZ,MAAMY,MAAN,CAAa,QAAb,CAAuB,CAAjD,IAAsD,IAAGZ,MAAMY,MAAN,GAAe,QAAlB,CAA2B,CAACZ,MAAMY,MAAN,CAAa,MAAb,CAAqB,CAAjD,IAAsD,IAAGZ,MAAMa,IAAN,GAAa,OAAhB,CAAwB,CAACb,MAAMa,IAAN,CAAW,OAAX,CAAoB,CAA7C,IAAkD,IAAGb,MAAMa,IAAN,GAAa,OAAhB,CAAwB,CAACb,MAAMa,IAAN,CAAW,WAAX,CAAwB,CAAjD,IAAsD,IAAGb,MAAMa,IAAN,GAAa,WAAhB,CAA4B,CAACb,MAAMa,IAAN,CAAW,OAAX,CAAoB,CAAC,CAAC,CADpS,EACuS,CAFgf,CAAN,CAEve,CAAC,CAFgY,IAE5X,CAAC,UAAU,CAAC,aAAanO,QAAQC,MAAR,CAAe,YAAf,EAA6B8M,SAA7B,CAAuC,UAAvC,CAAkDqB,QAAlD,EAA4D,QAASA,SAAT,EAAmB,CAAC,MAAO,UAASd,KAAT,CAAenM,OAAf,CAAuBoM,KAAvB,CAA6B,CAAC,GAAIxL,KAAIwL,MAAMa,QAAd,CAAuBjN,QAAQkN,GAAR,CAAY,CAAC,mBAAmB,OAAOtM,GAAP,CAAW,GAA/B,CAAmC,kBAAkB,KAArD,CAA2D,oBAAoB,WAA/E,CAA2F,sBAAsB,OAAjH,CAAZ,EAAwI,CAApM,CAAsM,CAAC,CAAhT,IAAoT,CAAC,UAAU,CAAC,aAAa/B,QAAQC,MAAR,CAAe,YAAf,EAA6B8M,SAA7B,CAAuC,aAAvC,CAAqDuB,WAArD,EAAkE,QAASA,YAAT,EAAsB,CAAC,MAAM,CAACrB,SAAS,IAAV,CAAeC,QAAQ,IAAvB,CAA4BI,MAAM,CAACjK,aAAa,GAAd,CAAkBkL,MAAM,GAAxB,CAA4BC,KAAK,GAAjC,CAAlC,CAAwExM,YAAY,iDAApF,CAAsIqL,KAAK,QAASA,KAAT,CAAcC,KAAd,CAAoBmB,IAApB,CAAyBlB,KAAzB,CAA+B,CAACD,MAAMjK,YAAN,CAAmBa,UAAnB,CAA8B,EAA9B,CAAiCoJ,MAAMoB,OAAN,CAAc,SAASC,GAAT,CAAa,CAAC,GAAGrB,MAAMjK,YAAN,CAAmBa,UAAnB,CAA8B0K,OAA9B,CAAsCD,GAAtC,IAA6C,CAAC,CAAjD,CAAmD,CAACrB,MAAMjK,YAAN,CAAmBa,UAAnB,EAA+ByK,IAAI,GAAnC,CAAuCrB,MAAMjK,YAAN,CAAmBc,aAAnB,CAAiCmJ,MAAMjK,YAAN,CAAmBa,UAAnB,CAA8B4F,SAA9B,CAAwC,CAAxC,CAA0CwD,MAAMjK,YAAN,CAAmBa,UAAnB,CAA8BoI,MAA9B,CAAqC,CAA/E,EAAkFuC,KAAlF,CAAwF,GAAxF,CAAjC,CAA+H,CAAC,CAAvP,CAAwP;AAC/pCvB,MAAMwB,YAAN,CAAmB,SAASxH,KAAT,CAAe,CAACgG,MAAMjK,YAAN,CAAmBQ,aAAnB,CAAiCG,QAAjC,CAA0CsD,KAA1C,CAAgDgG,MAAMjK,YAAN,CAAmBQ,aAAnB,CAAiCE,OAAjC,CAAyC,KAAKuD,MAAMgG,MAAMjK,YAAN,CAAmBQ,aAAnB,CAAiCC,SAA5C,CAAzC,CAAiG,CAApL,CAAqLwJ,MAAMyB,cAAN,CAAqB,UAAU,CAACzB,MAAMjK,YAAN,CAAmBqB,iBAAnB,GAAwC,CAAxE,CAAyE4I,MAAM0B,eAAN,CAAsB,UAAU,CAAC1B,MAAMjK,YAAN,CAAmBG,aAAnB,CAAiC,KAAjC,CAAwC,CAAzE,CAA2E,CADkZ,CAAN,CACzY,CAAC,CADsR,IAClR,CAAC,UAAU,CAAC,aAAaxD,QAAQC,MAAR,CAAe,YAAf,EAA6B8M,SAA7B,CAAuC,UAAvC,CAAkDkC,QAAlD,EAA4D,QAASA,SAAT,EAAmB,CAAC,MAAM,CAAChC,SAAS,GAAV,CAAcI,KAAK,QAASA,KAAT,CAAcC,KAAd,CAAoBnM,OAApB,CAA4BoM,KAA5B,CAAkC,CAAC,GAAI2B,IAAG/N,QAAQ,CAAR,CAAP,CAAkB+N,GAAGC,gBAAH,CAAoB,MAApB,CAA2B,UAAU,CAAC7B,MAAMM,MAAN,CAAaL,MAAM0B,QAAnB,EAA8B,CAApE,EAAuE,CAA/I,CAAN,CAAwJ,CAAC,CAAlQ,IAAsQ,CAAC,UAAU,CAAC,aAAajP,QAAQC,MAAR,CAAe,YAAf,EAA6B8M,SAA7B,CAAuC,cAAvC,CAAsDqC,YAAtD,EAAoE,QAASA,aAAT,EAAuB,CAAC,MAAM,CAACnC,SAAS,IAAV,CAAeC,QAAQ,IAAvB,CAA4BI,MAAM,CAACxI,WAAW,GAAZ,CAAgBvB,aAAa,GAA7B,CAAlC,CAAoEvB,YAAY,kDAAhF,CAAmIqL,KAAK,QAASA,KAAT,CAAcC,KAAd,CAAoBmB,IAApB,CAAyBlB,KAAzB,CAA+B,CAAC;;;eAG32BD,MAAMzB,MAAN,CAAa,cAAb,CAA4B,UAAU,CAACyB,MAAM+B,SAAN,CAAgBC,KAAKC,IAAL,CAAUjC,MAAM/J,YAAN,CAAmB+J,MAAMxI,UAAN,CAAiBE,QAA9C,CAAhB,CAAwE,GAAGsI,MAAMxI,UAAN,CAAiBC,WAAjB,CAA6BuI,MAAM+B,SAAN,CAAgB,CAAhD,CAAkD,CAAC/B,MAAMkC,IAAN,GAAa;AAC7L,CAD6H,IACxH,IAAGlC,MAAMxI,UAAN,CAAiBC,WAAjB,CAA6B,CAAhC,CAAkC,CAACuI,MAAMmC,KAAN,GAAe,CAAC,CAD1C,EAC4C;;eAE5CnC,MAAMmC,KAAN,CAAY,UAAU,CAAC;AACtCnC,MAAMxI,UAAN,CAAiBC,WAAjB,CAA6B,CAA7B,CAAgC,CADjB,CACkBuI,MAAMkC,IAAN,CAAW,UAAU,CAAC;AACvDlC,MAAMxI,UAAN,CAAiBC,WAAjB,CAA6BuI,MAAM+B,SAAN,CAAgB,CAA7C,CAAgD,CADf,CACgB/B,MAAMoC,IAAN,CAAW,UAAU,CAAC;AACvEpC,MAAMxI,UAAN,CAAiBC,WAAjB,EAA8B,CAA9B,CAAiC,CADgB,CACfuI,MAAMqC,IAAN,CAAW,UAAU,CAAC;AACxDrC,MAAMxI,UAAN,CAAiBC,WAAjB,EAA8B,CAA9B,CAAiC,CADC,CACA;AAClCuI,MAAM3M,GAAN,CAAU,YAAV,CAAuB,SAASC,KAAT,CAAemN,CAAf,CAAiB,CAAC;AACzC,GAAGA,EAAE6B,OAAF,EAAW7B,EAAEE,OAAF,GAAY,EAAvB,EAA2BX,MAAMxI,UAAN,CAAiBC,WAAjB,CAA6BuI,MAAM+B,SAAN,CAAgB,CAA3E,CAA6E,CAAC/B,MAAMoC,IAAN,GAAc,CAA5F,IAAiG,IAAG3B,EAAE6B,OAAF,EAAW7B,EAAEE,OAAF,GAAY,EAAvB,EAA2BX,MAAMxI,UAAN,CAAiBC,WAAjB,CAA6B,CAA3D,CAA6D,CAACuI,MAAMqC,IAAN,GAAc,CAAC,CAD9K,EACiL,CAZiiB,CAAN,CAYxhB,CAAC,CAZka,IAY9Z,CAAC,UAAU,CAAC,aAAa3P,QAAQC,MAAR,CAAe,YAAf,EAA6B4P,MAA7B,CAAoC,YAApC,CAAiDC,UAAjD,EAA6D,QAASA,WAAT,EAAqB,CAAC,MAAO,UAASC,KAAT,CAAelG,IAAf,CAAoBmG,KAApB,CAA0B,CAAC,MAAOD,OAAMF,MAAN,CAAa,SAAS5J,IAAT,CAAc,CAAC;AAC1W,GAAGA,KAAK0D,GAAL,GAAW/F,SAAX,EAAsBqC,KAAK0D,GAAL,GAAW,IAApC,CAAyC,CAAC,GAAG1D,KAAK0D,GAAL,CAASG,SAAT,CAAmB,CAAnB,CAAqB,CAArB,IAA0BD,IAA7B,CAAkC,CAAC,GAAG5D,KAAK0D,GAAL,CAASsG,MAAT,CAAgB,CAAhB,CAAkB,CAAlB,IAAuBD,KAA1B,CAAgC,CAAC,MAAO/J,KAAP,CAAa,CAAC,CAAC,CAAC,CADgN,CAAP,CACtM,CADoK,CAClK,CAAC,CADqD,IACjD,CAAC,UAAU,CAAC,aAAajG,QAAQC,MAAR,CAAe,YAAf,EAA6B4P,MAA7B,CAAoC,aAApC,CAAkDK,WAAlD,EAA+DA,YAAY/N,OAAZ,CAAoB,CAAC,QAAD,CAApB,CAA+B,QAAS+N,YAAT,CAAqBC,MAArB,CAA4B,CAAC;AAC5R,MAAO,UAASJ,KAAT,CAAelG,IAAf,CAAoBmG,KAApB,CAA0B,CAAC,MAAOD,OAAMF,MAAN,CAAa,SAAS5J,IAAT,CAAc,CAAC,GAAIoD,OAAM8G,OAAOlK,KAAKoD,KAAZ,CAAV,CAA6BM,IAAIwG,OAAOlK,KAAK0D,GAAZ,CAAjC,CAAkDyG,GAAlD,CAAsDC,UAAtD,CAAiEC,SAAjE,CAA2EC,IAA3E,CAAgFC,KAAhF,CAAsFC,IAAI,IAA1F,CAA+F,GAAGxK,KAAK0D,GAAL,GAAW/F,SAAX,EAAsBqC,KAAK0D,GAAL,GAAW,IAApC,CAAyC,CAAC;;;yBAGrL,GAAG,EAAE1D,KAAKwD,YAAP,EAAqBxD,KAAKwD,YAAL,CAAkB,EAA1C,CAA6C,CAAC4G,WAAW,CAACI,KAAKT,MAAM,CAAX,CAAD,EAAgBU,KAAhB,CAAsB,CAACD,IAAInE,MAA3B,CAAX,CAA8C,GAAGrG,KAAK0D,GAAL,CAASG,SAAT,CAAmB,CAAnB,CAAqB,CAArB,IAA0BD,IAA1B,EAAgC5D,KAAK0D,GAAL,CAASsG,MAAT,CAAgB,CAAhB,CAAkB,CAAlB,IAAuBD,KAAvD,EAA8D/J,KAAKoD,KAAL,CAAWS,SAAX,CAAqB,CAArB,CAAuB,CAAvB,IAA4BD,IAA5B,EAAkC5D,KAAKoD,KAAL,CAAW4G,MAAX,CAAkB,CAAlB,CAAoB,CAApB,IAAyBI,UAA5H,CAAuI,CAACE,KAAK5G,IAAI4G,IAAJ,CAASlH,KAAT,CAAe,MAAf,CAAL,CAA4BmH,MAAMlB,KAAKC,IAAL,CAAUgB,KAAK,CAAf,EAAkB,CAAxB,CAA0B;AACnT,GAAGC,OAAOvK,KAAKC,QAAf,CAAwB,CAAC,MAAOD,KAAP,CAAa,CAAC,CAAC,CADf,IACoB,IAAG,GAAGA,KAAKwD,YAAR,EAAsBxD,KAAKwD,YAAL,CAAkB,EAA3C,CAA8C,CAAC2G,IAAIJ,MAAM,CAAN,CAAQ,CAAR,CAAUA,MAAM,CAAhB,CAAkB,EAAtB,CAAyBM,UAAUN,MAAM,CAAN,CAAQ,CAAR,CAAUnG,IAAV,CAAeA,KAAK,CAA9B,CAAgCwG,WAAW,CAACI,IAAIL,GAAL,EAAUM,KAAV,CAAgB,CAACD,IAAInE,MAArB,CAAX,CAAwC,GAAGrG,KAAK0D,GAAL,CAASG,SAAT,CAAmB,CAAnB,CAAqB,CAArB,IAA0BD,IAA1B,EAAgC5D,KAAK0D,GAAL,CAASsG,MAAT,CAAgB,CAAhB,CAAkB,CAAlB,IAAuBD,KAAvD,EAA8D/J,KAAKoD,KAAL,CAAWS,SAAX,CAAqB,CAArB,CAAuB,CAAvB,IAA4BwG,SAA5B,EAAuCrK,KAAKoD,KAAL,CAAW4G,MAAX,CAAkB,CAAlB,CAAoB,CAApB,IAAyBI,UAAjI,CAA4I,CAACE,KAAK5G,IAAI4G,IAAJ,CAASlH,KAAT,CAAe,MAAf,CAAL,CAA4BmH,MAAMlB,KAAKC,IAAL,CAAUgB,KAAK,CAAf,EAAkB,CAAxB,CAA0B;AAChY,GAAGC,OAAOvK,KAAKC,QAAf,CAAwB,CAAC,MAAOD,KAAP,CAAa,CAAC,CAAC,CAAC,CAAC,CALD,CAAP,CAKW,CAL7C,CAK+C,CAAC,CANwF,IAMpF,CAAC,UAAU,CAAC,aAAajG,QAAQC,MAAR,CAAe,YAAf,EAA6B4P,MAA7B,CAAoC,cAApC,CAAmDc,YAAnD,EAAiE,QAASA,aAAT,EAAuB,CAAC,MAAO,UAASZ,KAAT,CAAea,MAAf,CAAsB,CAAC,GAAGb,QAAQnM,SAAX,CAAqB,CAAC;AAC1N,MAAOmM,OAAMF,MAAN,CAAa,SAAS5J,IAAT,CAAc,CAAC;AACnC,GAAGA,KAAK2K,MAAL,GAAcA,MAAjB,CAAwB,CAAC,MAAO3K,KAAP,CAAa,CAAtC,IAA2C,IAAG2K,SAAShN,SAAZ,CAAsB,CAAC,MAAOqC,KAAP,CAAa,CAAC,CADzE,CAAP,CACmF,CAAC,CAFkF,CAEhF,CAAC,CAFnC,IAEuC,CAAC,UAAU,CAAC,aAAajG,QAAQC,MAAR,CAAe,YAAf,EAA6B4P,MAA7B,CAAoC,yBAApC,CAA8DgB,uBAA9D,EAAuF,QAASA,wBAAT,EAAkC,CAAC,MAAO,UAASd,KAAT,CAAelG,IAAf,CAAoBmG,KAApB,CAA0B,CAAC,MAAOD,OAAMF,MAAN,CAAa,SAAS5J,IAAT,CAAc,CAAC,GAAGA,KAAK6K,KAAL,EAAY7K,KAAK6K,KAAL,CAAWlH,MAAX,GAAoBhG,SAAhC,EAA2CqC,KAAK6K,KAAL,CAAWlH,MAAX,GAAoB,IAAlE,CAAuE,CAAC,GAAG3D,KAAK6K,KAAL,CAAWlH,MAAX,CAAkBC,IAAlB,GAAyBA,IAAzB,EAA+B5D,KAAK6K,KAAL,CAAWlH,MAAX,CAAkBA,MAAlB,GAA2BoG,KAA7D,CAAmE,CAAC,MAAO/J,KAAP,CAAa,CAAC,CAAC,CAAvL,CAAP,CAAiM,CAAnO,CAAqO,CAAC,CAAzX,IAA6X,CAAC,UAAU,CAAC,aAAajG,QAAQC,MAAR,CAAe,YAAf,EAA6B4P,MAA7B,CAAoC,QAApC,CAA6CjG,MAA7C,EAAqD,QAASA,OAAT,EAAiB,CAAC,MAAO,UAASmG,KAAT,CAAelG,IAAf,CAAoBmG,KAApB,CAA0B,CAAC,MAAOD,OAAMF,MAAN,CAAa,SAAS5J,IAAT,CAAc,CAAC,GAAGA,KAAK2D,MAAL,GAAchG,SAAd,EAAyBqC,KAAK2D,MAAL,GAAc,IAA1C,CAA+C,CAAC,GAAG3D,KAAK2D,MAAL,CAAYC,IAAZ,GAAmBA,IAAnB,EAAyB5D,KAAK2D,MAAL,CAAYA,MAAZ,GAAqBoG,KAAjD,CAAuD,CAAC,MAAO/J,KAAP,CAAa,CAAC,CAAC,CAAnJ,CAAP,CAA6J,CAA/L,CAAiM,CAAC,CAAlS,IAAsS,CAAC,UAAU,CAAC,aAAajG,QAAQC,MAAR,CAAe,YAAf,EAA6B4P,MAA7B,CAAoC,WAApC,CAAgDkB,SAAhD,EAA2D,QAASA,UAAT,EAAoB,CAAC,MAAO,UAASC,KAAT,CAAe3H,KAAf,CAAqB,CAAC,GAAG2H,QAAQpN,SAAX,CAAqB,CAACyF,MAAM,CAACA,KAAP,CAAa;AACv6B,MAAO2H,OAAMN,KAAN,CAAYrH,KAAZ,CAAP,CAA2B,CAAC,CAD20B,CACz0B,CAAC,CAD+tB,IAC3tB,CAAC,UAAU,CAAC,aAAarJ,QAAQC,MAAR,CAAe,YAAf,EAA6B4P,MAA7B,CAAoC,wBAApC,CAA6DoB,sBAA7D,EAAqFA,uBAAuB9O,OAAvB,CAA+B,CAAC,SAAD,CAA/B,CAA2C,QAAS8O,uBAAT,CAAgCxE,OAAhC,CAAwC,CAAC,MAAO,UAASsD,KAAT,CAAenJ,IAAf,CAAoBiD,IAApB,CAAyBqH,QAAzB,CAAkC,CAAC,GAAIrB,QAAOqB,WAAW,EAAX,CAAc,aAAd,CAA4BtK,OAAO,QAAP,CAAgB,YAAhB,CAA6B,QAApE,CAA6EuK,WAAWD,WAAW,EAAX,CAActK,IAAd,CAAmBsK,QAA3G,CAAoH,MAAOzE,SAAQoD,MAAR,EAAgBE,KAAhB,CAAsBlG,IAAtB,CAA2BsH,UAA3B,CAAP,CAA+C,CAA7M,CAA+M,CAAC,CAAlZ,IAAsZ,CAAC,UAAU,CAAC,aAAanR,QAAQC,MAAR,CAAe,YAAf,EAA6B4P,MAA7B,CAAoC,aAApC,CAAkDuB,WAAlD,EAA+D,QAASA,YAAT,EAAsB,CAAC,MAAO,UAASrB,KAAT,CAAelG,IAAf,CAAoBjD,IAApB,CAAyB,CAAC,GAAGmJ,QAAQnM,SAAX,CAAqB,CAAC,MAAOmM,OAAMF,MAAN,CAAa,SAAS5J,IAAT,CAAc,CAAC,GAAGW,OAAO,QAAP,EAAiBX,KAAK0D,GAAL,GAAW/F,SAA5B,EAAuCqC,KAAK0D,GAAL,GAAW,IAArD,CAA0D,CAAC,GAAG1D,KAAK0D,GAAL,CAASG,SAAT,CAAmB,CAAnB,CAAqB,CAArB,IAA0BD,IAA7B,CAAkC,CAAC,MAAO5D,KAAP,CAAa,CAAC,CAA5G,IAAiH,IAAGW,OAAO,SAAV,CAAoB,CAAC,GAAGX,KAAK2D,MAAL,CAAYC,IAAZ,GAAmBA,IAAtB,CAA2B,CAAC,MAAO5D,KAAP,CAAa,CAAC,CAAC,CAA7M,CAAP,CAAuN,CAAC,CAA/Q,CAAiR,CAAC,CAAjY,IAAqY,CAAC,UAAU,CAAC,aAAajG,QAAQC,MAAR,CAAe,YAAf,EAA6BoR,OAA7B,CAAqC,cAArC,CAAoDtO,YAApD,EAAkEA,aAAaZ,OAAb,CAAqB,CAAC,YAAD,CAAc,aAAd,CAA4B,aAA5B,CAA0C,qBAA1C,CAAgE,WAAhE,CAArB,CAAkG,QAASY,aAAT,CAAsBR,UAAtB,CAAiCM,WAAjC,CAA6CD,WAA7C,CAAyDE,mBAAzD,CAA6ER,SAA7E,CAAuF,CAAC,MAAM,CAAC8C,OAAO,QAASA,OAAT,CAAgBa,IAAhB,CAAqBgD,QAArB,CAA8BhB,aAA9B,CAA4CM,OAA5C,CAAoD+I,aAApD,CAAkE,CAAC,GAAI7L,WAAUQ,IAAd,CAAmBc,QAAQC,GAAR,CAAYvB,SAAZ,EAAuB;AAC9sC,GAAGQ,KAAKiE,KAAL,GAAa,IAAb,EAAmBjE,KAAKiE,KAAL,GAAatG,SAAnC,CAA6C,CAAC6B,UAAUyE,KAAV,CAAgBjE,KAAKiE,KAAL,CAAWlJ,GAA3B,CAAgC,IAAGiI,WAAWrF,SAAd,CAAwB,CAAC6B,UAAU+D,IAAV,CAAe3G,YAAY0O,oBAAZ,CAAiC9L,UAAU+D,IAA3C,CAAgDP,QAAhD,CAAf,CAA0E;AACjLxD,UAAU7C,YAAY4O,WAAZ,CAAwB/L,SAAxB,CAAkCwC,aAAlC,CAAgD,OAAhD,CAAwDqJ,aAAxD,CAAV,CAAiF,GAAG/I,UAAU3E,SAAV,EAAqB2E,UAAU,IAA/B,EAAqCA,UAAU,EAAlD,CAAqD,CAAC9C,UAAUsE,KAAV,CAAgBxB,OAAhB,CAAyB;AAChK;AACA;AACA,GAAG9C,UAAUS,QAAV,GAAqBT,UAAUgE,YAA/B,EAA6ChE,UAAUgE,YAAV,GAAyB,CAAzE,CAA2E,CAAC,GAAGhE,UAAUkE,GAAV,GAAgB/F,SAAhB,EAA2B6B,UAAUkE,GAAV,GAAgB,IAA9C,CAAmD,CAAClE,UAAUkE,GAAV,CAAclE,UAAUU,MAAxB,CAA+B;AAC9J,CAAC,CADF,IACO,IAAGV,UAAUiE,UAAV,GAAuB,KAA1B,CAAgC,CAAC;AACxC;AACAjE,UAAUkE,GAAV,CAAc,IAAd,CAAmB;AAClB;AACD,GAAGlE,UAAUkE,GAAV,GAAgB/F,SAAhB,EAA2B6B,UAAUkE,GAAV,GAAgB,IAA9C,CAAmD,CAAClE,UAAUgC,MAAV,CAAiB,IAAjB,CAAsBhC,UAAUmC,MAAV,CAAiB,KAAjB,CAAwB,CAAlG,IAAsG,CAAC;AACvGnC,UAAUgC,MAAV,CAAiB,KAAjB,CAAwB;AACxB,GAAGhC,UAAUiE,UAAV,GAAuB,IAA1B,CAA+B,CAACjE,UAAU7C,YAAY6O,YAAZ,CAAyBhM,SAAzB,CAAmC,OAAnC,CAAV,CAAsD,GAAGA,UAAUS,QAAV,GAAqBT,UAAUgE,YAAlC,CAA+C,CAAChE,UAAUiM,YAAV,EAAwB,CAAxB,CAA0BjM,UAAUiE,UAAV,CAAqB,KAArB,CAA4B,CAAC,WAAUiI,OAAV,CAAkB,UAAU,CAAC,GAAGrQ,OAAOC,QAAP,CAAgBqQ,IAAhB,CAAqBhD,OAArB,CAA6B,OAA7B,IAAwC,CAAC,CAAzC,EAA4CtN,OAAOC,QAAP,CAAgBqQ,IAAhB,CAAqBhD,OAArB,CAA6B,OAA7B,IAAwC,CAAC,CAAxF,CAA0FtM,UAAUyD,IAAV,CAAe,YAAf,EAA6BjD,oBAAoBuH,OAApB,CAA4B,QAA5B,CAAqC,8BAArC,EAAsE,CAA1N,CAA2N,SAASC,aAAT,CAAuB,CAAC,GAAIC,OAAMD,cAAc3D,IAAd,CAAmB6D,OAA7B,CAAqC1H,oBAAoByH,KAApB,CAA0B,QAA1B,CAAmCD,cAAc3D,IAAd,CAAmB6D,OAAtD,EAAgE,CAAxV,EAA2V,CAZikB,CAAN,CAYxjB,CAAC,CAZkS,IAY9R,CAAC,UAAU,CAAC,aAAaxK,QAAQC,MAAR,CAAe,YAAf,EAA6BoR,OAA7B,CAAqC,YAArC,CAAkDQ,iBAAlD,EAAqEA,kBAAkB1P,OAAlB,CAA0B,CAAC,WAAD,CAA1B,CAAwC,QAAS0P,kBAAT,CAA2BC,SAA3B,CAAqC,CAAC,MAAOA,WAAU,yBAAV,CAAoC,CAAC3K,YAAY,MAAb,CAApC,CAAyD,CAAC/B,OAAO,CAAC2M,OAAO,KAAR,CAAR,CAAzD,CAAP,CAA0F,CAAC,CAAvQ,IAA2Q,CAAC,UAAU,CAAC,aAAa/R,QAAQC,MAAR,CAAe,YAAf,EAA6B+R,OAA7B,CAAqC,YAArC,CAAkDvP,UAAlD,EAA8DA,WAAWN,OAAX,CAAmB,CAAC,OAAD,CAAS,qBAAT,CAAnB,CAAmD,QAASM,WAAT,CAAoBwP,KAApB,CAA0BnP,mBAA1B,CAA8C,CAAC,GAAI5D,KAAI,CAACyL,gBAAgBA,eAAjB,CAAR,CAA0C,MAAOzL,IAAP,CAAW,QAASyL,gBAAT,CAAyBU,IAAzB,CAA8B6G,SAA9B,CAAwC,CAAC,GAAIC,IAAG,GAAIC,SAAJ,EAAP,CAAsBD,GAAGE,MAAH,CAAU,MAAV,CAAiBhH,IAAjB,EAAuB4G,MAAMK,IAAN,CAAWJ,SAAX,CAAqBC,EAArB,CAAwB,CAACI,iBAAiBvS,QAAQwS,QAA1B,CAAmCC,QAAQ,CAAC,eAAe7O,SAAhB,CAA3C,CAAxB,EAAgGyG,OAAhG,CAAwG,SAASD,QAAT,CAAkB,CAACtH,oBAAoBuH,OAApB,CAA4B,WAA5B,CAAwC,8BAAxC,EAAyE,CAApM,EAAsME,KAAtM,CAA4M,SAASmI,GAAT,CAAa,CAAC5P,oBAAoB6P,KAApB,CAA0B,QAA1B,CAAmC,2BAA2BD,GAA9D,CAAkE,OAAlE,EAA4E,CAAtS,EAAyS,CAAC,CAAC,CAA/mB,IAAmnB,CAAC,UAAU,CAAC,aAAa1S,QAAQC,MAAR,CAAe,YAAf,EAA6B+R,OAA7B,CAAqC,aAArC,CAAmDpP,WAAnD,EAAgEA,YAAYT,OAAZ,CAAoB,CAAC,QAAD,CAAU,SAAV,CAAoB,aAApB,CAApB,CAAuD,QAASS,YAAT,CAAqBuN,MAArB,CAA4B1D,OAA5B,CAAoC5J,WAApC,CAAgD,CAAC,GAAI3D,KAAI,CAAC0T,cAAcA,aAAf,CAA6BC,yBAAyBA,wBAAtD,CAA+ElL,cAAcA,aAA7F,CAA2GmL,gBAAgBA,eAA3H,CAA2IC,iBAAiBA,gBAA5J,CAA6K/I,oBAAoBA,mBAAjM,CAAqNgJ,cAAcA,aAAnO,CAAiPC,YAAYA,WAA7P,CAAyQC,gBAAgBA,eAAzR,CAAyS1B,YAAYA,WAArT,CAAiUC,aAAaA,YAA9U,CAA2V5M,WAAWA,UAAtW,CAAiXsO,iBAAiBA,gBAAlY,CAAmZC,YAAYA,WAA/Z,CAA2aC,gBAAgBA,eAA3b,CAA2cC,UAAUA,SAArd,CAAR,CAAwe,MAAOpU,IAAP,CAAW;AACllE,QAAS8K,oBAAT,CAA6BuJ,IAA7B,CAAkC,CAAC,GAAI3J,QAAO,EAAX,CAAcC,KAAK0J,KAAKC,WAAL,EAAnB,CAAsCxD,MAAMuD,KAAKE,QAAL,GAAgB,CAA5D,CAA8DjP,aAAa3B,YAAY4B,eAAZ,EAA3E,CAAyGmB,EAAEpB,aAAakP,OAAb,CAAqBpH,MAAhI,CAAuI;AAC1K,MAAM1G,GAAN,CAAU,CAAC,GAAGoK,MAAM2D,OAAOnP,aAAakP,OAAb,CAAqB9N,CAArB,EAAwB0F,MAA/B,CAAN,EAA8C1B,SAAS,EAA1D,CAA6D,CAACA,OAAO,CAACA,OAAOpF,aAAakP,OAAb,CAAqB9N,EAAE,CAAvB,EAA0B2D,IAAlC,CAAuCM,KAAKA,IAA5C,CAAP,CAA0D;AACnI,GAAGjE,IAAI,CAAJ,EAAOgE,SAAS,EAAnB,CAAsB,CAACA,OAAO,CAACA,OAAOpF,aAAakP,OAAb,CAAqB9N,CAArB,EAAwB2D,IAAhC,CAAqCM,KAAKA,IAA1C,CAAP,CAAwD,CAAC;AAChF,MAAOD,OAAP,CAAe;AACf,QAAS4H,YAAT,CAAqBvL,IAArB,CAA0BgC,aAA1B,CAAwCrB,IAAxC,CAA6C0K,aAA7C,CAA2D,CAACvK,QAAQC,GAAR,CAAY,gBAAZ,CAA6Bf,IAA7B,CAAkCA,KAAKgB,IAAvC,CAA4CqK,aAA5C,EAA2D;AACvH,GAAGrL,KAAKgB,IAAL,CAAU2M,OAAV,CAAkBtH,MAAlB,GAA2B,CAA9B,CAAgC,CAAC,GAAIuH,eAAc5N,KAAKgB,IAAL,CAAU2M,OAAV,CAAkB3N,KAAKgB,IAAL,CAAU2M,OAAV,CAAkBtH,MAAlB,CAAyB,CAA3C,EAA8ChF,KAAhE,CAAsEgF,OAAO1F,OAAO,OAAP,CAAeX,KAAKC,QAAL,CAAc2N,aAA7B,CAA2C5N,KAAK6N,QAAL,CAAcD,aAAtI,CAAoJ,GAAGvH,OAAO,CAAP,GAAW1F,OAAO,OAAP,CAAeX,KAAKyD,UAAL,GAAkB,KAAjC,CAAuCzD,KAAK8N,SAAL,GAAiB,KAAnE,CAAH,CAA6E,CAAC,IAAI,GAAInO,GAAE,CAAV,CAAYA,GAAG0G,MAAf,CAAsB1G,GAAtB,CAA0B,CAACK,KAAKgB,IAAL,CAAU2M,OAAV,CAAkBzT,IAAlB,CAAuB,CAACoT,KAAKnN,KAAK4N,GAAL,EAAN,CAAiB1M,MAAMuM,cAAcjO,CAArC,CAAuCgL,OAAOU,eAAe,CAA7D,CAA+DtJ,MAAM/B,KAAK+B,KAA1E,CAAgF2E,GAAG1G,KAAKjF,GAAxF,CAAvB,EAAsH,CAAC,CAAC,CAAtZ,IAA0Z,CAAC,GAAGiH,gBAAgBrB,OAAO,OAAP,CAAeX,KAAKyD,UAAL,GAAkB,KAAjC,CAAuCzD,KAAK8N,SAAL,GAAiB,KAAxE,CAAH,CAAkF,CAAC9N,KAAKgB,IAAL,CAAU2M,OAAV,CAAkBzT,IAAlB,CAAuB,CAACoT,KAAKnN,KAAK4N,GAAL,EAAN,CAAiB1M,MAAMV,OAAO,OAAP,CAAeX,KAAKC,QAApB,CAA6BD,KAAK6N,QAAzD,CAAkElD,OAAOU,eAAe,CAAxF,CAA0FtJ,MAAM/B,KAAK+B,KAArG,CAA2G2E,GAAG1G,KAAKjF,GAAnH,CAAvB,EAAiJ,CAAC,OAAOiF,KAAP,CAAa;AAC7oB,QAAS+M,cAAT,CAAuB/M,IAAvB,CAA4B2N,OAA5B,CAAoC,CAAC,GAAIK,MAAK,EAAT,CAAYjU,QAAQkU,OAAR,CAAgBjO,KAAKgB,IAAL,CAAU2M,OAA1B,CAAkC,SAASO,IAAT,CAAc,CAAC,GAAGA,KAAK7M,KAAL,GAAasM,QAAQtM,KAAxB,CAA8B,CAAC2M,KAAK9T,IAAL,CAAUgU,IAAV,EAAiB,CAAC,CAAlG,EAAoGlO,KAAKgB,IAAL,CAAU2M,OAAV,CAAkBK,IAAlB,CAAuB,MAAOhO,KAAP,CAAa,SAASwL,aAAT,CAAsBxL,IAAtB,CAA2BW,IAA3B,CAAgC,CAAC,GAAIkK,OAAM,CAACsD,MAAM,cAAP,CAAsBC,YAAY,UAAlC,CAA6CC,UAAU,cAAvD,CAAV,CAAiFpK,MAAM,CAACkK,MAAM,aAAP,CAAqBC,YAAY,UAAjC,CAA4CC,UAAU,cAAtD,CAAvF,CAA6JC,UAAU3N,OAAO,OAAP,CAAekK,KAAf,CAAqB5G,KAA5L,CAAkMsK,MAAM3R,YAAYqJ,YAAZ,CAAyBjG,KAAKgB,IAAL,CAAUwN,QAAnC,CAA4C,OAA5C,CAAoDxO,KAAKsO,UAAUH,KAAf,EAAsB,CAA1E,CAAxM,CAAqR,GAAGI,QAAQ,CAAC,CAAZ,CAAc,CAACvO,KAAKgB,IAAL,CAAUwN,QAAV,CAAmBtU,IAAnB,CAAwB,CAACwM,GAAG1G,KAAK0G,EAAT,CAAY3E,MAAM/B,KAAK+B,KAAvB,CAA6BV,MAAMrB,KAAKsO,UAAUH,KAAf,EAAsB,CAAzD,CAA2DxD,OAAO,CAAlE,CAAoEvH,MAAMpD,KAAKE,MAA/E,CAAsFwD,IAAI1D,KAAKsO,UAAUF,WAAf,IAA8BpO,KAAKsO,UAAUD,SAAf,CAA9B,CAAwDrO,KAAKE,MAA7D,CAAoE,IAA9J,CAAxB,EAA8L,CAA7M,IAAkN,IAAGqO,MAAM,CAAC,CAAP,EAAUvO,KAAKsO,UAAUF,WAAf,IAA8BpO,KAAKsO,UAAUD,SAAf,CAA3C,CAAqE,CAACrO,KAAKgB,IAAL,CAAUwN,QAAV,CAAmBD,KAAnB,EAA0B7K,GAA1B,CAA8B1D,KAAKE,MAAnC,CAA2C,OAAOF,KAAP,CAAa;AAC/zB,QAASpB,WAAT,CAAoBsB,MAApB,CAA2BE,OAA3B,CAAmC,CAAC;AACpC;AACA,GAAIqO,OAAMvE,OAAO,GAAI/J,KAAJ,EAAP,CAAV,CAA6BuO,WAA7B,CAAyCpE,IAAzC,CAA8C,GAAGJ,OAAOhK,MAAP,EAAeyO,WAAf,GAA6B9K,SAA7B,CAAuC,CAAvC,CAAyC,EAAzC,IAA+CqG,OAAO9J,OAAP,EAAgBuO,WAAhB,GAA8B9K,SAA9B,CAAwC,CAAxC,CAA0C,EAA1C,CAAlD,CAAgG,CAAC6K,YAAYxE,OAAO9J,OAAP,CAAZ,CAA4BkK,KAAKoE,YAAYE,OAAZ,EAAL,CAA2B,GAAGtE,OAAO,WAAV,CAAsB,CAAC,MAAM,gBAAgBoE,YAAYG,MAAZ,CAAmB,OAAnB,CAAtB,CAAmD,CAA1E,IAA+E,IAAGvE,KAAK3B,OAAL,CAAa,MAAb,EAAqB,CAAC,CAAzB,CAA2B,CAAC,MAAO2B,MAAK,MAAL,CAAYoE,YAAYG,MAAZ,CAAmB,OAAnB,CAAnB,CAAgD,CAA5E,IAAgF,CAAC,MAAOvE,MAAK,GAAZ,CAAiB,CAAC,CAA1U,IAA8U,CAACoE,YAAYxE,OAAOhK,MAAP,CAAZ,CAA2BoK,KAAKmE,MAAMnE,IAAN,CAAWoE,WAAX,CAAuB,MAAvB,CAAL,CAAoC;AAC5b,GAAGpE,OAAO,CAAV,CAAY,CAAC,MAAM,OAAN,CAAe,CAA5B,IAAiC,IAAGA,OAAO,CAAV,CAAY,CAAC,MAAM,WAAN,CAAmB,CAAhC,IAAoC,CAAC,MAAOA,MAAK,YAAZ,CAA0B,CAAC,CAAC;AAClG,QAASqC,cAAT,CAAuBrE,KAAvB,CAA6B,CAAC,GAAIwG,UAAS,CAACC,QAAQvI,QAAQ,QAAR,EAAkB8B,KAAlB,CAAwB,CAAC9G,OAAO,KAAR,CAAxB,EAAwC6E,MAAjD,CAAwD2I,UAAUxI,QAAQ,QAAR,EAAkB8B,KAAlB,CAAwB,CAAC9G,OAAO,IAAR,CAAxB,EAAuC6E,MAAzG,CAAb,CAA8H;AAC5J,MAAOyI,SAAP,CAAiB;AACjB,QAAS5B,iBAAT,CAA0B5E,KAA1B,CAAgC,CAAC,GAAI2G,SAAQ,EAAZ,CAAeC,SAAS,CAAxB,CAA0B,IAAI,GAAIvP,GAAE,CAAV,CAAYA,EAAE2I,MAAMjC,MAApB,CAA2B1G,GAA3B,CAA+B,CAAC,GAAG2I,MAAM3I,CAAN,EAAS+D,GAAT,GAAe/F,SAAf,EAA0B2K,MAAM3I,CAAN,EAAS+D,GAAT,GAAe,IAA5C,CAAiD,CAAC,GAAIA,KAAI4E,MAAM3I,CAAN,EAAS+D,GAAT,CAAaG,SAAb,CAAuB,CAAvB,CAAyB,CAAzB,CAAR,CAAoC,GAAGoL,QAAQvL,GAAR,IAAe,IAAf,EAAqBuL,QAAQvL,GAAR,IAAe/F,SAAvC,CAAiD,CAACsR,QAAQvL,GAAR,EAAa,CAAb,CAAgB,CAAlE,IAAsE,CAACuL,QAAQvL,GAAR,IAAgB,IAAGuL,QAAQvL,GAAR,EAAawL,QAAhB,CAAyB,CAACA,SAASD,QAAQvL,GAAR,CAAT,CAAuB,CAAC,CAAC,OAAOwL,SAAP,CAAiB;AAC5U,QAASjC,gBAAT,CAAyB3E,KAAzB,CAA+B,CAAC,GAAI6G,YAAW,CAAf,CAAiBC,cAAc,CAA/B,CAAiCC,cAAc,CAA/C,CAAiDtV,QAAQkU,OAAR,CAAgB3F,KAAhB,CAAsB,SAAStI,IAAT,CAAc,CAAC,GAAGA,KAAK2K,MAAL,GAAc,CAAjB,CAAmB,CAACwE,YAAYnP,KAAK2K,MAAjB,CAAwByE,gBAAiB,CAAC,CAAnG,EAAqGC,cAAcF,WAAWC,aAAzB,CAAuC,GAAIE,QAAO,CAACF,cAAcA,aAAf,CAA6BC,cAAcA,aAA3C,CAAX,CAAqE;AAClS,MAAOC,OAAP,CAAe;AACf,QAASnC,YAAT,CAAqB7E,KAArB,CAA2B,CAAC,GAAI2G,SAAQ,EAAZ,CAAeC,SAAS,CAAxB,CAA0BnV,QAAQkU,OAAR,CAAgB3F,KAAhB,CAAsB,SAAStI,IAAT,CAAc,CAACjG,QAAQkU,OAAR,CAAgBjO,KAAKuD,IAArB,CAA0B,SAASmF,GAAT,CAAa,CAAC,GAAIpF,MAAKoF,IAAIpF,IAAb,CAAkB,GAAG2L,QAAQ3L,IAAR,IAAgB,IAAhB,EAAsB2L,QAAQ3L,IAAR,IAAgB3F,SAAzC,CAAmD,CAACsR,QAAQ3L,IAAR,EAAc,CAAd,CAAiB,CAArE,IAAyE,CAAC2L,QAAQ3L,IAAR,IAAiB,IAAG2L,QAAQ3L,IAAR,EAAc4L,QAAjB,CAA0B,CAACA,SAASD,QAAQ3L,IAAR,CAAT,CAAwB,CAAC,CAAzM,EAA4M,CAAjP,EAAmP,MAAO4L,SAAP,CAAiB;AAC1T,QAASxN,cAAT,CAAuB4G,KAAvB,CAA6BiH,iBAA7B,CAA+C,CAAC,GAAIC,KAAI,IAAR,CAAalR,SAAS,EAAtB,CAAyBmR,aAAzB,CAAuCtC,YAAYlU,IAAIkU,WAAJ,CAAgB7E,KAAhB,CAAnD,CAA0EoH,UAAUpH,MAAMjC,MAA1F,CAAiG;AACjJtM,QAAQkU,OAAR,CAAgB3F,KAAhB,CAAsB,SAAStI,IAAT,CAAc,CAACjG,QAAQkU,OAAR,CAAgBjO,KAAKuD,IAArB,CAA0B,SAASmF,GAAT,CAAa,CAAC,IAAI,GAAI/I,GAAE,CAAN,CAAQgQ,IAAIrR,SAAS+H,MAAzB,CAAgC1G,EAAEgQ,GAAlC,CAAsChQ,GAAtC,CAA0C,CAAC,GAAGrB,SAASqB,CAAT,EAAY+I,GAAZ,GAAkBA,IAAIpF,IAAzB,CAA8B,CAACkM,IAAI,KAAJ,CAAUlR,SAASqB,CAAT,EAAYwO,KAAZ,EAAmB,CAAnB,CAAqB7P,SAASqB,CAAT,EAAYiQ,UAAZ,EAAwB5P,KAAK2K,MAAL,GAAc,CAAd,CAAgB,CAAhB,CAAkB,CAA1C,CAA4CrM,SAASqB,CAAT,EAAYkQ,OAAZ,CAAoB3V,IAApB,CAAyB8F,KAAK2K,MAA9B,EAAsCrM,SAASqB,CAAT,EAAYmQ,WAAZ,EAAyB9P,KAAK2K,MAA9B,CAAqCrM,SAASqB,CAAT,EAAYoQ,SAAZ,CAAsBzR,SAASqB,CAAT,EAAYmQ,WAAZ,GAA0B,CAA1B,CAA4B,CAA5B,CAA8BxR,SAASqB,CAAT,EAAYmQ,WAAZ,CAAwBxR,SAASqB,CAAT,EAAYiQ,UAAxF,CAAmGtR,SAASqB,CAAT,EAAYqQ,cAAZ,CAA2B/W,IAAImU,eAAJ,CAAoB9O,SAASqB,CAAT,EAAYkQ,OAAhC,CAA3B,CAAqE,CAAC;AACtd,GAAGL,MAAM,IAAT,CAAc,CAACC,cAAczP,KAAK2K,MAAL,GAAc,CAAd,CAAgB,CAAhB,CAAkB,CAAhC,CAAkCrM,SAASpE,IAAT,CAAc,CAACwO,IAAIA,IAAIpF,IAAT,CAAc6K,MAAM,CAApB,CAAsByB,WAAWH,aAAjC,CAA+CI,QAAQ,CAAC7P,KAAK2K,MAAN,CAAvD,CAAqEmF,YAAY9P,KAAK2K,MAAtF,CAA6FoF,UAAU/P,KAAK2K,MAA5G,CAAmHqF,eAAe,CAAlI,CAAd,EAAqJ,KAAI,IAAJ,CAAS;AAC9M,CAFoC,EAElC;AACF,CAHD,EAGG,MAAO1R,SAAP,CAAiB;AACpB,QAAS8O,gBAAT,CAAyByC,OAAzB,CAAiC,CAAC,GAAIP,QAAO,EAAX,CAAcW,QAAQ,EAAtB,CAAyBC,aAAa,CAAtC,CAAwCC,MAAM,CAA9C,CAAgDhC,MAAM,CAAtD,CAAwD;;gBAE1E,IAAI,GAAIxO,GAAE,CAAN,CAAQgQ,IAAIE,QAAQxJ,MAAxB,CAA+B1G,EAAEgQ,GAAjC,CAAqChQ,GAArC,CAAyC,CAAC,GAAGkQ,QAAQlQ,CAAR,GAAa2P,OAAhB,CAAuB,CAACW,QAAQJ,QAAQlQ,CAAR,CAAR,IAAuB,CAA/C,IAAmD,CAAC2P,OAAOpV,IAAP,CAAY2V,QAAQlQ,CAAR,CAAZ,EAAwBsQ,QAAQJ,QAAQlQ,CAAR,CAAR,EAAoB,CAApB,CAAuB,CAAC;;;gBAG9I,IAAI,GAAIyQ,EAAR,GAAaH,QAAb,CAAqB,CAAC,GAAG,MAAOA,SAAQG,CAAR,CAAP,GAAoB,UAAvB,CAAkC,CAAC,GAAG,CAACC,MAAMJ,QAAQG,CAAR,CAAN,CAAJ,CAAsB,CAACD,OAAOC,EAAEH,QAAQG,CAAR,CAAT,CAAoBjC,OAAO8B,QAAQG,CAAR,CAAP,CAAmB,CAAC,IAAGA,IAAI,CAAP,CAAS,CAACF,aAAaD,QAAQG,CAAR,CAAb,CAAyB,CAAC;;;UAGlK,MAAOD,OAAMhC,KAAb,CAAoB;AAC9B,QAASvB,yBAAT,CAAkCtE,KAAlC,CAAwC,CAAC,GAAI4G,UAAS5G,MAAMjC,MAAnB,CAA0BiK,eAAe,CAAC,EAAD,CAAI,CAAJ,CAAM,CAAN,CAAQ,CAAR,CAAU,CAAV,CAAY,CAAZ,CAAc,CAAd,CAAgB,CAAhB,CAAkB,CAAlB,CAAoB,CAApB,CAAsB,CAAtB,CAAzC,CAAkEC,oBAAoB,EAAtF,CAAyF5Q,EAAE2Q,eAAejK,MAA1G,CAAiH,MAAM1G,GAAN,CAAU,CAAC,GAAIwO,OAAM3H,QAAQ,QAAR,EAAkB8B,KAAlB,CAAwB,CAACqC,OAAOhL,CAAR,CAAxB,CAAmC,IAAnC,EAAyC0G,MAAnD,CAA0DkK,oBAAoBrW,IAApB,CAAyB,CAACmL,OAAO1F,IAAI,CAAJ,CAAM,GAAN,CAAUA,CAAlB,CAAoB2D,KAAK3D,IAAI,CAAJ,CAAMwO,MAAM,mBAAZ,CAAgCA,MAAM,iBAAN,CAAwBxO,CAAjF,CAAmF6Q,OAAO7Q,EAAE,CAAF,CAAI,SAAJ,CAAc,EAAEA,CAAF,EAAKA,EAAE,CAAP,CAAS,SAAT,CAAmBA,IAAI,CAAJ,CAAM,SAAN,CAAgB,SAA3I,CAAqJwO,MAAMA,KAA3J,CAAiKsC,WAAW,CAACtC,MAAMe,QAAN,CAAe,GAAhB,EAAqBwB,OAArB,CAA6B,CAA7B,CAA5K,CAAzB,EAAwO;AACvc,MAAOH,oBAAP,CAA4B;AAC5B,QAASvD,YAAT,CAAqB1E,KAArB,CAA2B,CAAC,GAAIqI,OAAM,EAAV,CAAaC,UAAUpK,QAAQ,QAAR,EAAkB8B,KAAlB,CAAwB,oBAAxB,CAAvB,CAAqE;AACjGsI,UAAUpK,QAAQ,SAAR,EAAmBoK,SAAnB,CAA6B,qBAA7B,CAAV,CAA8D;AAC9D7W,QAAQkU,OAAR,CAAgB2C,SAAhB,CAA0B,SAAS5Q,IAAT,CAAc,CAAC,GAAGA,KAAK0D,GAAL,GAAW/F,SAAX,EAAsBqC,KAAK0D,GAAL,GAAW,IAApC,CAAyC,CAACiN,MAAMzW,IAAN,CAAW,CAAC0J,KAAK5D,KAAK0D,GAAL,CAASG,SAAT,CAAmB,CAAnB,CAAqB,CAArB,CAAN,CAAX,EAA4C,CAAC,CAAhI,EAAkI,MAAO8M,MAAP,CAAc;AAChJ,QAAS9D,gBAAT,CAAyBvE,KAAzB,CAA+B,CAAC,GAAIuI,cAAa,EAAjB,CAAoBC,qBAAqB,EAAzC,CAA4C5D,iBAAiB,CAA7D,CAA+D0D,UAAU3X,IAAI+T,WAAJ,CAAgB1E,KAAhB,CAAzE,CAAgG3I,EAAEiR,UAAUvK,MAA5G,CAAmH;AACnJ,MAAM1G,GAAN,CAAU,CAAC;AACX,GAAGiR,UAAUjR,CAAV,EAAaiE,IAAb,GAAoBjG,SAApB,EAA+BiT,UAAUjR,CAAV,EAAaiE,IAAb,GAAoB,IAAtD,CAA2D,CAACkN,qBAAqB5W,IAArB,CAA0B,CAAC0J,KAAKgN,UAAUjR,CAAV,EAAaiE,IAAnB,CAAwBmN,OAAO,CAAC,CAAC1L,OAAO,IAAR,CAAa/B,KAAK,SAAlB,CAA4B6K,MAAM3H,QAAQ,YAAR,EAAsB8B,KAAtB,CAA4BsI,UAAUjR,CAAV,EAAaiE,IAAzC,CAA8C,IAA9C,EAAoDyC,MAAtF,CAAD,CAA+F,CAAChB,OAAO,IAAR,CAAa/B,KAAK,UAAlB,CAA6B6K,MAAM3H,QAAQ,YAAR,EAAsB8B,KAAtB,CAA4BsI,UAAUjR,CAAV,EAAaiE,IAAzC,CAA8C,IAA9C,EAAoDyC,MAAvF,CAA/F,CAA8L,CAAChB,OAAO,IAAR,CAAa/B,KAAK,OAAlB,CAA0B6K,MAAM3H,QAAQ,YAAR,EAAsB8B,KAAtB,CAA4BsI,UAAUjR,CAAV,EAAaiE,IAAzC,CAA8C,IAA9C,EAAoDyC,MAApF,CAA9L,CAA0R,CAAChB,OAAO,IAAR,CAAa/B,KAAK,OAAlB,CAA0B6K,MAAM3H,QAAQ,YAAR,EAAsB8B,KAAtB,CAA4BsI,UAAUjR,CAAV,EAAaiE,IAAzC,CAA8C,IAA9C,EAAoDyC,MAApF,CAA1R,CAAsX,CAAChB,OAAO,IAAR,CAAa/B,KAAK,KAAlB,CAAwB6K,MAAM3H,QAAQ,YAAR,EAAsB8B,KAAtB,CAA4BsI,UAAUjR,CAAV,EAAaiE,IAAzC,CAA8C,IAA9C,EAAoDyC,MAAlF,CAAtX,CAAgd,CAAChB,OAAO,IAAR,CAAa/B,KAAK,MAAlB,CAAyB6K,MAAM3H,QAAQ,YAAR,EAAsB8B,KAAtB,CAA4BsI,UAAUjR,CAAV,EAAaiE,IAAzC,CAA8C,IAA9C,EAAoDyC,MAAnF,CAAhd,CAA2iB,CAAChB,OAAO,IAAR,CAAa/B,KAAK,MAAlB,CAAyB6K,MAAM3H,QAAQ,YAAR,EAAsB8B,KAAtB,CAA4BsI,UAAUjR,CAAV,EAAaiE,IAAzC,CAA8C,IAA9C,EAAoDyC,MAAnF,CAA3iB,CAAsoB,CAAChB,OAAO,IAAR,CAAa/B,KAAK,QAAlB,CAA2B6K,MAAM3H,QAAQ,YAAR,EAAsB8B,KAAtB,CAA4BsI,UAAUjR,CAAV,EAAaiE,IAAzC,CAA8C,IAA9C,EAAoDyC,MAArF,CAAtoB,CAAmuB,CAAChB,OAAO,IAAR,CAAa/B,KAAK,WAAlB,CAA8B6K,MAAM3H,QAAQ,YAAR,EAAsB8B,KAAtB,CAA4BsI,UAAUjR,CAAV,EAAaiE,IAAzC,CAA8C,IAA9C,EAAoDyC,MAAxF,CAAnuB,CAAm0B,CAAChB,OAAO,IAAR,CAAa/B,KAAK,SAAlB,CAA4B6K,MAAM3H,QAAQ,YAAR,EAAsB8B,KAAtB,CAA4BsI,UAAUjR,CAAV,EAAaiE,IAAzC,CAA8C,IAA9C,EAAoDyC,MAAtF,CAAn0B,CAAi6B,CAAChB,OAAO,IAAR,CAAa/B,KAAK,UAAlB,CAA6B6K,MAAM3H,QAAQ,YAAR,EAAsB8B,KAAtB,CAA4BsI,UAAUjR,CAAV,EAAaiE,IAAzC,CAA8C,IAA9C,EAAoDyC,MAAvF,CAAj6B,CAAggC,CAAChB,OAAO,IAAR,CAAa/B,KAAK,UAAlB,CAA6B6K,MAAM3H,QAAQ,YAAR,EAAsB8B,KAAtB,CAA4BsI,UAAUjR,CAAV,EAAaiE,IAAzC,CAA8C,IAA9C,EAAoDyC,MAAvF,CAAhgC,CAA/B,CAA1B,EAA4pC,CAAC,kBAAiBpN,IAAIiU,gBAAJ,CAAqB5E,KAArB,CAAjB,CAA6CuI,aAAa,CAACE,OAAOD,oBAAR,CAA6BE,IAAI9D,gBAAjC,CAAb,CAAgE;AACt0C,MAAO2D,aAAP,CAAqB;AACrB,QAAS/D,iBAAT,CAA0BxE,KAA1B,CAAgC,CAAC,GAAI2I,eAAc,EAAlB,CAAqBC,sBAAsB,EAA3C,CAA8CC,kBAAkB,CAAhE,CAAkEP,UAAU3X,IAAI+T,WAAJ,CAAgB1E,KAAhB,CAA5E,CAAmG3I,EAAEiR,UAAUvK,MAA/G,CAAsH;AACvJ,MAAM1G,GAAN,CAAU,CAAC;AACX,GAAGiR,UAAUjR,CAAV,EAAaiE,IAAb,GAAoBjG,SAApB,EAA+BiT,UAAUjR,CAAV,EAAaiE,IAAb,GAAoB,IAAtD,CAA2D,CAACsN,sBAAsBhX,IAAtB,CAA2B,CAAC0J,KAAKgN,UAAUjR,CAAV,EAAaiE,IAAnB,CAAwB6J,QAAQ,CAAC,CAACpI,OAAO,IAAR,CAAa/B,KAAK,QAAlB,CAA2B6K,MAAM3H,QAAQ,QAAR,EAAkB8B,KAAlB,CAAwBsI,UAAUjR,CAAV,EAAaiE,IAArC,CAA0C,QAA1C,EAAoDyC,MAArF,CAAD,CAA8F,CAAChB,OAAO,IAAR,CAAa/B,KAAK,QAAlB,CAA2B6K,MAAM3H,QAAQ,QAAR,EAAkB8B,KAAlB,CAAwBsI,UAAUjR,CAAV,EAAaiE,IAArC,CAA0C,QAA1C,EAAoDyC,MAArF,CAA9F,CAA2L,CAAChB,OAAO,IAAR,CAAa/B,KAAK,QAAlB,CAA2B6K,MAAM3H,QAAQ,QAAR,EAAkB8B,KAAlB,CAAwBsI,UAAUjR,CAAV,EAAaiE,IAArC,CAA0C,QAA1C,EAAoDyC,MAArF,CAA3L,CAAwR,CAAChB,OAAO,IAAR,CAAa/B,KAAK,MAAlB,CAAyB6K,MAAM3H,QAAQ,QAAR,EAAkB8B,KAAlB,CAAwBsI,UAAUjR,CAAV,EAAaiE,IAArC,CAA0C,MAA1C,EAAkDyC,MAAjF,CAAxR,CAAhC,CAA3B,EAAgb,CAAC;AAC7etM,QAAQkU,OAAR,CAAgBiD,qBAAhB,CAAsC,SAASlR,IAAT,CAAc,CAAC,GAAIL,GAAEK,KAAKyN,OAAL,CAAapH,MAAnB,CAA0B,MAAM1G,GAAN,CAAU,CAAC,GAAGK,KAAKyN,OAAL,CAAa9N,CAAb,EAAgBwO,KAAhB,CAAsBgD,iBAAzB,CAA2C,CAACA,kBAAkBnR,KAAKyN,OAAL,CAAa9N,CAAb,EAAgBwO,KAAlC,CAAyC,CAAC,CAAC,CAAjL,EAAmL8C,cAAc,CAACxD,QAAQyD,qBAAT,CAA+BF,IAAIG,iBAAnC,CAAd,CAAoE;AACvP,MAAOF,cAAP,CAAsB;AACtB,QAAS5D,UAAT,CAAmB/E,KAAnB,CAAyB1E,IAAzB,CAA8BD,MAA9B,CAAqC,CAAC,GAAImG,OAAMtD,QAAQ,aAAR,EAAuB8B,KAAvB,CAA6B1E,IAA7B,CAAkCD,MAAlC,CAAV,CAAoD5J,QAAQkU,OAAR,CAAgBnE,KAAhB,CAAsB,SAAS9J,IAAT,CAAc,CAACc,QAAQC,GAAR,CAAYf,KAAK+B,KAAjB,EAAwB/B,KAAK2D,MAAL,CAAY1K,IAAI8K,mBAAJ,CAAwB,GAAI5D,KAAJ,CAASH,KAAKoD,KAAd,CAAxB,CAAZ,CAA2D,CAAxH,EAA0H,MAAO0G,MAAP,CAAc,CAAC,CAAC,CA9C0rC,IA8CtrC,CAAC,UAAU,CAAC,aAAa/P,QAAQC,MAAR,CAAe,YAAf,EAA6B+R,OAA7B,CAAqC,aAArC,CAAmDnP,WAAnD,EAAgEA,YAAYV,OAAZ,CAAoB,CAAC,QAAD,CAAU,IAAV,CAApB,CAAoC,QAASU,YAAT,CAAqBsN,MAArB,CAA4BkH,EAA5B,CAA+B,CAAC,GAAIrF,SAAQ,CAACtK,gBAAgBA,eAAjB,CAAiC6J,qBAAqBA,oBAAtD,CAA2ErF,aAAaA,YAAxF,CAAqGzH,gBAAgBA,eAArH,CAAqIe,qBAAqBA,oBAA1J,CAA+K8R,uBAAuBA,sBAAtM,CAA6NC,iBAAiBA,gBAA9O,CAA+PC,cAAcA,aAA7Q,CAA2RC,cAAcA,aAAzS,CAAuTC,kBAAkBA,iBAAzU,CAAZ,CAAwW,MAAO1F,QAAP,CAAe,QAASyF,cAAT,CAAuBE,MAAvB,CAA8B,CAAC,MAAOA,QAAO9I,KAAP,CAAa,EAAb,EAAiB+I,OAAjB,GAA2BC,IAA3B,CAAgC,EAAhC,CAAP,CAA4C;AACv0B,QAASL,cAAT,CAAuBjU,YAAvB,CAAoCyB,QAApC,CAA6CD,WAA7C,CAAyD,CAAC,GAAIsK,WAAUC,KAAKC,IAAL,CAAUhM,aAAayB,QAAvB,CAAd,CAA+C;AACzG;AACA,GAAGD,YAAY,CAAZ,EAAesK,SAAf,EAA0BA,YAAY,CAAzC,CAA2C,CAACtK,YAAYsK,UAAU,CAAtB,CAAyB,IAAGA,YAAY,CAAZ,EAAetK,YAAY,CAA9B,CAAgC,CAACA,YAAY,CAAZ,CAAe,IAAI+S,eAAc,CAAC/S,YAAYA,WAAb,CAAyBsK,UAAUA,SAAnC,CAAlB,CAAgE,MAAOyI,cAAP,CAAsB;AAC3M,QAAS5L,aAAT,CAAsB6D,KAAtB,CAA4BgI,IAA5B,CAAiCzQ,KAAjC,CAAuC,CAAC,GAAGyI,QAAQnM,SAAX,CAAqB,CAAC,IAAI,GAAIgC,GAAE,CAAV,CAAYA,EAAEmK,MAAMzD,MAApB,CAA2B1G,GAAG,CAA9B,CAAgC,CAAC,GAAGmK,MAAMnK,CAAN,EAASmS,IAAT,IAAiBzQ,KAApB,CAA0B,CAAC,MAAO1B,EAAP,CAAU,CAAC,CAAC,OAAM,CAAC,CAAP,CAAU;QACxI,QAAS0R,uBAAT,CAAgCvH,KAAhC,CAAsCiI,eAAtC,CAAsD,CAAC,MAAOX,IAAG,SAAS3Q,OAAT,CAAiBuR,MAAjB,CAAwB,CAAC,GAAIC,eAAcC,QAAQpI,KAAR,CAAc,SAAS9J,IAAT,CAAc,CAAC,MAAOmS,oBAAmBnS,IAAnB,CAAwB+R,eAAxB,CAAP,CAAiD,CAA9E,CAAlB,CAAkGtR,QAAQwR,aAAR,EAAwB,CAAtJ,CAAP,CAAgK;AAC/N,QAASE,mBAAT,CAA4BnS,IAA5B,CAAiCoS,MAAjC,CAAwC,CAAC,GAAItI,OAAM,EAAV,CAAa/P,QAAQkU,OAAR,CAAgBmE,MAAhB,CAAuB,SAASC,KAAT,CAAe,CAACvI,MAAM5P,IAAN,CAAW8F,KAAKqS,KAAL,CAAX,EAAyB,CAAhE,EAAkE,MAAOvI,MAAP,CAAc;AACtI,QAASoI,QAAT,CAAiBpI,KAAjB,CAAuBwI,CAAvB,CAAyB,CAAC,GAAIF,QAAO,EAAX,CAActI,MAAMmE,OAAN,CAAc,SAASsE,CAAT,CAAW,CAAC,GAAIF,OAAM9M,KAAKI,SAAL,CAAe2M,EAAEC,CAAF,CAAf,CAAV,CAA+BH,OAAOC,KAAP,EAAcD,OAAOC,KAAP,GAAe,EAA7B,CAAgCD,OAAOC,KAAP,EAAcnY,IAAd,CAAmBqY,CAAnB,EAAuB,CAAhH,EAAkH,MAAOC,QAAOC,IAAP,CAAYL,MAAZ,EAAoBM,GAApB,CAAwB,SAASL,KAAT,CAAe,CAAC,MAAOD,QAAOC,KAAP,CAAP,CAAsB,CAA9D,CAAP,CAAwE,SAASf,iBAAT,CAA0BI,MAA1B,CAAiCiB,SAAjC,CAA2CC,SAA3C,CAAqD,CAAC,OAAOD,UAAUE,WAAV,EAAP,EAAgC,IAAI,OAAJ,CAAY,GAAGD,SAAH,CAAa,MAAOlB,QAAOoB,MAAP,CAAc,CAAd,EAAiBD,WAAjB,GAA+BnB,OAAOjH,KAAP,CAAa,CAAb,CAAtC,CAAsD,GAAG,CAACmI,SAAJ,CAAc,MAAOlB,QAAOmB,WAAP,EAAP,CAA4B,MAAM,IAAI,OAAJ,CAAY,GAAGD,SAAH,CAAa,MAAOlB,QAAOoB,MAAP,CAAc,CAAd,EAAiBC,WAAjB,GAA+BrB,OAAOjH,KAAP,CAAa,CAAb,CAAtC,CAAsD,GAAG,CAACmI,SAAJ,CAAc,MAAOlB,QAAOqB,WAAP,EAAP,CAA4B,MAAM,QAAQ,MAAOrB,QAAOmB,WAAP,EAAP,CAAtS,CAAoU,SAASpB,kBAAT,CAA2BuB,eAA3B,CAA2C,CAAC,GAAI1F,MAAK,GAAInN,KAAJ,CAAS6S,eAAT,CAAT,CAAmCC,IAAI3F,KAAK4F,MAAL,EAAvC,CAAqD5I,KAAKgD,KAAK6F,OAAL,GAAeF,GAAf,EAAoBA,MAAM,CAAN,CAAQ,CAAR,CAAU,CAA9B,CAA1D,CAA2FjF,KAAK,GAAI7N,KAAJ,CAAS6S,eAAT,CAAhG,CAA0HI,MAAM,GAAIjT,KAAJ,CAAS6N,KAAKqF,OAAL,CAAa/I,IAAb,CAAT,CAAhI,CAA6J,MAAOJ,QAAOkJ,MAAMzE,WAAN,EAAP,EAA4B2E,KAA5B,CAAkC,KAAlC,CAAP,CAAiD;AACt1B,QAAS/T,qBAAT,CAA8BvD,UAA9B,CAAyC,CAAC,GAAIqC,mBAAkB,EAAtB,CAAyB,GAAGrC,aAAa,WAAb,EAA0BA,aAAa,QAA1C,CAAmD,CAACqC,kBAAkBmD,MAAlB,CAAyB,CAAC,CAACqF,EAAE,EAAH,CAAM0M,EAAE,KAAR,CAAD,CAAgB,CAAC1M,EAAE,KAAH,CAAS0M,EAAE,SAAX,CAAhB,CAAsC,CAAC1M,EAAE,IAAH,CAAQ0M,EAAE,WAAV,CAAtC,CAAzB,CAAuFlV,kBAAkBmV,UAAlB,CAA6B,OAA7B,CAAqC,GAAGxX,aAAa,WAAb,EAA0BA,aAAa,OAA1C,CAAkD,CAACqC,kBAAkBsD,MAAlB,CAAyB,CAAC,CAACkF,EAAE,EAAH,CAAM0M,EAAE,KAAR,CAAD,CAAgB,CAAC1M,EAAE,KAAH,CAAS0M,EAAE,SAAX,CAAhB,CAAsC,CAAC1M,EAAE,IAAH,CAAQ0M,EAAE,SAAV,CAAtC,CAAzB,CAAqFlV,kBAAkBsI,WAAlB,CAA8B,CAAC,CAACE,EAAE,OAAH,CAAW0M,EAAE,OAAb,CAAD,CAAuB,CAAC1M,EAAE,UAAH,CAAc0M,EAAE,UAAhB,CAAvB,CAAmD,CAAC1M,EAAE,OAAH,CAAW0M,EAAE,YAAb,CAAnD,CAA8E,CAAC1M,EAAE,KAAH,CAAS0M,EAAE,UAAX,CAA9E,CAAqG,CAAC1M,EAAE,CAAC,QAAD,CAAU,cAAV,CAAH,CAA6B0M,EAAE,QAA/B,CAArG,CAA8I,CAAC1M,EAAE,QAAH,CAAY0M,EAAE,QAAd,CAA9I,CAA9B,CAAqMlV,kBAAkBuI,UAAlB,CAA6BmF,QAAQ9F,YAAR,CAAqB5H,kBAAkBsI,WAAvC,CAAmD,GAAnD,CAAuD,QAAvD,CAA7B,CAA8FtI,kBAAkBoV,KAAlB,CAAwB,CAAC,CAAC5M,EAAE,EAAH,CAAM0M,EAAE,KAAR,CAAD,CAAgB,CAAC1M,EAAE,KAAH,CAAS0M,EAAE,QAAX,CAAhB,CAAqC,CAAC1M,EAAE,IAAH,CAAQ0M,EAAE,MAAV,CAArC,CAAxB,CAAgFlV,kBAAkBqV,SAAlB,CAA4B,MAA5B,CAAmCrV,kBAAkBiQ,SAAlB,CAA4B,CAAC,CAACzH,EAAE,EAAH,CAAM0M,EAAE,KAAR,CAAD,CAAgB,CAAC1M,EAAE,KAAH,CAAS0M,EAAE,iBAAX,CAAhB,CAA8C,CAAC1M,EAAE,IAAH,CAAQ0M,EAAE,aAAV,CAA9C,CAA5B,CAAoGlV,kBAAkBsV,UAAlB,CAA6B,YAA7B,CAA2C,CAA7qB,IAAkrB,IAAG3X,aAAa,WAAhB,CAA4B,CAACqC,kBAAkBsI,WAAlB,CAA8B,CAAC,CAACE,EAAE,OAAH,CAAW0M,EAAE,OAAb,CAAD,CAAuB,CAAC1M,EAAE,UAAH,CAAc0M,EAAE,UAAhB,CAAvB,CAAmD,CAAC1M,EAAE,SAAH,CAAa0M,EAAE,SAAf,CAAnD,CAA6E,CAAC1M,EAAE,OAAH,CAAW0M,EAAE,YAAb,CAA7E,CAAwG,CAAC1M,EAAE,KAAH,CAAS0M,EAAE,UAAX,CAAxG,CAA+H,CAAC1M,EAAE,CAAC,QAAD,CAAU,cAAV,CAAH,CAA6B0M,EAAE,QAA/B,CAA/H,CAAwK,CAAC1M,EAAE,QAAH,CAAY0M,EAAE,QAAd,CAAxK,CAA9B,CAA+NlV,kBAAkBuI,UAAlB,CAA6BmF,QAAQ9F,YAAR,CAAqB5H,kBAAkBsI,WAAvC,CAAmD,GAAnD,CAAuD,QAAvD,CAA7B,CAA8FtI,kBAAkBoV,KAAlB,CAAwB,CAAC,CAAC5M,EAAE,EAAH,CAAM0M,EAAE,KAAR,CAAD,CAAgB,CAAC1M,EAAE,KAAH,CAAS0M,EAAE,QAAX,CAAhB,CAAqC,CAAC1M,EAAE,IAAH,CAAQ0M,EAAE,UAAV,CAArC,CAAxB,CAAoFlV,kBAAkBqV,SAAlB,CAA4B,UAA5B,CAAuCrV,kBAAkBiQ,SAAlB,CAA4B,CAAC,CAACzH,EAAE,EAAH,CAAM0M,EAAE,KAAR,CAAD,CAAgB,CAAC1M,EAAE,KAAH,CAAS0M,EAAE,gBAAX,CAAhB,CAA6C,CAAC1M,EAAE,IAAH,CAAQ0M,EAAE,YAAV,CAA7C,CAA5B,CAAkGlV,kBAAkBsV,UAAlB,CAA6B,WAA7B,CAA0C,CAAC,CAAp8C,IAAw8C,CAAC,GAAG3X,aAAa,WAAhB,CAA4B,CAACqC,kBAAkBsI,WAAlB,CAA8B,CAAC,CAACE,EAAE,MAAH,CAAU0M,EAAE,MAAZ,CAAD,CAAqB,CAAC1M,EAAE,aAAH,CAAiB0M,EAAE,OAAnB,CAArB,CAAiD,CAAC1M,EAAE,aAAH,CAAiB0M,EAAE,OAAnB,CAAjD,CAA6E,CAAC1M,EAAE,OAAH,CAAW0M,EAAE,OAAb,CAA7E,CAA9B,CAAkIlV,kBAAkBoV,KAAlB,CAAwB,CAAC,CAAC5M,EAAE,EAAH,CAAM0M,EAAE,yBAAR,CAAD,CAAoC,CAAC1M,EAAE,MAAH,CAAU0M,EAAE,MAAZ,CAApC,CAAwD,CAAC1M,EAAE,OAAH,CAAW0M,EAAE,YAAb,CAAxD,CAAmF,CAAC1M,EAAE,OAAH,CAAW0M,EAAE,YAAb,CAAnF,CAA8G,CAAC1M,EAAE,MAAH,CAAU0M,EAAE,MAAZ,CAA9G,CAAxB,CAA4J,CAA3T,IAAgU,IAAGvX,aAAa,QAAhB,CAAyB,CAACqC,kBAAkBsI,WAAlB,CAA8B,CAAC,CAACE,EAAE,MAAH,CAAU0M,EAAE,MAAZ,CAAD,CAA9B,CAAoDlV,kBAAkBoV,KAAlB,CAAwB,CAAC,CAAC5M,EAAE,EAAH,CAAM0M,EAAE,KAAR,CAAD,CAAgB,CAAC1M,EAAE,OAAH,CAAW0M,EAAE,OAAb,CAAhB,CAAsC,CAAC1M,EAAE,OAAH,CAAW0M,EAAE,OAAb,CAAtC,CAA4D,CAAC1M,EAAE,WAAH,CAAe0M,EAAE,WAAjB,CAA5D,CAAxB,CAAmHlV,kBAAkBqV,SAAlB,CAA4B,MAA5B,CAAoC,mBAAkBF,UAAlB,CAA6B,MAA7B,CAAoCnV,kBAAkBuI,UAAlB,CAA6BmF,QAAQ9F,YAAR,CAAqB5H,kBAAkBsI,WAAvC,CAAmD,GAAnD,CAAuD,MAAvD,CAA7B,CAA6F;AAClrE,MAAOtI,kBAAP,CAA0B,SAASiN,qBAAT,CAA8BsI,QAA9B,CAAuC5Q,QAAvC,CAAgD,CAAC,GAAG4Q,SAASvN,MAAT,CAAgB,CAAnB,CAAqB,CAAC,GAAI1G,GAAE,CAAN,CAAQkU,aAAa,KAArB,CAA2B,MAAMlU,EAAEqD,SAASqD,MAAjB,CAAwB,CAAC,IAAI,GAAIyN,GAAE,CAAV,CAAYA,EAAEF,SAASvN,MAAvB,CAA8ByN,GAA9B,CAAkC,CAAC,GAAGF,SAASE,CAAT,EAAYxQ,IAAZ,GAAmBN,SAASrD,CAAT,EAAY2D,IAAlC,CAAuC,CAACuQ,aAAa,IAAb,CAAmB,CAAC;AACpP,GAAGA,eAAe,KAAlB,CAAwB,CAACD,SAAS1Z,IAAT,CAAc8I,SAASrD,CAAT,CAAd,EAA4B,KAAIkU,aAAa,KAAb,CAAoB;AAC7E,MAAOD,SAAP,CAAiB,CAF0D,IAEtD,CAAC;AACtB,MAAO5Q,SAAP,CAAiB,CAAC;AAClB,QAASvB,gBAAT,CAAyB6G,KAAzB,CAA+B,CAAC,GAAIlK,YAAW,KAAf,CAAqBrE,QAAQkU,OAAR,CAAgB3F,KAAhB,CAAsB,SAAStI,IAAT,CAAc,CAAC,GAAGA,KAAKuD,IAAL,CAAU8C,MAAV,GAAmB,CAAtB,CAAwB,CAACjI,WAAW,IAAX,CAAiB,CAAC,CAAhF,EAAkF,MAAOA,WAAP,CAAmB,SAASI,gBAAT,CAAyBxC,UAAzB,CAAoC,CAAC,GAAIuC,cAAa,EAAjB,CAAoBwV,UAAU,CAAC,CAAClZ,KAAK,OAAN,CAAD,CAAgB,CAACA,KAAK,OAAN,CAAhB,CAA+B,CAACA,KAAK,WAAN,CAA/B,CAA9B,CAAiF4S,QAAQ,CAAC,CAACpI,OAAO,IAAR,CAAa/B,KAAK,QAAlB,CAAD,CAA6B,CAAC+B,OAAO,IAAR,CAAa/B,KAAK,QAAlB,CAA7B,CAAyD,CAAC+B,OAAO,IAAR,CAAa/B,KAAK,QAAlB,CAAzD,CAAqF,CAAC+B,OAAO,IAAR,CAAa/B,KAAK,MAAlB,CAArF,CAAzF,CAAyMyN,OAAO,CAAC,CAAC1L,OAAO,IAAR,CAAa/B,KAAK,SAAlB,CAAD,CAA8B,CAAC+B,OAAO,IAAR,CAAa/B,KAAK,UAAlB,CAA9B,CAA4D,CAAC+B,OAAO,IAAR,CAAa/B,KAAK,OAAlB,CAA5D,CAAuF,CAAC+B,OAAO,IAAR,CAAa/B,KAAK,OAAlB,CAAvF,CAAkH,CAAC+B,OAAO,IAAR,CAAa/B,KAAK,KAAlB,CAAlH,CAA2I,CAAC+B,OAAO,IAAR,CAAa/B,KAAK,MAAlB,CAA3I,CAAqK,CAAC+B,OAAO,IAAR,CAAa/B,KAAK,MAAlB,CAArK,CAA+L,CAAC+B,OAAO,IAAR,CAAa/B,KAAK,QAAlB,CAA/L,CAA2N,CAAC+B,OAAO,IAAR,CAAa/B,KAAK,WAAlB,CAA3N,CAA0P,CAAC+B,OAAO,IAAR,CAAa/B,KAAK,SAAlB,CAA1P,CAAuR,CAAC+B,OAAO,IAAR,CAAa/B,KAAK,UAAlB,CAAvR,CAAqT,CAAC+B,OAAO,IAAR,CAAa/B,KAAK,UAAlB,CAArT,CAAhN,CAAoiB0Q,WAAW,CAAC,CAACnZ,KAAK,OAAN,CAAD,CAAgB,CAACA,KAAK,MAAN,CAAhB,CAA8B,CAACA,KAAK,MAAN,CAA9B,CAA4C,CAACA,KAAK,OAAN,CAA5C,CAA/iB,CAA2mBoZ,KAAK,CAAC,CAACpZ,KAAK,KAAN,CAAD,CAAc,CAACA,KAAK,QAAN,CAAd,CAA8B,CAACA,KAAK,SAAN,CAA9B,CAA+C,CAACA,KAAK,WAAN,CAA/C,CAAkE,CAACA,KAAK,UAAN,CAAlE,CAAoF,CAACA,KAAK,QAAN,CAApF,CAAoG,CAACA,KAAK,UAAN,CAApG,CAAsH,CAACA,KAAK,QAAN,CAAtH,CAAhnB,CAAuvBqZ,iBAAiB,CAAC,CAACrZ,KAAK,SAAN,CAAD,CAAkB,CAACA,KAAK,SAAN,CAAlB,CAAmC,CAACA,KAAK,QAAN,CAAnC,CAAmD,CAACA,KAAK,MAAN,CAAnD,CAAxwB,CAA00B0D,aAAa,CAACwS,OAAOA,MAAR,CAAetD,QAAQA,OAAvB,CAA+BuG,WAAWA,UAA1C,CAAqDC,KAAKA,IAA1D,CAA+DC,iBAAiBA,gBAAhF,CAAiGH,UAAUA,SAA3G,CAAb,CAAmI,MAAOxV,aAAP,CAAqB,CAAC,CAAC,CAb37B,IAa+7B,CAAC,UAAU,CAAC,aAAaxE,QAAQC,MAAR,CAAe,YAAf,EAA6BoR,OAA7B,CAAqC,YAArC,CAAkD7E,UAAlD,EAA8DA,WAAWrK,OAAX,CAAmB,CAAC,WAAD,CAAnB,CAAiC,QAASqK,WAAT,CAAoBsF,SAApB,CAA8B,CAAC,MAAOA,WAAU,uBAAV,CAAkC,EAAlC,CAAqC,CAAC1M,OAAO,CAAC2M,OAAO,KAAR,CAAR,CAArC,CAAP,CAAsE,CAAC,CAA9N,IAAkO,aAAa;AACt5C/R,QAAQC,MAAR,CAAe,YAAf,EAA6BM,GAA7B,CAAiC,CAAC,OAAD,CAAS,SAASmB,KAAT,CAAe,CAAC;AAC1DA,MAAMC,WAAN,CAAkB,QAAlB,CAA2B,YAA3B,CAAwC,YAAxC,CAAqD,UAArD,CAAgE,uBAAhE,EAAyFD,MAAME,cAAN,CAAqB,QAArB,CAA8B,YAA9B,CAA2C,iBAA3C,CAA6D,YAA7D,EAA2EF,MAAME,cAAN,CAAqB,QAArB,CAA8B,YAA9B,CAA2C,eAA3C,CAA2D,mBAA3D,EAAiF,CADpN,CAAjC,EACwP,aAAa;AACrQ5B,QAAQC,MAAR,CAAe,YAAf,EAA6BG,MAA7B,CAAoC,CAAC,gBAAD,CAAkB,SAASyB,cAAT,CAAwB,CAAC;AAC/EA,eAAeC,KAAf,CAAqB,gBAArB,CAAsC,CAACC,IAAI,aAAL,CAAmBC,YAAY,2DAA/B,CAAtC,EAAmIF,KAAnI,CAAyI,iBAAzI,CAA2J,CAACC,IAAI,oBAAL,CAA0BC,YAAY,4DAAtC,CAA3J,EAAgQF,KAAhQ,CAAsQ,eAAtQ,CAAsR,CAACC,IAAI,0BAAL,CAAgCC,YAAY,0DAA5C,CAAtR,EAA+XF,KAA/X,CAAqY,eAArY,CAAqZ,CAACC,IAAI,+BAAL,CAAqCC,YAAY,0DAAjD,CAArZ,EAAogB,CADhe,CAApC,EACugB,CAAC,UAAU,CAAC,aAAahC,QAAQC,MAAR,CAAe,YAAf,EAA6BgC,UAA7B,CAAwC,sBAAxC,CAA+DmY,oBAA/D,EAAqFA,qBAAqBjY,OAArB,CAA6B,CAAC,QAAD,CAAU,cAAV,CAAyB,WAAzB,CAAqC,gBAArC,CAAsD,YAAtD,CAAmE,YAAnE,CAAgF,YAAhF,CAA6F,YAA7F,CAA0G,MAA1G,CAAiH,SAAjH,CAA2H,aAA3H,CAAyI,kBAAzI,CAA4J,qBAA5J,CAAkL,gBAAlL,CAAmM,YAAnM,CAA7B,CAA8O,QAASiY,qBAAT,CAA8BhY,MAA9B,CAAqCC,YAArC,CAAkDC,SAAlD,CAA4D5B,cAA5D,CAA2E2Z,UAA3E,CAAsF9X,UAAtF,CAAiGC,UAAjG,CAA4GC,UAA5G,CAAuHC,IAAvH,CAA4HC,OAA5H,CAAoIE,WAApI,CAAgJyX,gBAAhJ,CAAiKxX,mBAAjK,CAAqLE,cAArL,CAAoMC,UAApM,CAA+M,CAAC,GAAIE,MAAK,IAAT,CAAcA,KAAK4E,MAAL,CAAYA,MAAZ,CAAmB5E,KAAKC,cAAL,CAAoB1C,cAApB,CAAmCyC,KAAK+E,MAAL,CAAYA,MAAZ,CAAmB/E,KAAKgF,OAAL,CAAaA,OAAb,CAAqBhF,KAAKE,YAAL,CAAkB,CAAC6K,OAAO,MAAR,CAAe;AAChsC3K,aAAa,CADoqC,CAClqCE,SAAS,EADypC,CACtpCC,YAAY,KAD0oC,CACpoCQ,WAAW,EADynC,CACtnCwV,MAAM,EADgnC,CAC7mCa,aAAa,EADgmC,CAC7lCpW,cAAc,EAD+kC,CAC5kCC,YAAY,KADgkC,CAC1jCC,WAAW,KAD+iC,CACziCC,kBAAkB,EADuhC,CACphCC,SAAS,EAD2gC,CACxgCiW,YAAY,EAD4/B,CACz/BC,OAAO,EADk/B,CAAlB,CAC59BtX,KAAKkF,IAAL,CAAUA,IAAV,CAAelF,KAAKuX,SAAL,CAAeA,SAAf,CAAyBvX,KAAKmF,SAAL,CAAeA,SAAf,CAAyBnF,KAAKyB,OAAL,CAAaA,OAAb,CAAqBzB,KAAKwX,YAAL,CAAkBA,YAAlB,CAA+BxX,KAAKyX,YAAL,CAAkBA,YAAlB,CAA+BzX,KAAKoF,OAAL,CAAa,EAAb,CAAgB;AACvWpF,KAAK0X,YAAL,CAAkB,CAAlB,CAAoB;AACpB1X,KAAK2B,UAAL,CAAgB,CAACC,YAAY,CAAb,CAAeC,SAAS,EAAxB,CAAhB,CAA4C7B,KAAK8B,MAAL,CAAYA,MAAZ,CAAmB9B,KAAKuF,SAAL,CAAeA,SAAf,CAAyBvF,KAAK8F,QAAL,CAAc,EAAd,CAAiB;AACzG9F,KAAK+F,cAAL,CAAoB,EAApB,CAAuB/F,KAAKgC,kBAAL,CAAwBA,kBAAxB,CAA2ChC,KAAKiC,MAAL,CAAYA,MAAZ,CAAmBjC,KAAKgG,UAAL,CAAgBA,UAAhB,CAA2BhG,KAAKkC,QAAL,CAAc,EAAd,CAAiB;AACjIlC,KAAKoC,eAAL,CAAqB,WAArB,CAAiC;AACjC,QAASJ,mBAAT,CAA4BpD,GAA5B,CAAgC,CAAC,MAAOW,MAAKyC,kBAAL,CAAwBpD,GAAxB,CAAP,CAAqC;AACtE,QAASgG,OAAT,EAAiB,CAAC9E,WAAW8E,MAAX,CAAkB5E,KAAK8F,QAAvB,CAAgC9F,KAAKmG,MAArC,EAA6CnG,KAAKmG,MAAL,CAAY,EAAZ,CAAgB;AAC/E,QAASnB,QAAT,CAAiBoB,IAAjB,CAAsB,CAACtG,WAAWkF,OAAX,CAAmBhF,KAAK8F,QAAxB,CAAiCM,IAAjC,EAAwC;AAC/D,QAASb,UAAT,CAAmBa,IAAnB,CAAwB,CAACtG,WAAWkF,OAAX,CAAmBhF,KAAK2X,SAAL,CAAetR,IAAlC,CAAuCD,IAAvC,EAA8C;AACvE,QAASrB,OAAT,EAAiB,CAAC;AAClB,GAAI6S,WAAU,GAAIV,WAAJ,EAAd,CAA+B;AAC/BU,UAAU,GAAIV,WAAJ,CAAe,CAACvZ,KAAKqC,KAAKrC,IAAX,CAAgBiJ,MAAM5G,KAAKoF,OAA3B,CAAmCuI,MAAM3N,KAAK2N,KAAL,GAAalN,SAAb,EAAwBT,KAAK2N,KAAL,GAAa,IAArC,CAA0C3N,KAAK2N,KAAL,CAAW9P,GAArD,CAAyDmC,KAAK2N,KAAvG,CAA6G5G,MAAM/G,KAAK+G,KAAL,GAAatG,SAAb,EAAwBT,KAAK+G,KAAL,GAAa,IAArC,CAA0C/G,KAAK+G,KAAL,CAAWlJ,GAArD,CAAyDmC,KAAK+G,KAAjL,CAAuL8Q,MAAM7X,KAAK6X,KAAlM,CAAwMxR,KAAKrG,KAAK8F,QAAlN,CAA2NlI,KAAKoC,KAAKpC,IAArO,CAAf,CAAV,CAAqQ;AACrQga,UAAU5Q,KAAV,CAAgB,SAASC,QAAT,CAAkB,CAAC9H,UAAUyD,IAAV,CAAe,cAAcqE,SAASpJ,GAAtC,EAA2C8B,oBAAoBuH,OAApB,CAA4B,QAA5B,CAAqC,kCAArC,EAA0E,CAAxJ,CAAyJ,SAASC,aAAT,CAAuB,CAACnH,KAAKoH,KAAL,CAAWD,cAAc3D,IAAd,CAAmB6D,OAA9B,CAAsC1H,oBAAoByH,KAApB,CAA0B,QAA1B,CAAmCD,cAAc3D,IAAd,CAAmB6D,OAAtD,EAAgE,CAAvR,EAA0R;AAC1R,QAASvF,OAAT,CAAgB8V,SAAhB,CAA0B,CAAC;AAC3BjY,oBAAoB4C,YAApB,CAAiC,UAAU,CAAC,GAAGqV,SAAH,CAAa,CAACA,UAAUpV,OAAV,GAAoB,IAAI,GAAIC,EAAR,GAAazC,MAAK8X,UAAlB,CAA6B,CAAC,GAAG9X,KAAK8X,UAAL,CAAgBrV,CAAhB,IAAqBmV,SAAxB,CAAkC,CAAC5X,KAAK8X,UAAL,CAAgBnV,MAAhB,CAAuBF,CAAvB,CAAyB,CAAzB,EAA6B,CAAC,CAAC,CAAlI,IAAsI,CAACzC,KAAK4X,SAAL,CAAepV,OAAf,CAAuB,UAAU,CAACrD,UAAUyD,IAAV,CAAe,YAAf,EAA8B,CAAhE,EAAmE,qBAAoBC,OAApB,CAA4B,UAA5B,CAAuC,qCAAvC,EAA+E,CAArU,EAAwU;AACxU,QAASZ,OAAT,EAAiB,CAAC,GAAI2V,WAAU5X,KAAK4X,SAAnB,CAA6B;AAC/C,GAAG5X,KAAK4X,SAAL,CAAe7Q,KAAf,GAAuB,IAAvB,EAA6B/G,KAAK4X,SAAL,CAAe7Q,KAAf,GAAuBtG,SAAvD,CAAiE,CAACmX,UAAU7Q,KAAV,CAAgB/G,KAAK4X,SAAL,CAAe7Q,KAAf,CAAqBlJ,GAArC,CAA0C;AAC5G,GAAGmC,KAAK4X,SAAL,CAAejK,KAAf,GAAuB,IAAvB,EAA6B3N,KAAK4X,SAAL,CAAejK,KAAf,GAAuBlN,SAAvD,CAAiE,CAACmX,UAAUjK,KAAV,CAAgB3N,KAAK4X,SAAL,CAAejK,KAAf,CAAqB9P,GAArC,CAA0C,IAAGmC,KAAK8F,QAAL,GAAgBrF,SAAnB,CAA6B,CAACmX,UAAUvR,IAAV,CAAe3G,YAAY0O,oBAAZ,CAAiCwJ,UAAUvR,IAA3C,CAAgDrG,KAAK8F,QAArD,CAAf,CAA+E,IAAG9F,KAAKoF,OAAL,GAAe3E,SAAf,EAA0BT,KAAKoF,OAAL,GAAe,IAAzC,EAA+CpF,KAAKoF,OAAL,GAAe,EAAjE,CAAoE,CAACwS,UAAUhR,KAAV,CAAgB5G,KAAKoF,OAArB,CAA8B,WAAUoJ,OAAV,CAAkB,UAAU,CAACrP,UAAUyD,IAAV,CAAe,YAAf,EAA6BjD,oBAAoBuH,OAApB,CAA4B,QAA5B,CAAqC,kCAArC,EAA0E,CAApI,CAAqI,SAASC,aAAT,CAAuB,CAACnH,KAAKoH,KAAL,CAAWD,cAAc3D,IAAd,CAAmB6D,OAA9B,CAAsC1H,oBAAoByH,KAApB,CAA0B,QAA1B,CAAmCD,cAAc3D,IAAd,CAAmB6D,OAAtD,EAAgE,CAAnQ,EAAsQ;AAClkB,QAASnC,KAAT,EAAe,CAAClF,KAAKE,YAAL,CAAkBiB,iBAAlB,CAAoCzB,YAAY2C,oBAAZ,CAAiCrC,KAAKoC,eAAtC,CAApC,CAA2FvC,eAAeuE,OAAf,CAAuB,YAAvB,CAAoC8S,WAAW7S,KAAX,GAAmBJ,QAAnB,CAA4BN,IAA5B,CAAiC,SAASD,MAAT,CAAgB,CAAC1D,KAAK8X,UAAL,CAAgBpU,MAAhB,CAAuB1D,KAAKE,YAAL,CAAkBgB,UAAlB,CAA6BxB,YAAY6E,eAAZ,CAA4Bb,MAA5B,CAA7B,CAAiE1D,KAAKE,YAAL,CAAkBkB,QAAlB,CAA2B+V,iBAAiBY,kBAAjB,CAAoCrU,MAApC,CAA3B,CAAuE1D,KAAKE,YAAL,CAAkBmX,WAAlB,CAA8BF,iBAAiBa,gBAAjB,CAAkCtU,MAAlC,CAA9B,CAAwE1D,KAAKE,YAAL,CAAkBoX,MAAlB,CAAyBH,iBAAiBc,eAAjB,CAAiCvU,MAAjC,CAAzB,CAAkEE,QAAQC,GAAR,CAAY,mBAAZ,CAAgC7D,KAAK8X,UAArC,CAAgD9X,KAAKE,YAArD,EAAoE,CAA/Z,CAApC,EAAuc;AACljB,QAASuB,QAAT,EAAkB,CAACzB,KAAK4X,SAAL,CAAeV,WAAWnT,GAAX,CAAe,CAACmU,YAAYhZ,aAAagZ,WAA1B,CAAf,CAAf,CAAuE;AAC1F,QAASX,UAAT,EAAoB,CAACvX,KAAK0C,UAAL,CAAgBtD,WAAWiF,KAAX,EAAhB,CAAoC;AACzD,QAASmT,aAAT,CAAsB7J,KAAtB,CAA4B,CAAC3N,KAAKsC,SAAL,CAAelD,WAAW2E,GAAX,CAAe,CAACC,YAAY2J,KAAb,CAAf,CAAf,CAAoD;AACjF,QAASxI,UAAT,EAAoB,CAACnF,KAAKsH,UAAL,CAAgBjI,WAAWgF,KAAX,EAAhB,CAAoC;AACzD,QAASoT,aAAT,CAAsB1Q,KAAtB,CAA4B,CAAC/G,KAAK2X,SAAL,CAAetY,WAAW0E,GAAX,CAAe,CAACoU,YAAYpR,KAAb,CAAf,CAAf,CAAoD;AACjF,QAASf,WAAT,EAAqB,CAAChG,KAAKoF,OAAL,CAAa,2BAA2BpF,KAAKuH,MAAL,CAAY5J,IAApD,CAAyD2B,WAAWkI,eAAX,CAA2BxH,KAAKuH,MAAhC,CAAuC,sBAAvC,EAAgE,CAAC,CAAC,CAzBsX,IAyBlX,CAAC,UAAU,CAAC,aAAa1K,QAAQC,MAAR,CAAe,YAAf,EAA6B8M,SAA7B,CAAuC,eAAvC,CAAuDwO,aAAvD,EAAsE,QAASA,cAAT,EAAwB,CAAC,MAAO,UAASjO,KAAT,CAAenM,OAAf,CAAuBoM,KAAvB,CAA6B,CAAC,GAAIxL,KAAIwL,MAAMgO,aAAd,CAA4Bpa,QAAQkN,GAAR,CAAY,CAAC,mBAAmB,OAAOtM,GAAP,CAAW,GAA/B,CAAmC,kBAAkB,OAArD,CAA6D,oBAAoB,WAAjF,CAA6F,sBAAsB,QAAnH,CAAZ,EAA2I,CAA5M,CAA8M,CAAC,CAAvU,IAA2U,CAAC,UAAU,CAAC,aAAa/B,QAAQC,MAAR,CAAe,YAAf,EAA6B8M,SAA7B,CAAuC,gBAAvC,CAAwDyO,cAAxD,EAAwE,QAASA,eAAT,EAAyB,CAAC,MAAO,UAASlO,KAAT,CAAenM,OAAf,CAAuBoM,KAAvB,CAA6B,CAACpM,QAAQwM,IAAR,CAAa,OAAb,CAAqB,SAAS/M,KAAT,CAAe,CAAC;AACrqB0M,MAAMM,MAAN,CAAa,UAAU,CAACN,MAAMjK,YAAN,CAAmBa,UAAnB,CAA8B,EAA9B,CAAiCoJ,MAAMjK,YAAN,CAAmBoY,aAAnB,CAAiC,EAAjC,CAAoCnO,MAAMjK,YAAN,CAAmBc,aAAnB,CAAiC,EAAjC,CAAqC,CAAlI,EAAqI,CAD2f,EACxf,CADmd,CACjd,CAAC,CADqV,IACjV,CAAC,UAAU,CAAC,aAAanE,QAAQC,MAAR,CAAe,YAAf,EAA6B8M,SAA7B,CAAuC,iBAAvC,CAAyD2O,eAAzD,EAA0E,QAASA,gBAAT,EAA0B,CAAC,MAAM,CAACzO,SAAS,GAAV,CAAcI,KAAK,QAASA,KAAT,CAAcC,KAAd,CAAoBnM,OAApB,CAA4BoM,KAA5B,CAAkC,CAACpM,QAAQwM,IAAR,CAAa,OAAb,CAAqB,SAAS/M,KAAT,CAAe,CAAC0M,MAAMM,MAAN,CAAa,UAAU,CAAC,GAAIe,KAAIpB,MAAMmO,eAAd,CAA8B,GAAIlH,OAAMlH,MAAMjK,YAAN,CAAmBc,aAAnB,CAAiCyK,OAAjC,CAAyCD,GAAzC,CAAV,CAAwD;AAC5drB,MAAMjK,YAAN,CAAmBa,UAAnB,CAA8BoJ,MAAMjK,YAAN,CAAmBa,UAAnB,CAA8BgJ,OAA9B,CAAsCyB,IAAI,GAA1C,CAA8C,EAA9C,CAA9B,CAAgFrB,MAAMjK,YAAN,CAAmBc,aAAnB,CAAiC2B,MAAjC,CAAwC0O,KAAxC,CAA8C,CAA9C,EAAiD;AAChI,CAF6W,EAE1W,CAFqU,EAElU,CAF4Q,CAAN,CAEnQ,CAAC,CAFoI,IAEhI,CAAC,UAAU,CAAC,aAAaxU,QAAQC,MAAR,CAAe,YAAf,EAA6B8M,SAA7B,CAAuC,kBAAvC,CAA0D4O,gBAA1D,EAA4EA,iBAAiBxZ,OAAjB,CAAyB,CAAC,UAAD,CAAzB,CAAsC,QAASwZ,iBAAT,CAA0BC,QAA1B,CAAmC,CAAC,MAAM,CAAC3O,SAAS,GAAV,CAAcI,KAAK,QAASA,KAAT,CAAcC,KAAd,CAAoBnM,OAApB,CAA4B,CAACya,SAASC,OAAT,CAAiB,KAAjB,CAAuB1a,OAAvB,EAAiC,CAAjF,CAAN,CAA0F,CAAC,CAA1Q,IAA8Q,CAAC,UAAU,CAAC,aAAanB,QAAQC,MAAR,CAAe,YAAf,EAA6B8M,SAA7B,CAAuC,SAAvC,CAAiD5E,OAAjD,EAA0DA,QAAQhG,OAAR,CAAgB,CAAC,qBAAD,CAAhB,CAAwC,QAASgG,QAAT,CAAiBrF,mBAAjB,CAAqC,CAAC,MAAO,UAASwK,KAAT,CAAenM,OAAf,CAAuBoM,KAAvB,CAA6B,CAACpM,QAAQwM,IAAR,CAAa,OAAb,CAAqB,SAAS/M,KAAT,CAAe,CAAC,GAAI2I,MAAKgE,MAAMpF,OAAf,CAAuB;AAC/hBrF,oBAAoB4C,YAApB,CAAiC,UAAU,CAAC4H,MAAMM,MAAN,CAAa,UAAU,CAAC,GAAIkO,cAAaxO,MAAMrE,QAAvB,CAAgCqE,MAAMyO,OAAN,CAAc9S,QAAd,CAAuB,EAAvB,CAA0B;AAC9H;AACAjJ,QAAQkU,OAAR,CAAgB4H,YAAhB,CAA6B,SAASnN,GAAT,CAAa,CAAC,GAAGA,IAAIpF,IAAJ,GAAWA,IAAd,CAAmB,CAAC+D,MAAMyO,OAAN,CAAc9S,QAAd,CAAuB9I,IAAvB,CAA4BwO,GAA5B,EAAkC,CAAC,CAAlG,EAAqG,CAFzD,EAE2D7L,oBAAoBkD,OAApB,CAA4B,UAA5B,CAAuC,8BAAvC,EAAwE,CAF/K,EAEkL,CAHiT,EAG9S,CAHyQ,CAGvQ,CAAC,CAHqG,IAGjG,CAAC,UAAU,CAAC,aAAahG,QAAQC,MAAR,CAAe,YAAf,EAA6B8M,SAA7B,CAAuC,UAAvC,CAAkDiP,QAAlD,EAA4D,QAASA,SAAT,EAAmB,CAAC,MAAM,CAAC/O,SAAS,GAAV,CAAcI,KAAK,QAASA,KAAT,CAAcC,KAAd,CAAoBnM,OAApB,CAA4BoM,KAA5B,CAAkC,CAACpM,QAAQwM,IAAR,CAAa,kBAAb,CAAgC,SAAS/M,KAAT,CAAe,CAAC,GAAGA,MAAMqb,KAAN,GAAc,EAAjB,CAAoB,CAAC3O,MAAMM,MAAN,CAAa,UAAU,CAACN,MAAM4O,KAAN,CAAY3O,MAAMyO,QAAlB,EAA6B,CAArD,EAAuDpb,MAAMK,cAAN,GAAwB,CAAC,CAArJ,EAAwJ,CAA9M,CAAN,CAAuN,CAAC,CAAjU,IAAqU,CAAC,UAAU,CAAC,aAAajB,QAAQC,MAAR,CAAe,YAAf,EAA6B8M,SAA7B,CAAuC,WAAvC,CAAmDrE,SAAnD,EAA8DA,UAAUvG,OAAV,CAAkB,CAAC,qBAAD,CAAlB,CAA0C,QAASuG,UAAT,CAAmB5F,mBAAnB,CAAuC,CAAC,MAAM,CAACmK,SAAS,GAAV,CAAcI,KAAK,QAASA,KAAT,CAAcC,KAAd,CAAoBnM,OAApB,CAA4BoM,KAA5B,CAAkC,CAACpM,QAAQwM,IAAR,CAAa,OAAb,CAAqB,SAAS/M,KAAT,CAAe,CAAC,GAAI+N,KAAIpB,MAAM7E,SAAd,CAAwB9C,CAAxB,CAA0BuW,WAAW7O,MAAM/H,eAA3C,CAA2D;AACt0BzC,oBAAoB4C,YAApB,CAAiC,UAAU,CAAC4H,MAAMM,MAAN,CAAa,UAAU,CAAC,GAAI4G,MAAJ,CAAU,GAAG2H,aAAa,WAAhB,CAA4B,CAAC,IAAIvW,EAAE,CAAN,CAAQA,EAAE0H,MAAMyN,SAAN,CAAgBvR,IAAhB,CAAqB8C,MAA/B,CAAsC1G,GAAtC,CAA0C,CAAC,GAAG0H,MAAMyN,SAAN,CAAgBvR,IAAhB,CAAqB5D,CAArB,EAAwB2D,IAAxB,GAA+BoF,GAAlC,CAAsC,CAAC6F,MAAM5O,CAAN,CAAS;AACrM,OAAMmW,OAAN,CAAchB,SAAd,CAAwBvR,IAAxB,CAA6B1D,MAA7B,CAAoC0O,KAApC,CAA0C,CAA1C,EAA8C,CAD+B,IAC1B,IAAG2H,aAAa,WAAhB,CAA4B,CAAC,IAAIvW,EAAE,CAAN,CAAQA,EAAE0H,MAAM7H,SAAN,CAAgB+D,IAAhB,CAAqB8C,MAA/B,CAAsC1G,GAAtC,CAA0C,CAAC,GAAG0H,MAAM7H,SAAN,CAAgB+D,IAAhB,CAAqB5D,CAArB,EAAwB2D,IAAxB,GAA+BoF,GAAlC,CAAsC,CAAC6F,MAAM5O,CAAN,CAAS;AAC3K,OAAMmW,OAAN,CAActW,SAAd,CAAwB+D,IAAxB,CAA6B1D,MAA7B,CAAoC0O,KAApC,CAA0C,CAA1C,EAA8C,CADK,IACA,IAAG2H,aAAa,WAAhB,CAA4B,CAAC,IAAIvW,EAAE,CAAN,CAAQA,EAAE0H,MAAMwN,SAAN,CAAgBtR,IAAhB,CAAqB8C,MAA/B,CAAsC1G,GAAtC,CAA0C,CAAC,GAAG0H,MAAMwN,SAAN,CAAgBtR,IAAhB,CAAqB5D,CAArB,EAAwB2D,IAAxB,GAA+BoF,GAAlC,CAAsC,CAAC6F,MAAM5O,CAAN,CAAS;AAC3K,OAAMmW,OAAN,CAAcjB,SAAd,CAAwBtR,IAAxB,CAA6B1D,MAA7B,CAAoC0O,KAApC,CAA0C,CAA1C,EAA8C;AAC9C,CAJ2C,EAIzC1R,oBAAoBkD,OAApB,CAA4B,UAA5B,CAAuC,8BAAvC,EAAwE,CAJ3E,EAI8E,CALwpB,EAKrpB,CAL+lB,CAAN,CAKtlB,CAAC,CAL4a,IAKxa,CAAC,UAAU,CAAC,aAAahG,QAAQC,MAAR,CAAe,YAAf,EAA6B8M,SAA7B,CAAuC,QAAvC,CAAgDqP,MAAhD,EAAwDA,OAAOja,OAAP,CAAe,CAAC,UAAD,CAAY,MAAZ,CAAf,CAAmC,QAASia,OAAT,CAAgBvR,QAAhB,CAAyBnI,IAAzB,CAA8B,CAAC,MAAM,CAACuK,SAAS,IAAV,CAAeC,QAAQ,IAAvB,CAA4BI,MAAM,CAAC+O,OAAO,IAAR,CAAaC,SAAS,IAAtB,CAA2BjZ,aAAa,IAAxC,CAAlC,CAAgFkZ,iBAAiB,IAAjG,CAAsGC,aAAa,kBAAnH,CAAsIxa,YAAY,2CAAlJ,CAA8LC,WAAW,QAASA,WAAT,CAAoBG,MAApB,CAA2B,CAAC,GAAIqa,MAAK,IAAT,CAAcC,KAAd,CAAoBC,UAApB,CAA+BF,KAAKG,YAAL,CAAkB,CAAC,CAAnB,CAAqB;AAC3gBH,KAAKI,KAAL,CAAWA,KAAX,CAAiBJ,KAAKK,SAAL,CAAeA,SAAf,CAAyBL,KAAKH,QAAL,CAAcG,KAAKH,QAAL,GAAgB1Y,SAAhB,CAA0B,IAA1B,CAA+B6Y,KAAKH,QAAlD,CAA2D;AACrGG,KAAKM,YAAL,CAAkB,KAAlB,CAAwBN,KAAKO,KAAL,CAAWA,KAAX,CAAiBP,KAAK/M,IAAL,CAAUA,IAAV,CAAe+M,KAAK9M,IAAL,CAAUA,IAAV,CAAe8M,KAAKQ,QAAL,CAAcR,KAAKJ,MAAL,GAAczY,SAAd,CAAwB,KAAxB,CAA8B,IAA5C,CAAiD;AACxH6Y,KAAKS,gBAAL,CAAsBA,gBAAtB,CAAuCT,KAAKtX,kBAAL,CAAwBA,kBAAxB,CAA2C;AAClF,QAASA,mBAAT,CAA4BpD,GAA5B,CAAgC,CAAC,MAAOW,MAAKyC,kBAAL,CAAwBpD,GAAxB,CAAP,CAAqC;AACtE,GAAG,CAAC0a,KAAKQ,QAAT,CAAkB,CAACR,KAAKJ,MAAL,CAAY,EAAZ,CAAe;AAClC,IAAI,GAAIzW,GAAE,CAAV,CAAYA,EAAE0G,MAAd,CAAqB1G,GAArB,CAAyB,CAAC6W,KAAKJ,MAAL,CAAYlc,IAAZ,CAAiB,CAACqU,MAAM5O,CAAP,CAAjB,EAA6B,CAAC,SAASkX,UAAT,CAAmBK,KAAnB,CAAyB,CAAC;AAClF,GAAGV,KAAKG,YAAL,GAAoBO,KAAvB,CAA6B,CAAC;AAC9B,GAAGA,QAAQ/a,OAAOgb,cAAP,CAAsB9Q,MAAjC,CAAwC,CAACmQ,KAAKG,YAAL,CAAkBO,KAAlB,CAAyB,CAAlE,IAAsE,CAACV,KAAKG,YAAL,CAAkB,CAAlB,CAAqB,CAAC,CAD7F,IACiG,CAAC,GAAGxa,OAAOgb,cAAP,CAAsBX,KAAKG,YAA3B,EAAyCS,MAA5C,CAAmD,CAAC;AACtJjb,OAAOgb,cAAP,CAAsBX,KAAKG,YAA3B,EAAyCS,MAAzC,CAAgD,KAAhD,CAAsDV,aAAc,CAD8B,IAC1B,CAAC;AACzEva,OAAOgb,cAAP,CAAsBX,KAAKG,YAA3B,EAAyCS,MAAzC,CAAgD,IAAhD,CAAqDxS,SAASyS,MAAT,CAAgBZ,KAAhB,EAAwB,CAAC,CAAC,SAAShN,KAAT,EAAe,CAAC,GAAG+M,KAAKG,YAAL,CAAkBxa,OAAOgb,cAAP,CAAsB9Q,MAAtB,CAA6B,CAAlD,CAAoD,CAACmQ,KAAKG,YAAL,EAAmB,CAAnB,CAAsB,CAA3E,IAA+E,CAACH,KAAKG,YAAL,CAAkB,CAAlB,CAAqB,CAAC,SAASjN,KAAT,EAAe,CAAC,GAAG8M,KAAKG,YAAL,CAAkB,CAArB,CAAuB,CAACH,KAAKG,YAAL,EAAmB,CAAnB,CAAsB,CAA9C,IAAkD,CAACH,KAAKG,YAAL,CAAkBxa,OAAOgb,cAAP,CAAsB9Q,MAAtB,CAA6B,CAA/C,CAAkD,CAAC,QAAOT,MAAP,CAAc,+BAAd,CAA8C,UAAU,CAAC;AACpX,GAAG4Q,KAAKG,YAAL,CAAkB,CAAC,CAAnB,EAAsBxa,OAAOgb,cAAP,CAAsB9Q,MAAtB,CAA6B,CAAtD,CAAwD,CAAClK,OAAOgb,cAAP,CAAsBlJ,OAAtB,CAA8B,SAASiJ,KAAT,CAAe,CAACA,MAAMI,OAAN,CAAc,KAAd,CAAoB;AAC3HJ,MAAME,MAAN,CAAa,KAAb,CAAmB;AAClB,CAFwD,EAEtDjb,OAAOgb,cAAP,CAAsBX,KAAKG,YAA3B,EAAyCW,OAAzC,CAAiD,IAAjD,CAAsD;AACxD,CAAC,CAJyT,EAIvTZ,WAAW,QAASa,UAAT,EAAoB,CAACd,MAAM7R,SAAS,UAAU,CAAC4R,KAAK/M,IAAL,GAAYgN,MAAM7R,SAAS8R,UAAT,CAAoBF,KAAKH,QAAzB,CAAN,CAA0C,CAA1E,CAA2EG,KAAKH,QAAhF,CAAN,CAAiG,CAAjI,CAAkIK,aAAava,OAAOzB,GAAP,CAAW,UAAX,CAAsB,UAAU,CAACkK,SAASyS,MAAT,CAAgBZ,KAAhB,EAAuB;AAC1M,CADkJ,EAChJ;AACH,QAASG,MAAT,EAAgB,CAAC;AACjB,GAAGza,OAAOgb,cAAP,CAAsBX,KAAKG,YAA3B,EAAyCS,MAAzC,GAAkD,IAArD,CAA0D,CAACxS,SAASyS,MAAT,CAAgBZ,KAAhB,EAAuB;AACjF,CAAC;AACF,QAASM,MAAT,EAAgB,CAAC;AACjB,GAAG5a,OAAOgb,cAAP,CAAsBX,KAAKG,YAA3B,EAAyCS,MAAzC,GAAkD,IAArD,CAA0D,CAACX,MAAM7R,SAAS8R,UAAT,CAAoBF,KAAKH,QAAzB,CAAN,CAAyC;AACnG,CAAC;AACF,QAASY,iBAAT,EAA2B,CAACT,KAAKM,YAAL,CAAkB,CAACN,KAAKM,YAAxB,CAAsC,CAAC,CAtB+K,CAsB9K1P,KAAK,QAASA,KAAT,CAAcC,KAAd,CAAoBmB,IAApB,CAAyBlB,KAAzB,CAA+BkQ,gBAA/B,CAAgD,CAACnQ,MAAMoQ,iBAAN,CAAwBjP,KAAK,CAAL,EAAQiP,iBAAR,CAA0B,CAAlD,CAAqD,CAtBmE,CAAN,CAsB1D,CAAC,CAtB1F,IAsB8F,CAAC,UAAU,CAAC,aAAa1d,QAAQC,MAAR,CAAe,YAAf,EAA6B4P,MAA7B,CAAoC,aAApC,CAAkD8N,WAAlD,EAA+D,QAASA,YAAT,EAAsB,CAAC,MAAO,UAAS5N,KAAT,CAAe2J,KAAf,CAAqB,CAAC,GAAG3J,QAAQnM,SAAX,CAAqB,CAAC,MAAOmM,OAAMF,MAAN,CAAa,SAAS5J,IAAT,CAAc,CAAC,GAAGyT,QAAQ,OAAX,CAAmB,CAAC,GAAGzT,KAAK6K,KAAL,GAAa,IAAb,EAAmB7K,KAAKiE,KAAL,GAAa,IAAnC,CAAwC,CAAC,MAAO,KAAP,CAAa,OAAO,MAAP,CAAc,CAAxF,IAA6F,IAAGwP,QAAQ,OAAX,CAAmB,CAAC,GAAGzT,KAAKiE,KAAL,GAAa,IAAb,EAAmBjE,KAAK6K,KAAL,GAAa,IAAnC,CAAwC,CAAC,MAAO,KAAP,CAAa,OAAO,MAAP,CAAc,CAAxF,IAA6F,IAAG4I,QAAQ,MAAX,CAAkB,CAAC,GAAGzT,KAAK6K,KAAL,GAAa,IAAb,EAAmB7K,KAAKiE,KAAL,GAAa,IAAnC,CAAwC,CAAC,MAAO,KAAP,CAAa,OAAO,MAAP,CAAc,CAAvF,IAA4F,IAAGwP,QAAQ,MAAX,CAAkB,CAAC,GAAGzT,KAAK6K,KAAL,GAAa,IAAb,EAAmB7K,KAAKiE,KAAL,GAAa,IAAnC,CAAwC,CAAC,MAAO,KAAP,CAAa,CAAC,CAA1E,IAA8E,CAAC,MAAO,KAAP,CAAa,CAAC,CAA/Y,CAAP,CAAyZ,CAAC,CAA7c,CAA+c,CAAC,CAA/jB,IAAmkB,CAAC,UAAU,CAAC,aAAalK,QAAQC,MAAR,CAAe,YAAf,EAA6B4P,MAA7B,CAAoC,oBAApC,CAAyD+N,kBAAzD,EAA6E,QAASA,mBAAT,EAA6B,CAAC,MAAO,UAAS7N,KAAT,CAAe8N,gBAAf,CAAgC,CAAC,GAAG9N,QAAQnM,SAAX,CAAqB,CAAC,MAAOmM,OAAMF,MAAN,CAAa,SAAS5J,IAAT,CAAc,CAAC,GAAG4X,mBAAmB,EAAtB,CAAyB,CAAC;AACz/B,GAAG5X,KAAK6K,KAAL,GAAa,IAAb,EAAmB7K,KAAK6K,KAAL,GAAalN,SAAnC,CAA6C,CAAC,GAAGqC,KAAK6K,KAAL,CAAW9I,KAAX,GAAmB6V,gBAAtB,CAAuC,CAAC,MAAO5X,KAAP,CAAa,CAAC,CAApG,IAAyG,IAAGA,KAAKiE,KAAL,GAAa,IAAb,EAAmBjE,KAAKiE,KAAL,GAAatG,SAAnC,CAA6C,CAAC,GAAGqC,KAAKiE,KAAL,CAAWlC,KAAX,GAAmB6V,gBAAtB,CAAuC,CAAC,MAAO5X,KAAP,CAAa,CAAC,CAAC,CADixB,IAC7wB,CAAC,MAAOA,KAAP,CAAa,CAAC,CADkuB,CAAP,CACxtB,CAAC,CADypB,CACvpB,CAAC,CADkhB,IAC9gB,CAAC,UAAU,CAAC,aAAajG,QAAQC,MAAR,CAAe,YAAf,EAA6B4P,MAA7B,CAAoC,cAApC,CAAmD0K,YAAnD,EAAiE,QAASA,aAAT,EAAuB,CAAC,MAAO,UAASxK,KAAT,CAAe0K,MAAf,CAAsB,CAAC,GAAG1K,QAAQnM,SAAX,CAAqB,CAAC,MAAOmM,OAAMF,MAAN,CAAa,SAAS5J,IAAT,CAAc,CAAC,GAAGwU,SAAS,EAAT,EAAaA,SAAS7W,SAAzB,CAAmC,CAAC;AACzd,GAAGqC,KAAK6K,KAAL,GAAa,IAAb,EAAmB7K,KAAK6K,KAAL,GAAalN,SAAnC,CAA6C,CAAC,MAAOqC,MAAK6K,KAAL,CAAW9I,KAAX,CAAiB8Q,WAAjB,GAA+BlK,OAA/B,CAAuC6L,OAAO3B,WAAP,EAAvC,EAA6D,CAAC,CAArE,CAAwE,CAAtH,IAA2H,IAAG7S,KAAKiE,KAAL,GAAa,IAAb,EAAmBjE,KAAKiE,KAAL,GAAatG,SAAnC,CAA6C,CAAC,MAAOqC,MAAKiE,KAAL,CAAWlC,KAAX,CAAiB8Q,WAAjB,GAA+BlK,OAA/B,CAAuC6L,OAAO3B,WAAP,EAAvC,EAA6D,CAAC,CAArE,CAAwE,CAAC,CADmM,IAC/L,CAAC,MAAO7S,KAAP,CAAa,CAAC,CADoJ,CAAP,CAC1I,CAAC,CADqF,CACnF,CAAC,CADhC,IACoC,CAAC,UAAU,CAAC,aAAajG,QAAQC,MAAR,CAAe,YAAf,EAA6B4P,MAA7B,CAAoC,WAApC,CAAgDiO,SAAhD,EAA2D,QAASA,UAAT,EAAoB,CAAC,MAAO,UAAS/N,KAAT,CAAe7L,UAAf,CAA0BE,WAA1B,CAAsC,CAAC,GAAG2L,QAAQnM,SAAX,CAAqB,CAAC,MAAOmM,OAAMF,MAAN,CAAa,SAAS5J,IAAT,CAAc,CAAC;AAChe,GAAI8X,OAAM,KAAV,CAAgB,GAAInY,GAAE,CAAN,CAAQ,GAAIoY,cAAa,EAAjB,CAAoB,GAAI7Z,cAAJ,CAAkB;AAC9D,GAAGC,cAAc,IAAjB,CAAsB,CAAC,GAAG6B,KAAKuD,IAAL,CAAU8C,MAAV,GAAmB,CAAtB,CAAwB,CAAC,MAAOrG,KAAP,CAAa,CAAC,CAA9D,IAAkE,CAAC,GAAG/B,aAAaN,SAAb,EAAwBM,aAAa,EAAxC,CAA2C,CAAC,MAAO,KAAP,CAAa,CAAzD,IAA6D,CAAC;AACjIC,cAAcD,WAAW4F,SAAX,CAAqB,CAArB,CAAuB5F,WAAWoI,MAAX,CAAkB,CAAzC,EAA4CuC,KAA5C,CAAkD,GAAlD,CAAd,CAAqE;AACrE;AACA7O,QAAQkU,OAAR,CAAgBjO,KAAKuD,IAArB,CAA0B,SAASmF,GAAT,CAAa,CAACqP,aAAa7d,IAAb,CAAkBwO,IAAIpF,IAAtB,EAA6B,CAArE,EAAuE;AACvE,IAAI3D,EAAE,CAAN,CAAQA,EAAEzB,cAAcmI,MAAxB,CAA+B1G,GAA/B,CAAmC,CAAC,GAAGoY,aAAapP,OAAb,CAAqBzK,cAAcyB,CAAd,CAArB,IAAyC,CAAC,CAA7C,CAA+C,CAACmY,MAAM,IAAN,CAAY,CAA5D,IAAgE,CAAC,MAAO,MAAP,CAAc,CAAC,OAAOA,MAAP,CAAc,CAAC,CAAC,CANgU,CAAP,CAMtT,CAAC,CANiP,CAM/O,CAAC,CANqI,IAMjI,CAAC,UAAU,CAAC,aAAa/d,QAAQC,MAAR,CAAe,YAAf,EAA6B+R,OAA7B,CAAqC,kBAArC,CAAwDsI,gBAAxD,EAA0EA,iBAAiBnY,OAAjB,CAAyB,CAAC,IAAD,CAAzB,CAAgC,QAASmY,iBAAT,CAA0BjD,EAA1B,CAA6B,CAAC;AAChT,KAAK4G,uBAAL,CAA6B,SAAS1P,KAAT,CAAe4G,QAAf,CAAwB,CAAC,MAAOkC,IAAG,SAAS3Q,OAAT,CAAiBuR,MAAjB,CAAwB,CAAC,GAAIiG,MAAJ,CAAUC,OAAO,EAAjB,CAAoBne,QAAQkU,OAAR,CAAgB3F,KAAhB,CAAsB,SAAStI,IAAT,CAAc,CAAC,GAAGA,KAAK0I,GAAL,GAAW,MAAd,CAAqB,CAACwP,OAAOhe,IAAP,CAAY,CAACyG,KAAK,MAAN,CAAawN,MAAMnO,KAAKmO,KAAxB,CAA8BsC,WAAW/C,OAAO,CAAC1N,KAAKmO,KAAL,CAAWe,QAAX,CAAoB,GAArB,EAA0BwB,OAA1B,CAAkC,CAAlC,CAAP,CAAzC,CAAsFpN,KAAK,SAA3F,CAAZ,EAAoH,CAA1I,IAA+I,IAAGtD,KAAK0I,GAAL,GAAW,QAAd,CAAuB,CAACwP,OAAOhe,IAAP,CAAY,CAACyG,KAAK,QAAN,CAAewN,MAAMnO,KAAKmO,KAA1B,CAAgCsC,WAAW/C,OAAO,CAAC1N,KAAKmO,KAAL,CAAWe,QAAX,CAAoB,GAArB,EAA0BwB,OAA1B,CAAkC,CAAlC,CAAP,CAA3C,CAAwFpN,KAAK,WAA7F,CAAZ,EAAwH,CAAC,CAArU,EAAuU4U,OAAOhe,IAAP,CAAY,CAACyG,KAAK,YAAN,CAAmBwN,MAAMe,SAASgJ,OAAO,CAAP,EAAU/J,KAAnB,CAAyB+J,OAAO,CAAP,EAAU/J,KAA5D,CAAkEsC,WAAW/C,OAAO,CAAC,CAACwB,SAASgJ,OAAO,CAAP,EAAU/J,KAAnB,CAAyB+J,OAAO,CAAP,EAAU/J,KAAV,CAAgBe,QAA1C,EAAoD,GAArD,EAA0DwB,OAA1D,CAAkE,CAAlE,CAAP,CAA7E,CAA0JpN,KAAK,eAA/J,CAAZ,EAA6L;AACjnB2U,MAAMC,OAAO,CAAP,EAAUzH,UAAV,CAAqByH,OAAO,CAAP,EAAUzH,UAA/B,CAA0CyH,OAAO,CAAP,EAAUzH,UAA1D,CAAqE,GAAGwH,MAAM,GAAT,CAAa,CAACC,OAAO,CAAP,EAAUzH,UAAV,EAAsB,CAACwH,MAAM,GAAP,EAAYvH,OAAZ,CAAoB,CAApB,CAAtB,CAA8C,CAA5D,IAAiE,IAAGuH,MAAM,GAAT,CAAa,CAACC,OAAO,CAAP,EAAUzH,UAAV,EAAsB,CAAC,IAAIwH,KAAL,EAAYvH,OAAZ,CAAoB,CAApB,CAAtB,CAA8C,SAAQwH,MAAR,EAAiB,CADtJ,CAAP,CACgK,CADtN,CACuN,KAAKjD,kBAAL,CAAwB,SAAS3M,KAAT,CAAe,CAAC,GAAIkH,KAAI,IAAR,CAAalR,SAAS,EAAtB,CAAyB;AACxRvE,QAAQkU,OAAR,CAAgB3F,KAAhB,CAAsB,SAAStI,IAAT,CAAc,CAACjG,QAAQkU,OAAR,CAAgBjO,KAAKuD,IAArB,CAA0B,SAASmF,GAAT,CAAa,CAAC,IAAI,GAAI/I,GAAE,CAAV,CAAYA,EAAErB,SAAS+H,MAAvB,CAA8B1G,GAA9B,CAAkC,CAAC,GAAGrB,SAASqB,CAAT,EAAY+I,GAAZ,GAAkBA,IAAIpF,IAAzB,CAA8B,CAACkM,IAAI,KAAJ,CAAUlR,SAASqB,CAAT,EAAYwO,KAAZ,EAAmB,CAAnB,CAAsB,CAAC;AAChL,GAAGqB,MAAM,IAAT,CAAc,CAAClR,SAASpE,IAAT,CAAc,CAACwO,IAAIA,IAAIpF,IAAT,CAAc6K,MAAM,CAApB,CAAd,EAAuC,KAAI,IAAJ,CAAS;AAC9D,CAFoC,EAElC;AACF,CAHD,EAGG,MAAO7P,SAAP,CAAiB,CAJmM,CAIlM,KAAK6Z,yBAAL,CAA+B,SAAS7P,KAAT,CAAezN,IAAf,CAAoB,CAAC,GAAI2U,KAAI,IAAR,CAAa4I,oBAAoB,EAAjC,CAAoCC,gBAAgB,EAApD,CAAuD;AAChIte,QAAQkU,OAAR,CAAgB3F,KAAhB,CAAsB,SAAStI,IAAT,CAAc,CAAC,IAAI,GAAIL,GAAE,CAAV,CAAYA,EAAEK,KAAKuD,IAAL,CAAU8C,MAAxB,CAA+B1G,GAA/B,CAAmC,CAAC,GAAGK,KAAKuD,IAAL,CAAU5D,CAAV,EAAa2D,IAAb,GAAoBzI,IAAvB,CAA4B,CAACud,oBAAoBle,IAApB,CAAyB8F,KAAKuD,IAA9B,EAAqC,CAAC,CAAC,CAA7I,EAA+I;AAC/IxJ,QAAQkU,OAAR,CAAgBmK,mBAAhB,CAAoC,SAASpY,IAAT,CAAc,CAACjG,QAAQkU,OAAR,CAAgBjO,IAAhB,CAAqB,SAASsY,GAAT,CAAa,CAAC;AACtF,IAAI,GAAI3Y,GAAE,CAAV,CAAYA,EAAE0Y,gBAAgBhS,MAA9B,CAAqC1G,GAArC,CAAyC,CAAC;AAC1C,GAAG0Y,gBAAgB1Y,CAAhB,EAAmB9E,IAAnB,GAA0Byd,IAAIhV,IAA9B,EAAoCgV,IAAIhV,IAAJ,GAAWzI,IAAlD,CAAuD,CAAC2U,IAAI,KAAJ,CAAU6I,gBAAgB1Y,CAAhB,EAAmBwO,KAAnB,EAA0B,CAA1B,CAA6B,CAAC;AAChG,GAAGqB,MAAM,IAAN,EAAY8I,IAAIhV,IAAJ,GAAWzI,IAA1B,CAA+B,CAACwd,gBAAgBne,IAAhB,CAAqB,CAACW,KAAKyd,IAAIhV,IAAV,CAAe6K,MAAM,CAArB,CAArB,EAA+C,KAAI,IAAJ,CAAU,CAHtC,EAGyC,CAH5F,EAG8F;AAC9F,MAAOkK,gBAAP,CAAwB,CANH,CAMI,KAAKnD,gBAAL,CAAsB,SAAS5M,KAAT,CAAe,CAAC,GAAIkH,KAAI,IAAR,CAAa+E,YAAY,EAAzB,CAA4B;AAC3Fxa,QAAQkU,OAAR,CAAgB3F,KAAhB,CAAsB,SAAStI,IAAT,CAAc,CAAC,IAAI,GAAIL,GAAE,CAAV,CAAYA,EAAE4U,YAAYlO,MAA1B,CAAiC1G,GAAjC,CAAqC,CAAC,GAAG4U,YAAY5U,CAAZ,EAAe9E,IAAf,GAAsBmF,KAAK+U,KAA9B,CAAoC,CAACvF,IAAI,KAAJ,CAAU+E,YAAY5U,CAAZ,EAAewO,KAAf,EAAsB,CAAtB,CAAyB,CAAC;AACpJ,GAAGqB,MAAM,IAAT,CAAc,CAAC+E,YAAYra,IAAZ,CAAiB,CAACW,KAAKmF,KAAK+U,KAAX,CAAiB5G,MAAM,CAAvB,CAAjB,EAA6C,KAAI,IAAJ,CAAS;AACpE,CAFD,EAEG,MAAOoG,YAAP,CAAoB,CAHE,CAGD,KAAKY,eAAL,CAAqB,SAAS7M,KAAT,CAAe,CAAC,GAAIkH,KAAI,IAAR,CAAa+I,WAAW,EAAxB,CAA2B;AACxFxe,QAAQkU,OAAR,CAAgB3F,KAAhB,CAAsB,SAAStI,IAAT,CAAc,CAAC,IAAI,GAAIL,GAAE,CAAV,CAAYA,EAAE4Y,WAAWlS,MAAzB,CAAgC1G,GAAhC,CAAoC,CAAC,GAAGK,KAAK6K,KAAR,CAAc,CAAC,GAAG0N,WAAW5Y,CAAX,EAAc9E,IAAd,GAAqBmF,KAAK6K,KAAL,CAAW9I,KAAnC,CAAyC,CAACyN,IAAI,KAAJ,CAAU+I,WAAW5Y,CAAX,EAAcwO,KAAd,EAAqB,CAArB,CAAwB,CAAC,CAA5F,IAAiG,IAAGnO,KAAKiE,KAAR,CAAc,CAAC,GAAGsU,WAAW5Y,CAAX,EAAc9E,IAAd,GAAqBmF,KAAKiE,KAAL,CAAWlC,KAAnC,CAAyC,CAACyN,IAAI,KAAJ,CAAU+I,WAAW5Y,CAAX,EAAcwO,KAAd,EAAqB,CAArB,CAAwB,CAAC,CAAC;AACxQ,GAAGqB,MAAM,IAAT,CAAc,CAAC,GAAGhW,QAAQwG,KAAK6K,KAAb,IAAsB,QAAtB,EAAgC7K,KAAK6K,KAAL,GAAa,IAAhD,CAAqD,CAAC0N,WAAWre,IAAX,CAAgB,CAACa,IAAIiF,KAAK6K,KAAL,CAAW9P,GAAhB,CAAoBF,KAAKmF,KAAK6K,KAAL,CAAW9I,KAApC,CAA0CoM,MAAM,CAAhD,CAAhB,EAAqE,CAA3H,IAAgI,IAAG3U,QAAQwG,KAAKiE,KAAb,IAAsB,QAAtB,EAAgCjE,KAAKiE,KAAL,GAAa,IAAhD,CAAqD,CAACsU,WAAWre,IAAX,CAAgB,CAACa,IAAIiF,KAAKiE,KAAL,CAAWlJ,GAAhB,CAAoBF,KAAKmF,KAAKiE,KAAL,CAAWlC,KAApC,CAA0CoM,MAAM,CAAhD,CAAhB,EAAqE,CAAC,KAAI,IAAJ,CAAS;AACnR,CAFD,EAEG,MAAOoK,WAAP,CAAmB,CAHE,CAGA,CAAC,CAlBsH,IAkBlH,CAAC,UAAU,CAAC,aAAaxe,QAAQC,MAAR,CAAe,YAAf,EAA6BoR,OAA7B,CAAqC,YAArC,CAAkDoN,gBAAlD,EAAoEA,iBAAiBtc,OAAjB,CAAyB,CAAC,WAAD,CAAzB,CAAuC,QAASsc,iBAAT,CAA0B3M,SAA1B,CAAoC,CAAC,MAAOA,WAAU,yBAAV,CAAoC,CAACuJ,YAAY,MAAb,CAApC,CAAyD,CAACjW,OAAO,CAAC2M,OAAO,KAAR,CAAR,CAAzD,CAAP,CAA0F,CAAC,CAApQ,IAAwQ,CAAC,UAAU,CAAC,aAAa/R,QAAQC,MAAR,CAAe,YAAf,EAA6B+R,OAA7B,CAAqC,YAArC,CAAkD/O,UAAlD,EAA8DA,WAAWd,OAAX,CAAmB,CAAC,YAAD,CAAc,qBAAd,CAAnB,CAAwD,QAASc,WAAT,CAAoBzC,UAApB,CAA+BsC,mBAA/B,CAAmD,CAAC,GAAIkP,SAAQ,EAAZ,CAAe;AACvfA,QAAQjK,MAAR,CAAe,SAASkB,QAAT,CAAkBK,MAAlB,CAAyB,CAAC,GAAGA,SAAS,EAAT,EAAaA,SAAS1F,SAAzB,CAAmC,CAAC,GAAIgC,GAAE,CAAN,CAAQkU,aAAa,KAArB,CAA2B,GAAG7Q,SAASqD,MAAT,CAAgB,CAAnB,CAAqB,CAAC,MAAM1G,EAAEqD,SAASqD,MAAjB,CAAwB,CAAC,GAAGrD,SAASrD,CAAT,EAAY2D,IAAZ,GAAmBD,MAAtB,CAA6B,CAACwQ,aAAa,IAAb,CAAmB,KAAK;AAC7M,GAAGA,eAAe,KAAlB,CAAwB,CAAC7Q,SAAS9I,IAAT,CAAc,CAACoJ,KAAKD,MAAN,CAAd,EAA8B,CAAC,CADgD,IAC5C,CAACL,SAAS9I,IAAT,CAAc,CAACoJ,KAAKD,MAAN,CAAd,EAA8B,CAAC,CAAC,CAD7F,CAC8F;AAC9F0I,QAAQ7J,OAAR,CAAgB,SAASc,QAAT,CAAkBM,IAAlB,CAAuB,CAAC;AACxCzG,oBAAoB4C,YAApB,CAAiC,UAAU,CAAClF,WAAWoN,MAAX,CAAkB,UAAU,CAAC,GAAIhI,GAAEqD,SAASqD,MAAf,CAAsB,MAAM1G,GAAN,CAAU,CAAC,GAAGqD,SAASrD,CAAT,EAAY2D,IAAZ,GAAmBA,IAAtB,CAA2B,CAACN,SAASnD,MAAT,CAAgBF,CAAhB,CAAkB,CAAlB,EAAqB9C,oBAAoBkD,OAApB,CAA4B,UAA5B,CAAuC,8BAAvC,EAAuE,MAAO,CAAC,CAAC,CAA/L,EAAkM,CAA9O,EAAiP,CADjP,CACkP,MAAOgM,QAAP,CAAgB,CAAC,CAJkC,IAI9B,CAAC,UAAU,CAAC,aAAahS,QAAQC,MAAR,CAAe,MAAf,EAAuBgC,UAAvB,CAAkC,kBAAlC,CAAqDyc,gBAArD,EAAuEA,iBAAiBvc,OAAjB,CAAyB,CAAC,QAAD,CAAU,gBAAV,CAA2B,OAA3B,CAAmC,WAAnC,CAAzB,CAAyE,QAASuc,iBAAT,CAA0Btc,MAA1B,CAAiC1B,cAAjC,CAAgDgB,KAAhD,CAAsDY,SAAtD,CAAgE,CAAC,GAAIa,MAAK,IAAT,CAAcA,KAAKC,cAAL,CAAoB1C,cAApB,CAAmCyC,KAAKwb,WAAL,CAAiBA,WAAjB,CAA6Bxb,KAAKyb,QAAL,CAAcA,QAAd,CAAuBzb,KAAK0b,WAAL,CAAiB,KAAjB,CAAuB1b,KAAK2b,YAAL,CAAkB/T,aAAaC,OAAb,CAAqB,YAArB,CAAlB,CAAqD7H,KAAK4b,IAAL,CAAUrd,MAAMsd,OAAN,CAAc,QAAd,CAAV,CAAkC7b,KAAK2H,KAAL,CAAWC,aAAaC,OAAb,CAAqB,OAArB,CAAX,CAAyC7H,KAAK8b,MAAL,CAAY,CAAC,CAACne,KAAK,KAAN,CAAYiB,IAAI,mBAAhB,CAAD,CAAsC,CAACjB,KAAK,OAAN,CAAciB,IAAI,qBAAlB,CAAtC,CAAZ,CAA4FoB,KAAK+b,KAAL,CAAWnU,aAAaC,OAAb,CAAqB,OAArB,IAAgC,IAAhC,CAAqCQ,KAAKC,KAAL,CAAWtI,KAAK2H,KAAhB,CAArC,CAA4D3H,KAAK8b,MAAL,CAAY,CAAZ,EAAeld,GAAtF,CAA0FoB,KAAKgc,UAAL,CAAgBpU,aAAaC,OAAb,CAAqB,YAArB,IAAqC,IAArC,CAA0CQ,KAAKC,KAAL,CAAWtI,KAAK2b,YAAhB,CAA1C,CAAwE,KAAxF,CAA8F3b,KAAKic,qBAAL,CAA2BA,qBAA3B,CAAiDrU,aAAaY,OAAb,CAAqB,OAArB,CAA6BH,KAAKI,SAAL,CAAezI,KAAK+b,KAApB,CAA7B,EAAyDnU,aAAaY,OAAb,CAAqB,YAArB,CAAkCH,KAAKI,SAAL,CAAezI,KAAKgc,UAApB,CAAlC,EAAmE,QAASC,sBAAT,EAAgC,CAACjc,KAAK0b,WAAL,CAAiB,CAAC1b,KAAK0b,WAAvB,CAAoC;AACnvCzc,OAAOzB,GAAP,CAAW,qBAAX,CAAiC,UAAU,CAACwC,KAAK0b,WAAL,CAAiB,KAAjB,CAAwB,CAApE,EAAsE,QAASD,SAAT,CAAkBS,YAAlB,CAA+B,CAAC,MAAOA,gBAAe/c,UAAUyD,IAAV,EAAtB,CAAwC,SAAS4Y,YAAT,EAAsB,CAAC5T,aAAaY,OAAb,CAAqB,YAArB,CAAkCH,KAAKI,SAAL,CAAezI,KAAKgc,UAApB,CAAlC,EAAmE,GAAIG,gBAAevU,aAAaC,OAAb,CAAqB,YAArB,CAAnB,CAAsD,GAAGsU,iBAAiB,OAApB,CAA4B,CAACvU,aAAaY,OAAb,CAAqB,OAArB,CAA6BH,KAAKI,SAAL,CAAezI,KAAK+b,KAApB,CAA7B,EAA0D,CAAvF,IAA2F,CAAC,GAAIK,MAAK,GAAInZ,KAAJ,GAAWoZ,QAAX,EAAT,CAA+B,GAAGD,KAAK,EAAL,EAASA,KAAK,CAAjB,CAAmB,CAACxU,aAAaY,OAAb,CAAqB,OAArB,CAA6BH,KAAKI,SAAL,CAAezI,KAAK8b,MAAL,CAAY,CAAZ,EAAeld,GAA9B,CAA7B,EAAkE,CAAtF,IAA2F,IAAGwd,KAAK,CAAR,CAAU,CAACxU,aAAaY,OAAb,CAAqB,OAArB,CAA6BH,KAAKI,SAAL,CAAezI,KAAK8b,MAAL,CAAY,CAAZ,EAAeld,GAA9B,CAA7B,EAAkE,CAAC,IAAI0d,aAAY1U,aAAaC,OAAb,CAAqB,OAArB,CAAhB,CAA8CqC,KAAKjM,SAASse,cAAT,CAAwB,WAAxB,CAAnD,CAAwFrS,KAAKuE,IAAL,CAAU6N,YAAYxP,MAAZ,CAAmB,CAAnB,CAAqBwP,YAAYE,WAAZ,CAAwB,IAAxB,EAA8B,CAAnD,CAAV,CAAgE;AAC1tBxc,KAAK+b,KAAL,CAAWO,YAAYxP,MAAZ,CAAmB,CAAnB,CAAqBwP,YAAYE,WAAZ,CAAwB,IAAxB,EAA8B,CAAnD,CAAX,CAAiE;AAChE,CAAC,CAAC,CAHoQ,IAGhQ,CAAC,UAAU,CAAC,aAAa3f,QAAQC,MAAR,CAAe,MAAf,EAAuB8M,SAAvB,CAAiC,iBAAjC,CAAmD6S,eAAnD,EAAoE,QAASA,gBAAT,CAAyBC,SAAzB,CAAmCld,OAAnC,CAA2C,CAAC,MAAM,CAACsK,SAAS,GAAV,CAAcI,KAAK,QAASA,KAAT,CAAcC,KAAd,CAAoBnM,OAApB,CAA4BoM,KAA5B,CAAkC,CAACpM,QAAQwF,IAAR,CAAa,OAAb,CAAqB,IAArB,EAA2B;;iBAEtN3G,QAAQmB,OAAR,CAAgB0e,UAAU,CAAV,EAAaC,IAA7B,EAAmCC,EAAnC,CAAsC,OAAtC,CAA8C,SAAShS,CAAT,CAAW,CAAC,GAAIiS,SAAQhgB,QAAQmB,OAAR,CAAgB4M,EAAEkS,MAAlB,EAA0BC,aAA1B,CAAwC,OAAxC,CAAZ,CAA6DC,OAAOngB,QAAQmB,OAAR,CAAgB4M,EAAEkS,MAAlB,EAA0BlI,IAA1B,CAA+B,aAA/B,CAApE,CAAkH,GAAG,CAACiI,OAAD,EAAU,CAACG,MAAd,CAAqB,CAAC7S,MAAMM,MAAN,CAAa,UAAU,CAACN,MAAMC,MAAM6S,MAAZ,EAAoB,KAApB,CAA2B,CAAnD,EAAsD,CAAC,CAAzP,EAA4P,CAFvH,CAAN,CAEgI,CAAC,CAF1Q,IAE8Q,CAAC,UAAU,CAAC,aAAapgB,QAAQC,MAAR,CAAe,MAAf,EAAuB8M,SAAvB,CAAiC,WAAjC,CAA6CsT,SAA7C,EAAwDA,UAAUle,OAAV,CAAkB,CAAC,UAAD,CAAlB,CAA+B,QAASke,UAAT,CAAmBxV,QAAnB,CAA4B,CAAC,MAAM,CAACoC,SAAS,GAAV,CAAcI,KAAK,QAASA,KAAT,CAAcC,KAAd,CAAoBnM,OAApB,CAA4BoM,KAA5B,CAAkC,CAACpM,QAAQwM,IAAR,CAAa,OAAb,CAAqB,SAAS/M,KAAT,CAAe,CAACiK,SAAS,UAAU,CAACjK,MAAM0f,eAAN,GAAwBlf,SAASse,cAAT,CAAwBnS,MAAM8S,SAA9B,EAAyCE,KAAzC,GAAkD,CAA9F,CAA+F,CAA/F,EAAmG,CAAxI,EAA2I,CAAjM,CAAN,CAA0M,CAAC,CAAxV,IAA4V,CAAC,UAAU,CAAC,aAAavgB,QAAQC,MAAR,CAAe,MAAf,EAAuB8M,SAAvB,CAAiC,YAAjC,CAA8CyT,UAA9C,EAA0D,QAASA,WAAT,EAAqB,CAAC,MAAM,CAACC,QAAQ,SAAT,CAAmBpT,KAAK,QAASA,KAAT,CAAcC,KAAd,CAAoBmB,IAApB,CAAyBsJ,IAAzB,CAA8B2I,SAA9B,CAAwC,CAACA,UAAUC,WAAV,CAAsBxgB,IAAtB,CAA2B,SAASygB,UAAT,CAAoB,CAAC,MAAOA,cAAa,IAAb,CAAkB,IAAlB,CAAuB,GAAIxa,KAAJ,CAASwa,UAAT,CAA9B,CAAoD,CAApG,EAAuG,CAAxK,CAAN,CAAiL,CAAC,CAA3R,IAA+R,CAAC,UAAU,CAAC,aAAa5gB,QAAQC,MAAR,CAAe,MAAf,EAAuB8M,SAAvB,CAAiC,gBAAjC,CAAkD8T,cAAlD,EAAkEA,eAAe1e,OAAf,CAAuB,CAAC,OAAD,CAAS,gBAAT,CAAvB,CAAkD,QAAS0e,eAAT,CAAwB5O,KAAxB,CAA8BjP,cAA9B,CAA6C,CAAC,MAAM,CAACiK,SAAS,GAAV,CAAc6T,WAAW,IAAzB,CAA8B5T,QAAQ,IAAtC,CAA2ClL,YAAY,8CAAvD,CAAsGsL,MAAM,CAACxM,KAAK,GAAN,CAAU2F,KAAK,IAAf,CAA5G,CAAiI8V,iBAAiB,gBAAlJ,CAAmKta,WAAW,QAASA,WAAT,CAAoBG,MAApB,CAA2B,CAACA,OAAO2e,MAAP,CAAc,KAAd,CAAoB;AAC/yC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAIC,KAAI,CAAClgB,KAAKsB,OAAOtB,IAAb,CAAkBmgB,KAAK,QAASA,KAAT,EAAe,CAAC7e,OAAO2e,MAAP,CAAc,IAAd,CAAoB,CAA3D,CAA4DG,KAAK,QAASA,KAAT,EAAe,CAAC9e,OAAO2e,MAAP,CAAc,KAAd,CAAqB,CAAtG,CAAuGI,OAAO,QAASA,OAAT,EAAiB,CAAC/e,OAAO2e,MAAP,CAAc,CAAC3e,OAAO2e,MAAtB,CAA8B,CAA9J,CAAR,CAAwK/d,eAAeoe,SAAf,CAAyBJ,GAAzB,EAA8B5e,OAAOzB,GAAP,CAAW,UAAX,CAAsB,UAAU,CAACqC,eAAeqe,WAAf,CAA2Bjf,OAAOtB,IAAlC,EAAyC,CAA1E,EAA6E,CAZ8zB,CAAN,CAYrzB,CAAC,CAZynB,IAYrnB,CAAC,UAAU,CAAC,aAAad,QAAQC,MAAR,CAAe,MAAf,EAAuB8M,SAAvB,CAAiC,YAAjC,CAA8CuU,UAA9C,EAA0D,QAASA,WAAT,EAAqB,CAAC,MAAO,UAAShU,KAAT,CAAenM,OAAf,CAAuBoM,KAAvB,CAA6B,CAACD,MAAMzB,MAAN,CAAa0B,MAAM+T,UAAnB,CAA8B,SAASC,GAAT,CAAa,CAAC,GAAI3a,MAAK,oBAAT,CAA8BzF,QAAQqgB,IAAR,CAAa,eAAe5a,IAAf,CAAoB,kBAApB,CAAuC2a,GAAvC,CAA2C,wBAAxD,EAAmF,CAA7J,EAAgK,CAArM,CAAuM,CAAC,CAAjT,IAAqT,CAAC,UAAU,CAAC,aAAavhB,QAAQC,MAAR,CAAe,MAAf,EAAuB4P,MAAvB,CAA8B,gBAA9B,CAA+C4R,cAA/C,EAA+D,QAASA,eAAT,EAAyB,CAAC,MAAO,UAAS1R,KAAT,CAAe2R,aAAf,CAA6B,CAAC,GAAG3R,KAAH,CAAS,CAAC,MAAOA,OAAMF,MAAN,CAAa,SAAS5J,IAAT,CAAc,CAAC;AACpxB,GAAGA,KAAKsN,IAAL,GAAY,IAAZ,EAAkBtN,KAAKsN,IAAL,GAAY3P,SAAjC,CAA2C,CAAC,GAAG8d,gBAAgB,KAAnB,CAAyB,CAAC,MAAOzb,KAAP,CAAa,OAAO,MAAP,CAAc,IAAIiT,KAAI,GAAI9S,KAAJ,GAAW+S,MAAX,EAAR,CAA4B5I,KAAK,GAAInK,KAAJ,GAAWgT,OAAX,GAAqBF,GAArB,EAA0BA,MAAM,CAAN,CAAQ,CAAR,CAAU,CAApC,CAAjC,CAAwEjF,KAAK,GAAI7N,KAAJ,EAA7E,CAAwFiT,MAAM,GAAIjT,KAAJ,CAAS6N,KAAKqF,OAAL,CAAa/I,IAAb,CAAT,CAA9F,CAA2HoR,aAAatI,MAAMzE,WAAN,GAAoB9K,SAApB,CAA8B,CAA9B,CAAgC,EAAhC,CAAxI,CAA4K8X,MAAM,GAAIxb,KAAJ,CAASH,KAAKsN,IAAd,EAAoBqB,WAApB,EAAlL,CAAoNiN,SAAS,CAAChY,KAAK+X,MAAM3R,MAAN,CAAa,CAAb,CAAe,CAAf,CAAN,CAAwBD,MAAM4R,MAAM3R,MAAN,CAAa,CAAb,CAAe,CAAf,CAA9B,CAAgDiJ,IAAI0I,MAAM3R,MAAN,CAAa,CAAb,CAAe,CAAf,CAApD,CAA7N,CAAoS6R,YAAY,CAACjY,KAAK8X,aAAa1R,MAAb,CAAoB,CAApB,CAAsB,CAAtB,CAAN,CAA+BD,MAAM2R,aAAa1R,MAAb,CAAoB,CAApB,CAAsB,CAAtB,CAArC,CAA8DiJ,IAAIyI,aAAa1R,MAAb,CAAoB,CAApB,CAAsB,CAAtB,CAAlE,CAAhT,CAA4Y,GAAGyR,gBAAgB,KAAnB,CAAyB,CAAC,GAAGG,SAAShY,IAAT,CAAciY,YAAYjY,IAA7B,CAAkC,CAAC,MAAO5D,KAAP,CAAa,CAAhD,IAAqD,IAAG4b,SAAShY,IAAT,GAAgBiY,YAAYjY,IAA/B,CAAoC,CAAC,GAAGgY,SAAS7R,KAAT,CAAe8R,YAAY9R,KAA9B,CAAoC,CAAC,MAAO/J,KAAP,CAAa,CAAlD,IAAuD,IAAG4b,SAAS7R,KAAT,GAAiB8R,YAAY9R,KAAhC,CAAsC,CAAC,GAAG6R,SAAS3I,GAAT,EAAc4I,YAAY5I,GAA7B,CAAiC,CAAC,MAAOjT,KAAP,CAAa,CAAC,CAAC,CAAC,CAApQ,IAAyQ,IAAGyb,gBAAgB,IAAnB,CAAwB,CAAC,GAAGG,SAAShY,IAAT,CAAciY,YAAYjY,IAA7B,CAAkC,CAAC,MAAO5D,KAAP,CAAa,CAAhD,IAAqD,IAAG4b,SAAShY,IAAT,GAAgBiY,YAAYjY,IAA/B,CAAoC,CAAC,GAAGgY,SAAS7R,KAAT,CAAe8R,YAAY9R,KAA9B,CAAoC,CAAC,MAAO/J,KAAP,CAAa,CAAlD,IAAuD,IAAG4b,SAAS7R,KAAT,GAAiB8R,YAAY9R,KAAhC,CAAsC,CAAC,GAAG6R,SAAS3I,GAAT,CAAa4I,YAAY5I,GAA5B,CAAgC,CAAC,MAAOjT,KAAP,CAAa,CAAC,CAAC,CAAC,CAAC,CADjQ,CAAP,CAC2Q,CAAC,CAD3T,CAC6T,CAAC,CADhb,IACob,CAAC,UAAU,CAAC,aAAajG,QAAQC,MAAR,CAAe,MAAf,EAAuB4P,MAAvB,CAA8B,YAA9B,CAA2CkS,UAA3C,EAAuD,QAASA,WAAT,CAAoBtV,OAApB,CAA4B,CAAC,GAAIuV,UAAS,CAAC,IAAD,CAAM,IAAN,CAAW,IAAX,CAAgB,IAAhB,CAAb,CAAmC,MAAO,UAAShR,KAAT,CAAe,CAAC,GAAGA,QAAQpN,SAAX,CAAqB,CAAC,GAAIqe,UAASxV,QAAQ,MAAR,EAAgBuE,KAAhB,CAAsB,QAAtB,CAAb,CAA6CkI,IAAI7M,SAAS4V,SAASvR,KAAT,CAAe,CAAC,CAAhB,CAAT,CAAjD,CAA8EwR,eAAehJ,IAAI,EAAJ,CAAOA,IAAI,EAAX,CAAcA,IAAI,EAA/G,CAAkHiJ,OAAOD,gBAAgB,CAAhB,CAAkBF,SAASE,cAAT,CAAlB,CAA2CF,SAAS,CAAT,CAApK,CAAgLI,UAAUH,SAASpT,KAAT,CAAe,GAAf,CAA1L,CAA8MmB,MAAMoS,UAAU,CAAV,CAApN,CAAiO,MAAOA,WAAU,CAAV,EAAaD,MAAb,CAAoB,GAApB,CAAwBnS,KAAxB,CAA8B,GAA9B,CAAkCvD,QAAQ,MAAR,EAAgBuE,KAAhB,CAAsB,MAAtB,CAAzC,CAAwE,CAAC,CAAvV,CAAyV,CAAC,CAA1e,IAA8e,CAAC,UAAU,CAAC,aAAahR,QAAQC,MAAR,CAAe,MAAf,EAAuB4P,MAAvB,CAA8B,WAA9B,CAA0CwS,SAA1C,EAAqD,QAASA,UAAT,EAAoB,CAAC,MAAO,UAAStS,KAAT,CAAeuS,WAAf,CAA2B,CAAC,MAAOvS,OAAMF,MAAN,CAAa,SAAS5J,IAAT,CAAc,CAAC;AAC3pD;AACA,GAAIsc,IAAGD,WAAP,CAAmB,GAAGC,KAAK,GAAL,EAAUtc,KAAKiT,GAAL,GAAW,QAAxB,CAAiC,CAAC,MAAOjT,KAAP,CAAa,CAA/C,IAAoD,IAAGsc,KAAK,GAAL,EAAUtc,KAAKiT,GAAL,GAAW,SAAxB,CAAkC,CAAC,MAAOjT,KAAP,CAAa,CAAhD,IAAqD,IAAGsc,KAAK,GAAL,EAAUtc,KAAKiT,GAAL,GAAW,WAAxB,CAAoC,CAAC,MAAOjT,KAAP,CAAa,CAAlD,IAAuD,IAAGsc,KAAK,GAAL,EAAUtc,KAAKiT,GAAL,GAAW,UAAxB,CAAmC,CAAC,MAAOjT,KAAP,CAAa,CAAjD,IAAsD,IAAGsc,KAAK,GAAL,EAAUtc,KAAKiT,GAAL,GAAW,QAAxB,CAAiC,CAAC,MAAOjT,KAAP,CAAa,CAA/C,IAAoD,IAAGsc,KAAK,GAAL,EAAUtc,KAAKiT,GAAL,GAAW,UAAxB,CAAmC,CAAC,MAAOjT,KAAP,CAAa,CAAjD,IAAsD,IAAGsc,KAAK,GAAL,EAAUtc,KAAKiT,GAAL,GAAW,QAAxB,CAAiC,CAAC,MAAOjT,KAAP,CAAa,CAA/C,IAAoD,IAAGsc,KAAK,EAAL,EAASA,KAAK,IAAd,EAAoBA,KAAK3e,SAA5B,CAAsC,CAAC,MAAOqC,KAAP,CAAa,CAApD,IAAyD,IAAGsc,KAAK,KAAL,EAAYtc,KAAKiT,GAAL,GAAW,KAA1B,CAAgC,CAAC,MAAOjT,KAAP,CAAa,CAAC,CAFgpC,CAAP,CAEtoC,CAFmmC,CAEjmC,CAAC,CAF6/B,IAEz/B,CAAC,UAAU,CAAC,aAAajG,QAAQC,MAAR,CAAe,MAAf,EAAuB4P,MAAvB,CAA8B,gBAA9B,CAA+C2S,cAA/C,EAA+D,QAASA,eAAT,EAAyB,CAAC,MAAO,UAAShJ,CAAT,CAAW5D,GAAX,CAAe,CAAC,GAAIxF,KAAI/D,SAASmN,CAAT,CAAW,EAAX,CAAR,CAAuB5D,IAAIvJ,SAASuJ,GAAT,CAAa,EAAb,CAAJ,CAAqB,GAAGU,MAAMlG,GAAN,GAAYkG,MAAMV,GAAN,CAAf,CAA0B,CAAC,MAAO4D,EAAP,CAAU,KAAI,GAAGpJ,GAAP,CAAW,MAAMA,IAAI9D,MAAJ,CAAWsJ,GAAjB,CAAqB,CAACxF,IAAI,IAAIA,GAAR,CAAa,OAAOA,IAAP,CAAY,CAAlK,CAAoK,CAAC,CAAvR,IAA2R,CAAC,UAAU,CAAC,aAAapQ,QAAQC,MAAR,CAAe,MAAf,EAAuB+R,OAAvB,CAA+B,iBAA/B,CAAiDyQ,eAAjD,EAAkEA,gBAAgBtgB,OAAhB,CAAwB,CAAC,QAAD,CAAxB,CAAmC,QAASsgB,gBAAT,CAAyBtS,MAAzB,CAAgC,CAAC,GAAIjR,KAAI,CAACuR,IAAIA,GAAL,CAAR,CAAkB,MAAOvR,IAAP,CAAW,QAASuR,IAAT,CAAanF,MAAb,CAAoBoX,KAApB,CAA0BC,OAA1B,CAAkC,CAACA,QAAQA,SAAS,GAAjB,CAAqBrX,OAAOA,OAAO,EAAd,CAAiB,MAAOA,QAAOgB,MAAP,EAAeoW,KAAf,CAAqBpX,MAArB,CAA4B,GAAIsX,MAAJ,CAAUF,MAAMpX,OAAOgB,MAAb,CAAoB,CAA9B,EAAiCuL,IAAjC,CAAsC8K,OAAtC,EAA+CrX,MAAlF,CAA0F,CAAC,CAAC,CAAjW,IAAqW,aAAa;AACtoCtL,QAAQC,MAAR,CAAe,MAAf,EAAuB+R,OAAvB,CAA+B,OAA/B,CAAuC,CAAC,UAAU,CAAC;AACnD,KAAK6Q,YAAL,CAAkB,CAAC,GAAD,CAAlB,CAAwB;AACxB,KAAKC,KAAL,CAAW,EAAX,CAAc;AACd,GAAIC,cAAa,QAASA,aAAT,CAAsBhiB,IAAtB,CAA2B,CAAC,GAAGA,IAAH,CAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,KAAKiiB,KAAL,CAAWpU,OAAX,CAAmB,GAAnB,CAAN,CAA8B,CAAC,MAAO,KAAP,CAAa,CAA5C,IAAgD,CAAC,IAAI,GAAIqU,cAAR,GAAyBliB,MAAKiiB,KAA9B,CAAoC,CAAC,IAAI,GAAIE,UAAR,GAAqB,MAAKF,KAA1B,CAAgC,CAAC,GAAG,KAAKA,KAAL,CAAWE,SAAX,IAAwBniB,KAAKiiB,KAAL,CAAWC,aAAX,CAA3B,CAAqD,CAAC,MAAO,KAAP,CAAa,CAAC,CAAC,CAAC,CAAC,CAAvM,IAA2M,CAAC,MAAO,MAAKE,QAAZ,CAAsB,OAAO,MAAP,CAAc,CAA7R,CAA8R;AAC9R,KAAKC,qBAAL,CAA2B,SAASC,MAAT,CAAgB,CAAC,GAAGA,QAAQA,OAAO/W,MAAlB,CAAyB,CAAC,GAAG,KAAKwW,KAAL,CAAWO,MAAX,CAAH,CAAsB,CAAC,MAAO,KAAP,CAAa,CAApC,IAAwC,CAAC,KAAM,IAAIC,MAAJ,CAAU,sBAAV,CAAN,CAAyC,CAAC,CAA7G,IAAiH,CAAC,KAAM,IAAIA,MAAJ,CAAU,yBAAV,CAAN,CAA4C,OAAO,MAAP,CAAc,CAAxN,CAAyN;AACzN,KAAKtE,OAAL,CAAa,SAASqE,MAAT,CAAgB,CAAC;AAC9B,KAAKD,qBAAL,CAA2BC,MAA3B,EAAmC;AACnC,MAAO,MAAKP,KAAL,CAAWO,MAAX,CAAP,CAA2B,CAF3B,CAE4B;AAC5B,KAAKE,OAAL,CAAa,SAASF,MAAT,CAAgBF,QAAhB,CAAyBH,KAAzB,CAA+B,CAAC;AAC7C,KAAKF,KAAL,CAAWO,MAAX,EAAmB,CAACF,SAASA,UAAU,KAApB,CAA0BH,MAAMA,OAAO,KAAKH,YAA5C,CAAyDtU,MAAM,EAA/D,CAAkEwU,aAAaA,YAA/E,CAAnB,CAAgH;AAChH,MAAO,MAAKD,KAAL,CAAWO,MAAX,CAAP,CAA2B,CAF3B,CAE4B;AAC5B,KAAKG,UAAL,CAAgB,SAASH,MAAT,CAAgB,CAAC;AACjC,KAAKD,qBAAL,CAA2BC,MAA3B,EAAmC;AACnC,MAAO,MAAKP,KAAL,CAAWO,MAAX,CAAP,CAA2B,CAF3B,CAE4B;AAC5B,KAAK1hB,WAAL,CAAiB,SAAS0hB,MAAT,CAAgBI,aAAhB,CAA8BC,WAA9B,CAA0CC,YAA1C,CAAuDC,eAAvD,CAAuET,QAAvE,CAAgFH,KAAhF,CAAsFa,QAAtF,CAA+F,CAAC;AACjH,KAAKT,qBAAL,CAA2BC,MAA3B,EAAmC;AACnC,KAAKP,KAAL,CAAWO,MAAX,EAAmB9U,KAAnB,CAAyBpO,IAAzB,CAA8B,CAAC6H,MAAMyb,aAAP,CAAqBpW,KAAKqW,WAA1B,CAAsCC,aAAaA,cAAc,MAAjE,CAAwEG,cAAcH,YAAtF,CAAmGI,QAAQH,iBAAiB,IAAIF,WAAhI,CAA4IP,SAASA,WAAW,IAAX,EAAiB,MAAOA,SAAP,GAAkB,WAAnC,CAA+C,KAAKL,KAAL,CAAWO,MAAX,EAAmBF,QAAlE,CAA2EA,QAAhO,CAAyOH,MAAMA,QAAQ,IAAR,EAAc,MAAOA,MAAP,GAAe,WAA7B,CAAyC,KAAKF,KAAL,CAAWO,MAAX,EAAmBL,KAA5D,CAAkEA,KAAjT,CAAuTa,SAASA,UAAU,CAA1U,CAA4UtV,MAAM,EAAlV,CAAqVwU,aAAaA,YAAlW,CAA9B,EAA+Y;AAC/Y,MAAO,MAAKD,KAAL,CAAWO,MAAX,CAAP,CAA2B,CAH3B,CAG4B;AAC5B,KAAKzhB,cAAL,CAAoB,SAASyhB,MAAT,CAAgBW,eAAhB,CAAgCP,aAAhC,CAA8CC,WAA9C,CAA0DE,eAA1D,CAA0ET,QAA1E,CAAmFH,KAAnF,CAAyFa,QAAzF,CAAkG,CAAC;AACvH,KAAKT,qBAAL,CAA2BC,MAA3B,EAAmC;AACnC,IAAI,GAAIY,UAAR,GAAqB,MAAKnB,KAAL,CAAWO,MAAX,EAAmB9U,KAAxC,CAA8C,CAAC,GAAG,KAAKuU,KAAL,CAAWO,MAAX,EAAmB9U,KAAnB,CAAyB0V,SAAzB,EAAoC5W,IAApC,GAA2C2W,eAA9C,CAA8D,CAAC;AAC9G,KAAKlB,KAAL,CAAWO,MAAX,EAAmB9U,KAAnB,CAAyB0V,SAAzB,EAAoC1V,KAApC,CAA0CpO,IAA1C,CAA+C,CAAC6H,MAAMyb,aAAP,CAAqBpW,KAAKqW,WAA1B,CAAsCK,QAAQH,iBAAiB,IAAIF,WAAnE,CAA+EP,SAASA,WAAW,IAAX,EAAiB,MAAOA,SAAP,GAAkB,WAAnC,CAA+C,KAAKL,KAAL,CAAWO,MAAX,EAAmB9U,KAAnB,CAAyB0V,SAAzB,EAAoCd,QAAnF,CAA4FA,QAApL,CAA6LH,MAAMA,QAAQ,IAAR,EAAc,MAAOA,MAAP,GAAe,WAA7B,CAAyC,KAAKF,KAAL,CAAWO,MAAX,EAAmB9U,KAAnB,CAAyB0V,SAAzB,EAAoCjB,KAA7E,CAAmFA,KAAtR,CAA4Ra,SAASA,UAAU,CAA/S,CAAiTd,aAAaA,YAA9T,CAA/C,EAA6X,CAAC;AAC9X,MAAO,MAAKD,KAAL,CAAWO,MAAX,CAAP,CAA2B,CAJ3B,CAI4B;AAC5B,KAAKa,cAAL,CAAoB,SAASb,MAAT,CAAgBK,WAAhB,CAA4B,CAAC;AACjD,KAAKN,qBAAL,CAA2BC,MAA3B,EAAmC;AACnC,IAAI,GAAIY,UAAR,GAAqB,MAAKnB,KAAL,CAAWO,MAAX,EAAmB9U,KAAxC,CAA8C,CAAC,GAAG,KAAKuU,KAAL,CAAWO,MAAX,EAAmB9U,KAAnB,CAAyB0V,SAAzB,EAAoC5W,IAApC,GAA2CqW,WAA9C,CAA0D,CAAC,KAAKZ,KAAL,CAAWO,MAAX,EAAmB9U,KAAnB,CAAyBzI,MAAzB,CAAgCme,SAAhC,CAA0C,CAA1C,EAA8C,CAAC;AACzJ,MAAO,MAAKnB,KAAL,CAAWO,MAAX,CAAP,CAA2B,CAH3B,CAG4B;AAC5B,KAAKc,iBAAL,CAAuB,SAASd,MAAT,CAAgBe,cAAhB,CAA+B,CAAC;AACvD,KAAKhB,qBAAL,CAA2BC,MAA3B,EAAmC;AACnC,IAAI,GAAIY,UAAR,GAAqB,MAAKnB,KAAL,CAAWO,MAAX,EAAmB9U,KAAxC,CAA8C,CAAC,IAAI,GAAI8V,aAAR,GAAwB,MAAKvB,KAAL,CAAWO,MAAX,EAAmB9U,KAAnB,CAAyB0V,SAAzB,EAAoC1V,KAA5D,CAAkE,CAAC,GAAG,KAAKuU,KAAL,CAAWO,MAAX,EAAmB9U,KAAnB,CAAyB0V,SAAzB,EAAoC1V,KAApC,CAA0C8V,YAA1C,EAAwDhX,IAAxD,GAA+D+W,cAAlE,CAAiF,CAAC,KAAKtB,KAAL,CAAWO,MAAX,EAAmB9U,KAAnB,CAAyB0V,SAAzB,EAAoC1V,KAApC,CAA0CzI,MAA1C,CAAiDue,YAAjD,CAA8D,CAA9D,EAAkE,CAAC,CAAC;AACxQ,MAAO,MAAKvB,KAAL,CAAWO,MAAX,CAAP,CAA2B,CAH3B,CAG4B;AAC5B,KAAKE,OAAL,CAAa,QAAb,EAAwB,CA/Be,CAAvC,EA+B2B,CAAC,UAAU,CAAC,aAAavjB,QAAQC,MAAR,CAAe,MAAf,EAAuBoR,OAAvB,CAA+B,qBAA/B,CAAqDvO,mBAArD,EAA0E,QAASA,oBAAT,EAA8B,CAAC,GAAI2Z,MAAK,IAAT,CAAc,gBAAgB,kBAAkB6H,OAAOC,OAAP,CAAe,CAAC,cAAc,KAAf,CAAqB,QAAQ,KAA7B,CAAmC,cAAc,KAAjD,CAAuD,cAAc,KAArE,CAA2E,gBAAgB,oBAA3F,CAAgH,oBAAoB,KAApI,CAA0I,UAAU,IAApJ,CAAyJ,eAAe,KAAxK,CAA8K,eAAe,MAA7L,CAAoM,UAAU,MAA9M,CAAqN,kBAAkB,MAAvO,CAA8O,aAAa,OAA3P,CAAmQ,aAAa,QAAhR,CAAyR,aAAa,QAAtS,CAA+S,aAAa,SAA5T,CAAf,CAAsV,MAAM,CAACla,QAAQ,QAASA,QAAT,CAAiBrC,KAAjB,CAAuBuB,IAAvB,CAA4B,CAAC+a,OAAOja,OAAP,CAAed,IAAf,CAAoBvB,KAApB,CAA0B,SAA1B,EAAsC,CAA5E,CAA6EhC,QAAQ,QAASA,QAAT,CAAiBgC,KAAjB,CAAuBuB,IAAvB,CAA4B,CAAC+a,OAAOte,OAAP,CAAeuD,IAAf,CAAoBvB,KAApB,CAA0B,SAA1B,EAAsC,CAAxJ,CAAyJuC,MAAM,QAASA,MAAT,CAAevC,KAAf,CAAqBuB,IAArB,CAA0B,CAAC+a,OAAO/Z,KAAP,CAAahB,IAAb,CAAkBvB,KAAlB,CAAwB,OAAxB,EAAkC,CAA5N,CAA6N2K,MAAM,QAASA,MAAT,CAAe3K,KAAf,CAAqBuB,IAArB,CAA0B3C,IAA1B,CAA+B,CAAC4d,KAAK,CAACxc,MAAMA,KAAP,CAAauB,KAAKA,IAAlB,CAAuB3C,KAAKA,IAA5B,CAAL,EAAyC,CAA5S,CAA6SlB,aAAa,QAASA,aAAT,CAAsB+e,MAAtB,CAA6B,CAAC;AACj4BD,KAAK,CAACxc,MAAM,eAAP,CAAuBuB,KAAK,4CAA5B,CAAyE3C,KAAK,SAA9E,CAAwF8d,iBAAiB,IAAzG,CAA8GC,eAAe,IAA7H,CAAkIC,kBAAkB,iBAApJ,CAAsKC,mBAAmB,SAAzL,CAAL,CAAyMJ,MAAzM,EAAkN,CADuV,CAAN,CAC9U,CAAC,CAD3L,IAC+L,CAAC,UAAU,CAAC,aAAazkB,QAAQC,MAAR,CAAe,MAAf,EAAuBoR,OAAvB,CAA+B,gBAA/B,CAAgDyT,cAAhD,EAAgEA,eAAe3iB,OAAf,CAAuB,CAAC,IAAD,CAAvB,CAA8B,QAAS2iB,eAAT,CAAwBzN,EAAxB,CAA2B,CAAC,GAAI0N,UAAS,EAAb,CAAgBC,MAAM,EAAtB,CAAyBC,MAAM,EAA/B,CAAkC,MAAM,CAACF,SAASA,QAAV,CAAmB;AACxa3D,UAAU,QAASA,UAAT,CAAmBza,IAAnB,CAAwB,CAAC,GAAG,CAACA,KAAKue,cAAL,CAAoB,MAApB,CAAJ,CAAgC,CAAC,KAAM,IAAI5B,MAAJ,CAAU,wEAAV,CAAN,CAA2F,IAAGyB,SAASG,cAAT,CAAwBve,KAAK7F,IAA7B,CAAH,CAAsC,CAAC,KAAM,IAAIwiB,MAAJ,CAAU,6BAA6B3c,KAAK7F,IAAlC,CAAuC,iCAAjD,CAAN,CAA2F,UAAS6F,KAAK7F,IAAd,EAAoB6F,IAApB,CAAyB;AAC1T,KAAKyN,KAAL,GAAa;AACb;AACA,GAAG4Q,MAAMre,KAAK7F,IAAX,CAAH,CAAoB,CAAC;AACrB,GAAGmkB,MAAMte,KAAK7F,IAAX,CAAH,CAAoB,CAAC;AACrB,KAAKkkB,MAAMre,KAAK7F,IAAX,CAAL,EAAuB6F,KAAK7F,IAA5B,CAAiCmkB,MAAMte,KAAK7F,IAAX,CAAjC,EAAmD,MAAOmkB,OAAMte,KAAK7F,IAAX,CAAP,CAAwB,MAAOkkB,OAAMre,KAAK7F,IAAX,CAAP,CAAyB,CADpG,IACwG,CAAC;AACzG,KAAKkkB,MAAMre,KAAK7F,IAAX,CAAL,EAAuB6F,KAAK7F,IAA5B,EAAkC,MAAOkkB,OAAMre,KAAK7F,IAAX,CAAP,CAAyB,CAAC;AAC3D,CARoZ,CAQnZugB,YAAY,QAASA,YAAT,CAAqBvgB,IAArB,CAA0B,CAAC,GAAGikB,SAASG,cAAT,CAAwBpkB,IAAxB,CAAH,CAAiC,CAAC,MAAOikB,UAASjkB,IAAT,CAAP,CAAuB,CAAC,CARkT,CAQjTyG,QAAQ,QAASA,QAAT,CAAiBzG,IAAjB,CAAsBqkB,gBAAtB,CAAuC,CAAC,GAAG,CAAC,KAAKJ,QAAL,CAAcjkB,IAAd,CAAJ,CAAwB,CAACkkB,MAAMlkB,IAAN,EAAY,SAAZ,CAAsBmkB,MAAMnkB,IAAN,EAAYqkB,gBAAZ,CAA6B;AAChO,OAAQ,IAAIC,SAAQL,SAASjkB,IAAT,CAAZ,CAA2BskB,QAAQnE,IAAR,CAAangB,IAAb,EAAmBqkB,iBAAiBA,kBAAkB,EAAnC,CAAsC;AAC5F,GAAGA,iBAAiBE,MAAjB,EAAyBF,iBAAiB,SAAjB,CAA5B,CAAwD,CAACA,iBAAiB,CAACG,QAAQH,gBAAT,CAAjB,CAA6C,IAAIZ,SAAQvkB,QAAQulB,MAAR,CAAe,EAAf,CAAkBJ,gBAAlB,CAAZ,CAAgD,GAAGZ,QAAQe,OAAX,CAAmB,CAAC,GAAGf,QAAQe,OAAR,CAAgBD,MAAnB,CAA0B,CAACd,QAAQe,OAAR,CAAgBD,MAAhB,CAAuB,UAAU,CAACD,QAAQlE,IAAR,CAAapgB,IAAb,EAAoB,CAAtD,EAAyD,CAApF,IAAyF,IAAGyjB,QAAQe,OAAR,CAAgB,SAAhB,CAAH,CAA8B,CAACf,QAAQe,OAAR,CAAgB,SAAhB,EAA2B,UAAU,CAACF,QAAQlE,IAAR,CAAapgB,IAAb,EAAoB,CAA1D,EAA6D,CAAC,CAAC,CAVoD,CAUnDmgB,KAAK,QAASA,KAAT,CAAcngB,IAAd,CAAmB,CAAC;AAC3X,GAAG,CAAC,KAAKikB,QAAL,CAAcjkB,IAAd,CAAJ,CAAwB,CAACkkB,MAAMlkB,IAAN,EAAY,MAAZ,CAAmB,OAAQ,IAAIskB,SAAQL,SAASjkB,IAAT,CAAZ,CAA2B,GAAG,CAACskB,OAAJ,CAAY,CAAC,KAAM,IAAI9B,MAAJ,CAAU,sBAAsBxiB,IAAtB,CAA2B,mBAArC,CAAN,CAAiE,SAAQmgB,IAAR,GAAgB,CAXwO,CAWvOC,KAAK,QAASA,KAAT,CAAcpgB,IAAd,CAAmB,CAAC;AACvM,GAAG,CAAC,KAAKikB,QAAL,CAAcjkB,IAAd,CAAJ,CAAwB,CAACkkB,MAAMlkB,IAAN,EAAY,MAAZ,CAAmB,OAAQ,IAAIskB,SAAQL,SAASjkB,IAAT,CAAZ,CAA2B,GAAG,CAACskB,OAAJ,CAAY,CAAC,KAAM,IAAI9B,MAAJ,CAAU,sBAAsBxiB,IAAtB,CAA2B,mBAArC,CAAN,CAAiE,SAAQogB,IAAR,GAAgB,CAZwO,CAYvOC,OAAO,QAASA,OAAT,CAAgBrgB,IAAhB,CAAqB,CAAC;AAC3M,GAAG,CAAC,KAAKikB,QAAL,CAAcjkB,IAAd,CAAJ,CAAwB,CAACkkB,MAAMlkB,IAAN,EAAY,QAAZ,CAAqB,OAAQ,IAAIskB,SAAQL,SAASjkB,IAAT,CAAZ,CAA2B,GAAG,CAACskB,OAAJ,CAAY,CAAC,KAAM,IAAI9B,MAAJ,CAAU,sBAAsBxiB,IAAtB,CAA2B,mBAArC,CAAN,CAAiE,SAAQqgB,MAAR,GAAkB,CAboO,CAanO/M,MAAM,CAb6N,CAAN,CAanN,CAAC,CAb6B,IAazB,aAAa;AAC9MpU,QAAQC,MAAR,CAAe,SAAf,EAA0BG,MAA1B,CAAiC,CAAC,gBAAD,CAAkB,oBAAlB,CAAuC,SAASyB,cAAT,CAAwB2jB,kBAAxB,CAA2C,CAAC;AACpHA,mBAAmBC,SAAnB,CAA6B,SAA7B,EAAwC;AACxC5jB,eAAeC,KAAf,CAAqB,SAArB,CAA+B,CAACC,IAAI,UAAL,CAAgBC,YAAY,gDAA5B,CAA/B,EAA+G,CAF9E,CAAjC,EAEkH,CAAC,UAAU,CAAC,aAAahC,QAAQC,MAAR,CAAe,SAAf,EAA0BgC,UAA1B,CAAqC,mBAArC,CAAyDyjB,iBAAzD,EAA4EA,kBAAkBvjB,OAAlB,CAA0B,CAAC,QAAD,CAAU,cAAV,CAAyB,WAAzB,CAAqC,gBAArC,CAAsD,cAAtD,CAAqE,cAArE,CAAoF,gBAApF,CAAqG,aAArG,CAAmH,gBAAnH,CAA1B,CAA+J,QAASujB,kBAAT,CAA2BtjB,MAA3B,CAAkCC,YAAlC,CAA+CC,SAA/C,CAAyD5B,cAAzD,CAAwEilB,YAAxE,CAAqFC,YAArF,CAAkGC,cAAlG,CAAiHhjB,WAAjH,CAA6HG,cAA7H,CAA4I,CAAC,GAAIG,MAAK,IAAT,CAAc0B,WAAW,GAAIuB,KAAJ,GAAWkT,OAAX,CAAmB,GAAIlT,KAAJ,GAAWgT,OAAX,GAAqB,EAAxC,CAAzB,CAAqEjW,KAAKC,cAAL,CAAoB1C,cAApB,CAAmCyC,KAAK2iB,YAAL,CAAkBA,YAAlB,CAA+B3iB,KAAKE,YAAL,CAAkB,CAAC0iB,cAAc,OAAf,CAAlB,CAA0C5iB,KAAK6iB,YAAL,CAAkBA,YAAlB,CAA+B7iB,KAAK8iB,aAAL,CAAmB,CAAC,CAACnlB,KAAK,OAAN,CAAD,CAAgB,CAACA,KAAK,WAAN,CAAhB,CAAmC,CAACA,KAAK,WAAN,CAAnC,CAAsD,CAACA,KAAK,WAAN,CAAtD,CAAyE,CAACA,KAAK,eAAN,CAAzE,CAAgG,CAACA,KAAK,iBAAN,CAAhG,CAAyH,CAACA,KAAK,gBAAN,CAAzH,CAAnB,CAAqKqC,KAAKgL,IAAL,CAAU,OAAV,CAAkB,QAAS2X,aAAT,EAAuB,CAAC9iB,eAAeuE,OAAf,CAAuB,SAAvB,CAAiCoe,aAAane,KAAb,CAAmB,CAACrB,OAAOtB,UAAR,CAAnB,EAAwCuC,QAAxC,CAAiDN,IAAjD,CAAsD,SAASD,MAAT,CAAgB,CAAC,MAAOgf,gBAAeK,gBAAf,CAAgCrf,MAAhC,CAAP,CAAgD,CAAvH,EAAyHC,IAAzH,CAA8H,SAASD,MAAT,CAAgB,CAAC;AACllC1D,KAAKgjB,YAAL,CAAkBtf,MAAlB,CAAyB,MAAO+e,cAAape,KAAb,CAAmB,CAACrB,OAAOtB,UAAR,CAAnB,EAAwCuC,QAA/C,CAAyD,CADi3B,EAC/2BN,IAD+2B,CAC12B,SAASD,MAAT,CAAgB,CAAC;AAC1G,MAAOgf,gBAAeK,gBAAf,CAAgCrf,MAAhC,CAAP,CAAgD,CAFm5B,EAEj5BC,IAFi5B,CAE54B,SAASD,MAAT,CAAgB,CAAC;AACxE1D,KAAKijB,YAAL,CAAkBvf,MAAlB,CAA0B,CAHy6B,CAAjC,EAGp4B;AAC9BzE,OAAOyJ,MAAP,CAAc,MAAd,CAAqB,SAASwa,QAAT,CAAkB,CAAC,GAAGljB,KAAKgL,IAAL,GAAYvK,SAAf,CAAyB,CAAC,GAAGyiB,WAAW,OAAX,EAAoBA,WAAW,OAAlC,CAA0C,CAACljB,KAAKgL,IAAL,CAAU,OAAV,CAAmB,CAAC,CAAC,CAAlI,EAAoI,QAAS6X,aAAT,CAAsBM,IAAtB,CAA2B,CAAC,MAAOT,gBAAeG,YAAf,CAA4BM,IAA5B,CAAP,CAA0C,CAAC,CAAC,CAJ1F,IAI8F,CAAC,UAAU,CAAC,aAAatmB,QAAQC,MAAR,CAAe,OAAf,EAAwBgC,UAAxB,CAAmC,uBAAnC,CAA2DskB,qBAA3D,EAAkFA,sBAAsBpkB,OAAtB,CAA8B,CAAC,QAAD,CAAU,MAAV,CAAiB,cAAjB,CAAgC,gBAAhC,CAAiD,aAAjD,CAA+D,qBAA/D,CAAqF,gBAArF,CAAsG,mBAAtG,CAA9B,CAAyJ,QAASokB,sBAAT,CAA+BnkB,MAA/B,CAAsCuE,IAAtC,CAA2CtE,YAA3C,CAAwD3B,cAAxD,CAAuEkC,WAAvE,CAAmFE,mBAAnF,CAAuGE,cAAvG,CAAsHwjB,iBAAtH,CAAwI,CAAC,GAAIrjB,MAAK,IAAT,CAAcsjB,aAAa,EAA3B,CAA8BtjB,KAAKma,MAAL,CAAYA,MAAZ,CAAmBna,KAAK6P,aAAL,CAAmBA,aAAnB,CAAiC7P,KAAK6F,MAAL,CAAYA,MAAZ,CAAmB7F,KAAKyD,IAAL,CAAUD,KAAKC,IAAf,CAAoBzD,KAAKkD,OAAL,CAAa,KAAb,CAAmBlD,KAAKwB,QAAL,CAAcgC,KAAKhC,QAAnB,CAA4B,QAASqO,cAAT,CAAuB/M,IAAvB,CAA4B2N,OAA5B,CAAoC,CAAC;AAC1yB9Q,oBAAoB4C,YAApB,CAAiC,UAAU,CAAC,GAAG+gB,aAAana,MAAb,GAAsB,CAAzB,CAA2B,CAACma,aAAatjB,KAAKwB,QAAL,CAAcsC,IAAd,CAAmB2M,OAAhC,CAAyC,MAAKjP,QAAL,CAAc/B,YAAYoQ,aAAZ,CAA0B/M,IAA1B,CAA+B2N,OAA/B,CAAd,CAAsDzQ,KAAKkD,OAAL,CAAa,IAAb,CAAmB,CAA1L,EAA6L,SAAS2C,OAAT,EAAiB,CAACwd,kBAAkBE,KAAlB,CAAwBvjB,KAAKkD,OAA7B,EAAuC,SAASiX,OAAT,EAAiB,CAAC,GAAGna,KAAKkD,OAAR,CAAgB,CAAClD,KAAKwB,QAAL,CAAcsC,IAAd,CAAmB2M,OAAnB,CAA2B6S,YAA3B,CAAyC,mBAAkBE,OAAlB,GAA6B,CAAC,CAAC,CADjJ,IACqJ,CAAC,UAAU,CAAC,aAAa3mB,QAAQC,MAAR,CAAe,SAAf,EAA0B4P,MAA1B,CAAiC,kBAAjC,CAAoD+W,gBAApD,EAAsEA,iBAAiBzkB,OAAjB,CAAyB,CAAC,gBAAD,CAAkB,QAAlB,CAAzB,CAAqD,QAASykB,iBAAT,CAA0Bf,cAA1B,CAAyC1V,MAAzC,CAAgD,CAAC,MAAO,UAASJ,KAAT,CAAe8W,KAAf,CAAqBC,SAArB,CAA+B,CAAC,GAAIjF,SAAJ,CAAa9J,KAAK8O,QAAQ,OAAR,CAAgB,QAAhB,CAAyB,MAA3C,CAAkD,GAAG9W,QAAQnM,SAAX,CAAqB,CAAC,MAAOmM,OAAMF,MAAN,CAAa,SAAS5J,IAAT,CAAc,CAAC4b,SAAS1R,OAAOlK,KAAK8R,IAAL,CAAP,EAAmBgP,OAAnB,CAA2B,KAA3B,CAAT,CAA2C,MAAOlB,gBAAemB,iBAAf,CAAiCF,UAAUhO,WAAV,EAAjC,CAAyD+I,QAAzD,EAAmE5b,IAAnE,CAAwE,KAA/E,CAAsF,CAA7J,CAAP,CAAuK,CAAC,CAAvR,CAAyR,CAAC,CAA/d,IAAme,CAAC,UAAU,CAAC,aAAa;AACj2BjG,QAAQC,MAAR,CAAe,SAAf,EAA0BoR,OAA1B,CAAkC,cAAlC,CAAiDsU,YAAjD,EAA+DA,aAAaxjB,OAAb,CAAqB,CAAC,WAAD,CAArB,CAAmC,QAASwjB,aAAT,CAAsB7T,SAAtB,CAAgC,CAAC,MAAOA,WAAU,uBAAV,CAAkC,CAAC3L,OAAO,UAAR,CAAlC,CAAsD,CAACf,OAAO,CAAC2M,OAAO,KAAR,CAAR,CAAtD,CAAP,CAAuF,CAAC,CAD6mB,IACzmB,CAAC,UAAU,CAAC,aAAa/R,QAAQC,MAAR,CAAe,SAAf,EAA0B+R,OAA1B,CAAkC,gBAAlC,CAAmD6T,cAAnD,EAAmEA,eAAe1jB,OAAf,CAAuB,CAAC,QAAD,CAAU,IAAV,CAAvB,CAAuC,QAAS0jB,eAAT,CAAwB1V,MAAxB,CAA+BkH,EAA/B,CAAkC,CAAC,GAAIrF,SAAQ,CAACkU,iBAAiBA,gBAAlB,CAAmCe,eAAeA,cAAlD,CAAiED,kBAAkBA,iBAAnF,CAAqGE,cAAcA,aAAnH,CAAiIC,cAAcA,aAA/I,CAA6JC,iBAAiBA,gBAA9K,CAA+LpB,aAAaA,YAA5M,CAAyNtR,MAAMvE,OAAO,GAAI/J,KAAJ,EAAP,EAAmB2gB,OAAnB,CAA2B,KAA3B,CAA/N,CAAiQM,cAAcA,aAA/Q,CAA6RC,WAAWA,UAAxS,CAAZ,CAAgUC,WAAWL,eAA3U,CAA2VM,QAAQD,WAAWC,OAA9W,CAAsXC,QAAQF,WAAWE,OAAzY,CAAiZ,MAAOzV,QAAP,CAAe;AACryB,QAASkV,cAAT,EAAwB,CAAC,GAAIK,YAAW,EAAf,CAAkBG,WAAW1V,QAAQqV,aAAR,EAA7B,CAAqDM,WAAW3V,QAAQsV,UAAR,EAAhE,CAAqFC,WAAW,CAACC,QAAQ,CAACE,UAAD,CAAY1V,QAAQmV,aAAR,CAAsBO,UAAtB,CAAiC,CAAjC,CAAZ,CAAgD1V,QAAQmV,aAAR,CAAsBO,UAAtB,CAAiC,EAAjC,CAAhD,CAAqF1V,QAAQmV,aAAR,CAAsBO,UAAtB,CAAiC,EAAjC,CAArF,CAA0H1V,QAAQmV,aAAR,CAAsBO,UAAtB,CAAiC,EAAjC,CAA1H,CAAT,CAAyKD,QAAQ,CAACE,UAAD,CAAY3V,QAAQmV,aAAR,CAAsBQ,UAAtB,CAAiC,CAAjC,CAAZ,CAAgD3V,QAAQmV,aAAR,CAAsBQ,UAAtB,CAAiC,EAAjC,CAAhD,CAAqF3V,QAAQmV,aAAR,CAAsBQ,UAAtB,CAAiC,EAAjC,CAArF,CAA0H3V,QAAQmV,aAAR,CAAsBQ,UAAtB,CAAiC,EAAjC,CAA1H,CAAjL,CAAX,CAA6V,MAAOJ,WAAP,CAAmB;AAC9d,QAASJ,cAAT,CAAuBS,OAAvB,CAA+BC,OAA/B,CAAuC,CAAC,GAAIC,SAAQ3X,OAAOyX,OAAP,EAAgBG,QAAhB,CAAyBF,OAAzB,CAAiC,MAAjC,CAAZ,CAAqD,MAAOC,QAAP,CAAgB;AAC7G,QAAST,cAAT,EAAwB,CAAC,GAAI9T,MAAK,GAAInN,KAAJ,EAAT,CAAoB8S,IAAI3F,KAAK4F,MAAL,EAAxB,CAAsC5I,KAAKgD,KAAK6F,OAAL,GAAeF,GAAf,EAAoBA,MAAM,CAAN,CAAQ,CAAC,CAAT,CAAW,CAA/B,CAA3C,CAA6EjF,KAAK,GAAI7N,KAAJ,EAAlF,CAA6F4hB,MAAM,GAAI5hB,KAAJ,CAAS6N,KAAKqF,OAAL,CAAa/I,IAAb,CAAT,CAAnG,CAAgI,MAAOJ,QAAO6X,MAAMpT,WAAN,EAAP,EAA4BmS,OAA5B,CAAoC,KAApC,CAAP,CAAmD;AAC5M,QAASO,WAAT,EAAqB,CAAC,GAAI/T,MAAK,GAAInN,KAAJ,EAAT,CAAoB8S,IAAI3F,KAAK4F,MAAL,EAAxB,CAAsC5I,KAAKgD,KAAK6F,OAAL,GAAeF,GAAf,EAAoBA,MAAM,CAAN,CAAQ,CAAR,CAAU,CAA9B,CAA3C,CAA4EjF,KAAK,GAAI7N,KAAJ,EAAjF,CAA4FiT,MAAM,GAAIjT,KAAJ,CAAS6N,KAAKqF,OAAL,CAAa/I,IAAb,CAAT,CAAlG,CAA+H,MAAOJ,QAAOkJ,MAAMzE,WAAN,EAAP,EAA4B2E,KAA5B,CAAkC,KAAlC,CAAP,CAAiD,SAAS2M,iBAAT,CAA0B3X,KAA1B,CAAgC,CAAC,GAAI0Z,UAAS5Q,GAAG6Q,KAAH,EAAb,CAAwB5C,QAAQtT,QAAQiV,cAAR,CAAuB1Y,KAAvB,EAA8BzH,IAA9B,CAAmC,SAASD,MAAT,CAAgB,CAAC;AAC3TA,OAAOshB,IAAP,CAAY,SAASC,CAAT,CAAWC,CAAX,CAAa,CAAC,GAAIC,OAAMF,EAAE7U,IAAZ,CAAiBgV,MAAMF,EAAE9U,IAAzB,CAA8B,GAAG+U,MAAMC,KAAT,CAAe,MAAM,CAAC,CAAP,CAAS,GAAGD,MAAMC,KAAT,CAAe,MAAO,EAAP,CAAS,GAAGD,QAAQC,KAAX,CAAiB,MAAO,EAAP,CAAU,CAAnI,EAAqI,MAAOvW,SAAQoV,gBAAR,CAAyBvgB,MAAzB,CAAP,CAAyC,CADyF,EACvFC,IADuF,CAClF,SAASD,MAAT,CAAgB,CAAC;AACtMohB,SAASvhB,OAAT,CAAiBG,MAAjB,EAA0B,CAF6O,CAAhC,CAE3M,MAAOohB,UAAS3C,OAAhB,CAAyB,SAAS2B,eAAT,CAAwB1Y,KAAxB,CAA8B,CAAC,GAAI0Z,UAAS5Q,GAAG6Q,KAAH,EAAb,CAAwB1W,YAAY,EAApC,CAAuCkD,MAAMvE,OAAO,GAAI/J,KAAJ,EAAP,EAAmB2gB,OAAnB,CAA2B,KAA3B,CAA7C,CAA+E/mB,QAAQkU,OAAR,CAAgB3F,KAAhB,CAAsB,SAAStI,IAAT,CAAc,CAACjG,QAAQkU,OAAR,CAAgBjO,KAAKgB,IAAL,CAAU2M,OAA1B,CAAkC,SAASA,OAAT,CAAiB,CAAC,GAAI4U,QAAOrY,OAAOyD,QAAQL,IAAf,EAAqBwT,OAArB,CAA6B,KAA7B,CAAX,CAA+CxW,KAAKmE,MAAMnE,IAAN,CAAWiY,MAAX,CAAkB,MAAlB,CAApD,CAA8E;AAC1U,GAAGjY,KAAK,EAAR,CAAW,CAACiB,YAAYrR,IAAZ,CAAiB,CAACoT,KAAKK,QAAQL,IAAd,CAAmBjM,MAAMsM,QAAQtM,KAAjC,CAAuCU,MAAM/B,KAAK+B,KAAlD,CAAwD2E,GAAG1G,KAAKjF,GAAhE,CAAjB,EAAwF,CAAC,CADmG,EAChG,CAD2D,EACzDinB,SAASvhB,OAAT,CAAiB8K,WAAjB,EAA8B,MAAOyW,UAAS3C,OAAhB,CAAyB,SAAS8B,iBAAT,CAA0B5V,WAA1B,CAAsC,CAAC,GAAIyW,UAAS5Q,GAAG6Q,KAAH,EAAb,CAAwB1T,KAAxB,CAA8BiU,QAA9B,CAAuCxiB,IAAvC,CAA4CqS,KAA5C,CAAkDhM,OAAOkF,YAAYlF,MAArE,CAA4Eoc,eAAe,EAA3F,CAA8F,IAAI,GAAI9iB,GAAE,CAAV,CAAYA,EAAE0G,MAAd,CAAqB1G,GAArB,CAAyB,CAACK,KAAKuL,YAAY5L,CAAZ,CAAL,CAAoB,GAAGA,IAAI,CAAP,CAAS,CAAC8iB,eAAevoB,IAAf,CAAoB,CAAC6H,MAAM/B,KAAK+B,KAAZ,CAAkBuG,MAAM,EAAxB,CAA2B6F,MAAM,CAAjC,CAAmCjO,OAAOF,KAAKsN,IAA/C,CAAoDoV,OAAO1iB,KAAKsN,IAAhE,CAApB,EAA2FmV,eAAe,CAAf,EAAkBna,KAAlB,CAAwBpO,IAAxB,CAA6B8F,IAA7B,EAAoC,CAAzI,IAA8I,IAAGL,IAAI,CAAP,CAAS,CAAC6iB,SAASjX,YAAY5L,EAAE,CAAd,CAAT,CAA0B4O,MAAMkU,eAAepc,MAAf,CAAsB,CAA5B,CAA8B,GAAGmc,SAASzgB,KAAT,GAAiB/B,KAAK+B,KAAzB,CAA+B,CAAC0gB,eAAelU,KAAf,EAAsBjG,KAAtB,CAA4BpO,IAA5B,CAAiC8F,IAAjC,EAAuCyiB,eAAelU,KAAf,EAAsBJ,KAAtB,GAA8BsU,eAAelU,KAAf,EAAsBmU,MAAtB,CAA6B1iB,KAAKsN,IAAlC,CAAwC,CAA7I,IAAkJ,IAAGkV,SAASzgB,KAAT,GAAiB/B,KAAK+B,KAAzB,CAA+B,CAACsQ,MAAM,CAACtQ,MAAM/B,KAAK+B,KAAZ,CAAkBuG,MAAM,EAAxB,CAA2B6F,MAAM,CAAjC,CAAmCjO,OAAOF,KAAKsN,IAA/C,CAAoDoV,OAAO1iB,KAAKsN,IAAhE,CAAN,CAA4E+E,MAAM/J,KAAN,CAAYpO,IAAZ,CAAiB8F,IAAjB,EAAuByiB,eAAevoB,IAAf,CAAoBmY,KAApB,EAA4B,CAAC,CAAC,UAAS5R,OAAT,CAAiBgiB,cAAjB,EAAiC,MAAOT,UAAS3C,OAAhB,CAAyB,SAAS0B,kBAAT,CAA2BF,SAA3B,CAAqCjF,QAArC,CAA8C,CAAC,GAAItR,MAAKyB,QAAQ0C,KAAR,CAAcnE,IAAd,CAAmBsR,QAAnB,CAA4B,MAA5B,CAAT,CAA6C,OAAOiF,SAAP,EAAkB,IAAI,OAAJ,CAAY,MAAOvW,QAAO,CAAd,CAAgB,IAAI,WAAJ,CAAgB,MAAOA,QAAO,CAAd,CAAgB,IAAI,WAAJ,CAAgB,MAAOiX,SAAQ,CAAR,GAAY3F,QAAZ,EAAsBA,UAAU4F,QAAQ,CAAR,CAAvC,CAAkD,IAAI,WAAJ,CAAgB,MAAOD,SAAQ,CAAR,GAAY3F,QAAZ,EAAsBA,UAAU4F,QAAQ,CAAR,CAAvC,CAAkD,IAAI,eAAJ,CAAoB,MAAOD,SAAQ,CAAR,GAAY3F,QAAZ,EAAsBA,UAAU4F,QAAQ,CAAR,CAAvC,CAAkD,IAAI,iBAAJ,CAAsB,MAAOD,SAAQ,CAAR,GAAY3F,QAAZ,EAAsBA,UAAU4F,QAAQ,CAAR,CAAvC,CAAkD,IAAI,gBAAJ,CAAqB,MAAOD,SAAQ,CAAR,GAAY3F,QAAZ,EAAsBA,UAAU4F,QAAQ,CAAR,CAAvC,CAArX,CAAya;;;OAG/4C,QAASzB,aAAT,CAAsBM,IAAtB,CAA2B,CAAC;AACnC,GAAI5R,OAAMvE,OAAO,GAAI/J,KAAJ,EAAP,EAAmB2gB,OAAnB,CAA2B,KAA3B,CAAV,CAA4C6B,SAASzY,OAAOmW,IAAP,EAAaS,OAAb,CAAqB,KAArB,CAArD,CAAiFxW,KAAKmE,MAAMnE,IAAN,CAAWqY,QAAX,CAAoB,MAApB,CAAtF,CAAkH;AAClH,GAAGrY,OAAO,CAAV,CAAY,CAAC,MAAM,YAAYJ,OAAOmW,IAAP,EAAaxR,MAAb,CAAoB,OAApB,CAAlB,CAAgD,CAA7D,IAAkE,IAAGvE,OAAO,CAAV,CAAY,CAAC,MAAM,gBAAgBJ,OAAOmW,IAAP,EAAaxR,MAAb,CAAoB,OAApB,CAAtB,CAAoD,CAAjE,IAAqE,CAAC,MAAOvE,MAAK,eAAL,CAAqBJ,OAAOmW,IAAP,EAAaxR,MAAb,CAAoB,OAApB,CAA5B,CAA0D,CAAC,CAAC,CAAC,CAZ0B,IAYtB,CAAC,UAAU,CAAC,aAAa9U,QAAQC,MAAR,CAAe,SAAf,EAA0BoR,OAA1B,CAAkC,cAAlC,CAAiDuU,YAAjD,EAA+DA,aAAazjB,OAAb,CAAqB,CAAC,WAAD,CAArB,CAAmC,QAASyjB,aAAT,CAAsB9T,SAAtB,CAAgC,CAAC,MAAOA,WAAU,uBAAV,CAAkC,CAAC3L,OAAO,UAAR,CAAlC,CAAsD,CAACf,OAAO,CAAC2M,OAAO,KAAR,CAAR,CAAtD,CAAP,CAAuF,CAAC,CAApP,IAAwP,aAAa;AAC9c/R,QAAQC,MAAR,CAAe,YAAf,EAA6BM,GAA7B,CAAiC,CAAC,OAAD,CAAS,SAASmB,KAAT,CAAe,CAAC;AAC1DA,MAAMC,WAAN,CAAkB,QAAlB,CAA2B,YAA3B,CAAwC,YAAxC,CAAqD,UAArD,CAAgE,uBAAhE,EAAyFD,MAAME,cAAN,CAAqB,QAArB,CAA8B,YAA9B,CAA2C,iBAA3C,CAA6D,YAA7D,EAA2EF,MAAME,cAAN,CAAqB,QAArB,CAA8B,YAA9B,CAA2C,eAA3C,CAA2D,mBAA3D,EAAiF,CADpN,CAAjC,EACwP,aAAa;AACrQ5B,QAAQC,MAAR,CAAe,YAAf,EAA6BG,MAA7B,CAAoC,CAAC,gBAAD,CAAkB,SAASyB,cAAT,CAAwB,CAAC;AAC/EA,eAAeC,KAAf,CAAqB,gBAArB,CAAsC,CAACC,IAAI,aAAL,CAAmBC,YAAY,2DAA/B,CAAtC,EAAmIF,KAAnI,CAAyI,iBAAzI,CAA2J,CAACC,IAAI,oBAAL,CAA0BC,YAAY,4DAAtC,CAA3J,EAAgQF,KAAhQ,CAAsQ,eAAtQ,CAAsR,CAACC,IAAI,0BAAL,CAAgCC,YAAY,0DAA5C,CAAtR,EAA+XF,KAA/X,CAAqY,eAArY,CAAqZ,CAACC,IAAI,+BAAL,CAAqCC,YAAY,0DAAjD,CAArZ,EAAogB,CADhe,CAApC,EACugB,CAAC,UAAU,CAAC,aAAahC,QAAQC,MAAR,CAAe,YAAf,EAA6BgC,UAA7B,CAAwC,sBAAxC,CAA+D4mB,oBAA/D,EAAqFA,qBAAqB1mB,OAArB,CAA6B,CAAC,QAAD,CAAU,cAAV,CAAyB,WAAzB,CAAqC,gBAArC,CAAsD,YAAtD,CAAmE,YAAnE,CAAgF,YAAhF,CAA6F,MAA7F,CAAoG,SAApG,CAA8G,aAA9G,CAA4H,aAA5H,CAA0I,qBAA1I,CAAgK,cAAhK,CAA+K,gBAA/K,CAAgM,YAAhM,CAA6M,WAA7M,CAA7B,CAAuP,QAAS0mB,qBAAT,CAA8BzmB,MAA9B,CAAqCC,YAArC,CAAkDC,SAAlD,CAA4D5B,cAA5D,CAA2E8B,UAA3E,CAAsFD,UAAtF,CAAiGE,UAAjG,CAA4GC,IAA5G,CAAiHC,OAAjH,CAAyHC,WAAzH,CAAqIC,WAArI,CAAiJC,mBAAjJ,CAAqKgmB,YAArK,CAAkL9lB,cAAlL,CAAiMC,UAAjM,CAA4MC,SAA5M,CAAsN,CAAC,GAAIC,MAAK,IAAT,CAAcA,KAAK4E,MAAL,CAAYA,MAAZ,CAAmB5E,KAAKC,cAAL,CAAoB1C,cAApB,CAAmCyC,KAAK2Q,QAAL,CAAc,CAAd,CAAgB3Q,KAAK+E,MAAL,CAAYA,MAAZ,CAAmB/E,KAAKgF,OAAL,CAAaA,OAAb,CAAqBhF,KAAKE,YAAL,CAAkB,CAACE,aAAa,CAAd,CAAgBE,SAAS,EAAzB,CAA4BC,YAAY,IAAxC,CAA6CC,YAAYC,SAAzD,CAAmEC,cAAc,CAACC,UAAU,EAAX,CAAcC,QAAQH,SAAtB,CAAgCI,SAAS,IAAzC,CAAjF,CAAgIE,WAAW,EAA3I,CAA8IC,cAAc,EAA5J,CAA+JC,YAAY,KAA3K,CAAiLC,WAAW,KAA5L,CAAkMC,kBAAkB,EAApN,CAAuNC,SAAS,EAAhO,CAAmOI,SAAS,EAA5O,CAAlB,CAAkQxB,KAAKiF,YAAL,CAAkB,KAAlB,CAAwB;AACz9CjF,KAAKkF,IAAL,CAAUA,IAAV,CAAelF,KAAKuX,SAAL,CAAeA,SAAf,CAAyBvX,KAAKyB,OAAL,CAAaA,OAAb,CAAqBzB,KAAKoF,OAAL,CAAa,EAAb,CAAgB;AAC7EpF,KAAKqF,UAAL,CAAgB,GAAIpC,KAAJ,EAAhB,CAA2B;AAC3BjD,KAAKgD,MAAL,CAAYhD,KAAKqF,UAAjB,CAA4BrF,KAAK0B,UAAL,CAAgBA,UAAhB,CAA2B1B,KAAK2B,UAAL,CAAgB,CAACC,YAAY,CAAb,CAAeC,SAAS,EAAxB,CAAhB,CAA4C7B,KAAK8B,MAAL,CAAYA,MAAZ,CAAmB9B,KAAKuF,SAAL,CAAeA,SAAf,CAAyBvF,KAAKkG,KAAL,CAAWlG,KAAKqF,UAAhB,CAA2BrF,KAAK8F,QAAL,CAAc,EAAd,CAAiB;AAC3L9F,KAAK+F,cAAL,CAAoB,EAApB,CAAuB/F,KAAK+B,OAAL,CAAaA,OAAb,CAAqB/B,KAAKgC,kBAAL,CAAwBA,kBAAxB,CAA2ChC,KAAKiC,MAAL,CAAYA,MAAZ,CAAmBjC,KAAKgG,UAAL,CAAgBA,UAAhB,CAA2BhG,KAAKkC,QAAL,CAAc,EAAd,CAAiB;AACtJlC,KAAKmC,eAAL,CAAqBA,eAArB,CAAqCnC,KAAK4lB,OAAL,CAAa,CAAb,CAAe5lB,KAAKoC,eAAL,CAAqB,WAArB,CAAiC;AACrF,QAASJ,mBAAT,CAA4BpD,GAA5B,CAAgC,CAAC,MAAOW,MAAKyC,kBAAL,CAAwBpD,GAAxB,CAAP,CAAqC;AACtE,QAASgG,OAAT,EAAiB,CAAC9E,WAAW8E,MAAX,CAAkB5E,KAAK8F,QAAvB,CAAgC9F,KAAKmG,MAArC,EAA6CnG,KAAKmG,MAAL,CAAY,EAAZ,CAAgB;AAC/E,QAASnB,QAAT,CAAiBoB,IAAjB,CAAsB,CAACtG,WAAWkF,OAAX,CAAmBhF,KAAK8F,QAAxB,CAAiCM,IAAjC,EAAwC;AAC/D,QAASb,UAAT,CAAmBa,IAAnB,CAAwB,CAACtG,WAAWkF,OAAX,CAAmBhF,KAAK2X,SAAL,CAAetR,IAAlC,CAAuCD,IAAvC,EAA8C;AACvE,QAASrB,OAAT,EAAiB,CAAC,GAAI4S,WAAU,GAAItY,WAAJ,EAAd,CAA+B;AACjD;AACAsY,UAAU,GAAItY,WAAJ,CAAe,CAACwF,MAAM7E,KAAK6E,KAAZ,CAAkB8L,SAAS3Q,KAAK2Q,QAAhC,CAAyCiV,QAAQ5lB,KAAK4lB,OAAtD,CAA8D1f,MAAMlG,KAAKkG,KAAzE,CAA+ElD,OAAOhD,KAAKgD,MAA3F,CAAkG6iB,aAAa7lB,KAAK6lB,YAApH,CAAiIC,YAAY9lB,KAAK8lB,WAAlJ,CAA8JC,SAAS/lB,KAAK+lB,QAA5K,CAAqLpY,MAAM3N,KAAK2N,KAAL,GAAalN,SAAb,EAAwBT,KAAK2N,KAAL,GAAa,IAArC,CAA0C3N,KAAK2N,KAAL,CAAW9P,GAArD,CAAyDmC,KAAK2N,KAAzP,CAA+PtH,KAAKrG,KAAK8F,QAAzQ,CAAkRlI,KAAKoC,KAAKpC,IAA5R,CAAf,CAAV,CAA4T;AAC5T+Z,UAAU3Q,KAAV,CAAgB,SAASC,QAAT,CAAkB,CAAC9H,UAAUyD,IAAV,CAAe,eAAeqE,SAASpJ,GAAvC,EAA4C8B,oBAAoBuH,OAApB,CAA4B,QAA5B,CAAqC,8BAArC,EAAsE,CAArJ,CAAsJ,SAASC,aAAT,CAAuB,CAACnH,KAAKoH,KAAL,CAAWD,cAAc3D,IAAd,CAAmB6D,OAA9B,CAAsC1H,oBAAoByH,KAApB,CAA0B,QAA1B,CAAmCD,cAAc3D,IAAd,CAAmB6D,OAAtD,EAAgE,CAApR,EAAuR;AACvR,QAASvF,OAAT,CAAgB6V,SAAhB,CAA0B,CAAC;AAC3BhY,oBAAoB4C,YAApB,CAAiC,UAAU,CAAC,GAAGoV,SAAH,CAAa,CAACA,UAAUnV,OAAV,GAAoB,IAAI,GAAIC,EAAR,GAAazC,MAAKsH,UAAlB,CAA6B,CAAC,GAAGtH,KAAKsH,UAAL,CAAgB7E,CAAhB,IAAqBkV,SAAxB,CAAkC,CAAC3X,KAAKsH,UAAL,CAAgB3E,MAAhB,CAAuBF,CAAvB,CAAyB,CAAzB,EAA6B,CAAC,CAAC,CAAlI,IAAsI,CAACzC,KAAK2X,SAAL,CAAenV,OAAf,CAAuB,UAAU,CAACrD,UAAUyD,IAAV,CAAe,aAAf,EAA+B,CAAjE,EAAoE,qBAAoBC,OAApB,CAA4B,UAA5B,CAAuC,iCAAvC,EAA2E,CAAlU,EAAqU;AACrU,QAASZ,OAAT,EAAiB,CAAC,GAAI0V,WAAU3X,KAAK2X,SAAnB,CAA6B3X,KAAK2X,SAAL,CAAelX,SAAf,CAAyBklB,aAAa1jB,MAAb,CAAoB0V,SAApB,CAA8B3X,KAAK8F,QAAnC,CAA4C9F,KAAK8E,aAAjD,CAA+D9E,KAAKoF,OAApE,EAA8E,SAASrD,QAAT,CAAiBe,IAAjB,CAAsB,CAACA,KAAK6N,QAAL,EAAe,CAAf,CAAiB7N,KAAKE,MAAL,CAAY,GAAIC,KAAJ,EAAZ,CAAuB;AACrNjD,KAAK8E,aAAL,CAAmB,IAAnB,CAAwB;AACxB9E,KAAK2X,SAAL,CAAe7U,IAAf,CAAoB9C,KAAKiC,MAAL,GAAe;AACnC,QAASiD,KAAT,EAAe,CAAClF,KAAKE,YAAL,CAAkBiB,iBAAlB,CAAoCzB,YAAY2C,oBAAZ,CAAiCrC,KAAKoC,eAAtC,CAApC,CAA2FvC,eAAeuE,OAAf,CAAuB,OAAvB,CAA+B/E,WAAWgF,KAAX,GAAmBJ,QAAnB,CAA4BN,IAA5B,CAAiC,SAASD,MAAT,CAAgB,CAAC1D,KAAKsH,UAAL,CAAgB5D,MAAhB,CAAuB1D,KAAKE,YAAL,CAAkBgB,UAAlB,CAA6BxB,YAAY6E,eAAZ,CAA4Bb,MAA5B,CAA7B,CAAiE1D,KAAKE,YAAL,CAAkBkB,QAAlB,CAA2B3B,YAAY+E,aAAZ,CAA0Bd,MAA1B,CAAiC,CAAjC,CAA3B,CAAgE,CAA1M,CAA/B,EAA6O;AACxV,QAASjC,QAAT,EAAkB,CAACpC,WAAW0E,GAAX,CAAe,CAACoU,YAAYjZ,aAAaiZ,WAA1B,CAAf,EAAuDlU,QAAvD,CAAgEN,IAAhE,CAAqE,SAASD,MAAT,CAAgB,CAAC1D,KAAK2X,SAAL,CAAejU,MAAf,CAAsB;AAC9H,CADkB,EACf;AACJ,QAAS6T,UAAT,EAAoB,CAACvX,KAAK0C,UAAL,CAAgBtD,WAAWiF,KAAX,EAAhB,CAAoC;AACzD,QAAS2B,WAAT,EAAqB,CAAChG,KAAKoF,OAAL,CAAa,2BAA2BpF,KAAKuH,MAAL,CAAY5J,IAApD,CAAyD2B,WAAWkI,eAAX,CAA2BxH,KAAKuH,MAAhC,CAAuC,aAAvC,EAAuD;AACtI,QAAS7F,WAAT,CAAoBsB,MAApB,CAA2BE,OAA3B,CAAmC,CAAC,MAAOzD,aAAYiC,UAAZ,CAAuBsB,MAAvB,CAA8BE,OAA9B,CAAP,CAA+C,SAASf,gBAAT,EAA0B,CAAC,GAAIgB,eAAcpD,UAAUqD,IAAV,CAAe,CAACC,UAAU,IAAX,CAAgBxE,YAAY,0CAA5B,CAAuEC,WAAW,sCAAlF,CAAyHwE,KAAK,IAA9H,CAAmIC,QAAQ,CAACC,KAAK,QAASA,KAAT,EAAe,CAAC,MAAM,CAAChC,SAASxB,KAAKE,YAAL,CAAkBsB,QAA5B,CAAqCiC,KAAK,OAA1C,CAAN,CAA0D,CAAhF,CAA3I,CAAf,EAA8OC,MAA9O,CAAqPC,IAArP,CAA0P,SAASD,MAAT,CAAgB,CAACE,QAAQC,GAAR,CAAY,kBAAZ,CAA+BH,MAA/B,CAAsC1D,KAAKE,YAAL,CAAkBsB,QAAlB,CAA2BsC,IAAjE,EAAuE,GAAGJ,MAAH,CAAU,CAAC1D,KAAK2X,SAAL,CAAe3X,KAAKE,YAAL,CAAkBsB,QAAjC,CAA0CxB,KAAKiC,MAAL,GAAe,CAAC,CAAvZ,CAAlB,CAA4a,CAAC,CAAC,CAxBrB,IAwByB,CAAC,UAAU,CAAC,aAAapF,QAAQC,MAAR,CAAe,OAAf,EAAwB8M,SAAxB,CAAkC,gBAAlC,CAAmDoc,cAAnD,EAAmE,QAASA,eAAT,EAAyB,CAAC,MAAM,CAAClc,SAAS,GAAV,CAAcC,QAAQ,IAAtB,CAA2BlL,YAAY,8CAAvC,CAAN,CAA8F,CAAC,CAArN,IAAyN,CAAC,UAAU,CAAC,aAAahC,QAAQC,MAAR,CAAe,YAAf,EAA6BoR,OAA7B,CAAqC,cAArC,CAAoDyX,YAApD,EAAkEA,aAAa3mB,OAAb,CAAqB,CAAC,YAAD,CAAc,aAAd,CAA4B,aAA5B,CAA0C,qBAA1C,CAAgE,WAAhE,CAArB,CAAkG,QAAS2mB,aAAT,CAAsBtmB,UAAtB,CAAiCK,WAAjC,CAA6CD,WAA7C,CAAyDE,mBAAzD,CAA6ER,SAA7E,CAAuF,CAAC,MAAM,CAAC8C,OAAO,QAASA,OAAT,CAAgBa,IAAhB,CAAqBgD,QAArB,CAA8BhB,aAA9B,CAA4CM,OAA5C,CAAoD,CAAC,GAAIuS,WAAU7U,IAAd,CAAmBc,QAAQC,GAAR,CAAY8T,SAAZ,EAAuB;AAC3nC,GAAG7U,KAAK6K,KAAL,GAAa,IAAb,EAAmB7K,KAAK6K,KAAL,GAAalN,SAAnC,CAA6C,CAACkX,UAAUhK,KAAV,CAAgB7K,KAAK6K,KAAL,CAAW9P,GAA3B,CAAgC,IAAGiI,WAAWrF,SAAd,CAAwB,CAACkX,UAAUtR,IAAV,CAAe3G,YAAY0O,oBAAZ,CAAiCuJ,UAAUtR,IAA3C,CAAgDP,QAAhD,CAAf,CAA0E;AACjL6R,UAAUlY,YAAY4O,WAAZ,CAAwBsJ,SAAxB,CAAkC7S,aAAlC,CAAgD,OAAhD,CAAV,CAAmE,GAAGM,UAAU3E,SAAV,EAAqB2E,UAAU,IAA/B,EAAqCA,UAAU,EAAlD,CAAqD,CAACuS,UAAU/Q,KAAV,CAAgBxB,OAAhB,CAAyB;AAClJ;AACA;AACA,GAAGuS,UAAUhH,QAAV,GAAqBgH,UAAUkO,YAA/B,EAA6ClO,UAAUkO,YAAV,GAAyB,CAAzE,CAA2E,CAAC,GAAGlO,UAAUnR,GAAV,GAAgB/F,SAAhB,EAA2BkX,UAAUnR,GAAV,GAAgB,IAA9C,CAAmD,CAACmR,UAAUiO,OAAV,CAAkBjO,UAAUmO,WAA5B,CAAwCnO,UAAUnR,GAAV,CAAcmR,UAAU3U,MAAxB,CAA+B;AACtM,CAAC,CADF,IACO,IAAG2U,UAAU/G,SAAV,GAAsB,KAAzB,CAA+B,CAAC+G,UAAUnR,GAAV,CAAc,IAAd,CAAoB;AAC3D,GAAGmR,UAAUnR,GAAV,GAAgB/F,SAAhB,EAA2BkX,UAAUnR,GAAV,GAAgB,IAA9C,CAAmD,CAACmR,UAAUrT,MAAV,CAAiB,IAAjB,CAAuB,CAA3E,IAA+E,CAACqT,UAAUrT,MAAV,CAAiB,KAAjB,CAAwB;AACxG,GAAGqT,UAAU/G,SAAV,GAAsB,IAAtB,EAA4B+G,UAAUhH,QAAV,GAAqBgH,UAAUkO,YAA9D,CAA2E,CAAClO,UAAUiO,OAAV,CAAkBjO,UAAUmO,WAA5B,CAAwCnO,UAAUsO,WAAV,EAAuB,CAAvB,CAAyBtO,UAAU/G,SAAV,CAAoB,KAApB,CAA2B,WAAUpC,OAAV,CAAkB,UAAU,CAAC,GAAGrQ,OAAOC,QAAP,CAAgBqQ,IAAhB,CAAqBhD,OAArB,CAA6B,OAA7B,IAAwC,CAAC,CAA5C,CAA8CtM,UAAUyD,IAAV,CAAe,aAAf,EAA8BjD,oBAAoBuH,OAApB,CAA4B,QAA5B,CAAqC,8BAArC,EAAsE,CAA/K,CAAgL,SAASC,aAAT,CAAuB,CAAC,GAAIC,OAAMD,cAAc3D,IAAd,CAAmB6D,OAA7B,CAAqC1H,oBAAoByH,KAApB,CAA0B,QAA1B,CAAmCD,cAAc3D,IAAd,CAAmB6D,OAAtD,EAAgE,CAA7S,EAAgT,CAR4jB,CAAN,CAQnjB,CAAC,CAR6R,IAQzR,CAAC,UAAU,CAAC,aAAa;AACzfxK,QAAQC,MAAR,CAAe,YAAf,EAA6BoR,OAA7B,CAAqC,YAArC,CAAkDgY,iBAAlD,EAAqEA,kBAAkBlnB,OAAlB,CAA0B,CAAC,WAAD,CAA1B,CAAwC,QAASknB,kBAAT,CAA2BvX,SAA3B,CAAqC,CAAC,MAAOA,WAAU,yBAAV,CAAoC,CAACwJ,YAAY,MAAb,CAApC,CAAyD,CAAClW,OAAO,CAAC2M,OAAO,KAAR,CAAR,CAAzD,CAAP,CAA0F,CAAC,CADkP,IAC9O,aAAa;AAC/P/R,QAAQC,MAAR,CAAe,QAAf,EAAyBM,GAAzB,CAA6B,CAAC,OAAD,CAAS,SAASmB,KAAT,CAAe,CAAC;AACtDA,MAAMC,WAAN,CAAkB,QAAlB,CAA2B,QAA3B,CAAoC,QAApC,CAA6C,UAA7C,CAAwD,mBAAxD,EAA6ED,MAAME,cAAN,CAAqB,QAArB,CAA8B,QAA9B,CAAuC,aAAvC,CAAqD,QAArD,EAA+DF,MAAME,cAAN,CAAqB,QAArB,CAA8B,QAA9B,CAAuC,WAAvC,CAAmD,eAAnD,EAAqE,CADpL,CAA7B,EACoN,aAAa;AACjO5B,QAAQC,MAAR,CAAe,QAAf,EAAyBG,MAAzB,CAAgC,CAAC,gBAAD,CAAkB,SAASyB,cAAT,CAAwB,CAAC;AAC3EA,eAAeC,KAAf,CAAqB,YAArB,CAAkC,CAACC,IAAI,SAAL,CAAeC,YAAY,mDAA3B,CAAlC,EAAmHF,KAAnH,CAAyH,aAAzH,CAAuI,CAACC,IAAI,gBAAL,CAAsBC,YAAY,oDAAlC,CAAvI,EAAgOF,KAAhO,CAAsO,WAAtO,CAAkP,CAACC,IAAI,kBAAL,CAAwBC,YAAY,kDAApC,CAAlP,EAA2UF,KAA3U,CAAiV,WAAjV,CAA6V,CAACC,IAAI,uBAAL,CAA6BC,YAAY,oDAAzC,CAA7V,EAA8b,CAD9Z,CAAhC,EACic,aAAa,GAAIsnB,0BAAyB,UAAU,CAAC,QAASA,yBAAT,CAAkClnB,MAAlC,CAAyCokB,iBAAzC,CAA2D+C,KAA3D,CAAiE,CAAC,KAAKnnB,MAAL,CAAYA,MAAZ,CAAmB,KAAKokB,iBAAL,CAAuBA,iBAAvB,CAAyC,KAAK+C,KAAL,CAAWA,KAAX,CAAiB,KAAKC,QAAL,CAAc,CAACC,QAAQ,EAAT,CAAYC,MAAM,IAAlB,CAAd,CAAuC,0BAAyBtqB,SAAzB,CAAmCuqB,SAAnC,CAA6C,SAASnV,KAAT,CAAe,CAAC,GAAIvO,MAAK,KAAKsjB,KAAL,CAAWK,UAAX,CAAsBC,MAAtB,CAA6BrV,KAA7B,CAAT,CAA6C,KAAKgV,QAAL,CAAcC,OAAd,CAAsBxjB,KAAKwjB,OAA3B,CAAmC,KAAKD,QAAL,CAAcE,KAAd,CAAoBzjB,KAAKyjB,KAAzB,CAA+B,KAAKH,KAAL,CAAWK,UAAX,CAAsBC,MAAtB,CAA6B/jB,MAA7B,CAAoC0O,KAApC,CAA0C,CAA1C,EAA8C,CAA1N,CAA2N8U,yBAAyBlqB,SAAzB,CAAmC0qB,aAAnC,CAAiD,UAAU,CAAC,KAAKP,KAAL,CAAWK,UAAX,CAAsBC,MAAtB,CAA6B1pB,IAA7B,CAAkC,CAACspB,QAAQ,KAAKD,QAAL,CAAcC,OAAvB,CAA+BlW,KAAK,KAAKiW,QAAL,CAAcjW,IAAlD,CAAuDmW,MAAM,KAAKF,QAAL,CAAcE,KAA3E,CAAiFK,IAAI,KAAKR,KAAL,CAAWQ,GAAhG,CAAoGC,KAAK,IAAzG,CAAlC,EAAkJ,KAAKxD,iBAAL,CAAuBE,KAAvB,CAA6B,KAAK6C,KAAlC,EAA0C,CAAxP,CAAyPD,yBAAyBlqB,SAAzB,CAAmCke,MAAnC,CAA0C,UAAU,CAAC,KAAKkJ,iBAAL,CAAuBG,OAAvB,CAA+B,QAA/B,EAA0C,CAA/F,CAAgG2C,yBAAyBW,YAAzB,CAAsC,0BAAtC,CAAiEX,yBAAyBnnB,OAAzB,CAAiC,CAAC,QAAD,CAAU,mBAAV,CAA8B,OAA9B,CAAjC,CAAwE,MAAOmnB,yBAAP,CAAiC,CAA/5B,EAA7B,CAA+7BtpB,QAAQC,MAAR,CAAe,QAAf,EAAyBgC,UAAzB,CAAoCqnB,yBAAyBW,YAA7D,CAA0EX,wBAA1E,EAAoG,aAAa,GAAIY,wBAAuB,UAAU,CAAC,QAASA,uBAAT,CAAgC9nB,MAAhC,CAAuCC,YAAvC,CAAoDC,SAApD,CAA8D5B,cAA9D,CAA6E2W,EAA7E,CAAgF8S,MAAhF,CAAuF3nB,UAAvF,CAAkGU,SAAlG,CAA4GJ,mBAA5G,CAAgI,CAAC,KAAKV,MAAL,CAAYA,MAAZ,CAAmB,KAAKC,YAAL,CAAkBA,YAAlB,CAA+B,KAAKC,SAAL,CAAeA,SAAf,CAAyB,KAAK5B,cAAL,CAAoBA,cAApB,CAAmC,KAAK2W,EAAL,CAAQA,EAAR,CAAW,KAAK8S,MAAL,CAAYA,MAAZ,CAAmB,KAAK3nB,UAAL,CAAgBA,UAAhB,CAA2B,KAAKU,SAAL,CAAeA,SAAf,CAAyB,KAAKJ,mBAAL,CAAyBA,mBAAzB,CAA6C,KAAKsnB,YAAL,CAAkB,KAAK/nB,YAAL,CAAkBgoB,OAAlB,GAA4BzmB,SAA9C,CAAwD,KAAK2lB,KAAL,CAAW,EAAX,CAAc,KAAKe,SAAL,CAAe,CAAC7P,OAAO,EAAR,CAAWmP,WAAW,CAACW,OAAO,CAAR,CAAUhX,KAAKnN,KAAK4N,GAAL,EAAf,CAA0B+V,IAAI,IAA9B,CAAmCF,OAAO,EAA1C,CAAtB,CAAoEE,IAAI,IAAxE,CAA6ES,aAAa,EAA1F,CAAf,CAA6G,KAAKpnB,cAAL,CAAoB,KAAK1C,cAAzB,CAAwC,KAAK+pB,UAAL,CAAgB,CAACC,YAAY,CAAC,CAACnhB,KAAK,gBAAN,CAAD,CAAyB,CAACA,KAAK,YAAN,CAAzB,CAAb,CAA2DohB,YAAY,CAAvE,CAAyEC,UAAU,CAAnF,CAAqFrc,MAAM,EAA3F,CAAhB,CAA+G,KAAK9F,IAAL,GAAa,wBAAuBrJ,SAAvB,CAAiCqJ,IAAjC,CAAsC,UAAU,CAAC,GAAIoiB,OAAM,IAAV,CAAe7qB,QAAQ8qB,IAAR,CAAa,KAAKR,SAAlB,CAA4B,KAAKf,KAAjC,EAAwC,GAAG,KAAKa,YAAR,CAAqB,CAACrjB,QAAQC,GAAR,CAAY,aAAZ,EAA2B,KAAKxE,UAAL,CAAgBgF,KAAhB,GAAwBJ,QAAxB,CAAiCN,IAAjC,CAAsC,SAASD,MAAT,CAAgB,CAACgkB,MAAMJ,UAAN,CAAiBlc,KAAjB,CAAuB1H,MAAvB,CAA8BE,QAAQC,GAAR,CAAY,SAAZ,CAAsBH,MAAtB,EAA+B,CAApH,EAAuH,CAAxK,IAA4K,CAACE,QAAQC,GAAR,CAAY,WAAZ,EAAyB,KAAKpC,OAAL,GAAgB,SAAQoC,GAAR,CAAY,aAAZ,EAA4B,CAA1V,CAA2VkjB,uBAAuB9qB,SAAvB,CAAiC2rB,QAAjC,CAA0C,SAASC,IAAT,CAAcC,SAAd,CAAwB,CAAClkB,QAAQC,GAAR,CAAY,YAAZ,CAAyBgkB,IAAzB,CAA8BC,SAA9B,EAAyC,KAAKR,UAAL,CAAgBE,WAAhB,CAA4BM,UAAUD,KAAK,CAAf,CAAiBA,KAAK,CAAlD,CAAqD,CAAjK,CAAkKd,uBAAuB9qB,SAAvB,CAAiC8rB,YAAjC,CAA8C,UAAU,CAAC,GAAG,KAAK3B,KAAL,CAAWK,UAAX,CAAsBW,MAAtB,CAA6B,CAAhC,CAAkC,CAAC,GAAItW,MAAKjU,QAAQ8qB,IAAR,CAAa,KAAKvB,KAAL,CAAWK,UAAxB,CAAT,CAA6C,KAAKL,KAAL,CAAWiB,YAAX,CAAwBrqB,IAAxB,CAA6B,KAAKopB,KAAL,CAAWK,UAAxC,EAAoD,KAAKL,KAAL,CAAWK,UAAX,CAAsB,CAACW,OAAOtW,KAAKsW,MAAL,CAAY,CAApB,CAAsBhX,KAAK,IAA3B,CAAgCwW,IAAI,KAAKR,KAAL,CAAWQ,GAA/C,CAAmDF,OAAO,EAA1D,CAAtB,CAAoF,KAAKzkB,MAAL,GAAe,CAAC,CAAjS,CAAkS8kB,uBAAuB9qB,SAAvB,CAAiCke,MAAjC,CAAwC,UAAU,CAAC,KAAKhb,SAAL,CAAeyD,IAAf,CAAoB,QAApB,EAA+B,CAAlF,CAAmFmkB,uBAAuB9qB,SAAvB,CAAiC8I,MAAjC,CAAwC,UAAU,CAAC,GAAI2iB,OAAM,IAAV,CAAe,GAAItB,OAAM,GAAI,MAAKY,MAAT,CAAgB,CAAC1P,OAAO,KAAK8O,KAAL,CAAW9O,MAAX,CAAkBzZ,GAA1B,CAA8B4oB,WAAW,CAACrW,KAAK,KAAKgW,KAAL,CAAWK,UAAX,CAAsBrW,IAA5B,CAAiCgX,OAAO,KAAKhB,KAAL,CAAWK,UAAX,CAAsBW,MAA9D,CAAqER,IAAI,KAAKR,KAAL,CAAWK,UAAX,CAAsBG,GAA/F,CAAmGF,OAAO,KAAKN,KAAL,CAAWK,UAAX,CAAsBC,MAAhI,CAAzC,CAAiLE,IAAI,KAAKR,KAAL,CAAWQ,GAAhM,CAAoMS,aAAa,KAAKjB,KAAL,CAAWiB,YAA5N,CAAhB,CAAV,CAAqQjB,MAAMpf,KAAN,CAAY,SAASC,QAAT,CAAkB,CAACygB,MAAMvoB,SAAN,CAAgByD,IAAhB,CAAqB,UAAUqE,SAASpJ,GAAxC,EAA6C6pB,MAAM/nB,mBAAN,CAA0BuH,OAA1B,CAAkC,QAAlC,CAA2C,mCAA3C,EAAgFrK,QAAQ8qB,IAAR,CAAaD,MAAMP,SAAnB,CAA6BO,MAAMtB,KAAnC,EAA2C,CAAvM,CAAwM,SAASjf,aAAT,CAAuB,CAAC,KAAKC,KAAL,CAAWD,cAAc3D,IAAd,CAAmB6D,OAA9B,CAAsC,KAAK1H,mBAAL,CAAyByH,KAAzB,CAA+B,QAA/B,CAAwC,uBAAxC,EAAkE,CAAxU,EAA2U,CAAlpB,CAAmpB2f,uBAAuB9qB,SAAvB,CAAiCgG,MAAjC,CAAwC,UAAU,CAAC,GAAIylB,OAAM,IAAV,CAAe,GAAItB,OAAM,KAAKA,KAAf,CAAqBA,MAAM5X,OAAN,CAAc,UAAU,CAACkZ,MAAMvoB,SAAN,CAAgByD,IAAhB,CAAqB,UAAUwjB,MAAMvoB,GAArC,EAA0C6pB,MAAM/nB,mBAAN,CAA0BuH,OAA1B,CAAkC,QAAlC,CAA2C,+BAA3C,EAA6E,CAAhJ,CAAiJ,SAASC,aAAT,CAAuB,CAAC,KAAKC,KAAL,CAAWD,cAAc3D,IAAd,CAAmB6D,OAA9B,CAAsC,KAAK1H,mBAAL,CAAyByH,KAAzB,CAA+B,QAA/B,CAAwC,uBAAxC,EAAkE,CAAjR,EAAoR,CAA3W,CAA4W2f,uBAAuB9qB,SAAvB,CAAiC+rB,gBAAjC,CAAkD,UAAU,CAAC,GAAIN,OAAM,IAAV,CAAe,GAAIvkB,eAAc,KAAKpD,SAAL,CAAeqD,IAAf,CAAoB,CAACC,UAAU,IAAX,CAAgBxE,YAAY,uDAA5B,CAAoFC,WAAW,mCAA/F,CAAmIwE,KAAK,IAAxI,CAA6IC,QAAQ,CAAC6iB,MAAM,QAASA,MAAT,EAAgB,CAAC,MAAOsB,OAAMtB,KAAb,CAAoB,CAA5C,CAArJ,CAApB,CAAlB,CAA2OjjB,cAAcO,MAAd,CAAqBC,IAArB,CAA0B,SAASD,MAAT,CAAgB,CAACE,QAAQC,GAAR,CAAYH,MAAZ,EAAoBgkB,MAAMtB,KAAN,CAAY1iB,MAAZ,CAAmBgkB,MAAMK,YAAN,GAAsB,CAAxG,EAA2G,CAAla,CAAmahB,uBAAuB9qB,SAAvB,CAAiCwF,OAAjC,CAAyC,UAAU,CAAC,KAAK2kB,KAAL,CAAW,KAAKY,MAAL,CAAYjjB,GAAZ,CAAgB,CAACmjB,QAAQ,KAAKhoB,YAAL,CAAkBgoB,OAA3B,CAAhB,CAAX,CAAgEtjB,QAAQC,GAAR,CAAY,aAAZ,CAA0B,KAAKuiB,KAA/B,EAAuC,CAA3J,CAA4JW,uBAAuBD,YAAvB,CAAoC,wBAApC,CAA6DC,uBAAuB/nB,OAAvB,CAA+B,CAAC,QAAD,CAAU,cAAV,CAAyB,WAAzB,CAAqC,gBAArC,CAAsD,IAAtD,CAA2D,QAA3D,CAAoE,YAApE,CAAiF,WAAjF,CAA6F,qBAA7F,CAA/B,CAAmJ,MAAO+nB,uBAAP,CAA+B,CAA/2G,EAA3B,CAA64GlqB,QAAQC,MAAR,CAAe,QAAf,EAAyBgC,UAAzB,CAAoCioB,uBAAuBD,YAA3D,CAAwEC,sBAAxE,EAAgG,aAAa,GAAIkB,wBAAuB,UAAU,CAAC,QAASA,uBAAT,CAAgChpB,MAAhC,CAAuCokB,iBAAvC,CAAyD+C,KAAzD,CAA+D9c,OAA/D,CAAuE,CAAC,KAAKrK,MAAL,CAAYA,MAAZ,CAAmB,KAAKokB,iBAAL,CAAuBA,iBAAvB,CAAyC,KAAK+C,KAAL,CAAWA,KAAX,CAAiB,KAAK9c,OAAL,CAAaA,OAAb,CAAqB,KAAK4e,cAAL,GAAuB,wBAAuBjsB,SAAvB,CAAiCisB,cAAjC,CAAgD,UAAU,CAAC,GAAIR,OAAM,IAAV,CAAe7qB,QAAQkU,OAAR,CAAgB,KAAKqV,KAAL,CAAWiB,YAA3B,CAAwC,SAASvkB,IAAT,CAAc,CAACc,QAAQC,GAAR,CAAY,iBAAZ,CAA8Bf,IAA9B,EAAoC,GAAI2P,KAAI3P,KAAK4jB,MAAL,CAAYvd,MAApB,CAA2B,IAAI,GAAI1G,GAAE,CAAV,CAAYA,EAAEgQ,GAAd,CAAkBhQ,GAAlB,CAAsB,CAAC,GAAGK,KAAK4jB,MAAL,CAAYjkB,CAAZ,EAAeokB,IAAlB,CAAuB,CAAC,GAAIsB,MAAKT,MAAMpe,OAAN,CAAc,QAAd,EAAwBxG,KAAK4jB,MAAL,CAAYjkB,CAAZ,EAAe8jB,KAAvC,CAA6C,CAA7C,CAAT,CAAyDK,IAAIc,MAAMpe,OAAN,CAAc,QAAd,EAAwBxG,KAAK4jB,MAAL,CAAYjkB,CAAZ,EAAemkB,GAAvC,CAA2C,CAA3C,CAA7D,CAA2G9jB,KAAKslB,YAAL,CAAkBtlB,KAAK4jB,MAAL,CAAYjkB,CAAZ,EAAe2N,IAAjC,CAAsCtN,KAAK+jB,IAAL,CAAUsB,IAAV,CAAerlB,KAAKulB,WAAL,CAAiBzB,GAAjB,CAAqB9jB,KAAKwlB,MAAL,CAAY,CAACH,KAAKvB,GAAL,CAAS,GAAV,EAAepT,OAAf,CAAuB,CAAvB,CAAZ,CAAuC,CAAC,CAAC,CAAnY,EAAsY,CAAhd,CAAidyU,uBAAuBhsB,SAAvB,CAAiCke,MAAjC,CAAwC,UAAU,CAAC,KAAKkJ,iBAAL,CAAuBG,OAAvB,CAA+B,QAA/B,EAA0C,CAA7F,CAA8FyE,uBAAuBnB,YAAvB,CAAoC,wBAApC,CAA6DmB,uBAAuBjpB,OAAvB,CAA+B,CAAC,QAAD,CAAU,mBAAV,CAA8B,OAA9B,CAAsC,SAAtC,CAA/B,CAAgF,MAAOipB,uBAAP,CAA+B,CAAv6B,EAA3B,CAAq8BprB,QAAQC,MAAR,CAAe,QAAf,EAAyBgC,UAAzB,CAAoCmpB,uBAAuBnB,YAA3D,CAAwEmB,sBAAxE,EAAgG,aAAa,GAAIM,kBAAiB,UAAU,CAAC,QAASA,iBAAT,CAA0BtpB,MAA1B,CAAiCC,YAAjC,CAA8CC,SAA9C,CAAwD5B,cAAxD,CAAuEypB,MAAvE,CAA8EnnB,cAA9E,CAA6FE,SAA7F,CAAuG,CAAC,KAAKd,MAAL,CAAYA,MAAZ,CAAmB,KAAKC,YAAL,CAAkBA,YAAlB,CAA+B,KAAKC,SAAL,CAAeA,SAAf,CAAyB,KAAK5B,cAAL,CAAoBA,cAApB,CAAmC,KAAKypB,MAAL,CAAYA,MAAZ,CAAmB,KAAKnnB,cAAL,CAAoBA,cAApB,CAAmC,KAAKE,SAAL,CAAeA,SAAf,CAAyB,KAAKE,cAAL,CAAoB,KAAK1C,cAAzB,CAAwC,KAAK6oB,KAAL,CAAW3lB,SAAX,CAAqB,KAAK+nB,MAAL,CAAY,EAAZ,CAAe,KAAK7mB,UAAL,CAAgB,CAACC,YAAY,CAAb,CAAeC,SAAS,EAAxB,CAAhB,CAA4C,KAAKyD,IAAL,GAAa,kBAAiBrJ,SAAjB,CAA2BqJ,IAA3B,CAAgC,UAAU,CAAC1B,QAAQC,GAAR,CAAY,QAAZ,CAAqB,KAAK3E,YAA1B,EAAwC,GAAG,KAAKA,YAAL,CAAkBgoB,OAArB,CAA6B,CAACtjB,QAAQC,GAAR,CAAY,UAAZ,EAAwB,KAAKpC,OAAL,GAAgB,CAAtE,IAA0E,CAACmC,QAAQC,GAAR,CAAY,UAAZ,EAAwB,KAAKqB,IAAL,GAAa,CAAC,CAApM,CAAqMqjB,iBAAiBtsB,SAAjB,CAA2B6F,MAA3B,CAAkC,SAASskB,KAAT,CAAe,CAAC,GAAGA,KAAH,CAAS,CAACA,MAAM5jB,OAAN,GAAgB,IAAI,GAAIC,GAAE,CAAN,CAAQ0G,OAAO,KAAKid,KAAL,CAAWjd,MAA9B,CAAqC1G,EAAE0G,MAAvC,CAA8C1G,GAA9C,CAAkD,CAAC,GAAG,KAAK+lB,MAAL,CAAY/lB,CAAZ,IAAiB2jB,KAApB,CAA0B,CAAC,KAAKoC,MAAL,CAAY7lB,MAAZ,CAAmBF,CAAnB,CAAqB,CAArB,EAAwB,OAAQ,CAAC,CAAC,CAA1I,IAA8I,CAAC,KAAK2jB,KAAL,CAAW5jB,OAAX,CAAmB,UAAU,CAAC,KAAKrD,SAAL,CAAeyD,IAAf,CAAoB,QAApB,EAA+B,CAA7D,EAAgE,CAAC,CAAlQ,CAAmQ2lB,iBAAiBtsB,SAAjB,CAA2BiJ,IAA3B,CAAgC,UAAU,CAAC,GAAIwiB,OAAM,IAAV,CAAe,KAAK7nB,cAAL,CAAoBuE,OAApB,CAA4B,QAA5B,CAAqC,KAAK4iB,MAAL,CAAY3iB,KAAZ,GAAoBJ,QAApB,CAA6BN,IAA7B,CAAkC,SAASD,MAAT,CAAgB,CAACgkB,MAAMc,MAAN,CAAa9kB,MAAb,CAAqB,CAAxE,CAArC,EAAiH,CAA3K,CAA4K6kB,iBAAiBtsB,SAAjB,CAA2BwF,OAA3B,CAAmC,UAAU,CAAC,GAAIimB,OAAM,IAAV,CAAe,KAAK7nB,cAAL,CAAoBuE,OAApB,CAA4B,QAA5B,CAAqC,KAAK4iB,MAAL,CAAYjjB,GAAZ,CAAgB,CAACmjB,QAAQ,KAAKhoB,YAAL,CAAkBgoB,OAA3B,CAAhB,EAAqDjjB,QAArD,CAA8DN,IAA9D,CAAmE,SAASD,MAAT,CAAgB,CAACgkB,MAAMtB,KAAN,CAAY1iB,MAAZ,CAAoB,CAAxG,CAArC,EAAiJ,CAA9M,CAA+M6kB,iBAAiBtsB,SAAjB,CAA2BwsB,sBAA3B,CAAkD,UAAU,CAAC,GAAIf,OAAM,IAAV,CAAe,GAAIvkB,eAAc,KAAKpD,SAAL,CAAeqD,IAAf,CAAoB,CAACC,UAAU,IAAX,CAAgBxE,YAAY,sDAA5B,CAAmFC,WAAW,iCAA9F,CAAgIwE,KAAK,IAArI,CAA0IC,QAAQ,CAAC6iB,MAAM,QAASA,MAAT,EAAgB,CAAC,MAAOsB,OAAMtB,KAAb,CAAoB,CAA5C,CAAlJ,CAApB,CAAlB,CAAyO,CAArT,CAAsTmC,iBAAiBzB,YAAjB,CAA8B,kBAA9B,CAAiDyB,iBAAiBvpB,OAAjB,CAAyB,CAAC,QAAD,CAAU,cAAV,CAAyB,WAAzB,CAAqC,gBAArC,CAAsD,QAAtD,CAA+D,gBAA/D,CAAgF,WAAhF,CAAzB,CAAsH,MAAOupB,iBAAP,CAAyB,CAA9uD,EAArB,CAAswD1rB,QAAQC,MAAR,CAAe,QAAf,EAAyBgC,UAAzB,CAAoCypB,iBAAiBzB,YAArD,CAAkEyB,gBAAlE,EAAoF,CAAC,UAAU,CAAC,aAAa1rB,QAAQC,MAAR,CAAe,QAAf,EAAyBoR,OAAzB,CAAiC,QAAjC,CAA0Cwa,aAA1C,EAAyDA,cAAc1pB,OAAd,CAAsB,CAAC,WAAD,CAAtB,CAAoC,QAAS0pB,cAAT,CAAuB/Z,SAAvB,CAAiC,CAAC,MAAOA,WAAU,iBAAV,CAA4B,CAACuY,QAAQ,MAAT,CAA5B,CAA6C,CAACjlB,OAAO,CAAC2M,OAAO,KAAR,CAAR,CAA7C,CAAP,CAA8E,CAAC,CAAvO,IAA2O,aAAa;AAC5nQ/R,QAAQC,MAAR,CAAe,SAAf,EAA0BG,MAA1B,CAAiC,CAAC,gBAAD,CAAkB,oBAAlB,CAAuC,SAASyB,cAAT,CAAwB2jB,kBAAxB,CAA2C,CAAC;AACpHA,mBAAmBC,SAAnB,CAA6B,SAA7B,EAAwC;AACxC5jB,eAAeC,KAAf,CAAqB,SAArB,CAA+B,CAACC,IAAI,UAAL,CAAgBC,YAAY,gDAA5B,CAA/B,EAA+G,CAF9E,CAAjC,EAEkH,CAAC,UAAU,CAAC,aAAahC,QAAQC,MAAR,CAAe,SAAf,EAA0BgC,UAA1B,CAAqC,mBAArC,CAAyD6pB,iBAAzD,EAA4EA,kBAAkB3pB,OAAlB,CAA0B,CAAC,QAAD,CAAU,cAAV,CAAyB,WAAzB,CAAqC,gBAArC,CAAsD,YAAtD,CAAmE,YAAnE,CAAgF,aAAhF,CAA8F,qBAA9F,CAAoH,mBAApH,CAAwI,gBAAxI,CAA1B,CAAoL,QAAS2pB,kBAAT,CAA2B1pB,MAA3B,CAAkCC,YAAlC,CAA+CC,SAA/C,CAAyD5B,cAAzD,CAAwE6B,UAAxE,CAAmFC,UAAnF,CAA8FK,WAA9F,CAA0GC,mBAA1G,CAA8HipB,iBAA9H,CAAgJ/oB,cAAhJ,CAA+J,CAAC,GAAIG,MAAK,IAAT,CAAcA,KAAKC,cAAL,CAAoB1C,cAApB,CAAmCyC,KAAK6oB,YAAL,CAAkBA,YAAlB,CAA+B7oB,KAAKkF,IAAL,CAAUA,IAAV,CAAelF,KAAKjC,EAAL,CAAQA,EAAR,CAAWiC,KAAK2L,YAAL,CAAkBA,YAAlB,CAA+B3L,KAAK8oB,SAAL,CAAeA,SAAf,CAAyB9oB,KAAKW,SAAL,CAAe,EAAf,CAAkBX,KAAK+oB,YAAL,CAAkB,CAACC,SAAS,GAAV,CAAlB,CAAiChpB,KAAK2B,UAAL,CAAgB,CAACC,YAAY,CAAb,CAAeC,SAAS,EAAxB,CAAhB,CAA4C7B,KAAKQ,WAAL,CAAiBC,SAAjB,CAA2B;AACv0BT,KAAKO,WAAL,CAAiB,IAAjB,CAAsBP,KAAKM,QAAL,CAAc,QAAd,CAAuBN,KAAKgL,IAAL,CAAU,OAAV,CAAkBhL,KAAKipB,kBAAL,CAAwBA,kBAAxB,CAA2CjpB,KAAKwB,QAAL,CAAcf,SAAd,CAAwB;AAClI,QAASkL,aAAT,CAAsBxH,KAAtB,CAA4B,CAACnE,KAAKa,QAAL,CAAcsD,KAAd,CAAoBnE,KAAKY,OAAL,CAAa,KAAKuD,MAAMnE,KAAKW,SAAhB,CAAb,CAAyC,SAAS5C,GAAT,CAAYyL,EAAZ,CAAe,CAACrK,UAAUyD,IAAV,CAAe,eAAe4G,EAA9B,EAAmC,SAAS0f,SAAT,CAAkBle,IAAlB,CAAuB,CAAC,GAAGA,OAAO,OAAV,CAAkB,CAACnL,eAAeuE,OAAf,CAAuB,QAAvB,CAAgChF,WAAWiF,KAAX,GAAmBJ,QAAnB,CAA4BN,IAA5B,CAAiC,SAASD,MAAT,CAAgB,CAAC1D,KAAKoL,KAAL,CAAW1H,MAAX,CAAmB,CAArE,CAAhC,EAAyG,CAA5H,IAAiI,IAAGsH,OAAO,OAAV,CAAkB,CAACnL,eAAeuE,OAAf,CAAuB,QAAvB,CAAgC/E,WAAWgF,KAAX,GAAmBJ,QAAnB,CAA4BN,IAA5B,CAAiC,SAASD,MAAT,CAAgB,CAAC1D,KAAKoL,KAAL,CAAW1H,MAAX,CAAmB,CAArE,CAAhC,EAAyG,MAAKlC,QAAL,CAAcf,SAAd,CAAyB,SAASyE,KAAT,CAAc8F,IAAd,CAAmB,CAAC,GAAGA,OAAO,OAAP,EAAgBA,OAAO,OAA1B,CAAkC,CAACke,SAASle,IAAT,EAAgB,CAAnD,IAAuD,CAAChL,KAAKgL,IAAL,CAAU,OAAV,CAAkBke,SAASlpB,KAAKgL,IAAd,EAAqB,CAAC;AAC/iB,QAAS8d,UAAT,CAAmBhmB,IAAnB,CAAwBqmB,KAAxB,CAA8B,CAAC,GAAGrmB,KAAK2K,MAAL,GAAc0b,KAAjB,CAAuB,CAACrmB,KAAK2K,MAAL,CAAY0b,KAAZ,CAAkBrmB,KAAK0L,OAAL,CAAa,UAAU,CAACrP,UAAUyD,IAAV,CAAe,SAAf,EAA0BjD,oBAAoBuH,OAApB,CAA4B,QAA5B,CAAqC,mCAArC,EAA2E,CAA7H,CAA8H,SAASC,aAAT,CAAuB,CAACnH,KAAKoH,KAAL,CAAWD,cAAc3D,IAAd,CAAmB6D,OAA9B,CAAsC1H,oBAAoByH,KAApB,CAA0B,QAA1B,CAAmC,qBAAnC,EAA2D,CAAvP,EAAyP;AACjU,OAAO,MAAP,CAAc;OACR,QAAS6hB,mBAAT,CAA4BnmB,IAA5B,CAAiC,CAAC9C,KAAKwB,QAAL,CAAcxB,KAAKwB,QAAL,GAAgBsB,IAAhB,CAAqBA,IAArB,CAA0BrC,SAAxC,CAAkDT,KAAKopB,OAAL,CAAappB,KAAKwB,QAAL,GAAgBsB,IAAhB,CAAqB,IAArB,CAA0B,KAAvC,CAA6C9C,KAAKc,MAAL,CAAYd,KAAKwB,QAAL,GAAgBsB,IAAhB,CAAqBA,KAAK+B,KAA1B,CAAgC,EAA5C,CAA+C,GAAG7E,KAAKwB,QAAL,GAAgBf,SAAnB,CAA6B,CAACZ,eAAeuE,OAAf,CAAuB,SAAvB,CAAiCwkB,kBAAkBS,qBAAlB,CAAwCrpB,KAAKwB,QAAL,CAAcsC,IAAd,CAAmB2M,OAA3D,EAAoE9M,IAApE,CAAyE,SAASD,MAAT,CAAgB,CAAC1D,KAAKgX,gBAAL,CAAsBtT,MAAtB,CAA8B,CAAxH,CAAjC,EAA6J,CAAC,SAASmlB,aAAT,CAAsBS,QAAtB,CAA+B,CAAC;AACnZ,GAAGA,QAAH,CAAY,CAAC,GAAIxmB,MAAK9C,KAAKwB,QAAd,CAAuBsB,KAAK0L,OAAL,CAAa,UAAU,CAACrP,UAAUyD,IAAV,CAAe,SAAf,EAA0BjD,oBAAoBuH,OAApB,CAA4B,QAA5B,CAAqC,2CAArC,EAAkFrH,eAAeuE,OAAf,CAAuB,SAAvB,CAAiCwkB,kBAAkBS,qBAAlB,CAAwCrpB,KAAKwB,QAAL,CAAcsC,IAAd,CAAmB2M,OAA3D,EAAoE9M,IAApE,CAAyE,SAASD,MAAT,CAAgB,CAAC1D,KAAKgX,gBAAL,CAAsBtT,MAAtB,CAA8B,CAAxH,CAAjC,EAA6J,CAAjS,CAAkS,SAASyD,aAAT,CAAuB,CAACnH,KAAKoH,KAAL,CAAWD,cAAc3D,IAAd,CAAmB6D,OAA9B,CAAsC1H,oBAAoByH,KAApB,CAA0B,QAA1B,CAAmC,qBAAnC,EAA2D,CAA3Z,EAA8Z,CAAC,CAAC,CAAC,CANnV,IAMuV,CAAC,UAAU,CAAC,aAAavK,QAAQC,MAAR,CAAe,SAAf,EAA0B8M,SAA1B,CAAoC,aAApC,CAAkD2f,WAAlD,EAA+D,QAASA,YAAT,CAAqB7hB,QAArB,CAA8B,CAAC,MAAO,UAASyC,KAAT,CAAenM,OAAf,CAAuBoM,KAAvB,CAA6B,CAACD,MAAMzB,MAAN,CAAa0B,MAAMmf,WAAnB,CAA+B,SAASrG,QAAT,CAAkB,CAAC;AACvpBxb,SAAS,UAAU,CAAC,GAAI8hB,SAAQtG,UAAUllB,QAAQ,CAAR,EAAWyrB,KAAX,EAAtB,CAAyC,MAAOD,QAAP,CAAgB,CAA7E,EAAgF,CADqhB,CACphB,IADohB,EAC7gB,CADwe,CACte,CAAC,CAD8W,IAC1W,aAAa;AAC5G3sB,QAAQC,MAAR,CAAe,YAAf,EAA6BG,MAA7B,CAAoC,CAAC,gBAAD,CAAkB,oBAAlB,CAAuC,SAASyB,cAAT,CAAwB2jB,kBAAxB,CAA2C,CAAC;AACvHA,mBAAmBC,SAAnB,CAA6B,SAA7B,EAAwC;AACxC5jB,eAAeC,KAAf,CAAqB,YAArB,CAAkC,CAACC,IAAI,aAAL,CAAmBC,YAAY,sDAA/B,CAAlC,EAA2H,CAFvF,CAApC,EAE8H,CAAC,UAAU,CAAC,aAAahC,QAAQC,MAAR,CAAe,YAAf,EAA6BgC,UAA7B,CAAwC,sBAAxC,CAA+D4qB,oBAA/D,EAAqFA,qBAAqB1qB,OAArB,CAA6B,CAAC,QAAD,CAAU,cAAV,CAAyB,WAAzB,CAAqC,gBAArC,CAAsD,YAAtD,CAAmE,YAAnE,CAAgF,YAAhF,CAA6F,SAA7F,CAAuG,aAAvG,CAAqH,aAArH,CAAmI,kBAAnI,CAAsJ,mBAAtJ,CAA0K,SAA1K,CAAoL,gBAApL,CAA7B,CAAmO,QAAS0qB,qBAAT,CAA8BzqB,MAA9B,CAAqCC,YAArC,CAAkDC,SAAlD,CAA4D5B,cAA5D,CAA2E6B,UAA3E,CAAsFC,UAAtF,CAAiG6X,UAAjG,CAA4GyS,OAA5G,CAAoHjqB,WAApH,CAAgID,WAAhI,CAA4I0X,gBAA5I,CAA6JyR,iBAA7J,CAA+Ktf,OAA/K,CAAuLzJ,cAAvL,CAAsM,CAAC,GAAIG,MAAK,IAAT,CAAc0M,OAAOpD,QAAQ,QAAR,CAArB,CAAuCtJ,KAAKC,cAAL,CAAoB1C,cAApB,CAAmCyC,KAAK4pB,OAAL,CAAa,CAACC,IAAI,SAAL,CAAeC,MAAM,SAArB,CAA+BC,KAAK,SAApC,CAAb,CAA4D;AAC5xB/pB,KAAKqB,YAAL,CAAkB3B,YAAY4B,eAAZ,CAA4B,YAA5B,CAAlB,CAA4DtB,KAAKgqB,SAAL,CAAe,CAACrc,MAAM,EAAP,CAAU5G,MAAM,EAAhB,CAAmB6Q,UAAU,EAA7B,CAAgCqS,QAAQ,CAACtc,MAAM,EAAP,CAAU5G,MAAM,EAAhB,CAAmB6Q,UAAU,EAA7B,CAAxC,CAAf,CAAyF5X,KAAKkqB,MAAL,CAAY,CAACC,UAAU,KAAX,CAAiBzjB,KAAK,EAAtB,CAAyBqH,SAAS,EAAlC,CAAqCqc,aAAa,EAAlD,CAAqD3Z,QAAQ,QAA7D,CAAsE4Z,QAAQ,CAAC5mB,KAAK,EAAN,CAAS0mB,UAAU,KAAnB,CAA9E,CAAwGG,iBAAiB,KAAzH,CAAZ,CAA4ItqB,KAAKE,YAAL,CAAkB,CAAC4d,KAAK,CAACtS,IAAI,KAAL,CAAW8L,OAAO,KAAlB,CAAwBO,MAAM,KAA9B,CAAN,CAA2CmN,KAAK,CAAC7W,cAAc,CAAC1K,KAAK,OAAN,CAAcgR,QAAQ,KAAtB,CAAf,CAA4CjJ,IAAI,CAAC/H,KAAK,gBAAN,CAAuBgR,QAAQ,IAA/B,CAAhD,CAAqF8V,UAAU,CAAC9mB,KAAK,OAAN,CAAcgR,QAAQ,IAAtB,CAA/F,CAA2H6C,OAAO,CAAC7T,KAAK,OAAN,CAAcgR,QAAQ,IAAtB,CAAlI,CAA8JoD,MAAM,CAACpU,KAAK,OAAN,CAAcgR,QAAQ,IAAtB,CAApK,CAAgM+V,OAAO,CAAC/mB,KAAK,OAAN,CAAcgR,QAAQ,IAAtB,CAAvM,CAAhD,CAAoR3T,OAAO,CAAC0K,IAAI,EAAL,CAAQ+e,UAAU,EAAlB,CAAqBjT,OAAO,EAA5B,CAA+BO,MAAM,EAArC,CAAwC2S,OAAO,EAA/C,CAA3R,CAA8UA,OAAO,CAACC,SAAS,KAAV,CAAgBC,YAAY,KAA5B,CAArV,CAAlB,CAA2Y1qB,KAAKkF,IAAL,CAAUA,IAAV,CAAelF,KAAKgb,MAAL,CAAY,EAAZ,CAAe;AAC1sBhb,KAAK2qB,eAAL,CAAqBA,eAArB,CAAqC3qB,KAAK4qB,gBAAL,CAAsBA,gBAAtB,CAAuC5qB,KAAK6qB,uBAAL,CAA6BA,uBAA7B,CAAqD7qB,KAAK8qB,aAAL,CAAmBA,aAAnB,CAAiC9qB,KAAK+qB,cAAL,CAAoB,EAApB,CAAuB/qB,KAAK4R,QAAL,CAAc,EAAd,CAAiB;AAC1M5R,KAAKqT,mBAAL,CAAyB,EAAzB,CAA4B;AAC5BrT,KAAKqb,UAAL,CAAgB,EAAhB,CAAmB;AACnBrb,KAAKoB,QAAL,CAAc,EAAd,CAAiB;AACjBpB,KAAKgrB,WAAL,CAAiBA,WAAjB,CAA6BhrB,KAAKirB,YAAL,CAAkB,EAAlB,CAAqBjrB,KAAKiB,WAAL,CAAiB,KAAjB,CAAuB;AACzEjB,KAAKiqB,OAAL,CAAa,CAACxmB,KAAK,OAAN,CAAckK,MAAM,CAACud,UAAU,CAAX,CAAa9f,MAAM,EAAnB,CAApB,CAA2CrE,MAAM,CAACmkB,UAAU,CAAX,CAAa9f,MAAM,EAAnB,CAAjD,CAAwEwM,UAAU,CAACsT,UAAU,CAAX,CAAa9f,MAAM,EAAnB,CAAlF,CAAyG8e,OAAO,CAAC9e,MAAM,EAAP,CAAhH,CAAb,CAAyIpL,KAAKgL,IAAL,CAAU,OAAV,CAAkBhL,KAAKqX,WAAL,CAAiB,EAAjB,CAAoB;AAC/K,QAAS8T,kBAAT,CAA2BngB,IAA3B,CAAgCI,KAAhC,CAAsC,CAAC,GAAGJ,OAAO,OAAP,EAAgBA,OAAO,OAA1B,CAAkC,CAAChL,KAAK4R,QAAL,CAAcnS,YAAYgQ,aAAZ,CAA0BrE,KAA1B,CAAd,CAA+CpL,KAAK+qB,cAAL,CAAoBlX,MAApB,CAA2BpU,YAAYkQ,eAAZ,CAA4BvE,KAA5B,CAA3B,CAA8D,GAAGJ,OAAO,OAAV,CAAkBhL,KAAK+qB,cAAL,CAAoBxa,OAApB,CAA4B9Q,YAAYmQ,gBAAZ,CAA6BxE,KAA7B,CAA5B,CAAgEpL,KAAKorB,YAAL,CAAkB3rB,YAAYsQ,eAAZ,CAA4B3E,KAA5B,CAAlB,CAAqDpL,KAAKqT,mBAAL,CAAyB5T,YAAYiQ,wBAAZ,CAAqCtE,KAArC,CAAzB,CAAqEpL,KAAKoB,QAAL,CAAc3B,YAAY+E,aAAZ,CAA0B4G,KAA1B,CAAgCpL,KAAKorB,YAAL,CAAkBjZ,aAAlD,CAAd,CAAgF,CAA5a,IAAib,IAAGnH,OAAO,WAAV,CAAsB,CAAChL,KAAKoB,QAAL,CAAc+V,iBAAiBY,kBAAjB,CAAoC3M,KAApC,CAAd,CAAyDpL,KAAKqb,UAAL,CAAgBlE,iBAAiBc,eAAjB,CAAiC7M,KAAjC,CAAhB,CAAwDpL,KAAKqX,WAAL,CAAiBF,iBAAiBa,gBAAjB,CAAkC5M,KAAlC,CAAjB,CAA0D+L,iBAAiB2D,uBAAjB,CAAyC9a,KAAKoB,QAA9C,CAAuDgK,MAAMjC,MAA7D,EAAqExF,IAArE,CAA0E,SAASD,MAAT,CAAgB,CAAC1D,KAAKgb,MAAL,CAAYtX,MAAZ,CAAmB1D,KAAKgb,MAAL,CAAY,CAAZ,EAAe1H,MAAf,CAAsBtT,KAAK4pB,OAAL,CAAaC,GAAnC,CAAuC7pB,KAAKgb,MAAL,CAAY,CAAZ,EAAe1H,MAAf,CAAsBtT,KAAK4pB,OAAL,CAAaE,KAAnC,CAAyC9pB,KAAKgb,MAAL,CAAY,CAAZ,EAAe1H,MAAf,CAAsBtT,KAAK4pB,OAAL,CAAaG,IAAnC,CAAyC,CAAvO,EAA0O,CAA5a,IAAib,IAAG/e,OAAO,QAAV,CAAmB,CAAC4d,kBAAkByC,mBAAlB,CAAsCjgB,KAAtC,CAA4CpL,KAAKiqB,OAAL,CAAaxmB,IAAzD,EAA+DE,IAA/D,CAAoE,SAASD,MAAT,CAAgB,CAAC1D,KAAKiqB,OAAL,CAAaC,MAAb,CAAoB9e,KAApB,CAA0B1H,OAAOshB,IAAP,CAAY,SAASC,CAAT,CAAWC,CAAX,CAAa,CAAC,GAAGD,EAAEhU,KAAF,CAAQiU,EAAEjU,KAAb,CAAmB,MAAO,EAAP,CAAS,GAAGgU,EAAEhU,KAAF,CAAQiU,EAAEjU,KAAb,CAAmB,MAAM,CAAC,CAAP,CAAS,MAAO,EAAP,CAAU,CAA5F,CAA1B,CAAyH,CAA9M,EAAgNrN,QAAQC,GAAR,CAAY,uBAAZ,CAAoCuH,KAApC,CAA0CpL,KAAKiqB,OAA/C,EAAyD,CAAC;AACvqC,QAASf,SAAT,CAAkBle,IAAlB,CAAuB,CAAC;AACxBhL,KAAKkqB,MAAL,CAAYzZ,OAAZ,CAAoB,QAApB,CAA6BzQ,KAAKE,YAAL,CAAkBY,MAAlB,CAAyB0K,GAAzB,CAA6B,EAA7B,CAAgCxL,KAAKkqB,MAAL,CAAYC,SAAZ,CAAsB,KAAtB,CAA4BnqB,KAAKkqB,MAAL,CAAYI,gBAAZ,CAA6B,KAA7B,CAAmCtqB,KAAKoB,QAAL,CAAc,EAAd,CAAiB;AAC7IpB,KAAKqT,mBAAL,CAAyB,EAAzB,CAA4B,GAAGrI,OAAO,OAAV,CAAkB,CAAChL,KAAKE,YAAL,CAAkB8kB,IAAlB,CAAuBxZ,GAAvB,CAA2B/H,IAA3B,CAAgC,gBAAhC,CAAiD;AAChG,GAAGzD,KAAKgqB,SAAL,CAAerc,KAAf,CAAqBxE,MAArB,GAA8B,CAAjC,CAAmC,CAACtJ,eAAeuE,OAAf,CAAuB,OAAvB,CAA+BhF,WAAWiF,KAAX,GAAmBJ,QAAnB,CAA4BN,IAA5B,CAAiC,SAASD,MAAT,CAAgB,CAAC1D,KAAKgqB,SAAL,CAAerc,KAAf,CAAqBjK,MAArB,CAA4B1D,KAAKoL,KAAL,CAAW1H,MAAX,CAAkBynB,kBAAkBngB,IAAlB,CAAuBtH,MAAvB,EAAgC,CAAhI,CAA/B,EAAmK,CAAvM,IAA2M,CAAC1D,KAAKoL,KAAL,CAAWpL,KAAKgqB,SAAL,CAAerc,KAA1B,CAAgCwd,kBAAkBngB,IAAlB,CAAuBhL,KAAKgqB,SAAL,CAAerc,KAAtC,EAA6C/J,QAAQC,GAAR,CAAY,oBAAZ,EAAmC,CAAC,CADjS,IACsS,IAAGmH,OAAO,OAAV,CAAkB,CAAChL,KAAKE,YAAL,CAAkB8kB,IAAlB,CAAuBxZ,GAAvB,CAA2B/H,IAA3B,CAAgC,gBAAhC,CAAiD;AACtY,GAAGzD,KAAKgqB,SAAL,CAAejjB,KAAf,CAAqBoC,MAArB,GAA8B,CAAjC,CAAmC,CAACtJ,eAAeuE,OAAf,CAAuB,OAAvB,CAA+B/E,WAAWgF,KAAX,GAAmBJ,QAAnB,CAA4BN,IAA5B,CAAiC,SAASD,MAAT,CAAgB,CAAC1D,KAAKgqB,SAAL,CAAejjB,KAAf,CAAqBrD,MAArB,CAA4B1D,KAAKoL,KAAL,CAAW1H,MAAX,CAAkBynB,kBAAkBngB,IAAlB,CAAuBtH,MAAvB,EAAgC,CAAhI,CAA/B,EAAmK,CAAvM,IAA2M,CAAC1D,KAAKoL,KAAL,CAAWpL,KAAKgqB,SAAL,CAAejjB,KAA1B,CAAgCokB,kBAAkBngB,IAAlB,CAAuBhL,KAAKgqB,SAAL,CAAejjB,KAAtC,EAA6CnD,QAAQC,GAAR,CAAY,oBAAZ,EAAmC,CAAC,CADK,IACA,IAAGmH,OAAO,WAAV,CAAsB,CAAChL,KAAKE,YAAL,CAAkB8kB,IAAlB,CAAuBxZ,GAAvB,CAA2B/H,IAA3B,CAAgC,OAAhC,CAAwC;AACjY,GAAGzD,KAAKgqB,SAAL,CAAepS,SAAf,CAAyBzO,MAAzB,GAAkC,CAArC,CAAuC,CAACtJ,eAAeuE,OAAf,CAAuB,WAAvB,CAAmC8S,WAAW7S,KAAX,GAAmBJ,QAAnB,CAA4BN,IAA5B,CAAiC,SAASD,MAAT,CAAgB,CAAC1D,KAAKgqB,SAAL,CAAepS,SAAf,CAAyBlU,MAAzB,CAAgC1D,KAAKoL,KAAL,CAAW1H,MAAX,CAAkBynB,kBAAkBngB,IAAlB,CAAuBtH,MAAvB,EAAgC,CAApI,CAAnC,EAA2K,CAAnN,IAAuN,CAAC1D,KAAKoL,KAAL,CAAWpL,KAAKgqB,SAAL,CAAepS,SAA1B,CAAoCuT,kBAAkBngB,IAAlB,CAAuBhL,KAAKgqB,SAAL,CAAepS,SAAtC,EAAiDhU,QAAQC,GAAR,CAAY,wBAAZ,EAAuC,CAAC,CADnB,IACwB,IAAGmH,OAAO,QAAV,CAAmB,CAAC,GAAGhL,KAAKgqB,SAAL,CAAeC,OAAf,CAAuBtc,KAAvB,CAA6B2d,cAA7B,GAA8C7qB,SAAjD,CAA2D,CAACZ,eAAeuE,OAAf,CAAuB,QAAvB,CAAgCulB,QAAQtlB,KAAR,GAAgBJ,QAAhB,CAAyBN,IAAzB,CAA8B,SAASD,MAAT,CAAgB,CAAC,MAAOhE,aAAYyU,sBAAZ,CAAmCzQ,MAAnC,CAA0C,CAAC,MAAD,CAA1C,CAAP,CAA4D,CAA3G,EAA6GC,IAA7G,CAAkH,SAASD,MAAT,CAAgB,CAAC,IAAI,GAAIjB,GAAE,CAAN,CAAQgB,KAAK,EAAjB,CAAoBhB,EAAE,CAAtB,CAAwBA,GAAxB,CAA4B,CAACgB,KAAKC,OAAOjB,CAAP,EAAU,CAAV,EAAagB,IAAlB,CAAuBzD,KAAKgqB,SAAL,CAAeC,OAAf,CAAuBxmB,IAAvB,EAA6B2H,KAA7B,CAAmC1H,OAAOjB,CAAP,CAAnC,CAA6CzC,KAAKgqB,SAAL,CAAeC,OAAf,CAAuBxmB,IAAvB,EAA6B6nB,cAA7B,CAA4C5nB,OAAOjB,CAAP,EAAU0G,MAAtD,CAA8D,OAAOyf,mBAAkB2C,wBAAlB,CAA2CvrB,KAAKiqB,OAAhD,CAAwDvmB,MAAxD,CAAP,CAAwE,CAA1W,EAA4WC,IAA5W,CAAiX,SAASD,MAAT,CAAgB,CAAC1D,KAAKiqB,OAAL,CAAavmB,MAAb,CAAoBynB,kBAAkBngB,IAAlB,CAAuBtH,OAAO1D,KAAKiqB,OAAL,CAAaxmB,IAApB,EAA0B2H,KAAjD,EAAwDxH,QAAQC,GAAR,CAAY,iBAAZ,CAA8B7D,KAAKiqB,OAAnC,EAA6C,CAA3f,CAAhC,EAA+hB,CAA3lB,IAA+lB,CAACkB,kBAAkBngB,IAAlB,CAAuBhL,KAAKiqB,OAAL,CAAajqB,KAAKiqB,OAAL,CAAaxmB,IAA1B,EAAgC2H,KAAvD,EAA8DxH,QAAQC,GAAR,CAAY,qBAAZ,EAAoC,CAAC,SAAQA,GAAR,CAAY,mBAAZ,CAAgC7D,KAAKgqB,SAArC,EAAiD,SAAS9kB,KAAT,CAAc8F,IAAd,CAAmB,CAACke,SAASle,IAAT,EAAgB,SAAS6f,wBAAT,CAAiC7f,IAAjC,CAAsCwgB,UAAtC,CAAiD,CAAC5nB,QAAQC,GAAR,CAAY,oBAAZ,CAAiC2nB,UAAjC,EAA6C,GAAIC,eAAczrB,KAAKgqB,SAAL,CAAeC,OAAf,CAAuBuB,UAAvB,EAAmCpgB,KAArD,CAA2D,GAAGpL,KAAKE,YAAL,CAAkBsqB,MAAlB,CAAyBC,QAA5B,CAAqCgB,cAAc/e,OAAO+e,aAAP,CAAqB,CAAChB,SAAS,IAAV,CAArB,CAAd,CAAoD,GAAGzqB,KAAKE,YAAL,CAAkBsqB,MAAlB,CAAyBE,WAA5B,CAAwCe,cAAc/e,OAAO+e,aAAP,CAAqB,CAACf,YAAY,IAAb,CAArB,CAAd,CAAuD9mB,QAAQC,GAAR,CAAY,kBAAZ,CAA+B4nB,aAA/B,EAA8C,GAAGA,cAActiB,MAAd,CAAqB,CAAxB,CAA0B,CAACnJ,KAAKiqB,OAAL,CAAauB,UAAb,EAAyBpgB,KAAzB,CAA+B,EAA/B,CAAkC;AACnkDwd,kBAAkB2C,wBAAlB,CAA2CvrB,KAAKiqB,OAAhD,CAAwD,CAACwB,aAAD,CAAxD,EAAyE9nB,IAAzE,CAA8E,SAASD,MAAT,CAAgB,CAAC1D,KAAKiqB,OAAL,CAAavmB,MAAb,CAAoBE,QAAQC,GAAR,CAAY,kCAAZ,CAA+CH,MAA/C,CAAsD1D,KAAKiqB,OAA3D,EAAoEkB,kBAAkBngB,IAAlB,CAAuBtH,OAAO8nB,UAAP,EAAmBpgB,KAA1C,EAAkD,CAAzO,EAA4O,CAD0xC,IACtxC,CAACpL,KAAKiqB,OAAL,CAAauB,UAAb,EAAyBN,SAAzB,CAAmC,CAAnC,CAAqClrB,KAAKiqB,OAAL,CAAaC,MAAb,CAAoB9e,KAApB,CAA0BqgB,aAA1B,CAAyC,CAAC;AAChU,QAASC,oBAAT,CAA6B9e,KAA7B,CAAmC,CAAC/M,eAAeuE,OAAf,CAAuB,QAAvB,CAAgCwkB,kBAAkBS,qBAAlB,CAAwCzc,KAAxC,EAA+CjJ,IAA/C,CAAoD,SAASD,MAAT,CAAgB,CAAC1D,KAAK+qB,cAAL,CAAoB/T,gBAApB,CAAqCtT,MAArC,CAA4CE,QAAQC,GAAR,CAAY,yBAAZ,CAAsC7D,KAAKkqB,MAA3C,CAAkDlqB,KAAK+qB,cAAvD,EAAwE,CAAzL,CAAhC,EAA4N,GAAG/qB,KAAKkqB,MAAL,CAAYG,OAAZ,CAAoBF,SAApB,GAAgC,IAAnC,CAAwC,CAACtqB,eAAeuE,OAAf,CAAuB,QAAvB,CAAgCwkB,kBAAkB+C,gBAAlB,CAAmC/e,KAAnC,CAAyC5M,KAAKkqB,MAAL,CAAYxjB,IAArD,CAA0D1G,KAAKkqB,MAAL,CAAYG,OAAZ,CAAoB5mB,IAA9E,EAAoFE,IAApF,CAAyF,SAASD,MAAT,CAAgB,CAAC1D,KAAK+qB,cAAL,CAAoBa,WAApB,CAAgCloB,MAAhC,CAAuCE,QAAQC,GAAR,CAAY,oBAAZ,CAAiC7D,KAAKkqB,MAAtC,CAA6ClqB,KAAK+qB,cAAlD,EAAmE,CAApN,CAAhC,EAAwP,IAAG/qB,KAAKkqB,MAAL,CAAYI,gBAAZ,EAA8B1d,MAAM,CAAN,EAAS9I,IAAT,CAAc+nB,uBAAd,GAAwCprB,SAAzE,CAAmF,CAAC;AACrnBZ,eAAeuE,OAAf,CAAuB,QAAvB,CAAgCwkB,kBAAkBkD,qBAAlB,CAAwClf,KAAxC,EAA+CjJ,IAA/C,CAAoD,SAASD,MAAT,CAAgB,CAACE,QAAQC,GAAR,CAAY+I,KAAZ,EAAoB,CAAzF,CAAhC,EAA6H;AAC5H,SAASke,cAAT,CAAuBpkB,IAAvB,CAA4BqH,QAA5B,CAAqCqc,YAArC,CAAkD2B,WAAlD,CAA8D,CAAC/rB,KAAKkqB,MAAL,CAAYC,SAAZ,CAAsB,IAAtB,CAA2BnqB,KAAKkqB,MAAL,CAAYxjB,IAAZ,CAAiBA,IAAjB,CAAsB1G,KAAKkqB,MAAL,CAAYnc,QAAZ,CAAqBA,QAArB,CAA8B/N,KAAKkqB,MAAL,CAAYE,YAAZ,CAAyBA,YAAzB,CAAsCpqB,KAAKkqB,MAAL,CAAYG,OAAZ,CAAoB5mB,IAApB,CAAyBsoB,WAAzB,CAAqC/rB,KAAKkqB,MAAL,CAAYG,OAAZ,CAAoBF,SAApB,CAA8B4B,cAActrB,SAAd,CAAwB,KAAxB,CAA8B,IAA5D,CAAiET,KAAK4qB,gBAAL,GAAyB,SAASI,YAAT,CAAqBvnB,IAArB,CAA0B9F,IAA1B,CAA+B,CAAC,GAAGqC,KAAKirB,YAAL,CAAkBxnB,IAAlB,IAA0B9F,IAA7B,CAAkC,CAACqC,KAAKE,YAAL,CAAkBY,MAAlB,CAAyB2C,IAAzB,EAA+B,EAA/B,CAAkCzD,KAAKE,YAAL,CAAkB4d,IAAlB,CAAuBra,IAAvB,EAA6B,KAA7B,CAAmCzD,KAAKirB,YAAL,CAAkBxnB,IAAlB,EAAwB,EAAxB,CAA2B,GAAGA,OAAO,KAAV,CAAgBzD,KAAKirB,YAAL,CAAkB7B,OAAlB,CAA0B,KAA1B,CAAiC,CAApL,IAAwL,CAACppB,KAAKE,YAAL,CAAkBY,MAAlB,CAAyB2C,IAAzB,EAA+B9F,IAA/B,CAAoCqC,KAAKirB,YAAL,CAAkBxnB,IAAlB,EAAwB9F,IAAxB,CAA6BqC,KAAKE,YAAL,CAAkB4d,IAAlB,CAAuBra,IAAvB,EAA6B,IAA7B,CAAkC,GAAGA,OAAO,KAAV,CAAgB,CAACzD,KAAKmb,eAAL,CAAqBhE,iBAAiB8D,yBAAjB,CAA2Cjb,KAAKoL,KAAhD,CAAsDzN,IAAtD,CAArB,CAAiFqC,KAAKirB,YAAL,CAAkB7B,OAAlB,CAA0B,IAA1B,CAAgC,CAAC,CAAC,SAASwB,iBAAT,CAA0BoB,aAA1B,CAAwC,CAAC,GAAGA,aAAH,CAAiB,CAAChsB,KAAKkqB,MAAL,CAAYC,SAAZ,CAAsB,KAAtB,CAA4BnqB,KAAKkqB,MAAL,CAAYG,OAAZ,CAAoBF,SAApB,CAA8B,KAA9B,CAAoC,GAAGnqB,KAAKkqB,MAAL,CAAYzZ,OAAZ,GAAsB,QAAzB,CAAkCzQ,KAAKkqB,MAAL,CAAYI,gBAAZ,CAA6B,KAA7B,CAAoC,IAAI2B,UAAS3iB,QAAQ,wBAAR,EAAkCtJ,KAAKoL,KAAvC,CAA6CpL,KAAKkqB,MAAL,CAAYzZ,OAAzD,CAAiEzQ,KAAKkqB,MAAL,CAAYxjB,IAA7E,CAAkF1G,KAAKkqB,MAAL,CAAYnc,QAA9F,CAAb,CAAqH2d,oBAAoBO,QAApB,EAA+B;;;SAGhkC,QAAStB,gBAAT,EAA0B,CAAC,GAAG3qB,KAAKgL,IAAL,GAAY,OAAf,CAAuB,CAAC,GAAI4B,OAAMnN,YAAY0Q,SAAZ,CAAsBnQ,KAAKoL,KAA3B,CAAiCpL,KAAKksB,gBAAtC,CAAuDlsB,KAAKmsB,YAA5D,CAAV,CAAoFtvB,QAAQkU,OAAR,CAAgBnE,KAAhB,CAAsB,SAAS9J,IAAT,CAAc,CAACA,KAAK0L,OAAL,CAAa,UAAU,CAAC5K,QAAQC,GAAR,CAAYf,IAAZ,EAAmB,CAA3C,CAA4C,SAASqE,aAAT,CAAuB,CAACnH,KAAKoH,KAAL,CAAWD,cAAc3D,IAAd,CAAmB6D,OAA9B,CAAuC,CAA3G,EAA8G,CAAnJ,EAAsJ,CAAC,CAAC,CAAC,CArB3K,IAqB+K,CAAC,UAAU,CAAC,aAAaxK,QAAQC,MAAR,CAAe,YAAf,EAA6B8M,SAA7B,CAAuC,aAAvC,CAAqDwiB,WAArD,EAAkEA,YAAYptB,OAAZ,CAAoB,CAAC,UAAD,CAApB,CAAiC,QAASotB,YAAT,CAAqB1kB,QAArB,CAA8B,CAAC,MAAM,CAACoC,SAAS,GAAV,CAAcI,KAAK,QAASA,KAAT,CAAcC,KAAd,CAAoBnM,OAApB,CAA4BoM,KAA5B,CAAkC,CAAC,GAAI2B,IAAG/N,QAAQ,CAAR,CAAP,CAAkB,QAASquB,cAAT,EAAwB,CAAC,GAAGtgB,GAAGugB,WAAH,CAAevgB,GAAGwgB,WAArB,CAAiC,CAACxgB,GAAGygB,SAAH,CAAala,GAAb,CAAiB,SAAjB,EAA6B,CAA/D,IAAmE,CAACvG,GAAGygB,SAAH,CAAa1qB,MAAb,CAAoB,SAApB,EAAgC,CAAC,iBAAgBqI,MAAMzB,MAAN,CAAa,UAAU,CAAC,MAAM,CAAC6W,MAAMxT,GAAGwgB,WAAV,CAAN,CAA8B,CAAtD,CAAuD,UAAU,CAAC;AACtuBF,gBAAiB,CADmpB,CAClpB,IADkpB,EAC3oB,CADqb,CAAN,CAC5a,CAAC,CADgR,IAC5Q,CAAC,UAAU,CAAC,aAAaxvB,QAAQC,MAAR,CAAe,YAAf,EAA6B8M,SAA7B,CAAuC,wBAAvC,CAAgE6iB,sBAAhE,EAAwF,QAASA,uBAAT,EAAiC,CAAC,MAAM,CAAC3iB,SAAS,GAAV,CAAcC,QAAQ,IAAtB,CAA2BI,MAAM,CAACuiB,OAAO,IAAR,CAAjC,CAA+C/O,WAAW,IAA1D,CAA+DvE,iBAAiB,IAAhF,CAAqFuT,SAAS,oGAA9F,CAAmMtT,aAAa,wBAAhN,CAAyOva,WAAW,QAASA,WAAT,CAAoBG,MAApB,CAA2B,CAAE,CAAjR,CAAN,CAA0R,CAAC,CAA9a,IAAkb,CAAC,UAAU,CAAC,aAAapC,QAAQC,MAAR,CAAe,YAAf,EAA6B8M,SAA7B,CAAuC,eAAvC,CAAuDgjB,aAAvD,EAAsE,QAASA,cAAT,EAAwB,CAAC,MAAM,CAAC9iB,SAAS,GAAV,CAAcC,QAAQ,IAAtB,CAA2BI,MAAM,CAAC1G,KAAK,IAAN,CAAW8P,WAAW,GAAtB,CAA0BD,OAAO,IAAjC,CAAsCuZ,QAAQ,IAA9C,CAAjC,CAAqFvP,QAAQ,yBAA7F,CAAuHze,YAAY,mDAAnI,CAAuLqL,KAAK,QAASA,KAAT,CAAcC,KAAd,CAAoBnM,OAApB,CAA4BoM,KAA5B,CAAkC0iB,0BAAlC,CAA6D,CAAE,CAA3P,CAAN,CAAoQ,CAAC,CAA7X,IAAiY,CAAC,UAAU,CAAC,aAAajwB,QAAQC,MAAR,CAAe,YAAf,EAA6B8M,SAA7B,CAAuC,cAAvC,CAAsDmjB,YAAtD,EAAoE,QAASA,aAAT,EAAuB,CAAC,MAAM,CAACjjB,SAAS,GAAV,CAAc6T,WAAW,IAAzB,CAA8B5T,QAAQ,IAAtC,CAA2CI,MAAM,CAACE,MAAM,UAAP,CAAjD,CAAoExL,YAAY,kDAAhF,CAAmIye,QAAQ,UAA3I,CAAsJlE,iBAAiB,IAAvK,CAA4KC,aAAa,cAAzL,CAAwMva,WAAW,QAASA,WAAT,CAAoBG,MAApB,CAA2B,CAAC,GAAIqa,MAAK,IAAT,CAAcA,KAAK0T,IAAL,CAAU,EAAV,CAAa1T,KAAK2T,UAAL,CAAgBxsB,SAAhB,CAA0B6Y,KAAK4T,SAAL,CAAe,CAAf,CAAiB5T,KAAK6T,MAAL,CAAY,QAASA,OAAT,CAAgBC,GAAhB,CAAoB,CAAC9T,KAAK0T,IAAL,CAAUhwB,IAAV,CAAeowB,GAAf,EAAoB,GAAG9T,KAAK0T,IAAL,CAAU7jB,MAAV,GAAmB,CAAtB,CAAwB,CAACikB,IAAIxP,MAAJ,CAAW,IAAX,CAAiB,CAAC,CAAhG,CAAiGtE,KAAK+T,OAAL,CAAa,SAASC,WAAT,CAAqB,CAAC,GAAGA,YAAY1P,MAAf,CAAsB,CAAC/gB,QAAQkU,OAAR,CAAgBuI,KAAK0T,IAArB,CAA0B,SAASI,GAAT,CAAa,CAAC,GAAG,CAACA,IAAIG,QAAR,CAAiB,CAACjU,KAAKkU,MAAL,CAAYJ,GAAZ,EAAiB,OAAQ,CAAC,CAApF,EAAuF,CAAC,CAAlJ,CAAmJ9T,KAAKkU,MAAL,CAAY,SAASC,WAAT,CAAqB,CAAC,GAAG,CAACA,YAAYF,QAAhB,CAAyB,CAAC1wB,QAAQkU,OAAR,CAAgBuI,KAAK0T,IAArB,CAA0B,SAASI,GAAT,CAAa,CAAC,GAAGA,IAAIxP,MAAJ,EAAYwP,MAAMK,WAArB,CAAiC,CAACL,IAAIxP,MAAJ,CAAW,KAAX,CAAkB,CAAC,CAA7F,EAA+F6P,YAAY7P,MAAZ,CAAmB,IAAnB,CAAwBtE,KAAK2T,UAAL,CAAgBhuB,OAAO8tB,YAAP,CAAoB1iB,KAApB,GAA4B5J,SAA5B,CAAsCA,SAAtC,CAAgDgtB,YAAYC,OAA5E,CAAqF,CAAC,CAAzQ,CAA0QpU,KAAKqU,SAAL,CAAe,SAAS7F,SAAT,CAAmB,CAAC,OAAOA,SAAP,EAAkB,IAAI,QAAJ,CAAa;AACp0D,GAAGxO,KAAK4T,SAAL,CAAe,GAAf,CAAmB,CAAtB,CAAwB,CAAC5T,KAAK4T,SAAL,CAAe,CAAf,CAAkB,CAA3C,IAA+C,CAAC5T,KAAK4T,SAAL,EAAgB,GAAhB,CAAqB,OAAM,IAAI,QAAJ,CAAa,GAAG5T,KAAK4T,SAAL,CAAe,GAAf,CAAmBjuB,OAAO2uB,OAAP,CAAe3uB,OAAO4uB,OAA5C,CAAoD,CAACvU,KAAK4T,SAAL,CAAejuB,OAAO2uB,OAAP,CAAe3uB,OAAO4uB,OAArC,CAA8C,CAAnG,IAAuG,CAACvU,KAAK4T,SAAL,EAAgB,GAAhB,CAAqB,OADglD,CACxkD,CADqiD,CACniD,CADgvB,CAC/uBhjB,KAAK,QAASA,KAAT,CAAcC,KAAd,CAAoBnM,OAApB,CAA4BoM,KAA5B,CAAkCC,KAAlC,CAAwC,CAAC,GAAI0B,IAAG/N,QAAQ,CAAR,CAAP,CAAkB8vB,GAAG/hB,GAAGgiB,QAAH,CAAY,CAAZ,EAAeA,QAAf,CAAwB,CAAxB,CAArB,CAAgD5jB,MAAMyjB,OAAN,CAAc7hB,GAAGwgB,WAAjB,CAA6BpiB,MAAM0jB,OAAN,CAAcC,GAAGvB,WAAjB,CAA6BpiB,MAAMzB,MAAN,CAAa,yBAAb,CAAuC,SAASwa,QAAT,CAAkB,CAAC,GAAGA,WAAWziB,SAAX,EAAsB4J,MAAM2jB,UAAN,GAAmBvtB,SAA5C,CAAsD,CAAC4J,MAAM4jB,aAAN,CAAoB/K,QAApB,EAA+B,CAAC,CAAjJ,EAAmJ/Y,MAAMzB,MAAN,CAAa,UAAU,CAAC,MAAM,CAAC6W,MAAMxT,GAAGwgB,WAAV,CAAN,CAA8B,CAAtD,CAAuD,UAAU,CAACpiB,MAAMyjB,OAAN,CAAc7hB,GAAGwgB,WAAjB,CAA8B,CAAhG,CAAiG,IAAjG,EAAuGpiB,MAAMzB,MAAN,CAAa,UAAU,CAAC,MAAM,CAAC6W,MAAMuO,GAAGvB,WAAV,CAAN,CAA8B,CAAtD,CAAuD,UAAU,CAACpiB,MAAM0jB,OAAN,CAAcC,GAAGvB,WAAjB,CAA8B,CAAhG,CAAiG,IAAjG,EAAuGpiB,MAAMzB,MAAN,CAAa,wBAAb,CAAsC,SAASwa,QAAT,CAAkB,CAAC,GAAGA,WAAWziB,SAAd,CAAwB,CAAC,GAAIytB,OAAMhL,WAAW,CAAX,CAAa,EAAb,CAAgB,IAA1B,CAA+B4K,GAAGK,KAAH,CAASC,IAAT,CAAclL,SAASgL,KAAvB,CAA8B,CAAC,CAAhJ,EAAmJ,CADmG,CAAN,CAC1F,CAAC,CAD5B,IACgC,CAAC,UAAU,CAAC,aAAarxB,QAAQC,MAAR,CAAe,YAAf,EAA6B8M,SAA7B,CAAuC,SAAvC,CAAiDykB,OAAjD,EAA0D,QAASA,QAAT,EAAkB,CAAC,MAAM,CAACvkB,SAAS,GAAV,CAAc6T,WAAW,IAAzB,CAA8B5T,QAAQ,IAAtC,CAA2C4iB,SAAS,6EAApD,CAAkIrP,QAAQ,eAA1I,CAA0JnT,MAAM,CAACujB,QAAQ,GAAT,CAAaH,SAAS,GAAtB,CAAhK,CAA2LrjB,KAAK,QAASA,KAAT,CAAcC,KAAd,CAAoBnM,OAApB,CAA4BoM,KAA5B,CAAkCkkB,gBAAlC,CAAmD,CAACnkB,MAAMyT,MAAN,CAAa,KAAb,CAAmB0Q,iBAAiBnB,MAAjB,CAAwBhjB,KAAxB,EAA+BA,MAAMzB,MAAN,CAAa,UAAb,CAAwB,SAASwa,QAAT,CAAkB,CAAC,GAAGA,WAAWziB,SAAd,CAAwB,CAAC,GAAGyiB,QAAH,CAAY,CAACtf,QAAQC,GAAR,CAAYsG,MAAMujB,OAAlB,CAA0BxK,QAA1B,EAAoCoL,iBAAiBjB,OAAjB,CAAyBljB,KAAzB,EAAiC,CAAC,CAAC,CAAxJ,EAA2J,CAAjc,CAAN,CAA0c,CAAC,CAAjjB,IAAqjB,CAAC,UAAU,CAAC,aAAa;AACl8CtN,QAAQC,MAAR,CAAe,YAAf,EAA6B+R,OAA7B,CAAqC,mBAArC,CAAyD+Z,iBAAzD,EAA4EA,kBAAkB5pB,OAAlB,CAA0B,CAAC,SAAD,CAAW,aAAX,CAAyB,IAAzB,CAA1B,CAAyD,QAAS4pB,kBAAT,CAA2Btf,OAA3B,CAAmC5J,WAAnC,CAA+CwU,EAA/C,CAAkD,CAAC,GAAIrF,SAAQ,CAACid,sBAAsBA,qBAAvB,CAA6CzC,sBAAsBA,qBAAnE,CAAyFkC,yBAAyBA,wBAAlH,CAA2IF,oBAAoBA,mBAA/J,CAAmLM,iBAAiBA,gBAApM,CAAqN4C,WAAWA,UAAhO,CAA2OC,iBAAiBA,gBAA5P,CAAZ,CAA0R,MAAO3f,QAAP,CAAe,QAASwa,sBAAT,CAA+Bzc,KAA/B,CAAqC,CAAC,MAAOsH,IAAG,SAAS3Q,OAAT,CAAiBuR,MAAjB,CAAwB,CAAC,GAAGlI,QAAQnM,SAAX,CAAqB,CAAC,GAAIgC,GAAEmK,MAAMzD,MAAZ,CAAmBslB,cAAc,CAAjC,CAAmCC,aAAa,EAAhD,CAAmDvc,cAAc,CAAjE,CAAmEwc,WAAW,EAA9E,CAAiFhc,QAAQ,CAAC1B,MAAM,CAAP,CAAS2d,IAAI,CAAb,CAAzF,CAAyG,MAAMnsB,GAAN,CAAU,CAAC;AACprBgsB,cAAc7hB,MAAMnK,CAAN,EAASgL,MAAT,CAAgBghB,aAAhB,CAA8B7hB,MAAMnK,CAAN,EAASgL,MAAvC,CAA8CghB,aAA5D,CAA0EC,aAAa,EAAE9hB,MAAMnK,CAAN,EAASgL,MAAX,EAAmBb,MAAMnK,CAAN,EAASgL,MAAT,CAAgBihB,YAAnC,CAAgD9hB,MAAMnK,CAAN,EAASgL,MAAzD,CAAgEihB,YAA7E,CAA0F/b,QAAQ1B,KAAR,EAAerE,MAAMnK,CAAN,EAASgL,MAAT,CAAgB,CAAhB,CAAkB,CAAlB,CAAoB,CAAnC,CAAqCkF,QAAQic,GAAR,EAAahiB,MAAMnK,CAAN,EAASgL,MAAtB,CAA6B0E,cAAc,CAACQ,QAAQic,GAAR,CAAYjc,QAAQ1B,KAArB,EAA4BuC,OAA5B,CAAoC,CAApC,CAAd,CAAqDmb,WAAW9f,QAAQ0f,UAAR,CAAmB3hB,KAAnB,CAAyB,QAAzB,CAAkC,CAAlC,CAAX,CAAiD,SAAQ,CAAC,CAACiiB,OAAO,gBAAR,CAAyB1qB,MAAMgO,aAA/B,CAAD,CAA+C,CAAC0c,OAAO,gBAAR,CAAyB1qB,MAAMsqB,aAA/B,CAA/C,CAA6F,CAACI,OAAO,eAAR,CAAwB1qB,MAAMuqB,eAAe,EAAf,CAAkB,CAAlB,CAAoBA,YAAlD,CAA7F,CAA6J,CAACG,OAAO,aAAR,CAAsB1qB,MAAMwqB,WAAWxqB,KAAX,GAAmB1D,SAAnB,CAA6B,CAA7B,CAA+BkuB,WAAWxqB,KAAtE,CAA7J,CAAR,EAAqP,CAAC,CADpD,CAAP,CAC8D,SAAS2qB,mBAAT,CAA4BzE,OAA5B,CAAoCzd,KAApC,CAA0C,CAAC,GAAInK,GAAEmK,MAAMzD,MAAZ,CAAmB,GAAGkhB,QAAQlhB,MAAR,CAAe,CAAlB,CAAoB,CAAC,MAAM1G,GAAN,CAAU,CAAC4nB,QAAQrtB,IAAR,CAAa,CAAC6xB,OAAOjiB,MAAMnK,CAAN,EAASosB,MAAjB,CAAwBzc,OAAO,EAA/B,CAAb,EAAkD,SAAQqC,OAAR,GAAmB,GAAE7H,MAAMzD,MAAR,CAAe,IAAI,GAAIyN,GAAE,CAAV,CAAYA,EAAEnU,CAAd,CAAgBmU,GAAhB,CAAoB,CAACyT,QAAQzT,CAAR,EAAWxE,MAAX,CAAkBpV,IAAlB,CAAuB,CAACmH,MAAMyI,MAAMgK,CAAN,EAASzS,KAAhB,CAAvB,EAAgD,OAAOkmB,QAAP,CAAgB,SAASsB,iBAAT,CAA0B/e,KAA1B,CAAgClG,IAAhC,CAAqCjD,IAArC,CAA0C,CAAC,MAAOyQ,IAAG,SAAS3Q,OAAT,CAAiBuR,MAAjB,CAAwB,CAAC,GAAIpI,QAAOjJ,OAAO,QAAP,CAAgB,YAAhB,CAA6B,QAAxC,CAAiDmR,KAAKnR,OAAO,QAAP,CAAgB,QAAhB,CAAyB,MAA/E,CAAsFpC,aAAa3B,YAAY4B,eAAZ,EAAnG,CAAiImB,EAAEpB,aAAaoC,IAAb,EAAmB0F,MAAtJ,CAA6JyiB,YAAY,EAAzK,CAA4KmD,QAAQ,EAApL,CAAuL,IAAI,GAAInY,GAAE,CAAV,CAAYA,EAAEnU,CAAd,CAAgBmU,GAAhB,CAAoB,CAAC,GAAIoY,eAAc1lB,QAAQoD,MAAR,EAAgBE,KAAhB,CAAsBlG,IAAtB,CAA2BrF,aAAaoC,IAAb,EAAmBmT,CAAnB,EAAsBhC,IAAtB,CAA3B,CAAlB,CAA0EuN,QAAQtT,QAAQwa,qBAAR,CAA8B2F,aAA9B,CAAlF,CAA+HD,QAAQ/xB,IAAR,CAAamlB,OAAb,EAAuB,SAAQpR,OAAR,CAAgBge,OAAhB,CAAwB,SAAS5M,OAAT,CAAiB,CAACA,QAAQxe,IAAR,CAAa,SAASD,MAAT,CAAgB,CAACkoB,YAAYkD,mBAAmBlD,WAAnB,CAA+BloB,MAA/B,CAAZ,CAAoD,CAAlF,EAAqF,CAA/H,EAAiIH,QAAQqoB,WAAR,EAAsB,CAArhB,CAAP,CAA+hB,SAASE,sBAAT,CAA+Blf,KAA/B,CAAqC,CAAC,MAAOsH,IAAG,SAAS3Q,OAAT,CAAiBuR,MAAjB,CAAwB,CAACjY,QAAQkU,OAAR,CAAgBnE,KAAhB,CAAsB,SAAS9J,IAAT,CAAc,CAAC+L,QAAQwa,qBAAR,CAA8BvmB,KAAKgB,IAAL,CAAU2M,OAAxC,EAAiD9M,IAAjD,CAAsD,SAASD,MAAT,CAAgB,CAACZ,KAAKgB,IAAL,CAAU+nB,uBAAV,CAAkCnoB,MAAlC,CAA0C,CAAjH,EAAoH,CAAzJ,EAA2JH,QAAQqJ,KAAR,EAAgB,CAAvM,CAAP,CAAiN,SAAS2hB,WAAT,CAAoB3hB,KAApB,CAA0BgI,IAA1B,CAA+BoI,MAA/B,CAAsC,CAAC,GAAIjL,SAAQ,EAAZ,CAAe+B,IAAI,CAAC7C,MAAM,CAAP,CAAS9M,MAAM,EAAf,CAAnB,CAAsC,IAAI,GAAI1B,GAAE,CAAV,CAAYA,EAAEmK,MAAMzD,MAApB,CAA2B1G,GAA3B,CAA+B,CAAC,GAAI0B,OAAMyI,MAAMnK,CAAN,EAASmS,IAAT,CAAV,CAAyB,GAAG7C,QAAQ5N,KAAR,IAAiB,IAAjB,EAAuB4N,QAAQ5N,KAAR,IAAiB1D,SAA3C,CAAqD,CAACsR,QAAQ5N,KAAR,EAAe,CAAf,CAAkB,CAAxE,IAA4E,CAAC4N,QAAQ5N,KAAR,IAAkB,IAAG4N,QAAQ5N,KAAR,EAAe2P,IAAI7C,KAAtB,CAA4B,CAAC;AAC/4D,GAAG+L,SAAS7Y,KAAZ,CAAkB,CAAC2P,IAAI7C,KAAJ,CAAUc,QAAQ5N,KAAR,CAAV,CAAyB2P,IAAI3P,KAAJ,CAAUA,KAAV,CAAiB,CAAC,CAAC;AAC/D,MAAO2P,IAAP,CAAY,SAAS0a,iBAAT,CAA0B5hB,KAA1B,CAAgCgI,IAAhC,CAAqC,CAAC,MAAOV,IAAG,SAAS3Q,OAAT,CAAiBuR,MAAjB,CAAwB,CAAC,GAAI0Z,kBAAiB,EAArB,CAAwB9uB,YAAYyU,sBAAZ,CAAmCvH,KAAnC,CAAyC,CAACgI,IAAD,CAAzC,EAAiDjR,IAAjD,CAAsD,SAASD,MAAT,CAAgB,CAAC,IAAI,GAAIjB,GAAE,CAAN,CAAQgQ,IAAI/O,OAAOyF,MAAvB,CAA8B1G,EAAEgQ,GAAhC,CAAoChQ,GAApC,CAAwC,CAAC+rB,iBAAiBxxB,IAAjB,CAAsB,CAACmH,MAAMT,OAAOjB,CAAP,EAAU,CAAV,EAAamS,IAAb,CAAP,CAA0B3D,MAAMvN,OAAOjB,CAAP,EAAU0G,MAA1C,CAAtB,EAA0E,CAAC,CAA3L,EAA6L5F,QAAQirB,gBAAR,EAA2B,CAA5Q,CAAP,CAAsR,SAASjD,yBAAT,CAAkCxvB,GAAlC,CAAsCkzB,aAAtC,CAAoD,CAAC,MAAO/a,IAAG,SAAS3Q,OAAT,CAAiBuR,MAAjB,CAAwB,CAACjY,QAAQkU,OAAR,CAAgBke,aAAhB,CAA8B,SAASriB,KAAT,CAAe,CAAC,GAAInJ,MAAKmJ,MAAM,CAAN,EAASnJ,IAAlB,CAAuByrB,SAASzrB,KAAK,MAArC,CAA4CgP,IAAI7F,MAAMzD,MAAtD,CAA6DpN,IAAI0H,IAAJ,EAAUynB,SAAV,CAAoBzY,GAApB,CAAwB,IAAI,GAAIhQ,GAAE,CAAV,CAAYA,EAAEgQ,GAAd,CAAkBhQ,GAAlB,CAAsB,CAAC,GAAI0sB,SAAQviB,MAAMnK,CAAN,EAASysB,QAAT,EAAmB/lB,MAA/B,CAAsC,IAAI,GAAIyN,GAAE,CAAV,CAAYA,EAAEuY,OAAd,CAAsBvY,GAAtB,CAA0B,CAAC7a,IAAI0H,IAAJ,EAAU2H,KAAV,CAAgBpO,IAAhB,CAAqB4P,MAAMnK,CAAN,EAASysB,QAAT,EAAmBtY,CAAnB,CAArB,EAA6C,CAAC,CAAC,CAA1Q,EAA4QrT,QAAQxH,GAAR,EAAc,CAAtT,CAAP,CAAgU,SAASsvB,oBAAT,CAA6Bze,KAA7B,CAAmCnJ,IAAnC,CAAwC,CAAC,GAAImR,MAAKnR,OAAO,WAAP,CAAmB,MAAnB,CAA0B,OAAnC,CAA2C,MAAOoL,SAAQ2f,gBAAR,CAAyB5hB,KAAzB,CAA+BgI,IAA/B,CAAP,CAA6C,CAAC,CAAC,CAJymB,IAIrmB,aAAa;AACj1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb/X,QAAQC,MAAR,CAAe,OAAf,EAAwBG,MAAxB,CAA+B,CAAC,gBAAD,CAAkB,SAASyB,cAAT,CAAwB,CAAC;AAC1EA,eAAeC,KAAf,CAAqB,WAArB,CAAiC,CAACC,IAAI,QAAL,CAAcC,YAAY,iDAA1B,CAAjC,EAA+GF,KAA/G,CAAqH,YAArH,CAAkI,CAACC,IAAI,eAAL,CAAqBC,YAAY,kDAAjC,CAAlI,EAAwNF,KAAxN,CAA8N,UAA9N,CAAyO,CAACC,IAAI,gBAAL,CAAsBC,YAAY,gDAAlC,CAAzO,EAA8TF,KAA9T,CAAoU,UAApU,CAA+U,CAACC,IAAI,qBAAL,CAA2BC,YAAY,gDAAvC,CAA/U,EAA0a,CAD3Y,CAA/B,EAC6a,CAAC,UAAU,CAAC,aAAahC,QAAQC,MAAR,CAAe,OAAf,EAAwBgC,UAAxB,CAAmC,sBAAnC,CAA0DswB,oBAA1D,EAAgFA,qBAAqBpwB,OAArB,CAA6B,CAAC,QAAD,CAAU,MAAV,CAAiB,cAAjB,CAAgC,WAAhC,CAA4C,gBAA5C,CAA6D,OAA7D,CAAqE,aAArE,CAAmF,qBAAnF,CAAyG,aAAzG,CAAuH,gBAAvH,CAAwI,mBAAxI,CAA4J,YAA5J,CAAyK,YAAzK,CAA7B,CAAoN,QAASowB,qBAAT,CAA8BnwB,MAA9B,CAAqCuE,IAArC,CAA0CtE,YAA1C,CAAuDC,SAAvD,CAAiE5B,cAAjE,CAAgF8xB,KAAhF,CAAsF3vB,WAAtF,CAAkGC,mBAAlG,CAAsH2vB,WAAtH,CAAkIzvB,cAAlI,CAAiJwjB,iBAAjJ,CAAmKjkB,UAAnK,CAA8KC,UAA9K,CAAyL,CAAC,GAAIW,MAAK,IAAT,CAAcuvB,aAAa,EAA3B,CAA8BvvB,KAAKwvB,gBAAL,CAAsBA,gBAAtB,CAAuCxvB,KAAKyvB,QAAL,CAAcA,QAAd,CAAuBzvB,KAAKma,MAAL,CAAYA,MAAZ,CAAmBna,KAAKqB,YAAL,CAAkBmC,KAAKnC,YAAvB,CAAoCrB,KAAK+E,MAAL,CAAYA,MAAZ,CAAmB/E,KAAK0vB,iBAAL,CAAuBA,iBAAvB,CAAyC1vB,KAAKsnB,UAAL,CAAgB,CAACE,YAAY,CAAb,CAAeC,UAAU,CAAzB,CAAhB,CAA4CznB,KAAK6F,MAAL,CAAYA,MAAZ,CAAmB7F,KAAK4nB,QAAL,CAAcA,QAAd,CAAuB,QAAS+H,WAAT,EAAqB,CAAC3vB,KAAK4vB,OAAL,CAAa,CAACC,YAAY,EAAb,CAAgB3lB,KAAK,CAAC4lB,OAAO,KAAR,CAAcrsB,KAAK,EAAnB,CAAsBkK,MAAMlN,SAA5B,CAAsCsG,MAAMtG,SAA5C,CAArB,CAA4EsV,IAAI,EAAhF,CAAmF3F,KAAK,GAAInN,KAAJ,EAAxF,CAAmG8sB,OAAO,CAA1G,CAA4GC,SAAS,EAArH,CAAwHC,MAAM,KAA9H,CAAoIC,UAAU,KAA9I,CAAoJC,eAAe,EAAnK,CAAsKC,UAAU,KAAhL,CAAb,CAAqM,cAAavzB,QAAQ8qB,IAAR,CAAa3nB,KAAK4vB,OAAlB,CAA0BL,YAA1B,EAAwC;AACz9C,QAASC,iBAAT,EAA2B,CAAC,GAAGxvB,KAAK4vB,OAAL,CAAaS,aAAb,GAA6B,EAA7B,EAAiCrwB,KAAK4vB,OAAL,CAAaS,aAAb,GAA6B5vB,SAAjE,CAA2E,CAAC,GAAIgC,GAAE,CAAN,CAAQ,GAAIkU,cAAa,KAAjB,CAAuB,GAAG3W,KAAK4vB,OAAL,CAAaO,cAAb,CAA4BhnB,MAA5B,CAAmC,CAAtC,CAAwC,CAAC,MAAM1G,EAAEzC,KAAK4vB,OAAL,CAAaO,cAAb,CAA4BhnB,MAApC,CAA2C,CAAC,GAAGnJ,KAAK4vB,OAAL,CAAaO,cAAb,CAA4B1tB,CAA5B,EAA+B2D,IAA/B,GAAsCpG,KAAK4vB,OAAL,CAAaS,aAAtD,CAAoE,CAAC1Z,aAAa,IAAb,CAAmB,KAAK;AACzT,GAAGA,eAAe,KAAlB,CAAwB,CAAC3W,KAAK4vB,OAAL,CAAaO,cAAb,CAA4BnzB,IAA5B,CAAiC,CAACoJ,KAAKpG,KAAK4vB,OAAL,CAAaS,aAAnB,CAAiCC,SAAS,KAA1C,CAAjC,EAAoF,CAAC,CADyB,IACrB,CAACtwB,KAAK4vB,OAAL,CAAaO,cAAb,CAA4BnzB,IAA5B,CAAiC,CAACoJ,KAAKpG,KAAK4vB,OAAL,CAAaS,aAAnB,CAAiCC,SAAS,KAA1C,CAAjC,EAAoF,CAAC,MAAKV,OAAL,CAAaS,aAAb,CAA2B,EAA3B,CAA+B,SAASX,kBAAT,CAA2BtpB,IAA3B,CAAgC,CAAC,GAAIuS,cAAa3Y,KAAK4vB,OAAL,CAAaO,cAA9B,CAA6CnwB,KAAK4vB,OAAL,CAAaO,cAAb,CAA4B,EAA5B,CAA+B;AACpVtzB,QAAQkU,OAAR,CAAgB4H,YAAhB,CAA6B,SAAS7V,IAAT,CAAc,CAAC,GAAGA,KAAKsD,IAAL,GAAYA,IAAf,CAAoB,CAACpG,KAAK4vB,OAAL,CAAaO,cAAb,CAA4BnzB,IAA5B,CAAiC8F,IAAjC,EAAwC,CAAC,CAA1G,EAA6G;AAC7G,QAASiC,OAAT,EAAiB,CAAC;AAClB;AACA,GAAIwrB,MAAK,GAAIlB,MAAJ,CAAU,CAACQ,YAAY7vB,KAAK4vB,OAAL,CAAaC,WAA1B,CAAsC3lB,KAAK,CAAC4lB,OAAO9vB,KAAK4vB,OAAL,CAAa1lB,IAAb,CAAkB4lB,MAA1B,CAAiCrsB,KAAKzD,KAAK4vB,OAAL,CAAa1lB,IAAb,CAAkB4lB,MAAlB,GAA2B,KAA3B,CAAiC,EAAjC,CAAoC9vB,KAAK4vB,OAAL,CAAaI,QAAb,GAAwB,OAAxB,CAAgC,OAAhC,CAAwC,OAAlH,CAA0HriB,MAAM3N,KAAK4vB,OAAL,CAAa1lB,IAAb,CAAkByD,KAAlB,GAA0BlN,SAA1B,CAAoCA,SAApC,CAA8CT,KAAK4vB,OAAL,CAAa1lB,IAAb,CAAkByD,KAAlB,CAAwB9P,GAAtM,CAA0MkJ,MAAM/G,KAAK4vB,OAAL,CAAa1lB,IAAb,CAAkBnD,KAAlB,GAA0BtG,SAA1B,CAAoCA,SAApC,CAA8CT,KAAK4vB,OAAL,CAAa1lB,IAAb,CAAkBnD,KAAlB,CAAwBlJ,GAAtR,CAA3C,CAAsUkY,IAAI/V,KAAK4vB,OAAL,CAAaK,KAAb,GAAqB,IAArB,CAA0B,KAA1B,CAAgCjwB,KAAK4vB,OAAL,CAAa7Z,GAAvX,CAA2X3F,KAAKpQ,KAAK4vB,OAAL,CAAaxf,IAAb,GAAoB,EAApB,CAAuB,GAAInN,KAAJ,EAAvB,CAAkCjD,KAAK4vB,OAAL,CAAaxf,IAA/a,CAAob2f,OAAO/vB,KAAK4vB,OAAL,CAAa1lB,IAAb,CAAkB4lB,MAAlB,GAA2B,KAA3B,CAAiC9vB,KAAK4vB,OAAL,CAAaG,MAA9C,CAAqD/vB,KAAK4vB,OAAL,CAAaI,QAAb,GAAwB,OAAxB,CAAgChwB,KAAK4vB,OAAL,CAAa1lB,IAAb,CAAkByD,KAAlB,CAAwBrH,YAAxD,CAAqE,CAArjB,CAAujBkqB,cAAcxwB,KAAK4vB,OAAL,CAAa1lB,IAAb,CAAkB4lB,MAAlB,GAA2B,KAA3B,CAAiC,CAAjC,CAAmC9vB,KAAK4vB,OAAL,CAAaI,QAAb,GAAwB,OAAxB,CAAgChwB,KAAK4vB,OAAL,CAAa1lB,IAAb,CAAkByD,KAAlB,CAAwB5K,QAAxD,CAAiE,CAAzqB,CAA2qB0tB,YAAY,GAAIxtB,KAAJ,GAAW+S,MAAX,KAAsB,CAAtB,CAAwB,IAAxB,CAA6B,KAAptB,CAA0tBsa,SAAS,KAAnuB,CAAyuBN,SAAShwB,KAAK4vB,OAAL,CAAaI,QAAb,GAAwB,EAAxB,CAA2B,OAA3B,CAAmChwB,KAAK4vB,OAAL,CAAaI,QAAlyB,CAA2yBC,MAAMjwB,KAAK4vB,OAAL,CAAaK,KAA9zB,CAAo0BC,UAAUlwB,KAAK4vB,OAAL,CAAaM,SAA31B,CAAq2BC,eAAenwB,KAAK4vB,OAAL,CAAaO,cAAj4B,CAAV,CAAT,CAAq6B;AACr6BI,KAAKvpB,KAAL,CAAW,SAASC,QAAT,CAAkB,CAAC9H,UAAUyD,IAAV,CAAe,OAAf,EAAwBjD,oBAAoBuH,OAApB,CAA4B,QAA5B,CAAqC,kCAArC,EAA0E,CAAhI,CAAiI,SAASC,aAAT,CAAuB,CAACnH,KAAKoH,KAAL,CAAWD,cAAc3D,IAAd,CAAmB6D,OAA9B,CAAsCzD,QAAQC,GAAR,CAAYsD,aAAZ,EAA2BxH,oBAAoByH,KAApB,CAA0B,QAA1B,CAAmC,0BAAnC,EAAgE,CAA1R,EAA6R,SAASqoB,SAAT,CAAkB5H,IAAlB,CAAuB,CAAC7nB,KAAKsnB,UAAL,CAAgBE,WAAhB,EAA6B,CAA7B,CAAgC,SAASI,SAAT,CAAkBC,IAAlB,CAAuB,CAAC,GAAI9M,OAAM2V,QAAQ7I,IAAR,CAAV,CAAwB,GAAG9M,MAAM4V,KAAT,CAAe,CAAC3wB,KAAKsnB,UAAL,CAAgBE,WAAhB,EAA6B,CAA7B,CAAgC,CAAhD,IAAoD,CAAC7nB,oBAAoB6P,KAApB,CAA0B,YAA1B,CAAuCuL,MAAM1T,OAA7C,CAAqD,SAArD,EAAiE,CAAC,SAASxB,OAAT,EAAiB,CAAC7F,KAAK+E,MAAL,GAAcse,kBAAkBE,KAAlB,GAA2B,SAASpJ,OAAT,EAAiB,CAACkJ,kBAAkBG,OAAlB,GAA6B,SAASkN,QAAT,CAAiB7I,IAAjB,CAAsB,CAAC,OAAOA,IAAP,EAAa,IAAK,EAAL,CAAO,GAAG7nB,KAAK4vB,OAAL,CAAa1lB,IAAb,CAAkB4lB,MAAlB,GAA2B,IAA9B,CAAmC,CAAC,GAAIE,UAAShwB,KAAK4vB,OAAL,CAAaI,QAA1B,CAAmC,GAAGA,WAAW,OAAd,CAAsB,CAAChwB,KAAK4wB,SAAL,CAAexxB,WAAWiF,KAAX,CAAiB,CAACC,OAAO,CAAR,CAAjB,CAAf,CAA4CtE,KAAK6wB,QAAL,CAAc,OAAd,CAAsB7wB,KAAK4vB,OAAL,CAAaO,cAAb,CAA4B,EAA5B,CAA+BnwB,KAAK4vB,OAAL,CAAaM,SAAb,CAAuB,KAAvB,CAA8B,CAAtJ,IAA2J,IAAGF,WAAW,MAAd,CAAqB,CAAChwB,KAAK4wB,SAAL,CAAevxB,WAAWgF,KAAX,CAAiB,CAACC,OAAO,CAAR,CAAjB,CAAf,CAA4CtE,KAAK6wB,QAAL,CAAc,OAAd,CAAuB,CAAzF,IAA6F,CAAC,MAAM,CAACF,MAAM,KAAP,CAAatpB,QAAQ,yDAArB,CAAN,CAAuF,CAAC,CAAxZ,IAA4Z,CAAC;AAC9iCrH,KAAK6wB,QAAL,CAAc,EAAd,CAAiB7wB,KAAK4vB,OAAL,CAAa1lB,IAAb,CAAkByD,KAAlB,CAAwBlN,SAAxB,CAAkCT,KAAK4vB,OAAL,CAAa1lB,IAAb,CAAkBnD,KAAlB,CAAwBtG,SAAxB,CAAmC,OAAM,CAACkwB,MAAM,IAAP,CAAN,CADuiB,CAClhB,CAAC,CAAC,CARgU,IAQ5T,CAAC,UAAU,CAAC,aAAa9zB,QAAQC,MAAR,CAAe,OAAf,EAAwBgC,UAAxB,CAAmC,gCAAnC,CAAoEgyB,8BAApE,EAAoGA,+BAA+B9xB,OAA/B,CAAuC,CAAC,QAAD,CAAU,mBAAV,CAA8B,QAA9B,CAAuC,MAAvC,CAA8C,aAA9C,CAA4D,aAA5D,CAAvC,CAAkH,QAAS8xB,+BAAT,CAAwC7xB,MAAxC,CAA+CokB,iBAA/C,CAAiErW,MAAjE,CAAwExJ,IAAxE,CAA6E9D,WAA7E,CAAyF4vB,WAAzF,CAAqG,CAAC,GAAItvB,MAAK,IAAT,CAAc+wB,QAAQ,KAAtB,CAA4BC,SAAS7kB,KAAK8kB,GAAL,CAAS,GAAIhuB,KAAJ,CAASO,KAAK4M,IAAd,EAAoB8gB,OAApB,GAA8B,GAAIjuB,KAAJ,GAAWiuB,OAAX,EAAvC,CAArC,CAAkGlxB,KAAKma,MAAL,CAAYA,MAAZ,CAAmBna,KAAKoQ,IAAL,CAAU,GAAInN,KAAJ,CAASO,KAAK4M,IAAd,CAAV,CAA8BpQ,KAAK+V,GAAL,CAAS/V,KAAKoQ,IAAL,CAAU4F,MAAV,GAAmB,CAAnB,CAAqBhW,KAAKoQ,IAAL,CAAU4F,MAAV,GAAmB,CAAxC,CAA0C,CAAnD,CAAqDhW,KAAK+W,IAAL,CAAUvT,KAAKuT,IAAf,CAAoB/W,KAAKmxB,aAAL,CAAmBhlB,KAAKC,IAAL,CAAU4kB,UAAU,KAAK,IAAL,CAAU,EAApB,CAAV,CAAnB,CAAsDhxB,KAAKoxB,MAAL,CAAY,EAAZ,CAAepxB,KAAKsF,IAAL,CAAUA,IAAV,CAAetF,KAAKqxB,mBAAL,CAAyBA,mBAAzB,CAA6CrxB,KAAKsxB,UAAL,CAAgBA,UAAhB,CAA2BtxB,KAAK+B,OAAL,CAAaA,OAAb,CAAqB/B,KAAKuxB,gBAAL,CAAsBA,gBAAtB,CAAuCvxB,KAAKuR,KAAL,CAAW,GAAItO,KAAJ,EAAX,CAAsBjD,KAAKwxB,UAAL,CAAgBA,UAAhB,CAA2B5tB,QAAQC,GAAR,CAAY,QAAZ,CAAqBL,IAArB,CAA0B,QAA1B,CAAmCxD,KAAK+W,IAAxC,CAA6C/W,KAAK+V,GAAlD,CAAsD/V,KAAKoQ,IAA3D,EAAiE,QAAS9K,KAAT,EAAe,CAAC,GAAImsB,UAAS,GAAIxuB,KAAJ,CAASvD,YAAY6U,iBAAZ,CAA8BvU,KAAKoQ,IAAnC,CAAT,CAAb,CAAgEvT,QAAQkU,OAAR,CAAgBvN,KAAK4tB,MAArB,CAA4B,SAAS3zB,KAAT,CAAe,CAAC,GAAG,GAAIwF,KAAJ,CAASxF,MAAM2S,IAAf,EAAqBqhB,QAArB,GAAgCh0B,MAAMsY,GAAN,CAAUpP,SAAV,CAAoB,CAApB,CAAsB,CAAtB,IAA2B3G,KAAK+W,IAAL,CAAU/W,KAAK+V,GAAf,EAAoB3P,IAA/C,EAAqD3I,MAAMsY,GAAN,GAAY,KAAjG,CAAH,CAA2G,CAAC;AACptC,GAAG,CAACtY,MAAMwyB,KAAV,CAAgB,CAAC;AACjB;AACA,GAAGxyB,MAAM+yB,aAAN,CAAoBrkB,KAAKulB,KAAL,CAAW1xB,KAAKmxB,aAAL,CAAmB,CAA9B,CAApB,EAAsD1zB,MAAMsyB,MAA5D,EAAoEtyB,MAAMsyB,MAAN,GAAe,CAAtF,CAAwF,CAAC/vB,KAAKoxB,MAAL,CAAYp0B,IAAZ,CAAiBS,KAAjB,EAAyB,CAAC,CAFnH,IAEwH,IAAGA,MAAMwyB,KAAT,CAAe,CAAC;AACxI;AACA,GAAGxyB,MAAM+yB,aAAN,CAAoBxwB,KAAKmxB,aAAzB,EAAwC1zB,MAAMsyB,MAA9C,EAAsDtyB,MAAMsyB,MAAN,GAAe,CAAxE,CAA0E,CAAC/vB,KAAKoxB,MAAL,CAAYp0B,IAAZ,CAAiBS,KAAjB,EAAyB,CAAC,CAAC,CAAC,CALq9B,EAKn9BuC,KAAKoxB,MAAL,CAAYpM,IAAZ,CAAiB,SAASC,CAAT,CAAWC,CAAX,CAAa,CAAC,GAAIyM,OAAM1M,EAAE7U,IAAZ,CAAiBwhB,MAAM1M,EAAE9U,IAAzB,CAA8B,MAAOuhB,OAAMC,KAAN,CAAY,CAAZ,CAAcD,MAAMC,KAAN,CAAY,CAAC,CAAb,CAAe,CAApC,CAAuC,CAApG,EAAuG,MAAKtsB,IAAL,GAAY,QAASgsB,WAAT,CAAoBf,IAApB,CAAyB,CAACjB,YAAYgC,UAAZ,CAAuBf,IAAvB,CAA4BvwB,KAAKoxB,MAAjC,CAAwC,IAAxC,EAA+C;AACrS,QAASI,WAAT,CAAoBjB,IAApB,CAAyB,CAACjB,YAAYkC,UAAZ,CAAuBjB,IAAvB,EAA8B;AACxD,QAASc,oBAAT,CAA6Bd,IAA7B,CAAkCsB,gBAAlC,CAAmD,CAACvC,YAAY+B,mBAAZ,CAAgCd,IAAhC,CAAqCsB,gBAArC,EAAwD;AAC5G,QAAS9vB,QAAT,CAAiBwuB,IAAjB,CAAsB,CAACjB,YAAYvtB,OAAZ,CAAoBwuB,IAApB,EAA0B5sB,IAA1B,CAA+B,SAASD,MAAT,CAAgB,CAAC;AACvEqtB,QAAQrtB,OAAOqtB,OAAf,CAAwB,CADD,EACI;AAC3B,QAASQ,iBAAT,CAA0BhB,IAA1B,CAA+Blf,KAA/B,CAAqC,CAACie,YAAYiC,gBAAZ,CAA6BhB,IAA7B,CAAkClf,KAAlC,EAAyC1N,IAAzC,CAA8C,SAASD,MAAT,CAAgB,CAAC;AACrGqtB,QAAQrtB,OAAOqtB,OAAf,CAAwB,CADc,EACX,SAAS5W,OAAT,EAAiB,CAACkJ,kBAAkBE,KAAlB,CAAwBwN,OAAxB,EAAkC,CAAC,CAAC,CAXgC,IAW5B,CAAC,UAAU,CAAC,aAAa;AAC9Gl0B,QAAQC,MAAR,CAAe,OAAf,EAAwBgC,UAAxB,CAAmC,iBAAnC,CAAqDgzB,eAArD,EAAsEA,gBAAgB9yB,OAAhB,CAAwB,CAAC,QAAD,CAAU,UAAV,CAAqB,cAArB,CAAoC,WAApC,CAAgD,gBAAhD,CAAiE,OAAjE,CAAyE,aAAzE,CAAuF,qBAAvF,CAA6G,aAA7G,CAA2H,gBAA3H,CAA4I,WAA5I,CAAwJ,QAAxJ,CAAxB,CAA0L,QAAS8yB,gBAAT,CAAyB7yB,MAAzB,CAAgCyI,QAAhC,CAAyCxI,YAAzC,CAAsDC,SAAtD,CAAgE5B,cAAhE,CAA+E8xB,KAA/E,CAAqF3vB,WAArF,CAAiGC,mBAAjG,CAAqH2vB,WAArH,CAAiIzvB,cAAjI,CAAgJE,SAAhJ,CAA0JiN,MAA1J,CAAiK,CAAC,GAAIhN,MAAK,IAAT,CAAcuR,MAAM,GAAItO,KAAJ,EAApB,CAA+B8S,IAAIxE,MAAMyE,MAAN,EAAnC,CAAkDhW,KAAKC,cAAL,CAAoB1C,cAApB,CAAmCyC,KAAKqB,YAAL,CAAkB3B,YAAY4B,eAAZ,EAAlB,CAAgDtB,KAAK+xB,UAAL,CAAgBA,UAAhB,CAA2B/xB,KAAKgyB,WAAL,CAAiB,CAACC,aAAa,KAAd,CAAoBC,WAAW,IAA/B,CAAoCC,QAAQ,GAAIlvB,KAAJ,CAAS,IAAT,CAAc,CAAd,CAAgB,EAAhB,CAA5C,CAAgEmvB,QAAQ,GAAInvB,KAAJ,EAAxE,CAAmFovB,YAAY,CAA/F,CAAjB,CAAmHryB,KAAKE,YAAL,CAAkB,CAAC8K,KAAK,MAAN,CAAa5K,aAAa,CAA1B,CAA4BE,SAAS,EAArC,CAAwCC,YAAY,IAApD,CAAyDO,OAAO,CAAC+uB,YAAY,EAAb,CAAgB9Z,IAAI,EAApB,CAAhE,CAAwFwI,cAAc,KAAtG,CAAlB,CAA+Hve,KAAKqxB,mBAAL,CAAyBA,mBAAzB,CAA6CrxB,KAAK2B,UAAL,CAAgB,CAACC,YAAY,CAAb,CAAeC,SAAS,EAAxB,CAAhB,CAA4C7B,KAAKsyB,YAAL,CAAkBA,YAAlB,CAA+BtyB,KAAKsxB,UAAL,CAAgBA,UAAhB,CAA2BtxB,KAAKuyB,eAAL,CAAqBA,eAArB,CAAqCvyB,KAAKwyB,SAAL,CAAeA,SAAf,CAAyBxyB,KAAK+B,OAAL,CAAaA,OAAb,CAAqB/B,KAAKuxB,gBAAL,CAAsBA,gBAAtB,CAAuCvxB,KAAKwxB,UAAL,CAAgBA,UAAhB,CAA2BxxB,KAAKkkB,aAAL,CAAmBA,aAAnB,CAAiClkB,KAAKoC,eAAL,CAAqB,MAArB,CAA4B,QAASowB,UAAT,CAAmBC,OAAnB,CAA2B,CAACzyB,KAAKE,YAAL,CAAkBY,MAAlB,CAAyBiV,GAAzB,CAA6B0c,OAA7B,CAAsC,SAASvO,cAAT,EAAwB,CAAC,MAAOoL,aAAYoD,gBAAZ,EAAP,CAAuC,SAASX,WAAT,EAAqB,CAAC,GAAI5uB,eAAcpD,UAAUqD,IAAV,CAAe,CAACC,UAAU,IAAX,CAAgBxE,YAAY,mDAA5B,CAAgFC,WAAW,oCAA3F,CAAgIwE,KAAK,IAArI,CAA0IC,QAAQ,CAACC,KAAK,QAASA,KAAT,EAAe,CAAC,MAAM,CAACnC,aAAarB,KAAKqB,YAAnB,CAAN,CAAwC,CAA9D,CAAlJ,CAAf,EAAmOqC,MAAnO,CAA0OC,IAA1O,CAA+O,SAASD,MAAT,CAAgB,CAACE,QAAQC,GAAR,CAAY,sBAAZ,CAAmCH,MAAnC,EAA2CwB,OAAQ,CAAnT,CAAlB,CAAwU;AACznD,QAASosB,WAAT,CAAoBf,IAApB,CAAyB,CAACjB,YAAYgC,UAAZ,CAAuBf,IAAvB,CAA4BvwB,KAAK2yB,KAAjC,CAAuC,IAAvC,EAA8C;AACxE,QAASnB,WAAT,CAAoBjB,IAApB,CAAyB,CAACjB,YAAYkC,UAAZ,CAAuBjB,IAAvB,EAA8B;AACxD,QAASc,oBAAT,CAA6Bd,IAA7B,CAAkCsB,gBAAlC,CAAmD,CAACvC,YAAY+B,mBAAZ,CAAgCd,IAAhC,CAAqCsB,gBAArC,EAAwD;AAC5G,QAAS9vB,QAAT,CAAiBwuB,IAAjB,CAAsB,CAACjB,YAAYvtB,OAAZ,CAAoBwuB,IAApB,EAA0B5sB,IAA1B,CAA+B,SAASD,MAAT,CAAgB,CAAC;AACvE,GAAGA,OAAOqtB,OAAV,CAAkB7rB,OAAQ,CADH,EACM;AAC7B,QAASqsB,iBAAT,CAA0BhB,IAA1B,CAA+Blf,KAA/B,CAAqC,CAACie,YAAYiC,gBAAZ,CAA6BhB,IAA7B,CAAkClf,KAAlC,EAAyC1N,IAAzC,CAA8C,SAASD,MAAT,CAAgB,CAAC;AACrG,GAAGA,OAAOqtB,OAAV,CAAkB7rB,OAAQ,CADY,EACT;AAC7B,QAASqtB,gBAAT,CAAyBxc,GAAzB,CAA6B,CAAC,GAAI1E,OAAM0E,MAAM,CAAN,CAAQ,CAAR,CAAUA,GAApB,CAAwB;AACtD/V,KAAKE,YAAL,CAAkBY,MAAlB,CAAyBiV,GAAzB,CAA6B/V,KAAKqB,YAAL,CAAkB0V,IAAlB,CAAuB1F,KAAvB,EAA8B1T,IAA3D,CAAgEiG,QAAQC,GAAR,CAAYkS,GAAZ,CAAgB/V,KAAKE,YAAL,CAAkBY,MAAlB,CAAyBiV,GAAzC,EAA+C,MAAKwc,eAAL,CAAqBxc,GAArB,EAA0B;AACzI,QAAS6c,YAAT,EAAsB,CAAC,GAAG7c,MAAM,CAAT,CAAW,CAACnS,QAAQC,GAAR,CAAY,QAAZ,CAAqBkS,GAArB,EAA0BlZ,QAAQkU,OAAR,CAAgB/Q,KAAK2yB,KAArB,CAA2B,SAASpC,IAAT,CAAc,CAAC;AACvG,GAAGA,KAAKE,WAAL,GAAmB,KAAtB,CAA4B,CAAC7sB,QAAQC,GAAR,CAAY,aAAZ,CAA0B0sB,KAAKV,WAA/B,EAA4C,GAAIpsB,MAAK8sB,KAAKrmB,IAAL,CAAUzG,IAAnB,CAAwB,GAAG8sB,KAAKrmB,IAAL,CAAU4lB,MAAV,GAAmB,KAAnB,EAA0BrsB,OAAO,OAApC,CAA4C,CAAC;AAC9I,GAAG8sB,KAAKC,aAAL,GAAqBD,KAAKR,MAA7B,CAAoC,CAACnsB,QAAQC,GAAR,CAAY,cAAZ,CAA2B0sB,KAAKV,WAAhC,EAA6CU,KAAKD,QAAL,CAAc,KAAd,CAAoBC,KAAKE,WAAL,CAAiB,IAAjB,CAAsBnB,YAAYkC,UAAZ,CAAuBjB,IAAvB,EAA8B,CAA1J,IAA+J,IAAGA,KAAKC,aAAL,GAAqBD,KAAKR,MAA7B,CAAoC,CAACnsB,QAAQC,GAAR,CAAY,mBAAZ,CAAgC0sB,KAAKV,WAArC,EAAkDP,YAAYgC,UAAZ,CAAuBf,IAAvB,CAA4BvwB,KAAK2yB,KAAjC,EAAyC,CAAC,CAD/L,IACoM,IAAGpC,KAAKrmB,IAAL,CAAUzG,IAAV,GAAiB,OAApB,CAA4B,CAACG,QAAQC,GAAR,CAAY,QAAZ,EAAsB,GAAIgvB,OAAM,CAACC,OAAO,UAAR,CAAmBC,IAAI,cAAvB,CAAV,CAAiD,GAAGxC,KAAKrmB,IAAL,CAAUzG,IAAV,EAAgBovB,MAAMC,MAAtB,IAAgCvC,KAAKrmB,IAAL,CAAUzG,IAAV,EAAgBovB,MAAME,GAAtB,CAAnC,CAA8D,CAACnvB,QAAQC,GAAR,CAAY,qBAAZ,CAAkC0sB,KAAKV,WAAvC,EAAoDU,KAAKD,QAAL,CAAc,KAAd,CAAoBC,KAAKE,WAAL,CAAiB,IAAjB,CAAsBnB,YAAYkC,UAAZ,CAAuBjB,IAAvB,EAA8B,CAA3L,IAAgM,IAAGA,KAAKrmB,IAAL,CAAUzG,IAAV,EAAgBovB,MAAMC,MAAtB,IAAgCvC,KAAKrmB,IAAL,CAAUzG,IAAV,EAAgBovB,MAAME,GAAtB,CAAnC,CAA8D,CAACnvB,QAAQC,GAAR,CAAY,0BAAZ,CAAuC0sB,KAAKV,WAA5C,EAAyDP,YAAYgC,UAAZ,CAAuBf,IAAvB,CAA4BvwB,KAAK2yB,KAAjC,EAAyC,CAAC,CAAC,CAAC,CAFhrB,EAEmrB,CAFztB,IAE6tB,CAAC/uB,QAAQC,GAAR,CAAY,YAAZ,CAAyBkS,GAAzB,EAA8BlZ,QAAQkU,OAAR,CAAgB/Q,KAAK2yB,KAArB,CAA2B,SAASpC,IAAT,CAAc,CAAC,GAAIyC,QAAOzC,KAAKE,WAAL,GAAmB,KAAnB,CAAyB,KAAzB,CAA+B,IAA1C,CAA+CF,KAAKE,WAAL,CAAiB,KAAjB,CAAuB;AACn4B,GAAGF,KAAKN,KAAL,GAAa,IAAhB,CAAqB,CAACrsB,QAAQC,GAAR,CAAY,OAAZ,CAAoB0sB,KAAKV,WAAzB,EAAsC;AAC5D,GAAGU,KAAKC,aAAL,GAAqBD,KAAKR,MAA7B,CAAoC,CAACnsB,QAAQC,GAAR,CAAY,cAAZ,CAA2B0sB,KAAKV,WAAhC,EAA6C,GAAIkB,SAAQxf,MAAME,WAAN,GAAoBlE,KAApB,CAA0B,CAA1B,CAA4B,EAA5B,CAAZ,CAA4C;AAC9H,GAAGgjB,KAAK0C,YAAL,CAAkB1lB,KAAlB,CAAwB,CAAxB,CAA0B,EAA1B,IAAgCwjB,OAAnC,CAA2C,CAACntB,QAAQC,GAAR,CAAY,uBAAZ,CAAoC0sB,KAAKV,WAAzC,EAAsDU,KAAKD,QAAL,CAAc,KAAd,CAAoBC,KAAK0C,YAAL,CAAkBlC,OAAlB,CAA0BzB,YAAYkC,UAAZ,CAAuBjB,IAAvB,EAA8B,CAAC,CAD/K,IACoL,IAAGA,KAAKC,aAAL,GAAqBD,KAAKR,MAA7B,CAAoC,CAACnsB,QAAQC,GAAR,CAAY,mBAAZ,CAAgC0sB,KAAKV,WAArC,EAAkDP,YAAYgC,UAAZ,CAAuBf,IAAvB,CAA4BvwB,KAAK2yB,KAAjC,EAAyC,CAAC,CAFrT,IAE0T,IAAGpC,KAAKN,KAAL,GAAa,KAAb,EAAoB+C,MAAvB,CAA8B,CAACpvB,QAAQC,GAAR,CAAY,iBAAZ,CAA8B0sB,KAAKV,WAAnC,EAAgDP,YAAYkC,UAAZ,CAAuBjB,IAAvB,EAA8B,CAAC,CAH2W,EAGxW,QAAQ;AACnb,QAASrrB,KAAT,CAAc6V,KAAd,CAAoB,CAACrT,SAAS,UAAU,CAAC7H,eAAeuE,OAAf,CAAuB,OAAvB,CAA+BirB,MAAMhrB,KAAN,GAAcJ,QAAd,CAAuBN,IAAvB,CAA4B,SAASD,MAAT,CAAgB,CAACE,QAAQC,GAAR,CAAY,WAAZ,CAAwBH,MAAxB,EAAgC1D,KAAK2yB,KAAL,CAAWjvB,MAAX,CAAkB,GAAGqX,QAAQ,IAAX,CAAgB6X,cAAe,CAA9H,CAA/B,EAAiK,CAArL,CAAsL,GAAtL,EAA4L,MAAK,IAAL,EAAW,QAASN,aAAT,EAAuB,CAACptB,OAAOvF,oBAAoBkD,OAApB,CAA4B,YAA5B,CAAyC,sBAAzC,EAAkE,CAAC,CAAC,CAjB1O,IAiB8O,CAAC,UAAU,CAAC,aAAahG,QAAQC,MAAR,CAAe,OAAf,EAAwBgC,UAAxB,CAAmC,2BAAnC,CAA+Do0B,yBAA/D,EAA0FA,0BAA0Bl0B,OAA1B,CAAkC,CAAC,QAAD,CAAU,mBAAV,CAA8B,MAA9B,CAAqC,iBAArC,CAAlC,CAA0F,QAASk0B,0BAAT,CAAmCj0B,MAAnC,CAA0CokB,iBAA1C,CAA4D7f,IAA5D,CAAiE8b,eAAjE,CAAiF,CAAC,GAAItf,MAAK,IAAT,CAAcA,KAAKma,MAAL,CAAYA,MAAZ,CAAmBna,KAAKmzB,gBAAL,CAAsB3vB,KAAKV,IAAL,CAAUoH,IAAV,CAAeyD,KAAf,CAAqB5K,QAArB,CAA8B,CAApD,CAAsD/C,KAAKozB,aAAL,CAAmB9T,gBAAgBhS,GAAhB,CAAoBtN,KAAKmzB,gBAAzB,CAA0C,CAA1C,CAAnB,CAAgEnzB,KAAKmO,aAAL,CAAmB,CAAnB,CAAqBnO,KAAK8C,IAAL,CAAUU,KAAKV,IAAf,CAAoB9C,KAAKqzB,UAAL,CAAgBrzB,KAAKmzB,gBAAL,GAAwBnzB,KAAK8C,IAAL,CAAUoH,IAAV,CAAeyD,KAAf,CAAqBrH,YAA7C,EAA2DtG,KAAK8C,IAAL,CAAUoH,IAAV,CAAeyD,KAAf,CAAqBrH,YAArB,GAAoC,CAA/G,CAAiHtG,KAAKszB,WAAL,CAAiB,EAAjB,CAAoBtzB,KAAKsnB,UAAL,CAAgB,CAACE,YAAY,CAAb,CAAeC,UAAU,CAAzB,CAAhB,CAA4CznB,KAAK6F,MAAL,CAAYA,MAAZ,CAAmB,QAASA,OAAT,EAAiB,CAACwd,kBAAkBE,KAAlB,CAAwB,CAACgN,KAAKvwB,KAAK8C,IAAX,CAAgBqL,cAAcnO,KAAKmO,aAAnC,CAAxB,EAA4E,SAASgM,OAAT,EAAiB,CAACkJ,kBAAkBG,OAAlB,CAA0B,QAA1B,EAAqC,CAAC,CAAC,CAA1zB,IAA8zB,CAAC,UAAU,CAAC,aAAa3mB,QAAQC,MAAR,CAAe,OAAf,EAAwBgC,UAAxB,CAAmC,2BAAnC,CAA+Dy0B,yBAA/D,EAA0FA,0BAA0Bv0B,OAA1B,CAAkC,CAAC,QAAD,CAAU,mBAAV,CAA8B,MAA9B,CAAlC,CAAwE,QAASu0B,0BAAT,CAAmCt0B,MAAnC,CAA0CokB,iBAA1C,CAA4D7f,IAA5D,CAAiE,CAAC,GAAIxD,MAAK,IAAT,CAAcA,KAAKma,MAAL,CAAYA,MAAZ,CAAmBna,KAAK8C,IAAL,CAAUU,KAAKV,IAAf,CAAoB9C,KAAKsnB,UAAL,CAAgB,CAACE,YAAY,CAAb,CAAeC,UAAU,CAAzB,CAAhB,CAA4CznB,KAAK6F,MAAL,CAAYA,MAAZ,CAAmBjC,QAAQC,GAAR,CAAY,4BAAZ,CAAyC7D,KAAK8C,IAA9C,EAAoD,QAAS+C,OAAT,EAAiB,CAACwd,kBAAkBE,KAAlB,CAAwBvjB,KAAK8C,IAA7B,EAAoC,SAASqX,OAAT,EAAiB,CAACkJ,kBAAkBG,OAAlB,CAA0B,QAA1B,EAAqC,CAAC,CAAC,CAAphB,IAAwhB,CAAC,UAAU,CAAC,aAAa3mB,QAAQC,MAAR,CAAe,OAAf,EAAwB8M,SAAxB,CAAkC,cAAlC,CAAiD4pB,YAAjD,EAA+D,QAASA,aAAT,CAAsB9W,SAAtB,CAAgCld,OAAhC,CAAwC,CAAC,MAAM,CAACsK,SAAS,GAAV,CAAcI,KAAK,QAASA,KAAT,CAAcC,KAAd,CAAoBnM,OAApB,CAA4BoM,KAA5B,CAAkC,CAACpM,QAAQwF,IAAR,CAAa,aAAb,CAA2B,IAA3B,EAAiC;;eAEx2D3G,QAAQmB,OAAR,CAAgB0e,UAAU,CAAV,EAAaC,IAA7B,EAAmCC,EAAnC,CAAsC,OAAtC,CAA8C,SAAShS,CAAT,CAAW,CAAC,GAAI6oB,aAAY52B,QAAQmB,OAAR,CAAgB4M,EAAEkS,MAAlB,EAA0BC,aAA1B,CAAwC,aAAxC,CAAhB,CAAuE2W,IAAI72B,QAAQmB,OAAR,CAAgB4M,EAAEkS,MAAlB,EAA0B,CAA1B,EAA6B6W,OAAxG,CAAgHC,gBAAgBF,MAAM,GAAN,EAAWA,MAAM,GAAjJ,CAAqJ;AAC9N,GAAG,CAACD,WAAD,EAAc,CAACG,eAAlB,CAAkC,CAACzpB,MAAMM,MAAN,CAAa,UAAU,CAACN,MAAM0B,eAAN,GAAyB,CAAjD,EAAoD,CAAC,CADzE,EAC4E,CAHqsD,CAAN,CAG5rD,CAAC,CAH0jD,IAGtjD,CAAC,UAAU,CAAC,aAAahP,QAAQC,MAAR,CAAe,OAAf,EAAwB8M,SAAxB,CAAkC,kBAAlC,CAAqDiqB,gBAArD,EAAuEA,iBAAiB70B,OAAjB,CAAyB,CAAC,WAAD,CAAa,QAAb,CAAsB,aAAtB,CAAzB,CAA8D,QAAS60B,iBAAT,CAA0B9zB,SAA1B,CAAoCiN,MAApC,CAA2CtN,WAA3C,CAAuD,CAAC,QAASo0B,YAAT,CAAqB1jB,IAArB,CAA0B,CAAC,MAAOA,MAAK2F,GAAL,CAAS,CAAT,EAAYge,IAAZ,CAAiB,EAAjB,EAAqBC,MAArB,CAA4B,CAA5B,EAA+BC,MAA/B,CAAsC,CAAtC,EAAyCC,WAAzC,CAAqD,CAArD,CAAP,CAAgE,SAASC,YAAT,CAAqBhqB,KAArB,CAA2BjE,KAA3B,CAAiC2G,KAAjC,CAAuC,CAAC1C,MAAMkD,KAAN,CAAY,EAAZ,CAAe,GAAI+mB,MAAK,KAAT,CAAehkB,KAAKpD,OAAO9G,KAAP,CAApB,CAAkCmuB,WAAWjkB,KAAKvD,KAAL,EAA7C,CAA0DoE,MAAM,CAAhE,CAAkE,MAAM,CAACmjB,IAAP,CAAY,CAAC,GAAIrd,MAAKud,WAAWtnB,OAAOoD,IAAP,CAAX,CAAwBvD,KAAxB,CAAT,CAAwC,GAAGnN,YAAYqJ,YAAZ,CAAyBgO,IAAzB,CAA8B,gBAA9B,CAA+C,IAA/C,EAAqD,CAAC,CAAzD,CAA2D,CAAC5M,MAAMkD,KAAN,CAAYrQ,IAAZ,CAAiB,CAAC+Z,KAAKA,IAAN,CAAjB,EAA+B,MAAKzE,GAAL,CAAS,CAAT,CAAW,GAAX,EAAgB8hB,KAAKnjB,QAAQ,CAAR,EAAWojB,aAAajkB,KAAKvD,KAAL,EAA7B,CAA0CwnB,WAAWjkB,KAAKvD,KAAL,EAAX,CAAyB,CAAC,SAASynB,WAAT,CAAoBlkB,IAApB,CAAyBvD,KAAzB,CAA+B,CAAC,GAAIkK,MAAK,EAAT,CAAY,IAAI,GAAItU,GAAE,CAAV,CAAYA,EAAE,CAAd,CAAgBA,GAAhB,CAAoB,CAACsU,KAAK/Z,IAAL,CAAU,CAACW,KAAKyS,KAAKuB,MAAL,CAAY,IAAZ,EAAkBhL,SAAlB,CAA4B,CAA5B,CAA8B,CAA9B,CAAN,CAAuCwB,OAAOiI,KAAKA,IAAL,EAA9C,CAA0DmkB,eAAenkB,KAAKvD,KAAL,KAAeA,MAAMA,KAAN,EAAxF,CAAsG2nB,QAAQpkB,KAAKqkB,MAAL,CAAY,GAAIxxB,KAAJ,EAAZ,CAAuB,KAAvB,CAA9G,CAA4ImN,KAAKA,IAAjJ,CAAV,EAAkKA,KAAKpD,OAAOoD,IAAP,CAAL,CAAkBA,KAAKkC,GAAL,CAAS,CAAT,CAAW,GAAX,EAAiB,OAAOyE,KAAP,CAAa,SAAS2d,eAAT,CAAwBtD,MAAxB,CAA+BhhB,IAA/B,CAAoC2G,IAApC,CAAyC,CAAC,GAAI5T,eAAcpD,UAAUqD,IAAV,CAAe,CAACC,UAAU,IAAX,CAAgBxE,YAAY,8DAA5B,CAA2FC,WAAW,wCAAtG,CAA+IwE,KAAK,IAApJ,CAAyJC,QAAQ,CAACC,KAAK,QAASA,KAAT,EAAe,CAAC,MAAM,CAAC4tB,OAAOA,MAAR,CAAehhB,KAAKA,IAApB,CAAyB2G,KAAKA,IAA9B,CAAN,CAA2C,CAAjE,CAAjK,CAAf,EAAqPrT,MAArP,CAA4PC,IAA5P,CAAiQ,SAASD,MAAT,CAAgB,CAACE,QAAQC,GAAR,CAAY,4BAAZ,CAAyCH,MAAzC,EAAkD,CAApU,CAAlB,CAAyV,OAAM,CAACoG,SAAS,GAAV,CAAcjL,YAAY,gDAA1B,CAA2EsL,MAAM,CAACinB,OAAO,GAAR,CAAjF,CAA8FlnB,KAAK,QAASA,KAAT,CAAcC,KAAd,CAAoB,CAACA,MAAM4M,IAAN,CAAW,CAAC,CAAC3Q,KAAK,KAAN,CAAD,CAAc,CAACA,KAAK,KAAN,CAAd,CAA2B,CAACA,KAAK,KAAN,CAA3B,CAAwC,CAACA,KAAK,KAAN,CAAxC,CAAqD,CAACA,KAAK,KAAN,CAArD,CAAkE,CAACA,KAAK,KAAN,CAAlE,CAA+E,CAACA,KAAK,KAAN,CAA/E,CAAX,CAAwG+D,MAAMwqB,QAAN,CAAe3nB,OAAO,GAAI/J,KAAJ,EAAP,CAAf,CAAkCkH,MAAM0C,KAAN,CAAYG,OAAO7C,MAAMwqB,QAAb,CAAZ,CAAmC,GAAIzuB,OAAM8G,OAAO8mB,YAAYj3B,QAAQ8qB,IAAR,CAAaxd,MAAMwqB,QAAnB,CAAZ,CAAP,CAAV,CAA4DzuB,MAAMkK,IAAN,CAAW,CAAC,CAAZ,EAAe0jB,YAAY5tB,MAAM6P,GAAN,CAAU,CAAV,CAAZ,EAA0Boe,YAAYhqB,KAAZ,CAAkBjE,KAAlB,CAAwBiE,MAAM0C,KAA9B,EAAqC1C,MAAMqjB,MAAN,CAAa,SAASzX,GAAT,CAAa,CAAC,GAAG5L,MAAMwqB,QAAN,GAAiB5e,IAAI3F,IAAxB,CAA6B,CAACskB,eAAevqB,MAAMinB,MAArB,CAA4Brb,IAAI3F,IAAhC,CAAqCjG,MAAM4M,IAA3C,EAAkD,OAAM4d,QAAN,CAAe5e,IAAI3F,IAAnB,CAAyB,CAApI,CAAqIjG,MAAMoC,IAAN,CAAW,UAAU,CAAC,GAAIA,MAAKS,OAAO7C,MAAM0C,KAAb,CAAT,CAA6BinB,YAAYvnB,KAAKM,KAAL,CAAWN,KAAKM,KAAL,GAAa,CAAxB,EAA2BuD,IAA3B,CAAgC,CAAhC,CAAZ,EAAgDjG,MAAM0C,KAAN,CAAYA,KAAZ,CAAkB1C,MAAM0C,KAAN,CAAYA,KAAZ,GAAoB,CAAtC,EAAyCsnB,YAAYhqB,KAAZ,CAAkBoC,IAAlB,CAAuBpC,MAAM0C,KAA7B,EAAqC,CAAjL,CAAkL1C,MAAMyqB,QAAN,CAAe,UAAU,CAAC,GAAIA,UAAS5nB,OAAO7C,MAAM0C,KAAb,CAAb,CAAiCinB,YAAYc,SAAS/nB,KAAT,CAAe+nB,SAAS/nB,KAAT,GAAiB,CAAhC,EAAmCuD,IAAnC,CAAwC,CAAxC,CAAZ,EAAwDjG,MAAM0C,KAAN,CAAYA,KAAZ,CAAkB1C,MAAM0C,KAAN,CAAYA,KAAZ,GAAoB,CAAtC,EAAyCsnB,YAAYhqB,KAAZ,CAAkByqB,QAAlB,CAA2BzqB,MAAM0C,KAAjC,EAAyC,CAArM,CAAuM,CAA76B,CAAN,CAAs7B,CAAC,CAA3tE,IAA+tE,CAAC,UAAU,CAAC,aAAahQ,QAAQC,MAAR,CAAe,OAAf,EAAwB8M,SAAxB,CAAkC,aAAlC,CAAgDirB,WAAhD,EAA6D,QAASA,YAAT,EAAsB,CAAC,MAAM,CAAC1qB,MAAM,IAAP,CAAYD,KAAK,QAASA,KAAT,CAAcC,KAAd,CAAoB4B,EAApB,CAAuB+oB,GAAvB,CAA2B,CAAClxB,QAAQC,GAAR,CAAY,UAAZ,CAAuBsG,KAAvB,EAA8BA,MAAM2qB,IAAIC,MAAV,EAAkBl4B,QAAQ8qB,IAAR,CAAaxd,MAAM2qB,IAAIC,MAAV,CAAb,CAAlB,CAAmD,CAA9H,CAAN,CAAuI,CAAC,CAArP,IAAyP,CAAC,UAAU,CAAC,aAAal4B,QAAQC,MAAR,CAAe,OAAf,EAAwB8M,SAAxB,CAAkC,eAAlC,CAAkDorB,aAAlD,EAAiE,QAASA,cAAT,EAAwB,CAAC,MAAM,CAAClrB,SAAS,GAAV,CAAcC,QAAQ,IAAtB,CAA2BlL,YAAY,wCAAvC,CAAN,CAAwF,CAAC,CAA5M,IAAgN,CAAC,UAAU,CAAC,aAAahC,QAAQC,MAAR,CAAe,OAAf,EAAwB8M,SAAxB,CAAkC,WAAlC,CAA8CqrB,SAA9C,EAAyD,QAASA,UAAT,EAAoB,CAAC,MAAM,CAACnrB,SAAS,GAAV,CAAcI,KAAK,QAASA,KAAT,CAAcC,KAAd,CAAoBnM,OAApB,CAA4BoM,KAA5B,CAAkC,CAACpM,QAAQwM,IAAR,CAAa,OAAb,CAAqB,SAAS/M,KAAT,CAAe,CAAC,GAAIy3B,QAAOj3B,SAASse,cAAT,CAAwBnS,MAAM6qB,SAA9B,CAAX,CAAoDC,OAAOzL,KAAP,GAAeyL,OAAO9X,KAAP,GAAgB,CAAxH,EAA2H,CAAjL,CAAN,CAA0L,CAAC,CAAlS,IAAsS,CAAC,UAAU,CAAC,aAAavgB,QAAQC,MAAR,CAAe,OAAf,EAAwBoR,OAAxB,CAAgC,aAAhC,CAA8CohB,WAA9C,EAA2DA,YAAYtwB,OAAZ,CAAoB,CAAC,IAAD,CAAM,YAAN,CAAmB,YAAnB,CAAgC,cAAhC,CAA+C,cAA/C,CAA8D,qBAA9D,CAAoF,aAApF,CAAkG,WAAlG,CAApB,CAAmI,QAASswB,YAAT,CAAqBpb,EAArB,CAAwB9U,UAAxB,CAAmCC,UAAnC,CAA8CO,YAA9C,CAA2D+lB,YAA3D,CAAwEhmB,mBAAxE,CAA4FD,WAA5F,CAAwGK,SAAxG,CAAkH,CAAC,GAAIhE,KAAI,CAAC22B,iBAAiBA,gBAAlB,CAAmCrB,oBAAoBA,mBAAvD,CAA2EC,WAAWA,UAAtF,CAAiG6D,gBAAgBA,eAAjH,CAAiIC,gBAAgBA,eAAjJ,CAAiK5D,WAAWA,UAA5K,CAAuLzvB,QAAQA,OAA/L,CAAuMwvB,iBAAiBA,gBAAxN,CAAR,CAAkP,MAAOx1B,IAAP,CAAW,QAAS22B,iBAAT,EAA2B,CAAC,GAAI/N,SAAQ,GAAI1hB,KAAJ,EAAZ,CAAuB8S,IAAI4O,QAAQ3O,MAAR,EAA3B,CAA4C5I,KAAKuX,QAAQ1O,OAAR,GAAkBF,GAAlB,EAAuBA,MAAM,CAAN,CAAQ,CAAC,CAAT,CAAW,CAAlC,CAAjD,CAAsF;AAC1uH,GAAI8O,OAAM,GAAI5hB,KAAJ,EAAV,CAAqB,MAAO,IAAIA,KAAJ,CAAS4hB,MAAM1O,OAAN,CAAc/I,IAAd,CAAT,CAAP,CAAsC,SAAS+nB,gBAAT,CAAyB5E,IAAzB,CAA8BpiB,aAA9B,CAA4C,CAAC,MAAO+F,IAAG,SAAS3Q,OAAT,CAAiBuR,MAAjB,CAAwB,CAAC,GAAIzQ,OAAMjF,WAAW2E,GAAX,CAAe,CAACC,YAAYusB,KAAKrmB,IAAL,CAAUyD,KAAV,CAAgB9P,GAA7B,CAAf,CAAV,CAA4DwG,MAAMJ,QAAN,CAAeN,IAAf,CAAoB,SAASH,IAAT,CAAc,CAACI,QAAQC,GAAR,CAAY,uBAAZ,CAAoC0sB,IAApC,CAAyC/sB,IAAzC,EAA+CA,KAAKT,QAAL,EAAe,CAAf,CAAiBS,KAAKiK,MAAL,CAAY8iB,KAAKrmB,IAAL,CAAUyD,KAAV,CAAgBF,MAAhB,EAAwBjK,KAAKiK,MAAzC,CAAgDjK,KAAKR,MAAL,CAAY,GAAIC,KAAJ,EAAZ,CAAuBrD,aAAaqC,MAAb,CAAoBuB,IAApB,CAAyB/C,SAAzB,CAAmC,IAAnC,CAAwCA,SAAxC,CAAkD0N,aAAlD,EAAiE5K,QAAQC,IAAR,EAAe,CAA1P,EAA6P,CAArV,CAAP,CAA+V,SAAS4xB,gBAAT,CAAyB7E,IAAzB,CAA8B5f,QAA9B,CAAuCiV,OAAvC,CAA+C,CAAC,MAAO1R,IAAG,SAAS3Q,OAAT,CAAiBuR,MAAjB,CAAwB,CAAC,GAAIzQ,OAAMhF,WAAW0E,GAAX,CAAe,CAACoU,YAAYoY,KAAKrmB,IAAL,CAAUnD,KAAV,CAAgBlJ,GAA7B,CAAf,CAAV,CAA4DwG,MAAMJ,QAAN,CAAeN,IAAf,CAAoB,SAASH,IAAT,CAAc,CAAC;AACznBA,KAAKmN,QAAL,CAAcA,QAAd,CAAuBnN,KAAKoiB,OAAL,CAAaA,OAAb,CAAqBpiB,KAAKR,MAAL,CAAY,GAAIC,KAAJ,EAAZ,CAAuB0iB,aAAa1jB,MAAb,CAAoBuB,IAApB,CAAyB/C,SAAzB,CAAmC,IAAnC,CAAwCA,SAAxC,EAAmD8C,QAAQC,IAAR,EAAe,CADid,EAC9c,CADsX,CAAP,CAC5W;SAClI;AACT,QAASguB,WAAT,CAAoBjB,IAApB,CAAyBQ,OAAzB,CAAiC,CAAC,MAAO7c,IAAG,SAAS3Q,OAAT,CAAiBuR,MAAjB,CAAwB,CAAC;AACrE,GAAGyb,KAAKrmB,IAAL,CAAUyD,KAAb,CAAmB,CAAC4iB,KAAKrmB,IAAL,CAAUyD,KAAV,CAAgB4iB,KAAKrmB,IAAL,CAAUyD,KAAV,CAAgB9P,GAAhC,CAAqC,CAAzD,IAA8D,IAAG0yB,KAAKrmB,IAAL,CAAUnD,KAAb,CAAmB,CAACwpB,KAAKrmB,IAAL,CAAUnD,KAAV,CAAgBwpB,KAAKrmB,IAAL,CAAUnD,KAAV,CAAgBlJ,GAAhC,CAAqC,MAAK2Q,OAAL,CAAa,UAAU,CAAC7O,oBAAoBuH,OAApB,CAA4B,QAA5B,CAAqC,gCAArC,EAAuE;AACtNtD,QAAQC,GAAR,CAAY,0BAAZ,CAAuCktB,OAAvC,EAAgDxtB,QAAQ,CAACwtB,QAAQA,OAAT,CAAR,EAA4B,CAD2C,CAC1C,SAAS5pB,aAAT,CAAuB,CAAC,GAAIkuB,cAAaluB,cAAc3D,IAAd,CAAmB6D,OAApC,CAA4CyN,OAAOugB,YAAP,EAAqB;AACtK11B,oBAAoByH,KAApB,CAA0B,QAA1B,CAAmC,sBAAnC,EAA4D,CAF2D,EAExD,CAHtB,CAAP,CAGgC;AAClE,QAASkqB,WAAT,CAAoBf,IAApB,CAAyBoC,KAAzB,CAA+B2C,SAA/B,CAAyC,CAAC,GAAGA,SAAH,CAAa,CAAC;AACxD31B,oBAAoB4C,YAApB,CAAiC,QAAST,OAAT,EAAiB,CAACyzB,kBAAkBhF,IAAlB,CAAuBoC,KAAvB,EAA+B,CAAlF,EAAqF,CAD3C,IAC+C,CAAC4C,kBAAkBhF,IAAlB,CAAuBoC,KAAvB,EAA+B,CAAC,SAAS4C,kBAAT,CAA2BhF,IAA3B,CAAgCoC,KAAhC,CAAsC,CAAC,GAAGpC,IAAH,CAAQ,CAACA,KAAK/tB,OAAL,GAAe,IAAI,GAAIC,EAAR,GAAakwB,MAAb,CAAmB,CAAC,GAAGA,MAAMlwB,CAAN,IAAW8tB,IAAd,CAAmB,CAACoC,MAAMhwB,MAAN,CAAaF,CAAb,CAAe,CAAf,EAAmB,CAAC,qBAAoBI,OAApB,CAA4B,UAA5B,CAAuC,gCAAvC,EAA0E,CAAC;AAChU,QAAS2yB,wBAAT,CAAiCjF,IAAjC,CAAsCkF,cAAtC,CAAqD,CAAC,GAAItyB,eAAcpD,UAAUqD,IAAV,CAAe,CAACC,UAAU,IAAX,CAAgBxE,YAAY,yDAA5B,CAAsFC,WAAW,mCAAjG,CAAqIwE,KAAK,IAA1I,CAA+IC,QAAQ,CAACC,KAAK,QAASA,KAAT,EAAe,CAAC,MAAM,CAACV,KAAKjG,QAAQ8qB,IAAR,CAAa4I,IAAb,CAAN,CAAyBmF,aAAanF,IAAtC,CAAN,CAAmD,CAAzE,CAAvJ,CAAf,CAAlB,CAAqQ,MAAOptB,cAAP,CAAsB;AACjV,QAASwyB,wBAAT,CAAiCpF,IAAjC,CAAsCkF,cAAtC,CAAqD,CAAC,GAAItyB,eAAcpD,UAAUqD,IAAV,CAAe,CAACC,UAAU,IAAX,CAAgBxE,YAAY,yDAA5B,CAAsFC,WAAW,mCAAjG,CAAqIwE,KAAK,IAA1I,CAA+IC,QAAQ,CAACC,KAAK,QAASA,KAAT,EAAe,CAAC,MAAM,CAACV,KAAKjG,QAAQ8qB,IAAR,CAAa4I,IAAb,CAAN,CAAyBmF,aAAanF,IAAtC,CAAN,CAAmD,CAAzE,CAAvJ,CAAf,CAAlB,CAAqQ,MAAOptB,cAAP,CAAsB;AACjV,QAASpB,QAAT,CAAiBwuB,IAAjB,CAAsB,CAAC,MAAOrc,IAAG,SAAS3Q,OAAT,CAAiBuR,MAAjB,CAAwB,CAAC,GAAI8gB,UAASrF,KAAKrmB,IAAL,CAAU4lB,MAAvB,CAA8B;AACxF,GAAG,CAAC8F,QAAJ,CAAa,CAACrF,KAAKC,aAAL,EAAoB,CAApB,CAAuB,CAArC,IAA0C,IAAGoF,QAAH,CAAY,CAAC;;iBAEtC,GAAGrF,KAAKrmB,IAAL,CAAUzG,IAAV,GAAiB,OAApB,CAA4B,CAAC8sB,KAAKD,QAAL,CAAc,KAAd,CAAoB,GAAIuF,aAAYF,wBAAwBpF,IAAxB,CAAhB,CAA8CsF,YAAYnyB,MAAZ,CAAmBC,IAAnB,CAAwB,SAASD,MAAT,CAAgB,CAACE,QAAQC,GAAR,CAAY,4BAAZ,CAAyCH,MAAzC,EAAiD6sB,KAAK7sB,OAAO6sB,IAAZ,CAAiBA,KAAKC,aAAL,CAAmBD,KAAKrmB,IAAL,CAAUyD,KAAV,CAAgB5K,QAAhB,CAAyB,CAA5C,CAA8CwtB,KAAKD,QAAL,CAAc,IAAd,CAAmBC,KAAKR,MAAL,CAAYQ,KAAKrmB,IAAL,CAAUyD,KAAV,CAAgBrH,YAA5B,CAAyCvK,IAAIo5B,eAAJ,CAAoB5E,IAApB,CAAyB7sB,OAAOyK,aAAhC,EAA+CxK,IAA/C,CAAoD,SAASD,MAAT,CAAgB,CAAC,MAAO3H,KAAIy1B,UAAJ,CAAejB,IAAf,CAAoB,IAApB,CAAP,CAAkC,CAAvG,EAAyG5sB,IAAzG,CAA8G,SAASD,MAAT,CAAgB,CAACE,QAAQC,GAAR,CAAY,iCAAZ,CAA8CH,MAA9C,EAAsDH,QAAQG,MAAR,EAAiB,CAAtM,EAAyM,CAA9Z,EAAia,CAAhgB,IAAqgB,IAAG6sB,KAAKrmB,IAAL,CAAUzG,IAAV,GAAiB,OAApB,CAA4B,CAAC8sB,KAAKD,QAAL,CAAc,KAAd,CAAoB,GAAIwF,QAAON,wBAAwBjF,IAAxB,CAAX,CAAyCuF,OAAOpyB,MAAP,CAAcC,IAAd,CAAmB,SAASD,MAAT,CAAgB,CAAC6sB,KAAK7sB,MAAL,CAAY6sB,KAAKC,aAAL,EAAoB,CAApB,CAAsBD,KAAKD,QAAL,CAAc,IAAd,CAAmBv0B,IAAIq5B,eAAJ,CAAoB7E,IAApB,CAAyBA,KAAKrmB,IAAL,CAAUnD,KAAV,CAAgB4J,QAAzC,CAAkD4f,KAAKrmB,IAAL,CAAUnD,KAAV,CAAgB6e,OAAlE,EAA2EjiB,IAA3E,CAAgF,SAASD,MAAT,CAAgB,CAACE,QAAQC,GAAR,CAAY,iBAAZ,CAA8BH,MAA9B,EAAsC,MAAO3H,KAAIy1B,UAAJ,CAAejB,IAAf,CAAoB,IAApB,CAAP,CAAkC,CAAzK,EAA2K5sB,IAA3K,CAAgL,SAASD,MAAT,CAAgB,CAACE,QAAQC,GAAR,CAAY,iCAAZ,CAA8CH,MAA9C,EAAsDH,QAAQG,MAAR,EAAiB,CAAxQ,EAA2Q,CAApW,EAAuW,CAAC,IAAG,CAACkyB,QAAJ,CAAa,CAAC75B,IAAIy1B,UAAJ,CAAejB,IAAf,CAAoBqF,QAApB,EAA8BjyB,IAA9B,CAAmC,SAASD,MAAT,CAAgB,CAACE,QAAQC,GAAR,CAAY,uBAAZ,CAAoCH,MAApC,EAA4CH,QAAQG,MAAR,EAAiB,CAAjH,EAAoH,CAAC,CAH7jC,CAAP,CAGukC;AAC9lC,QAAS6tB,iBAAT,CAA0BhB,IAA1B,CAA+Blf,KAA/B,CAAqC,CAAC,MAAO6C,IAAG,SAAS3Q,OAAT,CAAiBuR,MAAjB,CAAwB,CAAC;AACzE,GAAI8gB,UAASrF,KAAKrmB,IAAL,CAAU4lB,MAAvB,CAA8B,GAAG8F,UAAUrF,KAAKrmB,IAAL,CAAUzG,IAAV,GAAiB,OAA9B,CAAsC,CAAC8sB,KAAKJ,cAAL,CAAoB9e,KAApB,EAA2Bif,QAA3B,CAAoC,KAApC,CAA0C,GAAIwF,QAAON,wBAAwBjF,IAAxB,CAA6Blf,KAA7B,CAAX,CAA+CykB,OAAOpyB,MAAP,CAAcC,IAAd,CAAmB,SAASD,MAAT,CAAgB,CAAC6sB,KAAK7sB,MAAL,CAAY6sB,KAAKJ,cAAL,CAAoB9e,KAApB,EAA2Bif,QAA3B,CAAoC,IAApC,CAAyC,GAAG5wB,YAAYqJ,YAAZ,CAAyBwnB,KAAKJ,cAA9B,CAA6C,UAA7C,CAAwD,KAAxD,IAAiE,CAAC,CAArE,CAAuE,CAACI,KAAKC,aAAL,EAAoB,CAApB,CAAsBD,KAAKD,QAAL,CAAc,IAAd,CAAoB,KAAI8E,eAAJ,CAAoB7E,IAApB,CAAyBA,KAAKrmB,IAAL,CAAUnD,KAAV,CAAgB4J,QAAzC,CAAkD4f,KAAKrmB,IAAL,CAAUnD,KAAV,CAAgB6e,OAAlE,EAA2EjiB,IAA3E,CAAgF,SAASD,MAAT,CAAgB,CAACE,QAAQC,GAAR,CAAY,iBAAZ,CAA8BH,MAA9B,EAAsC,MAAO3H,KAAIy1B,UAAJ,CAAejB,IAAf,CAAoB,IAApB,CAAP,CAAkC,CAAzK,EAA2K5sB,IAA3K,CAAgL,SAASD,MAAT,CAAgB,CAACE,QAAQC,GAAR,CAAY,iCAAZ,CAA8CH,MAA9C,EAAsDH,QAAQG,MAAR,EAAiB,CAAxQ,EAA2Q,CAAtd,EAAyd,CAAzlB,IAA8lB,IAAG,CAACkyB,QAAJ,CAAa,CAAC,GAAGl2B,YAAYqJ,YAAZ,CAAyBwnB,KAAKJ,cAA9B,CAA6C,UAA7C,CAAwD,KAAxD,IAAiE,CAAC,CAArE,CAAuE,CAACI,KAAKC,aAAL,EAAoB,CAApB,CAAsBD,KAAKD,QAAL,CAAc,IAAd,CAAoB;AAC5vBv0B,IAAIy1B,UAAJ,CAAejB,IAAf,CAAoBqF,QAApB,EAA8BjyB,IAA9B,CAAmC,SAASD,MAAT,CAAgB,CAACE,QAAQC,GAAR,CAAY,uBAAZ,CAAoCH,MAApC,EAA4CH,QAAQG,MAAR,EAAiB,CAAjH,EAAoH,CAAC,CAFxE,CAAP,CAEkF;AACxH,QAAS2tB,oBAAT,CAA6Bd,IAA7B,CAAkCsB,gBAAlC,CAAmD,CAAC,GAAGA,mBAAmB,EAAnB,EAAuBA,mBAAmBpxB,SAA7C,CAAuD,CAAC,GAAIkW,cAAa,KAAjB,CAAuB;AACnI9Z,QAAQkU,OAAR,CAAgBwf,KAAKJ,cAArB,CAAoC,SAASrtB,IAAT,CAAc,CAAC,GAAGA,OAAO+uB,gBAAV,CAA2B,CAAClb,aAAa,IAAb,CAAmB,CAAC,CAAnG,EAAqG;AACrG,GAAGA,eAAe,KAAlB,CAAwB,CAAC4Z,KAAKJ,cAAL,CAAoBnzB,IAApB,CAAyB,CAACoJ,KAAKyrB,gBAAN,CAAuBvB,SAAS,KAAhC,CAAzB,EAAkE,CAA3F,IAAgG,IAAG3Z,eAAe,IAAlB,CAAuB,CAAChX,oBAAoB6P,KAApB,CAA0B,wBAA1B,CAAmD,+BAAnD,CAAmF,OAAnF,EAA6F,CAAC,KAAIgiB,UAAJ,CAAejB,IAAf,EAAsB,CAAC,CAAC,CArBm0F,IAqB/zF,CAAC,UAAU,CAAC,aAAa;AAC3Q1zB,QAAQC,MAAR,CAAe,OAAf,EAAwBoR,OAAxB,CAAgC,OAAhC,CAAwCmhB,KAAxC,EAA+CA,MAAMrwB,OAAN,CAAc,CAAC,WAAD,CAAd,CAA4B,QAASqwB,MAAT,CAAe1gB,SAAf,CAAyB,CAAC,MAAOA,WAAU,eAAV,CAA0B,CAAConB,OAAO,MAAR,CAA1B,CAA0C,CAAC9zB,OAAO,CAAC2M,OAAO,KAAR,CAAR,CAA1C,CAAP,CAA2E,CAAC,CADiE,IAC7D,aAAa;AAClM/R,QAAQC,MAAR,CAAe,SAAf,EAA0BM,GAA1B,CAA8B,CAAC,OAAD,CAAS,SAASmB,KAAT,CAAe,CAAC;AACvDA,MAAMC,WAAN,CAAkB,QAAlB,CAA2B,SAA3B,CAAqC,SAArC,CAA+C,UAA/C,CAA0D,oBAA1D,EAAgFD,MAAME,cAAN,CAAqB,QAArB,CAA8B,SAA9B,CAAwC,cAAxC,CAAuD,SAAvD,EAAkEF,MAAME,cAAN,CAAqB,QAArB,CAA8B,SAA9B,CAAwC,YAAxC,CAAqD,gBAArD,EAAwE,CAD5L,CAA9B,EAC6N,aAAa;AAC1O5B,QAAQC,MAAR,CAAe,SAAf,EAA0BG,MAA1B,CAAiC,CAAC,gBAAD,CAAkB,SAASyB,cAAT,CAAwB,CAAC;AAC5EA,eAAeC,KAAf,CAAqB,aAArB,CAAmC,CAACC,IAAI,UAAL,CAAgBC,YAAY,qDAA5B,CAAnC,EAAuHF,KAAvH,CAA6H,cAA7H,CAA4I,CAACC,IAAI,iBAAL,CAAuBC,YAAY,sDAAnC,CAA5I,EAAwOF,KAAxO,CAA8O,YAA9O,CAA2P,CAACC,IAAI,oBAAL,CAA0BC,YAAY,oDAAtC,CAA3P,EAAwVF,KAAxV,CAA8V,YAA9V,CAA2W,CAACC,IAAI,yBAAL,CAA+BC,YAAY,sDAA3C,CAA3W,EAAgd,CAD/a,CAAjC,EACmd,CAAC,UAAU,CAAC,aAAahC,QAAQC,MAAR,CAAe,SAAf,EAA0BgC,UAA1B,CAAqC,wBAArC,CAA8Dk3B,sBAA9D,EAAsFA,uBAAuBh3B,OAAvB,CAA+B,CAAC,QAAD,CAAU,cAAV,CAAyB,WAAzB,CAAqC,gBAArC,CAAsD,SAAtD,CAAgE,aAAhE,CAA8E,YAA9E,CAA2F,YAA3F,CAAwG,YAAxG,CAAqH,qBAArH,CAA2I,kBAA3I,CAA8J,aAA9J,CAA4K,SAA5K,CAA/B,CAAsN,QAASg3B,uBAAT,CAAgC/2B,MAAhC,CAAuCC,YAAvC,CAAoDC,SAApD,CAA8D5B,cAA9D,CAA6EosB,OAA7E,CAAqFjqB,WAArF,CAAiGN,UAAjG,CAA4GC,UAA5G,CAAuH6X,UAAvH,CAAkIvX,mBAAlI,CAAsJwX,gBAAtJ,CAAuK1X,WAAvK,CAAmL6J,OAAnL,CAA2L,CAAC,GAAItJ,MAAK,IAAT,CAAci2B,WAAW,CAACt4B,KAAK,EAAN,CAASkyB,YAAY,EAArB,CAAwBpsB,KAAK,EAA7B,CAAgCinB,YAAY,KAA5C,CAAkDD,SAAS,KAA3D,CAAiEyL,UAAU,EAA3E,CAA8EC,UAAU,EAAxF,CAA2FC,cAAc,EAAzG,CAA4GC,WAAW,CAACC,MAAM,IAAP,CAAYhf,OAAO,EAAnB,CAAsBjR,KAAK,EAA3B,CAA8BI,OAAO,IAArC,CAA0CC,KAAK,IAA/C,CAAvH,CAAzB,CAAsM1G,KAAKC,cAAL,CAAoB1C,cAApB,CAAmCyC,KAAKma,MAAL,CAAYA,MAAZ,CAAmBna,KAAK+E,MAAL,CAAYA,MAAZ,CAAmB/E,KAAKqB,YAAL,CAAkB3B,YAAY4B,eAAZ,EAAlB,CAAgDtB,KAAKu2B,OAAL,CAAa,CAACC,OAAO,MAAR,CAAejX,MAAM,OAArB,CAAb,CAA2Cvf,KAAKiG,QAAL,CAAc,IAAd,CAAmBjG,KAAKy2B,aAAL,CAAmBA,aAAnB,CAAiCz2B,KAAK02B,QAAL,CAAcA,QAAd,CAAuB12B,KAAK22B,eAAL,CAAqBA,eAArB,CAAqC32B,KAAK42B,UAAL,CAAgBA,UAAhB,CAA2B52B,KAAKsnB,UAAL,CAAgB,CAACuP,MAAM,CAAC,CAAD,CAAG,CAAH,CAAK,CAAL,CAAO,CAAP,CAAS,CAAT,CAAW,CAAX,CAAa,CAAb,CAAe,CAAf,CAAiB,CAAjB,CAAmB,EAAnB,CAAP,CAA8BtP,YAAY,CAAC,CAACnhB,KAAK,mBAAN,CAAD,CAA4B,CAACA,KAAK,gBAAN,CAA5B,CAAoD,CAACA,KAAK,eAAN,CAApD,CAA1C,CAAsHohB,YAAY,CAAlI,CAAoIC,UAAU,CAA9I,CAAgJqP,QAAQ,CAACC,YAAY,EAAb,CAAgB3rB,MAAM,EAAtB,CAAyB4rB,YAAY,EAArC,CAAwCC,WAAW,EAAnD,CAAsDC,YAAY,EAAlE,CAAqEC,WAAW,EAAhF,CAAmFC,YAAY,EAA/F,CAAkGC,SAAS,EAA3G,CAA8G/f,OAAO,EAArH,CAAwHjR,KAAK,EAA7H,CAAxJ,CAAyRixB,SAAS,CAAlS,CAAoSC,SAAS,CAACC,IAAI,EAAL,CAAQC,IAAI,EAAZ,CAA7S,CAAhB,CAA8Uz3B,KAAK03B,aAAL,CAAmBA,aAAnB,CAAiC13B,KAAK4nB,QAAL,CAAcA,QAAd,CAAuB5nB,KAAKwqB,MAAL,CAAY,EAAZ,CAAe3tB,QAAQ8qB,IAAR,CAAasO,UAAb,CAAwBj2B,KAAKwqB,MAA7B,EAAqCxqB,KAAKiC,MAAL,CAAYA,MAAZ,CAAmBjC,KAAKyT,KAAL,CAAW,EAAX,CAAc;AACp6D,QAAS1O,OAAT,EAAiB,CAAC;AAClB;AACA,GAAIylB,QAAO,GAAIb,QAAJ,EAAX,CAAyBa,OAAO,GAAIb,QAAJ,CAAY,CAAChsB,KAAKqC,KAAKwqB,MAAL,CAAY7sB,IAAlB,CAAuBkyB,YAAY7vB,KAAKwqB,MAAL,CAAYqF,WAA/C,CAA2DpsB,KAAKzD,KAAKwqB,MAAL,CAAY/mB,IAA5E,CAAiFinB,YAAY1qB,KAAKwqB,MAAL,CAAYE,WAAzG,CAAqHD,SAASzqB,KAAKwqB,MAAL,CAAYC,QAA1I,CAAmJyL,UAAUl2B,KAAKwqB,MAAL,CAAY0L,SAAZ,CAAsB/sB,MAAtB,CAA6B,CAA7B,CAA+BnJ,KAAKwqB,MAAL,CAAY0L,SAA3C,CAAqD,IAAlN,CAAuNE,cAAcp2B,KAAKwqB,MAAL,CAAY4L,aAAZ,CAA0BjtB,MAA1B,CAAiC,CAAjC,CAAmCnJ,KAAKwqB,MAAL,CAAY4L,aAA/C,CAA6D,IAAlS,CAAuSD,UAAUn2B,KAAKwqB,MAAL,CAAY2L,SAAZ,CAAsBhtB,MAAtB,CAA6B,CAA7B,CAA+BnJ,KAAKwqB,MAAL,CAAY2L,SAA3C,CAAqD,IAAtW,CAA2WE,WAAW,CAACC,MAAMt2B,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuBC,KAA9B,CAAoChf,OAAOtX,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuB/e,MAAlE,CAAyEjR,KAAKrG,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuBhwB,IAArG,CAA0GI,OAAOzG,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuB5vB,MAAxI,CAA+IC,KAAK1G,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuB3vB,IAA3K,CAAtX,CAAZ,CAAP,CAA4jB;AACrlB8jB,OAAOxjB,KAAP,CAAa,SAASC,QAAT,CAAkB,CAAC9H,UAAUyD,IAAV,CAAe,WAAWqE,SAASpJ,GAAnC,EAAwC8B,oBAAoBuH,OAApB,CAA4B,QAA5B,CAAqC,kCAArC,EAAyE;AACjJrK,QAAQ8qB,IAAR,CAAasO,UAAb,CAAwBj2B,KAAKwqB,MAA7B,EAAsC,CADtC,CACuC,SAASrjB,aAAT,CAAuB,CAACnH,KAAKoH,KAAL,CAAWD,cAAc3D,IAAd,CAAmB6D,OAA9B,CAAsC1H,oBAAoByH,KAApB,CAA0B,QAA1B,CAAmC,uBAAnC,EAA6D,CADlK,EACqK;AACrK,QAASnF,OAAT,EAAiB,CAAC,GAAIuoB,QAAOxqB,KAAKwqB,MAAhB,CAAuBA,OAAOhc,OAAP,CAAe,UAAU,CAACrP,UAAUyD,IAAV,CAAe,WAAW4nB,OAAO3sB,GAAjC,EAAsC8B,oBAAoBuH,OAApB,CAA4B,UAA5B,CAAuC,6BAAvC,EAAuE,CAAvI,CAAwI,SAASC,aAAT,CAAuB,CAACnH,KAAKoH,KAAL,CAAWD,cAAc3D,IAAd,CAAmB6D,OAA9B,CAAsC1H,oBAAoByH,KAApB,CAA0B,QAA1B,CAAmC,uBAAnC,EAA6D,CAAnQ,EAAsQ,SAASuwB,oBAAT,EAA8B,CAAC,GAAIl0B,MAAK/D,YAAY0U,gBAAZ,CAA6BpU,KAAKwqB,MAAL,CAAY/mB,IAAzC,CAA8C,OAA9C,CAAsD,IAAtD,CAAT,CAAqE,OAAOA,IAAP,EAAa,IAAI,OAAJ,CAAYrE,WAAWiF,KAAX,GAAmBJ,QAAnB,CAA4BN,IAA5B,CAAiC,SAASD,MAAT,CAAgB,CAAC1D,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwB1rB,KAAxB,CAA8B1H,MAA9B,CAAqC1D,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwBI,WAAxB,CAAoC,OAApC,CAA4Cl3B,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwBzwB,IAAxB,CAA6B8Q,iBAAiBY,kBAAjB,CAAoCrU,MAApC,CAA7B,CAAyE1D,KAAKyT,KAAL,CAAWhU,YAAYqQ,WAAZ,CAAwBpM,MAAxB,CAAX,CAA4C,CAAxP,EAA0P,MAAM,IAAI,OAAJ,CAAYrE,WAAWgF,KAAX,GAAmBJ,QAAnB,CAA4BN,IAA5B,CAAiC,SAASD,MAAT,CAAgB,CAAC1D,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwB1rB,KAAxB,CAA8B1H,MAA9B,CAAqC1D,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwBI,WAAxB,CAAoC,OAApC,CAA4Cl3B,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwBzwB,IAAxB,CAA6B8Q,iBAAiBY,kBAAjB,CAAoCrU,MAApC,CAA7B,CAA0E,CAA7M,EAA+M,MAAM,IAAI,WAAJ,CAAgBwT,WAAW7S,KAAX,GAAmBJ,QAAnB,CAA4BN,IAA5B,CAAiC,SAASD,MAAT,CAAgB,CAAC1D,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwB1rB,KAAxB,CAA8B1H,MAA9B,CAAqC1D,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwBI,WAAxB,CAAoC,MAApC,CAA2Cl3B,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwBzwB,IAAxB,CAA6B8Q,iBAAiBY,kBAAjB,CAAoCrU,MAApC,CAA7B,CAAyE1D,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwBxf,MAAxB,CAA+BH,iBAAiBc,eAAjB,CAAiCvU,MAAjC,CAA/B,CAAwE,GAAIk0B,UAAS,EAAb,CAAgB/6B,QAAQkU,OAAR,CAAgBrN,MAAhB,CAAuB,SAASZ,IAAT,CAAc,CAAC,GAAGA,KAAK6K,KAAR,CAAc,CAACiqB,SAAS56B,IAAT,CAAc8F,KAAK6K,KAAnB,EAA2B,CAAC,CAAjF,EAAmF3N,KAAKyT,KAAL,CAAWhU,YAAYqQ,WAAZ,CAAwB8nB,QAAxB,CAAX,CAA8C,CAApa,EAAsa,MAAh7B,CAAu7B;AACz0C;AACD,QAASlH,QAAT,CAAiBvoB,MAAjB,CAAwB2f,SAAxB,CAAkC+P,QAAlC,CAA2C,CAAC;AAC5C,OAAO1vB,MAAP,EAAe,IAAK,EAAL,CAAO,GAAGnI,KAAKwqB,MAAL,CAAY/mB,IAAZ,GAAmB,EAAnB,EAAuBzD,KAAKiG,QAA/B,CAAwC,CAAC0xB,sBAAsBE,WAAY,CAA3E,IAAgF,IAAG73B,KAAKwqB,MAAL,CAAY/mB,IAAZ,GAAmB,EAAnB,EAAuB,CAACzD,KAAKiG,QAAhC,CAAyC,CAAC,GAAGjG,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwBE,WAAxB,CAAoC7tB,MAApC,CAA2C,CAA9C,CAAgD,CAACtM,QAAQkU,OAAR,CAAgB/Q,KAAKwqB,MAAL,CAAYxqB,KAAKwqB,MAAL,CAAY/mB,IAAZ,CAAiB,MAA7B,CAAhB,CAAqD,SAASX,IAAT,CAAc,CAAC,GAAIuO,OAAM3R,YAAYqJ,YAAZ,CAAyB/I,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwB1rB,KAAjD,CAAuD,KAAvD,CAA6DtI,KAAKjF,GAAlE,CAAV,CAAiFmC,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwBE,WAAxB,CAAoCh6B,IAApC,CAAyCgD,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwB1rB,KAAxB,CAA8BiG,KAA9B,CAAzC,EAAgF,CAArO,EAAuOrR,KAAKsnB,UAAL,CAAgBgQ,QAAhB,CAAyBt3B,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwBE,WAAxB,CAAoC7tB,MAA7D,CAAqE,YAAY,CAAnZ,IAAwZ,IAAGnJ,KAAKwqB,MAAL,CAAY/mB,IAAZ,GAAmB,EAAtB,CAAyB,CAAC9D,oBAAoB6P,KAApB,CAA0B,cAA1B,CAAyC,qCAAzC,CAA+E,OAA/E,EAAyF,OAAM,IAAK,EAAL,CAAO,GAAGsY,SAAH,CAAa,CAAC,GAAIrlB,GAAE,CAAN,CAAQmU,EAAE,CAAV,CAAYzN,MAAZ,CAAmBtM,QAAQ8qB,IAAR,CAAa3nB,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwB1rB,KAArC,CAA2CpL,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwBC,WAAnE,EAAgF;AAC/uB,GAAG/2B,KAAKwqB,MAAL,CAAY/mB,IAAZ,GAAmB,OAAtB,CAA8B,CAAC,GAAGzD,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuB5vB,MAA1B,CAAiC,CAAC,GAAGzG,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuB3vB,IAA1B,CAA+B,CAAC1G,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwB1rB,KAAxB,CAA8B9B,QAAQ,QAAR,EAAkBtJ,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwB1rB,KAA1C,CAAgDpL,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuB3vB,IAAvE,CAA4E1G,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuB5vB,MAAnG,CAA9B,CAA0I,CAA1K,IAA8K,CAAC9G,oBAAoB6P,KAApB,CAA0B,cAA1B,CAAyC,kDAAzC,CAA4F,OAA5F,EAAqG,MAAO,CAAC,CAA9T,IAAkU,CAAC,GAAGxP,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuB3vB,IAA1B,CAA+B,CAAC1G,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwB1rB,KAAxB,CAA8B9B,QAAQ,QAAR,EAAkBtJ,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwB1rB,KAA1C,CAAgD,CAAC3E,OAAO,CAACC,KAAK1G,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuB3vB,IAA7B,CAAR,CAAhD,CAA9B,CAA4H,CAAC,CAAC,CAAhgB,IAAqgB,IAAG1G,KAAKwqB,MAAL,CAAY/mB,IAAZ,GAAmB,WAAtB,CAAkC,CAAC,GAAGzD,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuB5vB,MAA1B,CAAiC,CAAC,GAAGzG,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuB3vB,IAA1B,CAA+B,CAAC1G,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwB1rB,KAAxB,CAA8B9B,QAAQ,yBAAR,EAAmCtJ,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwB1rB,KAA3D,CAAiEpL,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuB3vB,IAAxF,CAA6F1G,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuB5vB,MAApH,CAA9B,CAA2J,CAA3L,IAA+L,CAAC9G,oBAAoB6P,KAApB,CAA0B,cAA1B,CAAyC,kDAAzC,CAA4F,OAA5F,EAAqG,MAAO,CAAC,CAA/U,IAAmV,CAAC,GAAGxP,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuB3vB,IAA1B,CAA+B,CAAC1G,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwB1rB,KAAxB,CAA8B9B,QAAQ,QAAR,EAAkBtJ,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwB1rB,KAA1C,CAAgD,CAACuC,MAAM,CAAClH,OAAO,CAACC,KAAK1G,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuB3vB,IAA7B,CAAR,CAAP,CAAhD,CAA9B,CAAoI,CAAC,CAAC,IAAG1G,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuB/e,MAAvB,CAA8BnO,MAA9B,CAAqC,CAAxC,CAA0C,CAAC1G,EAAEzC,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwB1rB,KAAxB,CAA8BjC,MAAhC,CAAuC,MAAM1G,GAAN,CAAU,CAAC,GAAIX,QAAO,IAAX,CAAgB8S,KAAK5U,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwB1rB,KAAxB,CAA8B3I,CAA9B,EAAiCkL,KAAjC,GAAyC,IAAzC,CAA8C,OAA9C,CAAsD3N,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwB1rB,KAAxB,CAA8B3I,CAA9B,EAAiCkL,KAAjC,GAAyC,IAAzC,CAA8C,OAA9C,CAAsD,IAAjI,CAAsIxE,OAAOnJ,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuB/e,MAAvB,CAA8BnO,MAArC,CAA4C;AACjzC,GAAGyL,OAAO,IAAV,CAAe,CAAC;AAChB,IAAIgC,EAAE,CAAN,CAAQA,EAAEzN,MAAV,CAAiByN,GAAjB,CAAqB,CAAC,GAAIU,QAAOtX,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuB/e,MAAvB,CAA8BV,CAA9B,CAAX,CAA4C;AAClE,GAAG5W,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwB1rB,KAAxB,CAA8B3I,CAA9B,EAAiCmS,IAAjC,EAAuC/P,KAAvC,CAA6C4G,OAA7C,CAAqD6L,OAAO3Z,IAA5D,EAAkE,CAAC,CAAtE,CAAwE,CAACmE,OAAO,KAAP,CAAc,CAAC,IAAGA,MAAH,CAAU,CAAC;AACnG9B,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwB1rB,KAAxB,CAA8BzI,MAA9B,CAAqCF,CAArC,CAAuC,CAAvC,EAA2C,CAAC,CAH5C,IAGgD,CAAC;AACjDzC,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwB1rB,KAAxB,CAA8BzI,MAA9B,CAAqCF,CAArC,CAAuC,CAAvC,EAA2C,CAAC,CAAC,IAAGzC,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuBhwB,IAAvB,CAA4B8C,MAA5B,CAAmC,CAAtC,CAAwC,CAAC1G,EAAEzC,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwB1rB,KAAxB,CAA8BjC,MAAhC,CAAuC,MAAM1G,GAAN,CAAU,CAAC,GAAIwO,OAAM,CAAV,CAAY9H,OAAOnJ,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuBhwB,IAAvB,CAA4B8C,MAAnC,CAA0C;AAC9L,GAAGnJ,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwB1rB,KAAxB,CAA8B3I,CAA9B,EAAiC4D,IAAjC,CAAsC8C,MAAtC,CAA6C,CAAhD,CAAkD,CAAC;AACnD,IAAIyN,EAAE,CAAN,CAAQA,EAAEzN,MAAV,CAAiByN,GAAjB,CAAqB,CAAC,GAAIpL,KAAIxL,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuBhwB,IAAvB,CAA4BuQ,CAA5B,CAAR,CAAuC;AAC7D,GAAGlX,YAAYqJ,YAAZ,CAAyB/I,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwB1rB,KAAxB,CAA8B3I,CAA9B,EAAiC4D,IAA1D,CAA+D,MAA/D,CAAsEmF,IAAIA,GAA1E,EAA+E,CAAC,CAAnF,CAAqF,CAACyF,QAAS,CAAC,IAAGA,QAAQ9H,MAAX,CAAkB,CAAC;AACnHnJ,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwB1rB,KAAxB,CAA8BzI,MAA9B,CAAqCF,CAArC,CAAuC,CAAvC,EAA2C,CAAC,CAH5C,IAGgD,CAAC;AACjDzC,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwB1rB,KAAxB,CAA8BzI,MAA9B,CAAqCF,CAArC,CAAuC,CAAvC,EAA2C,CAAC,CAAC;AAC5C,YAAW,MAAM,IAAK,EAAL,CAAO,GAAG,CAACqlB,SAAJ,CAAc,CAAC9nB,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwB1rB,KAAxB,CAA8BvO,QAAQ8qB,IAAR,CAAa3nB,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwBC,WAArC,CAA9B,CAAiF,YAAW,MAZpI,CAY4I,SAASL,SAAT,CAAkB5zB,IAAlB,CAAuB,CAAC,GAAG9C,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuBC,KAAvB,GAA+B,IAA/B,EAAqCt2B,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuBC,KAAvB,GAA+B,CAApE,EAAuEt2B,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuBC,KAAvB,CAA6Bt2B,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwBE,WAAxB,CAAoC7tB,MAA3I,CAAkJ,CAAC,GAAIkI,OAAMrR,KAAKwqB,MAAL,CAAYxqB,KAAKwqB,MAAL,CAAY/mB,IAAZ,CAAiB,MAA7B,EAAqCgI,OAArC,CAA6C3I,KAAKjF,GAAlD,CAAV,CAAiE,GAAG,CAACmC,KAAKiG,QAAN,EAAgBoL,QAAQ,CAAC,CAA5B,CAA8B,CAACA,MAAM3R,YAAYqJ,YAAZ,CAAyB/I,KAAKwqB,MAAL,CAAYxqB,KAAKwqB,MAAL,CAAY/mB,IAAZ,CAAiB,MAA7B,CAAzB,CAA8D,KAA9D,CAAoEX,KAAKjF,GAAzE,CAAN,CAAqF,IAAGwT,QAAQ,CAAC,CAAZ,CAAc,CAACrR,KAAKwqB,MAAL,CAAYxqB,KAAKwqB,MAAL,CAAY/mB,IAAZ,CAAiB,MAA7B,EAAqCzG,IAArC,CAA0C8F,KAAKjF,GAA/C,EAAoDmC,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwBE,WAAxB,CAAoCh6B,IAApC,CAAyC8F,IAAzC,EAAgD,CAAnH,IAAuH,CAACnD,oBAAoBkD,OAApB,CAA4B,YAA5B,CAAyC,sCAAzC,EAAkF,CAAC,CAAnhB,IAAuhB,CAAClD,oBAAoByH,KAApB,CAA0B,OAA1B,CAAkC,6CAAlC,EAAkF,MAAKkgB,UAAL,CAAgBwP,OAAhB,CAAwBK,UAAxB,CAAmC,EAAnC,CAAuC,SAASP,WAAT,CAAoB9zB,IAApB,CAAyB,CAAC;AAC/0B,GAAIuO,OAAMrR,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwBE,WAAxB,CAAoCvrB,OAApC,CAA4C3I,IAA5C,CAAV,CAA4D9C,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwBE,WAAxB,CAAoCr0B,MAApC,CAA2C0O,KAA3C,CAAiD,CAAjD,EAAoD;AAChHA,MAAMrR,KAAKwqB,MAAL,CAAYxqB,KAAKwqB,MAAL,CAAY/mB,IAAZ,CAAiB,MAA7B,EAAqCgI,OAArC,CAA6C3I,KAAKjF,GAAlD,CAAN,CAA6D,GAAG,CAACmC,KAAKiG,QAAN,EAAgBoL,QAAQ,CAAC,CAA5B,CAA8B,CAACA,MAAM3R,YAAYqJ,YAAZ,CAAyB/I,KAAKwqB,MAAL,CAAYxqB,KAAKwqB,MAAL,CAAY/mB,IAAZ,CAAiB,MAA7B,CAAzB,CAA8D,KAA9D,CAAoEX,KAAKjF,GAAzE,CAAN,CAAqF,MAAK2sB,MAAL,CAAYxqB,KAAKwqB,MAAL,CAAY/mB,IAAZ,CAAiB,MAA7B,EAAqCd,MAArC,CAA4C0O,KAA5C,CAAkD,CAAlD,EAAqD1R,oBAAoBkD,OAApB,CAA4B,UAA5B,CAAuC,kCAAvC,EAA4E,SAAS4zB,cAAT,CAAuBhzB,IAAvB,CAA4BX,IAA5B,CAAiC,CAAC,GAAIuO,MAAJ,CAAUymB,QAAV,CAAmB,OAAOr0B,IAAP,EAAa,IAAI,QAAJ,CAAa4N,MAAM3R,YAAYqJ,YAAZ,CAAyB/I,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuB/e,MAAhD,CAAuD,MAAvD,CAA8DxU,KAAKnF,IAAnE,CAAN,CAA+E,GAAG0T,QAAQ,CAAC,CAAZ,CAAc,CAACrR,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuB/e,MAAvB,CAA8Bta,IAA9B,CAAmC8F,IAAnC,EAA0C,CAAzD,IAA6D,CAACnD,oBAAoBkD,OAApB,CAA4B,YAA5B,CAAyC,wCAAzC,EAAoF,MAAKykB,UAAL,CAAgBwP,OAAhB,CAAwBM,WAAxB,CAAoC,EAApC,CAAuC,MAAM,IAAI,KAAJ,CAAU/lB,MAAM3R,YAAYqJ,YAAZ,CAAyB/I,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuBhwB,IAAhD,CAAqD,KAArD,CAA2DvD,KAAK0I,GAAhE,CAAN,CAA2E,GAAG6F,QAAQ,CAAC,CAAZ,CAAc,CAACrR,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuBhwB,IAAvB,CAA4BrJ,IAA5B,CAAiC8F,IAAjC,EAAwC,CAAvD,IAA2D,CAACnD,oBAAoBkD,OAApB,CAA4B,YAA5B,CAAyC,qCAAzC,EAAiF,MAAKykB,UAAL,CAAgBwP,OAAhB,CAAwBO,QAAxB,CAAiC,EAAjC,CAAoC,MAA9iB,CAAsjB,SAASV,gBAAT,CAAyBlzB,IAAzB,CAA8BX,IAA9B,CAAmC,CAAC,GAAIuO,MAAJ,CAAUymB,QAAV,CAAmB,OAAOr0B,IAAP,EAAa,IAAI,QAAJ,CAAa4N,MAAM3R,YAAYqJ,YAAZ,CAAyB/I,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuB/e,MAAhD,CAAuD,MAAvD,CAA8DxU,KAAKnF,IAAnE,CAAN,CAA+EqC,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuB/e,MAAvB,CAA8B3U,MAA9B,CAAqC0O,KAArC,CAA2C,CAA3C,EAA8C1R,oBAAoBkD,OAApB,CAA4B,UAA5B,CAAuC,oCAAvC,EAA6E,MAAM,IAAI,KAAJ,CAAUwO,MAAMrR,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuBhwB,IAAvB,CAA4BoF,OAA5B,CAAoC3I,IAApC,CAAN,CAAgD9C,KAAKwqB,MAAL,CAAY6L,UAAZ,CAAuBhwB,IAAvB,CAA4B1D,MAA5B,CAAmC0O,KAAnC,CAAyC,CAAzC,EAA4C1R,oBAAoBkD,OAApB,CAA4B,UAA5B,CAAuC,iCAAvC,EAA0E,MAA1Z,CAAka;AACt3C,QAAS+kB,SAAT,CAAkBzf,MAAlB,CAAyB2f,SAAzB,CAAmC,CAAC4I,QAAQvoB,MAAR,CAAe2f,SAAf,CAAyB,UAAU,CAAC9nB,KAAKsnB,UAAL,CAAgBE,WAAhB,CAA4BM,UAAU3f,OAAO,CAAjB,CAAmBA,OAAO,CAAtD,CAAyD,CAA7F,EAA+F;AAClI,SAASgS,OAAT,EAAiB,CAAChb,UAAUyD,IAAV,CAAe,SAAf,EAA2B,SAASm1B,OAAT,EAAiB,CAAC;AAChE,GAAG74B,aAAa84B,QAAb,GAAwBv3B,SAA3B,CAAqC,CAACT,KAAKiG,QAAL,CAAc,KAAd,CAAoB0jB,QAAQ5lB,GAAR,CAAY,CAACi0B,SAAS94B,aAAa84B,QAAvB,CAAZ,EAA8C/zB,QAA9C,CAAuDN,IAAvD,CAA4D,SAASD,MAAT,CAAgB,CAAC1D,KAAKwqB,MAAL,CAAY9mB,MAAZ,CAAmB;AAC1Ji0B,sBAAuB,CADmC,EAChC,CAAC,UAAS,QAASD,cAAT,CAAuBrmB,KAAvB,CAA6B,CAAC;AAClE,GAAGrR,KAAKsnB,UAAL,CAAgBiQ,QAAhB,CAAyBC,GAAzB,GAA+B,EAAlC,CAAqC,CAACx3B,KAAKsnB,UAAL,CAAgBiQ,QAAhB,CAAyBC,GAAzB,CAA6BnmB,KAA7B,CAAoC,CAA1E,IAA+E,IAAGrR,KAAKsnB,UAAL,CAAgBiQ,QAAhB,CAAyBC,GAAzB,GAA+BnmB,KAAlC,CAAwC,CAACrR,KAAKsnB,UAAL,CAAgBiQ,QAAhB,CAAyBC,GAAzB,CAA6B,EAA7B,CAAiC,CAA1E,IAA8E,CAACx3B,KAAKsnB,UAAL,CAAgBiQ,QAAhB,CAAyBE,GAAzB,CAA6BpmB,KAA7B,CAAmC;AACjM,GAAIP,MAAK9Q,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwBE,WAAxB,CAAoCh3B,KAAKsnB,UAAL,CAAgBiQ,QAAhB,CAAyBC,GAA7D,CAAT,CAA2Ex3B,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwBE,WAAxB,CAAoCh3B,KAAKsnB,UAAL,CAAgBiQ,QAAhB,CAAyBC,GAA7D,EAAkEx3B,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwBE,WAAxB,CAAoCh3B,KAAKsnB,UAAL,CAAgBiQ,QAAhB,CAAyBE,GAA7D,CAAlE,CAAoIz3B,KAAKsnB,UAAL,CAAgBwP,OAAhB,CAAwBE,WAAxB,CAAoCh3B,KAAKsnB,UAAL,CAAgBiQ,QAAhB,CAAyBE,GAA7D,EAAkE3mB,IAAlE,CAAuE;AACtRA,KAAK9Q,KAAKwqB,MAAL,CAAYxqB,KAAKwqB,MAAL,CAAY/mB,IAAZ,CAAiB,MAA7B,EAAqCzD,KAAKsnB,UAAL,CAAgBiQ,QAAhB,CAAyBC,GAA9D,CAAL,CAAwEx3B,KAAKwqB,MAAL,CAAYxqB,KAAKwqB,MAAL,CAAY/mB,IAAZ,CAAiB,MAA7B,EAAqCzD,KAAKsnB,UAAL,CAAgBiQ,QAAhB,CAAyBC,GAA9D,EAAmEx3B,KAAKwqB,MAAL,CAAYxqB,KAAKwqB,MAAL,CAAY/mB,IAAZ,CAAiB,MAA7B,EAAqCzD,KAAKsnB,UAAL,CAAgBiQ,QAAhB,CAAyBE,GAA9D,CAAnE,CAAsIz3B,KAAKwqB,MAAL,CAAYxqB,KAAKwqB,MAAL,CAAY/mB,IAAZ,CAAiB,MAA7B,EAAqCzD,KAAKsnB,UAAL,CAAgBiQ,QAAhB,CAAyBE,GAA9D,EAAmE3mB,IAAnE,CAAwE;AACtR9Q,KAAKsnB,UAAL,CAAgBiQ,QAAhB,CAAyBC,GAAzB,CAA6B,EAA7B,CAAgCx3B,KAAKsnB,UAAL,CAAgBiQ,QAAhB,CAAyBE,GAAzB,CAA6B,EAA7B,CAAiC,CAAC,CAAC,CAAC,CA/B+Y,IA+B3Y,CAAC,UAAU,CAAC,aAAa56B,QAAQC,MAAR,CAAe,SAAf,EAA0BgC,UAA1B,CAAqC,kBAArC,CAAwDm5B,gBAAxD,EAA0EA,iBAAiBj5B,OAAjB,CAAyB,CAAC,QAAD,CAAU,mBAAV,CAA8B,MAA9B,CAAqC,kBAArC,CAAzB,CAAkF,QAASi5B,iBAAT,CAA0Bh5B,MAA1B,CAAiCokB,iBAAjC,CAAmD6U,IAAnD,CAAwD/gB,gBAAxD,CAAyE,CAAC,GAAInX,MAAK,IAAT,CAAcA,KAAKma,MAAL,CAAYA,MAAZ,CAAmBna,KAAKk4B,IAAL,CAAUA,IAAV,CAAel4B,KAAKm4B,UAAL,CAAgB,CAAC9xB,KAAK,EAAN,CAASiR,OAAO,EAAhB,CAAhB,CAAoC,QAASoZ,QAAT,EAAkB,CAAC,GAAIxB,UAASlvB,KAAKk4B,IAAL,CAAUz0B,IAAV,CAAe,MAA5B,CAAmCzD,KAAKm4B,UAAL,CAAgB9xB,IAAhB,CAAqB8Q,iBAAiBY,kBAAjB,CAAoC/X,KAAKk4B,IAAL,CAAUhJ,QAAV,CAApC,CAArB,CAA8E,GAAGlvB,KAAKk4B,IAAL,CAAUz0B,IAAV,GAAiB,WAApB,CAAgC,CAACzD,KAAKm4B,UAAL,CAAgB7gB,MAAhB,CAAuBH,iBAAiBc,eAAjB,CAAiCjY,KAAKk4B,IAAL,CAAUhJ,QAAV,CAAjC,CAAvB,CAA8E,CAAC,WAAU,QAAS/U,OAAT,EAAiB,CAACkJ,kBAAkBG,OAAlB,CAA0B,QAA1B,EAAqC,CAAC,CAAC,CAA1oB,IAA8oB,CAAC,UAAU,CAAC,aAAa3mB,QAAQC,MAAR,CAAe,SAAf,EAA0BgC,UAA1B,CAAqC,mBAArC,CAAyDs5B,iBAAzD,EAA4EA,kBAAkBp5B,OAAlB,CAA0B,CAAC,QAAD,CAAU,cAAV,CAAyB,WAAzB,CAAqC,gBAArC,CAAsD,WAAtD,CAAkE,SAAlE,CAA4E,qBAA5E,CAAkG,aAAlG,CAAgH,gBAAhH,CAA1B,CAA4J,QAASo5B,kBAAT,CAA2Bn5B,MAA3B,CAAkCC,YAAlC,CAA+CC,SAA/C,CAAyD5B,cAAzD,CAAwEwC,SAAxE,CAAkF4pB,OAAlF,CAA0FhqB,mBAA1F,CAA8GD,WAA9G,CAA0HG,cAA1H,CAAyI,CAAC,GAAIG,MAAK,IAAT,CAAcA,KAAKC,cAAL,CAAoB1C,cAApB,CAAmCyC,KAAKE,YAAL,CAAkB,CAACE,aAAa,CAAd,CAAgBC,cAAc,KAA9B,CAAoCC,SAAS,EAA7C,CAAgDC,YAAY,KAA5D,CAAkEC,YAAYC,SAA9E,CAAwFK,OAAO,EAA/F,CAAkGC,WAAW,EAA7G,CAAgHC,cAAc,EAA9H,CAAiIC,YAAY,KAA7I,CAAmJC,WAAW,KAA9J,CAAoKC,kBAAkB,EAAtL,CAAyLE,aAAa3B,YAAY4B,eAAZ,EAAtM,CAAlB,CAAuPtB,KAAKkF,IAAL,CAAUA,IAAV,CAAelF,KAAKyB,OAAL,CAAaA,OAAb,CAAqBzB,KAAKq4B,aAAL,CAAmBA,aAAnB,CAAiCr4B,KAAK2B,UAAL,CAAgB,CAACC,YAAY,CAAb,CAAeC,SAAS,EAAxB,CAAhB,CAA4C7B,KAAK8B,MAAL,CAAYA,MAAZ,CAAmB9B,KAAKs4B,UAAL,CAAgB,CAACC,YAAY,EAAb,CAAgBC,WAAW,EAA3B,CAA8BnyB,KAAK,EAAnC,CAAsCiR,OAAO,EAA7C,CAAhB,CAAiEtX,KAAKoC,eAAL,CAAqB,QAArB,CAA8B;AAC5mD,QAASN,OAAT,CAAgB0oB,MAAhB,CAAuB,CAAC7qB,oBAAoB4C,YAApB,CAAiC,UAAU,CAAC,GAAGioB,MAAH,CAAU,CAACA,OAAOhoB,OAAP,GAAiB,IAAI,GAAIC,EAAR,GAAazC,MAAKiqB,OAAlB,CAA0B,CAAC,GAAGjqB,KAAKiqB,OAAL,CAAaxnB,CAAb,IAAkB+nB,MAArB,CAA4B,CAACxqB,KAAKiqB,OAAL,CAAatnB,MAAb,CAAoBF,CAApB,CAAsB,CAAtB,EAA0B,CAAC,CAAC,CAAhH,IAAoH,CAACzC,KAAKwqB,MAAL,CAAYhoB,OAAZ,CAAoB,UAAU,CAACrD,UAAUyD,IAAV,CAAe,SAAf,EAA2B,CAA1D,EAA6D,qBAAoBC,OAApB,CAA4B,UAA5B,CAAuC,iCAAvC,EAA2E,CAAzS,EAA4S;AACpU,QAASqC,KAAT,EAAe,CAAClF,KAAKE,YAAL,CAAkBiB,iBAAlB,CAAoCzB,YAAY2C,oBAAZ,CAAiCrC,KAAKoC,eAAtC,CAApC,CAA2FvC,eAAeuE,OAAf,CAAuB,QAAvB,CAAgCulB,QAAQtlB,KAAR,GAAgBJ,QAAhB,CAAyBN,IAAzB,CAA8B,SAASD,MAAT,CAAgB,CAAC1D,KAAKiqB,OAAL,CAAavmB,MAAb,CAAqB,CAApE,CAAhC,EAAuGE,QAAQC,GAAR,CAAY7D,KAAKiqB,OAAjB,EAA2B;AAC7O,QAASxoB,QAAT,EAAkB,CAACkoB,QAAQ5lB,GAAR,CAAY,CAACi0B,SAAS94B,aAAa84B,QAAvB,CAAZ,EAA8C/zB,QAA9C,CAAuDN,IAAvD,CAA4D,SAASD,MAAT,CAAgB,CAAC1D,KAAKwqB,MAAL,CAAY9mB,MAAZ,CAAmB1D,KAAKs4B,UAAL,CAAgBC,WAAhB,CAA4Bv4B,KAAKwqB,MAAL,CAAY/mB,IAAZ,GAAmB,WAAnB,CAA+B,MAA/B,CAAsC,OAAlE,CAA0EzD,KAAKs4B,UAAL,CAAgBE,UAAhB,CAA2Bx4B,KAAKwqB,MAAL,CAAY/mB,IAAZ,GAAmB,WAAnB,CAA+B,GAA/B,CAAmC,OAA9D,CAAuE,CAAjP,EAAoP,SAAS40B,cAAT,EAAwB,CAAC,GAAIl1B,eAAcpD,UAAUqD,IAAV,CAAe,CAACC,UAAU,IAAX,CAAgBxE,YAAY,2DAA5B,CAAwFC,WAAW,0BAAnG,CAA8HwE,KAAK,IAAnI,CAAwIC,QAAQ,CAAC20B,KAAK,QAASA,KAAT,EAAe,CAAC,MAAOl4B,MAAKwqB,MAAZ,CAAoB,CAA1C,CAAhJ,CAAf,CAAlB,CAAgO,CAAC,CAAC,CAHoN,IAGhN,CAAC,UAAU,CAAC,aAAa3tB,QAAQC,MAAR,CAAe,SAAf,EAA0B8M,SAA1B,CAAoC,oBAApC,CAAyD6uB,kBAAzD,EAA6E,QAASA,mBAAT,EAA6B,CAAC,MAAM,CAAC3uB,SAAS,GAAV,CAAcC,QAAQ,IAAtB,CAA2B4T,WAAW,IAAtC,CAA2CxT,MAAM,EAAjD,CAAoDtL,YAAY,sDAAhE,CAAuHye,QAAQ,iBAA/H,CAAiJpT,KAAK,QAASA,KAAT,CAAcC,KAAd,CAAoBnM,OAApB,CAA4B4W,IAA5B,CAAiC8jB,kBAAjC,CAAoD,CAACvuB,MAAMggB,SAAN,CAAgB,KAAhB,CAAsBhgB,MAAMwuB,SAAN,CAAgBD,mBAAmBC,SAAnC,CAA6CxuB,MAAMuW,QAAN,CAAe1iB,QAAQqT,KAAR,EAAf,CAA+BqnB,mBAAmBE,QAAnB,CAA4BzuB,KAA5B,EAAoC,CAAjV,CAAN,CAA0V,CAAC,CAA/d,IAAme,CAAC,UAAU,CAAC,aAAatN,QAAQC,MAAR,CAAe,SAAf,EAA0B8M,SAA1B,CAAoC,gBAApC,CAAqDivB,cAArD,EAAqE,QAASA,eAAT,EAAyB,CAAC,MAAM,CAAC/uB,SAAS,GAAV,CAAc6T,WAAW,IAAzB,CAA8BL,QAAQ,gBAAtC,CAAuDnT,MAAM,EAA7D,CAAgEtL,YAAY,iDAA5E,CAA8Hua,iBAAiB,IAA/I,CAAoJC,aAAa,gBAAjK,CAAkLva,WAAW,QAASA,WAAT,CAAoBG,MAApB,CAA2B,CAAC,GAAIqa,MAAK,IAAT,CAAcA,KAAKwf,MAAL,CAAY,CAAZ,CAAcxf,KAAKlO,KAAL,CAAW,EAAX,CAAckO,KAAKyf,SAAL,CAAeA,SAAf,CAAyBzf,KAAKsf,QAAL,CAAcA,QAAd,CAAuBtf,KAAK4U,KAAL,CAAW,CAAX,CAAa,QAAS0K,SAAT,CAAkB91B,IAAlB,CAAuB,CAACwW,KAAKlO,KAAL,CAAWpO,IAAX,CAAgB8F,IAAhB,EAAsB,GAAG,CAAC,CAAD,CAAG,CAAH,CAAK,CAAL,EAAQ2I,OAAR,CAAgB3I,KAAK4d,QAArB,EAA+B,CAAC,CAAnC,CAAqC,CAAC5d,KAAKqnB,SAAL,CAAe,IAAf,CAAqB,CAAC,SAAS6O,cAAT,EAAwB,CAAC,GAAI5mB,QAAO,EAAX,CAAc2I,MAAMzB,KAAKwf,MAAL,CAAY,CAAhC,CAAkC,IAAI,GAAIr2B,GAAE,CAAV,CAAYA,EAAE,CAAd,CAAgBA,GAAhB,CAAoB,CAAC2P,OAAOpV,IAAP,CAAY+d,MAAMtY,CAAlB,EAAsB,SAAQsO,OAAR,CAAgBuI,KAAKlO,KAArB,CAA2B,SAAStI,IAAT,CAAc,CAACA,KAAKqnB,SAAL,CAAe/X,OAAO3G,OAAP,CAAe3I,KAAK4d,QAApB,EAA8B,CAAC,CAA9C,CAAiD,CAA3F,EAA8F,SAASqY,UAAT,CAAmBjR,SAAnB,CAA6B,CAAC,GAAGA,YAAY,MAAf,CAAsB,CAAC,GAAGxO,KAAKwf,MAAL,CAAY,CAAZ,CAAc,CAAjB,CAAmB,CAACxf,KAAKwf,MAAL,CAAY,CAAZ,CAAe,CAAnC,IAAuC,CAACxf,KAAKwf,MAAL,EAAa,CAAb,CAAgB,iBAAiB,CAAhG,IAAqG,IAAGhR,YAAY,OAAf,CAAuB,CAAC,GAAGxO,KAAKwf,MAAL,CAAY,CAAZ,CAAc3sB,KAAKC,IAAL,CAAUkN,KAAKlO,KAAL,CAAWjC,MAAX,CAAkB,CAA5B,CAAjB,CAAgD,CAACmQ,KAAKwf,MAAL,EAAa,CAAb,CAAgB,iBAAiB,CAAC,CAAC,CAA71B,CAA81B5uB,KAAK,QAASA,KAAT,CAAcC,KAAd,CAAoBnM,OAApB,CAA4B4W,IAA5B,CAAiC5U,IAAjC,CAAsC,CAAC,GAAI+L,IAAG/N,QAAQ,CAAR,CAAP,CAAkBi7B,MAAMltB,GAAGgiB,QAAH,CAAY,CAAZ,CAAxB,CAAuC5jB,MAAM+uB,QAAN,CAAe,CAACD,MAAMA,KAAP,CAAa9K,MAAM8K,MAAM9K,KAAzB,CAA+BhqB,MAAM,CAArC,CAAf,CAAuD,QAASg1B,aAAT,EAAuB,CAACn5B,KAAKkuB,KAAL,CAAW,CAACniB,GAAGwgB,WAAf,CAA2BvsB,KAAK24B,SAAL,CAAe5sB,GAAGwgB,WAAH,CAAe,CAA9B,CAAgC1vB,QAAQkU,OAAR,CAAgB/Q,KAAKoL,KAArB,CAA2B,SAAStI,IAAT,CAAc,CAACA,KAAK61B,SAAL,CAAe34B,KAAK24B,SAApB,CAA+B,CAAzE,EAA4E,gBAAex6B,OAAO6N,gBAAP,CAAwB,QAAxB,CAAiC,SAASpB,CAAT,CAAW,CAAC,GAAGmB,GAAGwgB,WAAH,GAAiBpgB,KAAK8kB,GAAL,CAASjxB,KAAKkuB,KAAd,CAApB,CAAyC,CAACiL,eAAehvB,MAAMM,MAAN,GAAgB,CAAC,CAAvH,EAA0H,CAAhxC,CAAN,CAAyxC,CAAC,CAAl5C,IAAs5C,CAAC,UAAU,CAAC,aAAa5N,QAAQC,MAAR,CAAe,SAAf,EAA0B8M,SAA1B,CAAoC,OAApC,CAA4CwvB,KAA5C,EAAmD,QAASA,MAAT,EAAgB,CAAC,MAAM,CAACtvB,SAAS,GAAV,CAAcwT,QAAQ,SAAtB,CAAgCpT,KAAK,QAASA,KAAT,CAAcC,KAAd,CAAoBmB,IAApB,CAAyBsJ,IAAzB,CAA8B5U,IAA9B,CAAmC,CAACmK,MAAMzB,MAAN,CAAakM,KAAKwkB,KAAlB,CAAwB,UAAU,CAAC,GAAGp5B,KAAKq5B,QAAR,CAAiBr5B,KAAKiuB,aAAL,CAAmBjuB,KAAKguB,UAAxB,EAAqC,CAAzF,EAA2F,GAAIsL,SAAQ,QAASA,QAAT,CAAiBn1B,KAAjB,CAAuB,CAAC,MAAOtH,SAAQ08B,WAAR,CAAoBp1B,KAApB,GAA4BA,QAAQ,EAApC,EAAwCA,QAAQ,IAAvD,CAA6D,CAAjG,CAAkG,GAAIq1B,cAAa,QAASA,aAAT,CAAsBr1B,KAAtB,CAA4B,CAAC,GAAI2P,KAAI3J,MAAM4O,KAAN,CAAYnE,KAAKwkB,KAAjB,GAAyBK,QAAjC,CAA0C,GAAG,CAACH,QAAQn1B,KAAR,CAAD,EAAiBA,MAAM2P,GAA1B,CAA8B,CAAC9T,KAAK05B,YAAL,CAAkB,OAAlB,CAA0B,KAA1B,EAAiC,MAAOj5B,UAAP,CAAkB,CAAlF,IAAsF,CAACT,KAAK05B,YAAL,CAAkB,OAAlB,CAA0B,IAA1B,EAAgC,MAAOv1B,MAAP,CAAc,CAAC,CAA9N,CAA+NnE,KAAK25B,QAAL,CAAc38B,IAAd,CAAmBw8B,YAAnB,EAAiCx5B,KAAKwd,WAAL,CAAiBxgB,IAAjB,CAAsBw8B,YAAtB,EAAqC,CAA3iB,CAAN,CAAojB,CAAC,CAAlpB,IAAspB,CAAC,UAAU,CAAC,aAAa38B,QAAQC,MAAR,CAAe,SAAf,EAA0B8M,SAA1B,CAAoC,OAApC,CAA4CgwB,KAA5C,EAAmD,QAASA,MAAT,EAAgB,CAAC,MAAM,CAAC9vB,SAAS,GAAV,CAAcwT,QAAQ,SAAtB,CAAgCpT,KAAK,QAASA,KAAT,CAAcC,KAAd,CAAoBmB,IAApB,CAAyBsJ,IAAzB,CAA8B5U,IAA9B,CAAmC,CAACmK,MAAMzB,MAAN,CAAakM,KAAKglB,KAAlB,CAAwB,UAAU,CAAC,GAAG55B,KAAKq5B,QAAR,CAAiBr5B,KAAKiuB,aAAL,CAAmBjuB,KAAKguB,UAAxB,EAAqC,CAAzF,EAA2F,GAAIsL,SAAQ,QAASA,QAAT,CAAiBn1B,KAAjB,CAAuB,CAAC,MAAOtH,SAAQ08B,WAAR,CAAoBp1B,KAApB,GAA4BA,QAAQ,EAApC,EAAwCA,QAAQ,IAAvD,CAA6D,CAAjG,CAAkG,GAAI01B,cAAa,QAASA,aAAT,CAAsB11B,KAAtB,CAA4B,CAAC,GAAI21B,KAAI3vB,MAAM4O,KAAN,CAAYnE,KAAKglB,KAAjB,GAAyB,CAAjC,CAAmC,GAAG,CAACN,QAAQn1B,KAAR,CAAD,EAAiBA,MAAM21B,GAA1B,CAA8B,CAAC95B,KAAK05B,YAAL,CAAkB,OAAlB,CAA0B,KAA1B,EAAiC,MAAOj5B,UAAP,CAAkB,CAAlF,IAAsF,CAACT,KAAK05B,YAAL,CAAkB,OAAlB,CAA0B,IAA1B,EAAgC,MAAOv1B,MAAP,CAAc,CAAC,CAAvN,CAAwNnE,KAAK25B,QAAL,CAAc38B,IAAd,CAAmB68B,YAAnB,EAAiC75B,KAAKwd,WAAL,CAAiBxgB,IAAjB,CAAsB68B,YAAtB,EAAqC,CAApiB,CAAN,CAA6iB,CAAC,CAA3oB,IAA+oB,CAAC,UAAU,CAAC,aAAah9B,QAAQC,MAAR,CAAe,SAAf,EAA0B8M,SAA1B,CAAoC,SAApC,CAA8CmwB,OAA9C,EAAuD,QAASA,QAAT,EAAkB,CAAC,MAAM,CAACjwB,SAAS,GAAV,CAAcC,QAAQ,IAAtB,CAA2B4T,WAAW,IAAtC,CAA2CxT,MAAM,EAAjD,CAAoDmT,QAAQ,QAA5D,CAAqEze,YAAY,sCAAjF,CAAwHqL,KAAK,QAASA,KAAT,CAAcC,KAAd,CAAoBupB,GAApB,CAAwBtpB,KAAxB,CAA8B4vB,eAA9B,CAA8C,CAAC7vB,MAAMyT,MAAN,CAAa,KAAb,CAAmBzT,MAAM8vB,UAAN,CAAiBvG,IAAIriB,KAAJ,GAAY,CAA7B,CAA+B2oB,gBAAgBpB,QAAhB,CAAyBzuB,KAAzB,EAAiC,CAA/P,CAAN,CAAwQ,CAAC,CAA5W,IAAgX,CAAC,UAAU,CAAC,aAAatN,QAAQC,MAAR,CAAe,SAAf,EAA0B8M,SAA1B,CAAoC,cAApC,CAAmDswB,YAAnD,EAAiE,QAASA,aAAT,EAAuB,CAAC,MAAM,CAACpwB,SAAS,GAAV,CAAcC,QAAQ,IAAtB,CAA2B4T,WAAW,IAAtC,CAA2CgP,SAAS,wEAAwE,QAA5H,CAAN,CAA6I,CAAC,CAAhQ,IAAoQ,CAAC,UAAU,CAAC,aAAa9vB,QAAQC,MAAR,CAAe,SAAf,EAA0B8M,SAA1B,CAAoC,OAApC,CAA4CitB,KAA5C,EAAmD,QAASA,MAAT,EAAgB,CAAC,MAAM,CAAC/sB,SAAS,GAAV,CAAc6T,WAAW,IAAzB,CAA8BxT,MAAM,CAACmd,WAAW,GAAZ,CAApC,CAAqDqF,SAAS,oCAAoC,QAAlG,CAA2GvT,iBAAiB,IAA5H,CAAiIC,aAAa,OAA9I,CAAsJva,WAAW,QAASA,WAAT,CAAoBG,MAApB,CAA2B,CAAC,GAAIqa,MAAK,IAAT,CAAcA,KAAKsf,QAAL,CAAcA,QAAd,CAAuBtf,KAAKud,KAAL,CAAW,EAAX,CAAc,QAAS+B,SAAT,CAAkB/Q,IAAlB,CAAuB,CAACvO,KAAKud,KAAL,CAAW75B,IAAX,CAAgB6qB,IAAhB,EAAsB,GAAGA,KAAKoS,UAAL,GAAkB,CAArB,CAAuB,CAACpS,KAAKjK,MAAL,CAAY,IAAZ,CAAkB,CAAC,CAAC,CAA1U,CAA2U1T,KAAK,QAASA,KAAT,CAAcC,KAAd,CAAoBnM,OAApB,CAA4BoM,KAA5B,CAAkC4vB,eAAlC,CAAkD,CAAC7vB,MAAMzB,MAAN,CAAa,8BAAb,CAA4C,SAASwa,QAAT,CAAkB,CAAC,GAAGA,WAAWziB,SAAd,CAAwB,CAACmD,QAAQC,GAAR,CAAY,SAAZ,CAAsBqf,QAAtB,EAAgCrmB,QAAQkU,OAAR,CAAgBipB,gBAAgBnD,KAAhC,CAAsC,SAAShP,IAAT,CAAc,CAAC,GAAGA,KAAKoS,UAAL,GAAkB/W,QAArB,CAA8B,CAAC2E,KAAKjK,MAAL,CAAY,KAAZ,CAAmB,CAAlD,IAAsD,CAACiK,KAAKjK,MAAL,CAAY,IAAZ,CAAkB,CAAC,CAA/H,EAAkI,CAAC,CAA3P,EAA8P,CAAjoB,CAAN,CAA0oB,CAAC,CAAxuB,IAA4uB,CAAC,UAAU,CAAC,aAAa/gB,QAAQC,MAAR,CAAe,SAAf,EAA0B8M,SAA1B,CAAoC,QAApC,CAA6CuwB,MAA7C,EAAqD,QAASA,OAAT,EAAiB,CAAC,MAAM,CAACrwB,SAAS,GAAV,CAAcK,MAAM,EAApB,CAAuBD,KAAK,QAASA,KAAT,CAAcC,KAAd,CAAoBnM,OAApB,CAA4BoM,KAA5B,CAAkC,CAACjM,OAAO6N,gBAAP,CAAwB,QAAxB,CAAiC,SAASouB,GAAT,CAAa,CAAC,GAAIC,aAAY,mBAAhB,CAAoCC,iBAAiB,wBAArD,CAA8EC,UAAUt8B,SAAS0e,IAAT,CAAc4d,SAAtG,CAAgH7G,IAAI11B,QAAQ,CAAR,CAApH,CAA+Hw8B,MAAM9G,IAAI3F,QAAJ,CAAa,CAAb,CAArI,CAAqJ0M,eAAe/G,IAAIgH,qBAAJ,EAApK,CAAgMC,kBAAkBF,eAAeG,GAAjO,CAAqO;AAC77K;AACA,GAAGD,kBAAkB,EAArB,CAAwB,CAAC;AACzBjH,IAAIlH,SAAJ,CAAcla,GAAd,CAAkB+nB,WAAlB,EAA+BG,MAAMhO,SAAN,CAAgBla,GAAhB,CAAoBgoB,gBAApB,EAAuC;AACtE,GAAGK,kBAAkB,EAAlB,EAAsBJ,UAAU,EAAnC,CAAsC,CAAC;AACvC7G,IAAIlH,SAAJ,CAAc1qB,MAAd,CAAqBu4B,WAArB,EAAkCG,MAAMhO,SAAN,CAAgB1qB,MAAhB,CAAuBw4B,gBAAvB,EAA0C,CAAC,CAL4lK,EAKzlK,CAL0hK,CAAN,CAKjhK,CAAC,CALg7J,IAK56J,CAAC,UAAU,CAAC,aAAaz9B,QAAQC,MAAR,CAAe,SAAf,EAA0B4P,MAA1B,CAAiC,cAAjC,CAAgDmuB,YAAhD,EAA8D,QAASA,aAAT,EAAuB,CAAC,MAAO,UAASjuB,KAAT,CAAe2rB,WAAf,CAA2Bp0B,KAA3B,CAAiC,CAAC,GAAGyI,QAAQnM,SAAX,CAAqB,CAAC,MAAOmM,OAAMF,MAAN,CAAa,SAAS5J,IAAT,CAAc,CAAC,GAAGA,KAAKy1B,WAAL,EAAkB5iB,WAAlB,GAAgClK,OAAhC,CAAwCtH,MAAMwR,WAAN,EAAxC,EAA6D,CAAC,CAAjE,CAAmE,CAAC,MAAO7S,KAAP,CAAa,CAAC,CAA9G,CAAP,CAAwH,CAAC,CAAxL,CAA0L,CAAC,CAA1S,IAA8S,CAAC,UAAU,CAAC,aAAa;AAC/ZjG,QAAQC,MAAR,CAAe,SAAf,EAA0BoR,OAA1B,CAAkC,SAAlC,CAA4C4sB,cAA5C,EAA4DA,eAAe97B,OAAf,CAAuB,CAAC,WAAD,CAAvB,CAAqC,QAAS87B,eAAT,CAAwBnsB,SAAxB,CAAkC,CAAC,MAAOA,WAAU,mBAAV,CAA8B,CAACqpB,SAAS,MAAV,CAA9B,CAAgD,CAAC/1B,OAAO,CAAC2M,OAAO,KAAR,CAAR,CAAhD,CAAP,CAAiF,CAAC,CADgL,IAC5K,aAAa;AACvO/R,QAAQC,MAAR,CAAe,OAAf,EAAwBG,MAAxB,CAA+B,CAAC,eAAD,CAAiB,SAAS89B,aAAT,CAAuB,CAAC;AACxEA,cAAcC,YAAd,CAA2Bh+B,IAA3B,CAAgC,CAAC,IAAD,CAAM,WAAN,CAAkB,gBAAlB,CAAmC,SAASkX,EAAT,CAAY/U,SAAZ,CAAsB5B,cAAtB,CAAqC,CAAC,MAAM,CAAC09B,cAAc,QAASA,cAAT,CAAuBC,SAAvB,CAAiC,CAAC,OAAOA,UAAU52B,MAAjB,EAAyB,IAAK,IAAL,CAAS;AAClM/G,eAAeK,IAAf,CAAoB,IAApB,CAAyB;AACzBuB,UAAUyD,IAAV,CAAe,QAAf,EAAyB,MAAM,IAAK,IAAL,CAAS;AACxC,MAHgK,CAGzJ,MAAOsR,IAAGY,MAAH,CAAUomB,SAAV,CAAP,CAA6B,CAH2E,CAAN,CAGlE,CAHP,CAAhC,EAG2C,CAJZ,CAA/B,EAI8C,aAAa;AAC3Dr+B,QAAQC,MAAR,CAAe,OAAf,EAAwBG,MAAxB,CAA+B,CAAC,gBAAD,CAAkB,SAASyB,cAAT,CAAwB,CAAC;AAC1EA,eAAeC,KAAf,CAAqB,SAArB,CAA+B,CAACC,IAAI,mBAAL,CAAyBC,YAAY,4DAArC,CAA/B,EAAmIF,KAAnI,CAAyI,UAAzI,CAAoJ,CAACC,IAAI,oBAAL,CAA0BC,YAAY,+DAAtC,CAApJ,EAA4PF,KAA5P,CAAkQ,UAAlQ,CAA6Q,CAACC,IAAI,oBAAL,CAA0BC,YAAY,+DAAtC,CAA7Q,EAAqX;AACrX;AACA;AACA;AACAF,KAJA,CAIM,QAJN,CAIe,CAACC,IAAI,SAAL,CAAeC,YAAY,4DAA3B,CAJf,EAIyGF,KAJzG,CAI+G,QAJ/G,CAIwH,CAACC,IAAI,kBAAL,CAAwBC,YAAY,+DAApC,CAJxH,EAI8NF,KAJ9N,CAIoO,eAJpO,CAIoP,CAACC,IAAI,yBAAL,CAA+BC,YAAY,sEAA3C,CAJpP,EAIwWF,KAJxW,CAI8W,eAJ9W,CAI8X,CAACC,IAAI,yBAAL,CAA+BC,YAAY,sEAA3C,CAJ9X,EAIkfF,KAJlf,CAIwf,OAJxf,CAIggB,CAACC,IAAI,wBAAL,CAA8BC,YAAY,8DAA1C,CAJhgB,EAI4mB,CAL7kB,CAA/B,EAK+mB,CAAC,UAAU,CAAC,aAAahC,QAAQC,MAAR,CAAe,OAAf,EAAwBgC,UAAxB,CAAmC,0BAAnC,CAA8Dq8B,wBAA9D,EAAwFA,yBAAyBn8B,OAAzB,CAAiC,CAAC,QAAD,CAAU,OAAV,CAAkB,WAAlB,CAA8B,gBAA9B,CAAjC,CAAiF,QAASm8B,yBAAT,CAAkCl8B,MAAlC,CAAyC6P,KAAzC,CAA+C3P,SAA/C,CAAyD5B,cAAzD,CAAwE,CAAC,GAAIyC,MAAK,IAAT,CAAcA,KAAKC,cAAL,CAAoB1C,cAApB,CAAmCyC,KAAKo7B,MAAL,CAAYA,MAAZ,CAAmBp7B,KAAKq7B,MAAL,CAAYA,MAAZ,CAAmB,QAASA,OAAT,EAAiB,CAACvsB,MAAMK,IAAN,CAAW,cAAX,CAA0BnP,KAAKs7B,WAA/B,EAA4Cp0B,OAA5C,CAAoD,SAASD,QAAT,CAAkB,CAAC;AAC1iCjH,KAAKC,cAAL,CAAoBrC,IAApB,CAAyBqJ,QAAzB,CAAkC;AAClC9H,UAAUyD,IAAV,CAAe,SAAf,EAA2B,CAFw8B,EAEt8BwE,KAFs8B,CAEh8B,SAASH,QAAT,CAAkB,CAACjH,KAAKoH,KAAL,CAAWH,SAASI,OAApB,CAA6B,CAFg5B,EAE74B,SAAS+zB,OAAT,EAAiB,CAACp7B,KAAKs7B,WAAL,CAAiBC,QAAjB,CAA0B,UAA1B,CAAqCzsB,MAAMK,IAAN,CAAW,cAAX,CAA0BnP,KAAKs7B,WAA/B,EAA4Cp0B,OAA5C,CAAoD,SAASD,QAAT,CAAkB,CAAC;AACpNjH,KAAKC,cAAL,CAAoBrC,IAApB,CAAyBqJ,QAAzB,CAAkCjH,KAAKw7B,SAAL,CAAe,IAAf,CAAoB;AACtDr8B,UAAUyD,IAAV,CAAe,QAAf,EAA0B,CAFmH,EAEjHwE,KAFiH,CAE3G,SAASH,QAAT,CAAkB,CAACjH,KAAKoH,KAAL,CAAWH,SAASI,OAApB,CAA6B,CAF2D,EAExD,CAAC,CAAC,CAJwhB,IAIphB,aAAaxK,QAAQC,MAAR,CAAe,OAAf,EAAwBgC,UAAxB,CAAmC,oBAAnC,CAAwD,CAAC,QAAD,CAAU,cAAV,CAAyB,OAAzB,CAAiC,WAAjC,CAA6C,gBAA7C,CAA8D,SAASG,MAAT,CAAgBC,YAAhB,CAA6B4P,KAA7B,CAAmC3P,SAAnC,CAA6C5B,cAA7C,CAA4D,CAAC0B,OAAOgB,cAAP,CAAsB1C,cAAtB,CAAqC;AAChU,GAAG0B,OAAOgB,cAAP,CAAsBrC,IAAzB,CAA8BuB,UAAUyD,IAAV,CAAe,GAAf,EAAoB;AAClD3D,OAAOw8B,mBAAP,CAA2B,UAAU,CAACx8B,OAAOiI,OAAP,CAAejI,OAAOmI,KAAP,CAAa,IAA5B,CAAiC0H,MAAMK,IAAN,CAAW,cAAX,CAA0BlQ,OAAOq8B,WAAjC,EAA8Cp0B,OAA9C,CAAsD,SAASD,QAAT,CAAkB,CAAC;AAChJhI,OAAOq8B,WAAP,CAAmB,IAAnB,CAAwBr8B,OAAOiI,OAAP,CAAeD,SAASI,OAAxB,CAAiC,CADc,EACZD,KADY,CACN,SAASH,QAAT,CAAkB,CAAC;AACpFhI,OAAOq8B,WAAP,CAAmB,IAAnB,CAAwBr8B,OAAOmI,KAAP,CAAaH,SAASI,OAAtB,CAA+B,CAFgB,EAEb,CAF1D,CAE2D;AAC3DpI,OAAOy8B,iBAAP,CAAyB,UAAU,CAACz8B,OAAOiI,OAAP,CAAejI,OAAOmI,KAAP,CAAa,IAA5B,CAAiC0H,MAAMK,IAAN,CAAW,eAAejQ,aAAay8B,KAAvC,CAA6C18B,OAAO28B,eAApD,EAAqE10B,OAArE,CAA6E,SAASD,QAAT,CAAkB,CAAC;AACrKhI,OAAO28B,eAAP,CAAuB,IAAvB,CAA4B;AAC5Br+B,eAAeK,IAAf,CAAoBqJ,QAApB,CAA6B;AAC7B9H,UAAUyD,IAAV,CAAe,yBAAf,EAA2C,CAH0B,EAGxBwE,KAHwB,CAGlB,SAASH,QAAT,CAAkB,CAAChI,OAAOmI,KAAP,CAAaH,SAASI,OAAtB,CAA+B,CAHhC,EAGmC,CAHxG,CAG0G,CARsD,CAAxD,EAQK,aAAaxK,QAAQC,MAAR,CAAe,OAAf,EAAwBgC,UAAxB,CAAmC,oBAAnC,CAAwD,CAAC,QAAD,CAAU,OAAV,CAAkB,WAAlB,CAA8B,OAA9B,CAAsC,gBAAtC,CAAuD,SAASG,MAAT,CAAgB6P,KAAhB,CAAsB3P,SAAtB,CAAgC08B,KAAhC,CAAsCt+B,cAAtC,CAAqD,CAAC0B,OAAOrB,IAAP,CAAYL,eAAeK,IAA3B,CAAgC;AAC/T,GAAG,CAACqB,OAAOrB,IAAX,CAAgBuB,UAAUyD,IAAV,CAAe,GAAf,EAAoB;AACpC3D,OAAO68B,oCAAP,CAA4C,SAASC,QAAT,CAAkB,CAAC,IAAI,GAAIt5B,EAAR,GAAaxD,QAAOrB,IAAP,CAAYo+B,uBAAzB,CAAiD,CAAC,MAAO,KAAP,CAAa,OAAO,MAAP,CAAc,CAA5I,CAA6I;AAC7I/8B,OAAOg9B,wBAAP,CAAgC,SAASF,QAAT,CAAkB,CAAC,MAAO98B,QAAOrB,IAAP,CAAYm+B,QAAZ,GAAuBA,QAAvB,EAAiC98B,OAAOrB,IAAP,CAAYo+B,uBAAZ,EAAqC/8B,OAAOrB,IAAP,CAAYo+B,uBAAZ,CAAoCD,QAApC,CAA7E,CAA4H,CAA/K,CAAgL;AAChL98B,OAAOi9B,uBAAP,CAA+B,SAASH,QAAT,CAAkB,CAAC98B,OAAOiI,OAAP,CAAejI,OAAOmI,KAAP,CAAa,IAA5B,CAAiC0H,MAAMqtB,MAAN,CAAa,iBAAb,CAA+B,CAACC,OAAO,CAACL,SAASA,QAAV,CAAR,CAA/B,EAA6D70B,OAA7D,CAAqE,SAASD,QAAT,CAAkB,CAAC;AAC3KhI,OAAOiI,OAAP,CAAe,IAAf,CAAoBjI,OAAOrB,IAAP,CAAYL,eAAeK,IAAf,CAAoBqJ,QAAhC,CAA0C,CADqB,EACnBG,KADmB,CACb,SAASH,QAAT,CAAkB,CAAChI,OAAOmI,KAAP,CAAaH,SAASI,OAAtB,CAA+B,CADrC,EACwC,CAD3H,CAC4H;AAC5HpI,OAAOo9B,iBAAP,CAAyB,SAASC,OAAT,CAAiB,CAAC,GAAGA,OAAH,CAAW,CAACr9B,OAAOiI,OAAP,CAAejI,OAAOmI,KAAP,CAAa,IAA5B,CAAiC,GAAIxJ,MAAK,GAAIi+B,MAAJ,CAAU58B,OAAOrB,IAAjB,CAAT,CAAgCA,KAAK4Q,OAAL,CAAa,SAASvH,QAAT,CAAkB,CAAChI,OAAOiI,OAAP,CAAe,IAAf,CAAoB3J,eAAeK,IAAf,CAAoBqJ,QAApB,CAA8B,CAAlF,CAAmF,SAASA,QAAT,CAAkB,CAAChI,OAAOmI,KAAP,CAAaH,SAASzD,IAAT,CAAc6D,OAA3B,CAAoC,CAA1I,EAA6I,CAA1N,IAA8N,CAACpI,OAAOs9B,SAAP,CAAiB,IAAjB,CAAuB,CAAC,CAAlS,CAAmS;AACnSt9B,OAAOu9B,kBAAP,CAA0B,UAAU,CAACv9B,OAAOiI,OAAP,CAAejI,OAAOmI,KAAP,CAAa,IAA5B,CAAiC0H,MAAMK,IAAN,CAAW,iBAAX,CAA6BlQ,OAAO28B,eAApC,EAAqD10B,OAArD,CAA6D,SAASD,QAAT,CAAkB,CAAC;AACtJhI,OAAOiI,OAAP,CAAe,IAAf,CAAoBjI,OAAO28B,eAAP,CAAuB,IAAvB,CAA6B,CADqB,EACnBx0B,KADmB,CACb,SAASH,QAAT,CAAkB,CAAChI,OAAOmI,KAAP,CAAaH,SAASI,OAAtB,CAA+B,CADrC,EACwC,CAD9G,CACgH,CARkE,CAAxD,EAQP,CAAC,UAAU,CAAC,aAAa;AAC5IxK,QAAQC,MAAR,CAAe,OAAf,EAAwBoR,OAAxB,CAAgC,gBAAhC,CAAiDuuB,qBAAjD,EAAwE,QAASA,sBAAT,EAAgC,CAAC,GAAI/U,OAAM,IAAV,CAAeA,MAAMgV,KAAN,CAAY,CAAC9+B,KAAKO,OAAOP,IAAb,CAAZ,CAA+B,MAAO8pB,OAAMgV,KAAb,CAAoB,CAAC,CADzD,IAC6D,CAAC,UAAU,CAAC,aAAa;AACzM7/B,QAAQC,MAAR,CAAe,OAAf,EAAwBoR,OAAxB,CAAgC,OAAhC,CAAwCyuB,YAAxC,EAAsDA,aAAa39B,OAAb,CAAqB,CAAC,WAAD,CAArB,CAAmC,QAAS29B,aAAT,CAAsBhuB,SAAtB,CAAgC,CAAC,MAAOA,WAAU,OAAV,CAAkB,EAAlB,CAAqB,CAAC1M,OAAO,CAAC2M,OAAO,KAAR,CAAR,CAArB,CAAP,CAAsD,CAAC,CADD,IACK;AACrL;AACA;AACA;AACA;AACA","file":"application.js","sourcesContent":["'use strict';// Init the application configuration module for AngularJS application\nvar _typeof6=typeof Symbol===\"function\"&&typeof Symbol.iterator===\"symbol\"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj;};var _typeof5=typeof Symbol===\"function\"&&_typeof6(Symbol.iterator)===\"symbol\"?function(obj){return typeof obj===\"undefined\"?\"undefined\":_typeof6(obj);}:function(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj===\"undefined\"?\"undefined\":_typeof6(obj);};var _typeof4=typeof Symbol===\"function\"&&_typeof5(Symbol.iterator)===\"symbol\"?function(obj){return typeof obj===\"undefined\"?\"undefined\":_typeof5(obj);}:function(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj===\"undefined\"?\"undefined\":_typeof5(obj);};var _typeof3=typeof Symbol===\"function\"&&_typeof4(Symbol.iterator)===\"symbol\"?function(obj){return typeof obj===\"undefined\"?\"undefined\":_typeof4(obj);}:function(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj===\"undefined\"?\"undefined\":_typeof4(obj);};var _typeof2=typeof Symbol===\"function\"&&_typeof3(Symbol.iterator)===\"symbol\"?function(obj){return typeof obj===\"undefined\"?\"undefined\":_typeof3(obj);}:function(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj===\"undefined\"?\"undefined\":_typeof3(obj);};var _typeof=typeof Symbol===\"function\"&&_typeof2(Symbol.iterator)===\"symbol\"?function(obj){return typeof obj===\"undefined\"?\"undefined\":_typeof2(obj);}:function(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj===\"undefined\"?\"undefined\":_typeof2(obj);};var ApplicationConfiguration=function(){// Init module configuration options\nvar applicationModuleName='mylist';var applicationModuleVendorDependencies=['ngResource','ngCookies','ngAnimate','ngTouch','ngSanitize','ui.router','ui.bootstrap','ui.utils','angularFileUpload','angularMoment'];// Add a new vertical module\nvar registerModule=function registerModule(moduleName,dependencies){// Create angular module\nangular.module(moduleName,dependencies||[]);// Add the module to the AngularJS configuration file\nangular.module(applicationModuleName).requires.push(moduleName);};return{applicationModuleName:applicationModuleName,applicationModuleVendorDependencies:applicationModuleVendorDependencies,registerModule:registerModule};}();'use strict';//Start by defining the main module and adding the module dependencies\nangular.module(ApplicationConfiguration.applicationModuleName,ApplicationConfiguration.applicationModuleVendorDependencies);// Setting HTML5 Location Mode\nangular.module(ApplicationConfiguration.applicationModuleName).config(['$locationProvider',function($locationProvider){$locationProvider.hashPrefix('!');}]);angular.module(ApplicationConfiguration.applicationModuleName).run(['$rootScope','$state','Authentication',function($rootScope,$state,Authentication){$rootScope.$on('$stateChangeStart',function(event,toState){if(toState.name==='signin'){if(Authentication.user._id){event.preventDefault();$state.go('listTasks');}else{return;}}if(!Authentication.user){event.preventDefault();$state.go('signin');}});}]);//Then define the init function for starting up the application\nangular.element(document).ready(function(){//Fixing facebook bug with redirect\nif(window.location.hash==='#_=_')window.location.hash='#!';//Then init the app\nangular.bootstrap(document,[ApplicationConfiguration.applicationModuleName]);});'use strict';// Use applicaion configuration module to register a new module\nApplicationConfiguration.registerModule('animeitems');'use strict';// Use applicaion configuration module to register a new module\nApplicationConfiguration.registerModule('characters');'use strict';// Use Applicaion configuration module to register a new module\nApplicationConfiguration.registerModule('core');'use strict';// Use Applicaion configuration module to register a new module\nApplicationConfiguration.registerModule('history');'use strict';// Use applicaion configuration module to register a new module\nApplicationConfiguration.registerModule('mangaitems');'use strict';// Use applicaion configuration module to register a new module\nApplicationConfiguration.registerModule('orders');'use strict';// Use Applicaion configuration module to register a new module\nApplicationConfiguration.registerModule('ratings');'use strict';// Use Applicaion configuration module to register a new module\nApplicationConfiguration.registerModule('statistics');'use strict';// Use applicaion configuration module to register a new module\nApplicationConfiguration.registerModule('tasks');'use strict';// Use applicaion configuration module to register a new module\nApplicationConfiguration.registerModule('toptens');'use strict';// Use Applicaion configuration module to register a new module\nApplicationConfiguration.registerModule('users');'use strict';// Configuring the Articles module\nangular.module('animeitems').run(['Menus',function(Menus){// Set top bar menu items\nMenus.addMenuItem('topbar','Animeitems','animeitems','dropdown');Menus.addSubMenuItem('topbar','animeitems','List Animeitems','animeitems');Menus.addSubMenuItem('topbar','animeitems','Watch Animeitems','animeitems/watch-list');Menus.addSubMenuItem('topbar','animeitems','New Animeitem','animeitems/create');}]);'use strict';//Setting up route\nangular.module('animeitems').config(['$stateProvider',function($stateProvider){// Animeitems state routing\n$stateProvider.state('listAnimeitems',{url:'/animeitems',templateUrl:'modules/animeitems/views/list-animeitems.client.view.html',controller:'AnimeitemsController as ctrl'}).state('watchListAnimeitems',{url:'/animeitems/watch-list',templateUrl:'modules/animeitems/views/list-animeitems.client.view.html',controller:'WatchListController as ctrl'}).state('createAnimeitem',{url:'/animeitems/create',templateUrl:'modules/animeitems/views/create-animeitem.client.view.html'}).state('viewAnimeitem',{url:'/animeitems/:animeitemId',templateUrl:'modules/animeitems/views/view-animeitem.client.view.html'}).state('editAnimeitem',{url:'/animeitems/:animeitemId/edit',templateUrl:'modules/animeitems/views/create-animeitem.client.view.html'}).state('watchAnimeitem',{url:'/animeitems/watch/:animeitemId',templateUrl:'modules/animeitems/views/watch-animeitem.client.view.html'});}]);(function(){'use strict';angular.module('animeitems').controller('AnimeitemsController',AnimeitemsController);AnimeitemsController.$inject=['$scope','$stateParams','$location','Authentication','Animeitems','Mangaitems','fileUpload','$sce','$window','ItemService','ListService','NotificationFactory','AnimeFactory','spinnerService','TagService','$uibModal'];function AnimeitemsController($scope,$stateParams,$location,Authentication,Animeitems,Mangaitems,fileUpload,$sce,$window,ItemService,ListService,NotificationFactory,AnimeFactory,spinnerService,TagService,$uibModal){var ctrl=this;ctrl.authentication=Authentication;ctrl.filterConfig={ongoingList:true,showingCount:0,expandFilters:false,sortType:'',sortReverse:true,ratingLevel:undefined,ratingActions:{maxRating:10,percent:undefined,overStar:null},search:{},searchTags:'',tagsForFilter:[],taglessItem:false,areTagless:false,selectListOptions:{},statTags:[],commonArrays:ListService.getCommonArrays(),getItemsAvailable:getItemsAvailable,viewItem:''};ctrl.findOne=findOne;ctrl.latestDate=latestDate;ctrl.pageConfig={currentPage:0,pageSize:10};ctrl.remove=remove;ctrl.tickOff=tickOff;ctrl.trustAsResourceUrl=trustAsResourceUrl;ctrl.update=update;ctrl.usedTags=[];//for typeahead array.\nctrl.viewItemHistory=viewItemHistory;ctrl.whichController='animeitem';ctrl.filterConfig.selectListOptions=ListService.getSelectListOptions(ctrl.whichController);//allow retreival of local resource\nfunction trustAsResourceUrl(url){return $sce.trustAsResourceUrl(url);}// Remove existing Animeitem\nfunction remove(animeitem){//are you sure option...\nNotificationFactory.confirmation(function(){if(animeitem){animeitem.$remove();for(var i in ctrl.animeitems){if(ctrl.animeitems[i]===animeitem){ctrl.animeitems.splice(i,1);}}}else{ctrl.animeitem.$remove(function(){$location.path('animeitems');});}NotificationFactory.warning('Deleted!','Anime was successfully deleted.');});}// Update existing Animeitem\nfunction update(){var animeitem=ctrl.animeitem;ctrl.animeitem=undefined;AnimeFactory.update(animeitem,undefined,true,undefined);}function tickOff(item){item.episodes+=1;item.latest=new Date();//update latest.\nctrl.animeitem=item;ctrl.update();}//latest date display format.\nfunction latestDate(latest,updated){return ItemService.latestDate(latest,updated);}function viewItemHistory(){var modalInstance=$uibModal.open({animation:true,templateUrl:'/modules/history/views/item-history.html',controller:'ViewHistoryController as viewHistory',size:'lg',resolve:{data:function data(){return{viewItem:ctrl.filterConfig.viewItem,type:'anime'};}}}).result.then(function(result){console.log('closed history: ',result,ctrl.filterConfig.viewItem.meta);if(result){ctrl.animeitem=ctrl.filterConfig.viewItem;ctrl.update();}});}// Find existing Animeitem\nfunction findOne(){Animeitems.get({animeitemId:$stateParams.animeitemId}).$promise.then(function(result){ctrl.animeitem=result;console.log(ctrl.animeitem);});}/** Find a list of Animeitems for values:\r\n         *  (0) returns only ongoing series. (1) returns all series.\r\n         */function getAnime(value){spinnerService.loading('anime',Animeitems.query({status:value}).$promise.then(function(result){ctrl.animeitems=result;ctrl.filterConfig.areTagless=ListService.checkForTagless(result);ctrl.filterConfig.statTags=ItemService.buildStatTags(result,0);}));}//Set defaults on requery and \"neutralise\" the other search variable.\nfunction getItemsAvailable(){ctrl.animeitems=undefined;if(ctrl.filterConfig.ongoingList===true){ctrl.filterConfig.search.onHold=false;ctrl.filterConfig.search.status='';getAnime(0);}else{ctrl.filterConfig.search.onHold='';ctrl.filterConfig.search.status=false;getAnime(1);}}ctrl.filterConfig.getItemsAvailable();}})();(function(){'use strict';angular.module('animeitems').controller('CreateAnimeController',CreateAnimeController);CreateAnimeController.$inject=['$scope','$stateParams','$location','Authentication','Animeitems','Mangaitems','fileUpload','$sce','$window','ItemService','ListService','NotificationFactory','AnimeFactory','spinnerService','TagService'];function CreateAnimeController($scope,$stateParams,$location,Authentication,Animeitems,Mangaitems,fileUpload,$sce,$window,ItemService,ListService,NotificationFactory,AnimeFactory,spinnerService,TagService){var ctrl=this,animeitemId=$stateParams.animeitemId;ctrl.addedEpisodes=addedEpisodes;ctrl.addTag=addTag;ctrl.animeitem={};ctrl.authentication=Authentication;ctrl.config={title:'Create',updateHistory:false,ratingActions:{maxRating:10,percent:undefined,overStar:null},statTags:[],commonArrays:ListService.getCommonArrays()};ctrl.create=create;ctrl.dropTag=dropTag;ctrl.finalNumbers=false;//default show status of final number fields in edit view.\nctrl.find=find;ctrl.findOne=findOne;ctrl.findManga=findManga;ctrl.imgPath='';//image path\nctrl.itemUpdate=new Date();// today's date as 'yyyy-MM-dd' for the auto-pop of 'latest' in edit page.\nctrl.init=init;ctrl.removeTag=removeTag;ctrl.sections={showAdditional:false,showCompletion:false,showItemTags:false};ctrl.setInSeason=setInSeason;ctrl.submit=submit;ctrl.tagArray=[];// holding tags pre-submit\nctrl.tagArrayRemove=[];ctrl.update=update;ctrl.uploadFile=uploadFile;ctrl.usedTags=[];//for typeahead array.\nfunction init(){ctrl.config.isCreate=animeitemId===undefined;if(ctrl.config.isCreate){ctrl.animeitem.episodes=0;ctrl.animeitem.start=ctrl.itemUpdate;ctrl.animeitem.latest=ctrl.itemUpdate;}else if(!ctrl.config.isCreate){ctrl.config.title='Edit';ctrl.findOne();}ctrl.find();ctrl.findManga();}ctrl.init();//For adding new tags.\nfunction addTag(){TagService.addTag(ctrl.tagArray,ctrl.newTag);ctrl.newTag='';}//Drop tag for new tags.\nfunction dropTag(text){TagService.dropTag(ctrl.tagArray,text);}//Drop tag for animeitem tags.\nfunction removeTag(text){TagService.dropTag(ctrl.animeitem.tags,text);}function addedEpisodes(){ctrl.animeitem.latest=ctrl.itemUpdate;ctrl.config.updateHistory=true;if(ctrl.animeitem.episodes===ctrl.animeitem.finalEpisode&&ctrl.animeitem.finalEpisode!==0&&ctrl.animeitem.reWatching===false){ctrl.animeitem.end=ctrl.itemUpdate;}if(ctrl.animeitem.episodes>ctrl.animeitem.finalEpisode&&ctrl.animeitem.finalEpisode!==0){ctrl.animeitem.episodes=ctrl.animeitem.finalEpisode;}}function setInSeason(){if(ctrl.animeitem.season.season===null){ctrl.animeitem.season.year=null;}else{ctrl.animeitem.season.year=ctrl.animeitem.start.substring(0,4);}}// Create new Animeitem\nfunction create(){// Create new Animeitem object\nvar animeitem=new Animeitems();animeitem=new Animeitems({title:ctrl.animeitem.title,episodes:ctrl.animeitem.episodes,start:ctrl.animeitem.start,latest:ctrl.animeitem.latest,finalEpisode:ctrl.animeitem.finalEpisode,image:ctrl.imgPath,season:ctrl.season===true?ItemService.convertDateToSeason(new Date(ctrl.animeitem.start)):'',disc:ctrl.animeitem.disc,manga:ctrl.animeitem.manga!==undefined&&ctrl.animeitem.manga!==null?ctrl.animeitem.manga._id:ctrl.animeitem.manga,tags:ctrl.tagArray,user:ctrl.user});// Redirect after save\nanimeitem.$save(function(response){$location.path('/animeitems/'+response._id);NotificationFactory.success('Saved!','Anime was saved successfully');},function(errorResponse){ctrl.error=errorResponse.data.message;NotificationFactory.error('Error!',errorResponse.data.message);});}// Update existing Animeitem\nfunction update(){var animeitem=ctrl.animeitem;ctrl.animeitem=undefined;AnimeFactory.update(animeitem,ctrl.tagArray,ctrl.config.updateHistory,ctrl.imgPath);}function submit(){if(ctrl.config.isCreate)ctrl.create();if(!ctrl.config.isCreate)ctrl.update();}// Find a list of Animeitems\nfunction find(){Animeitems.query().$promise.then(function(result){ctrl.animeitems=result;ctrl.config.statTags=ItemService.buildStatTags(result,0);});}// Find existing Animeitem\nfunction findOne(){spinnerService.loading('editAnime',Animeitems.get({animeitemId:animeitemId}).$promise.then(function(result){ctrl.animeitem=result;console.log(ctrl.animeitem);}));}// Find list of mangaitems for dropdown.\nfunction findManga(){ctrl.mangaitems=Mangaitems.query();}//image upload\nfunction uploadFile(){ctrl.imgPath='/modules/animeitems/img/'+ctrl.myFile.name;fileUpload.uploadFileToUrl(ctrl.myFile,'/fileUploadAnime');}}})();(function(){'use strict';angular.module('animeitems').controller('WatchAnimeController',WatchAnimeController);WatchAnimeController.$inject=['$scope','Authentication','$stateParams','$timeout','Animeitems','$sce','ListService','AnimeFactory'];function WatchAnimeController($scope,Authentication,$stateParams,$timeout,Animeitems,$sce,ListService,AnimeFactory){var ctrl=this,saved=localStorage.getItem('watched');ctrl.authentication=Authentication;ctrl.findOne=findOne;ctrl.playVideo=playVideo;ctrl.startRewatch=startRewatch;ctrl.update=update;ctrl.videoFile={processed:'',file:'',number:'',message:'Please select an episode.'};ctrl.watchedList=localStorage.getItem('watched')!==null?JSON.parse(saved):{};function updateWatchedList(){localStorage.setItem('watched',JSON.stringify(ctrl.watchedList));ctrl.watchedList=JSON.parse(localStorage.getItem('watched'));}$scope.$watch('fileGrab',function(nVal,oVal){if(nVal){ctrl.videoFile.message='';//clear any error.\nctrl.videoFile.file=nVal.name;ctrl.videoFile.number=ctrl.animeitem.video.files[ListService.findWithAttr(ctrl.animeitem.video.files,'file',nVal.name)].number;ctrl.videoFile.processed=$sce.trustAsResourceUrl(window.URL.createObjectURL(nVal));}});function playVideo(){ctrl.watchedList[ctrl.videoFile.file]=true;updateWatchedList();if(ctrl.animeitem.reWatching&&ListService.findWithAttr(ctrl.animeitem.video.files,'file',ctrl.videoFile.file)>-1){ctrl.animeitem.episodes=parseInt(ctrl.videoFile.number,10);ctrl.update();}}function startRewatch(){console.log('startRewatch: ');var i=ctrl.animeitem.video.files.length;while(i--){ctrl.watchedList[ctrl.animeitem.video.files[i].file]=false;}updateWatchedList();ctrl.animeitem.episodes=0;ctrl.update();}// Update existing Animeitem\nfunction update(){ctrl.animeitem.latest=new Date();AnimeFactory.update(ctrl.animeitem,undefined,false,'');}// Find existing Animeitem\nfunction findOne(){Animeitems.get({animeitemId:$stateParams.animeitemId}).$promise.then(function(result){ctrl.animeitem=result;console.log(ctrl.animeitem);});}ctrl.findOne();}})();(function(){'use strict';angular.module('animeitems').controller('WatchListController',WatchListController);WatchListController.$inject=['$scope','Authentication','$state','$sce','spinnerService','ItemService','ListService','WatchAnime','$filter'];function WatchListController($scope,Authentication,$state,$sce,spinnerService,ItemService,ListService,WatchAnime,$filter){var ctrl=this;ctrl.authentication=Authentication;ctrl.filterConfig={ongoingList:true,showingCount:0,expandFilters:false,sortType:'',sortReverse:true,ratingLevel:undefined,ratingActions:{maxRating:10,percent:undefined,overStar:null},search:{},searchTags:'',tagsForFilter:[],taglessItem:false,areTagless:false,selectListOptions:{},statTags:[],commonArrays:ListService.getCommonArrays()};ctrl.find=find;ctrl.latestDate=latestDate;ctrl.pageConfig={currentPage:0,pageSize:10};ctrl.trustAsResourceUrl=trustAsResourceUrl;ctrl.watchAnime=watchAnime;ctrl.whichController='watch';function watchAnime(id){$state.go('watchAnimeitem',{animeitemId:id});}// Find a list of Animeitems\nfunction find(){ctrl.filterConfig.selectListOptions=ListService.getSelectListOptions(ctrl.whichController);ctrl.filterConfig.sortType=ctrl.filterConfig.selectListOptions.sortOptions[ctrl.filterConfig.selectListOptions.sortOption].v;//Set sort order.\nspinnerService.loading('watch',WatchAnime.query().$promise.then(function(result){ctrl.animeitems=result;console.log('watch list: ',result,'filterConfig: ',ctrl.filterConfig);}));}ctrl.find();//allow retreival of local resource\nfunction trustAsResourceUrl(url){return $sce.trustAsResourceUrl(url);}//latest date display format.\nfunction latestDate(latest,updated){return ItemService.latestDate(latest,updated);}}})();(function(){'use strict';angular.module('tasks').directive('animeItemModel',animeItemModel);function animeItemModel(){return{restrict:'A',replace:true,templateUrl:'modules/animeitems/templates/anime-item.html'};}})();(function(){'use strict';angular.module('animeitems').directive('fileModel',fileModel);fileModel.$inject=['$parse'];function fileModel($parse){return{restrict:'A',link:function link(scope,element,attrs){var model=$parse(attrs.fileModel);var modelSetter=model.assign;element.bind('change',function(){scope.$apply(function(){modelSetter(scope,element[0].files[0]);});});}};}})();(function(){'use strict';angular.module('animeitems').directive('keycuts',keycuts);function keycuts(){return{restrict:'A',link:function postLink(scope,element,attrs){//keydown catch - alt+v for view\nscope.$on('my:keydown',function(event,e){//                console.log(event, e);\nif(e.altKey&&e.keyCode===86){if(scope.isList==='list'){scope.isList='slider';}else if(scope.isList==='slider'){scope.isList='list';}else if(scope.view==='Anime'){scope.view='Manga';}else if(scope.view==='Manga'){scope.view='Character';}else if(scope.view==='Character'){scope.view='Anime';}}});}};}})();(function(){'use strict';angular.module('animeitems').directive('listBack',listBack);function listBack(){return function(scope,element,attrs){var url=attrs.listBack;element.css({'background-image':'url('+url+')','background-size':'50%','background-repeat':'no-repeat','background-position':'right'});};}})();(function(){'use strict';angular.module('animeitems').directive('listFilters',listFilters);function listFilters(){return{restrict:'EA',replace:true,scope:{filterConfig:'=',items:'=',page:'='},templateUrl:'/modules/animeitems/templates/list-filters.html',link:function link(scope,elem,attrs){scope.filterConfig.searchTags='';scope.passTag=function(tag){if(scope.filterConfig.searchTags.indexOf(tag)===-1){scope.filterConfig.searchTags+=tag+',';scope.filterConfig.tagsForFilter=scope.filterConfig.searchTags.substring(0,scope.filterConfig.searchTags.length-1).split(',');}};//rating 'tooltip' function\nscope.hoveringOver=function(value){scope.filterConfig.ratingActions.overStar=value;scope.filterConfig.ratingActions.percent=100*(value/scope.filterConfig.ratingActions.maxRating);};scope.itemsAvailable=function(){scope.filterConfig.getItemsAvailable();};scope.collapseFilters=function(){scope.filterConfig.expandFilters=false;};}};}})();(function(){'use strict';angular.module('animeitems').directive('swOnplay',swOnplay);function swOnplay(){return{restrict:'A',link:function link(scope,element,attrs){var el=element[0];el.addEventListener('play',function(){scope.$apply(attrs.swOnplay);});}};}})();(function(){'use strict';angular.module('animeitems').directive('pageControls',pageControls);function pageControls(){return{restrict:'EA',replace:true,scope:{pageConfig:'=',showingCount:'='},templateUrl:'/modules/animeitems/templates/page-controls.html',link:function link(scope,elem,attrs){/** Calculate page count.\r\n             *    If showingCount isn't caluclated in time...\r\n             *    If the pageSize is altered...\r\n             */scope.$watch('showingCount',function(){scope.pageCount=Math.ceil(scope.showingCount/scope.pageConfig.pageSize);if(scope.pageConfig.currentPage>scope.pageCount-1){scope.last();//in the event changing page size would put you above the last page.\n}else if(scope.pageConfig.currentPage<0){scope.first();}});/** Button Functions\r\n             *    go to next/prev pages. skip to first/last page.\r\n             */scope.first=function(){//              console.log('first');\nscope.pageConfig.currentPage=0;};scope.last=function(){//              console.log('last');\nscope.pageConfig.currentPage=scope.pageCount-1;};scope.next=function(){//              console.log('next');\nscope.pageConfig.currentPage+=1;};scope.prev=function(){//              console.log('prev');\nscope.pageConfig.currentPage-=1;};//Catches ctrl+left/right keypresses to change pages.\nscope.$on('my:keydown',function(event,e){//              console.log(event, e);\nif(e.ctrlKey&&e.keyCode===39&&scope.pageConfig.currentPage<scope.pageCount-1){scope.next();}else if(e.ctrlKey&&e.keyCode===37&&scope.pageConfig.currentPage>0){scope.prev();}});}};}})();(function(){'use strict';angular.module('animeitems').filter('endedMonth',endedMonth);function endedMonth(){return function(array,year,month){return array.filter(function(item){//ended stat month filter\nif(item.end!==undefined&&item.end!==null){if(item.end.substring(0,4)===year){if(item.end.substr(5,2)===month){return item;}}}});};}})();(function(){'use strict';angular.module('animeitems').filter('endedSeason',endedSeason);endedSeason.$inject=['moment'];function endedSeason(moment){//ended stat season filter\nreturn function(array,year,month){return array.filter(function(item){var start=moment(item.start),end=moment(item.end),num,startMonth,startYear,diff,weeks,pad='00';if(item.end!==undefined&&item.end!==null){/**\r\n                       *  Can currently handle shows of 1 or 2 seasons with 'standard' lengths (10-13) / (22-26) that\r\n                       *  start and finish in the 'normal' season months (J-M,A-J,J-S,O-D) / (J-J,A-S,J-D,O-M).\r\n                       */if(9<item.finalEpisode&&item.finalEpisode<14){startMonth=(pad+(month-2)).slice(-pad.length);if(item.end.substring(0,4)===year&&item.end.substr(5,2)===month||item.start.substring(0,4)===year&&item.start.substr(5,2)===startMonth){diff=end.diff(start,'days');weeks=Math.ceil(diff/7)+1;//add one to correct for the first ep. counting as week 0 in an equation.\nif(weeks>=item.episodes){return item;}}}else if(13<item.finalEpisode&&item.finalEpisode<26){num=month-5>0?month-5:10;startYear=month-5>0?year:year-1;startMonth=(pad+num).slice(-pad.length);if(item.end.substring(0,4)===year&&item.end.substr(5,2)===month||item.start.substring(0,4)===startYear&&item.start.substr(5,2)===startMonth){diff=end.diff(start,'days');weeks=Math.ceil(diff/7)+1;//add one to correct for the first ep. counting as week 0 in an equation.\nif(weeks>=item.episodes){return item;}}}}});};}})();(function(){'use strict';angular.module('animeitems').filter('ratingFilter',ratingFilter);function ratingFilter(){return function(array,rating){if(array!==undefined){//filter for rating stars\nreturn array.filter(function(item){//            console.log(item);\nif(item.rating===rating){return item;}else if(rating===undefined){return item;}});}};}})();(function(){'use strict';angular.module('animeitems').filter('seasonForCharacterAnime',seasonForCharacterAnime);function seasonForCharacterAnime(){return function(array,year,month){return array.filter(function(item){if(item.anime&&item.anime.season!==undefined&&item.anime.season!==null){if(item.anime.season.year===year&&item.anime.season.season===month){return item;}}});};}})();(function(){'use strict';angular.module('animeitems').filter('season',season);function season(){return function(array,year,month){return array.filter(function(item){if(item.season!==undefined&&item.season!==null){if(item.season.year===year&&item.season.season===month){return item;}}});};}})();(function(){'use strict';angular.module('animeitems').filter('startFrom',startFrom);function startFrom(){return function(input,start){if(input!==undefined){start=+start;//parse to int\nreturn input.slice(start);}};}})();(function(){'use strict';angular.module('animeitems').filter('statisticsDetailFilter',statisticsDetailFilter);statisticsDetailFilter.$inject=['$filter'];function statisticsDetailFilter($filter){return function(array,type,year,division){var filter=division===''?'summaryYear':type==='months'?'endedMonth':'season',filterPart=division===''?type:division;return $filter(filter)(array,year,filterPart);};}})();(function(){'use strict';angular.module('animeitems').filter('summaryYear',summaryYear);function summaryYear(){return function(array,year,type){if(array!==undefined){return array.filter(function(item){if(type==='months'&&item.end!==undefined&&item.end!==null){if(item.end.substring(0,4)===year){return item;}}else if(type==='seasons'){if(item.season.year===year){return item;}}});}};}})();(function(){'use strict';angular.module('animeitems').factory('AnimeFactory',AnimeFactory);AnimeFactory.$inject=['Animeitems','ListService','ItemService','NotificationFactory','$location'];function AnimeFactory(Animeitems,ListService,ItemService,NotificationFactory,$location){return{update:function update(item,tagArray,updateHistory,imgPath,episodeRating){var animeitem=item;console.log(animeitem);//dropdown passes whole object, if-statements for lazy fix - setting them to _id.\nif(item.manga!==null&&item.manga!==undefined){animeitem.manga=item.manga._id;}if(tagArray!==undefined){animeitem.tags=ListService.concatenateTagArrays(animeitem.tags,tagArray);}//update the item history.\nanimeitem=ItemService.itemHistory(animeitem,updateHistory,'anime',episodeRating);if(imgPath!==undefined&&imgPath!==null&&imgPath!==''){animeitem.image=imgPath;}//console.log($scope.imgPath);\n//console.log(animeitem.image);\n//handle end date\nif(animeitem.episodes===animeitem.finalEpisode&&animeitem.finalEpisode!==0){if(animeitem.end===undefined||animeitem.end===null){animeitem.end=animeitem.latest;//                    console.log(animeitem.end);\n}}else if(animeitem.reWatching===false){//in the event the 'complete-ness' of an entry needs to be undone.\n//this will undo the end date.\nanimeitem.end=null;//                console.log(animeitem.end);\n}//handle status: completed.\nif(animeitem.end!==undefined&&animeitem.end!==null){animeitem.status=true;animeitem.onHold=false;}else{//if no end date, not complete.\nanimeitem.status=false;}//handle re-reading, re-read count.\nif(animeitem.reWatching===true){animeitem=ItemService.itemRevisits(animeitem,'anime');if(animeitem.episodes===animeitem.finalEpisode){animeitem.reWatchCount+=1;animeitem.reWatching=false;}}animeitem.$update(function(){if(window.location.href.indexOf('tasks')===-1&&window.location.href.indexOf('watch')===-1)$location.path('animeitems');NotificationFactory.success('Saved!','Anime was saved successfully');},function(errorResponse){var error=errorResponse.data.message;NotificationFactory.error('Error!',errorResponse.data.message);});}};}})();(function(){'use strict';angular.module('animeitems').factory('Animeitems',AnimeitemsFactory);AnimeitemsFactory.$inject=['$resource'];function AnimeitemsFactory($resource){return $resource('animeitems/:animeitemId',{animeitemId:'@_id'},{update:{method:'PUT'}});}})();(function(){'use strict';angular.module('animeitems').service('fileUpload',fileUpload);fileUpload.$inject=['$http','NotificationFactory'];function fileUpload($http,NotificationFactory){var obj={uploadFileToUrl:uploadFileToUrl};return obj;function uploadFileToUrl(file,uploadUrl){var fd=new FormData();fd.append('file',file);$http.post(uploadUrl,fd,{transformRequest:angular.identity,headers:{'Content-Type':undefined}}).success(function(response){NotificationFactory.success('Uploaded!','Image was saved successfully');}).error(function(err){NotificationFactory.popup('Woops!','Something went wrong! \\n'+err,'error');});}}})();(function(){'use strict';angular.module('animeitems').service('ItemService',ItemService);ItemService.$inject=['moment','$filter','ListService'];function ItemService(moment,$filter,ListService){var obj={buildOverview:buildOverview,buildRatingsDistribution:buildRatingsDistribution,buildStatTags:buildStatTags,completeByMonth:completeByMonth,completeBySeason:completeBySeason,convertDateToSeason:convertDateToSeason,deleteHistory:deleteHistory,endingYears:endingYears,getRatingValues:getRatingValues,itemHistory:itemHistory,itemRevisits:itemRevisits,latestDate:latestDate,maxCompleteMonth:maxCompleteMonth,maxTagCount:maxTagCount,ratingsWeighted:ratingsWeighted,setSeason:setSeason};return obj;//Using the date, returns the season.\nfunction convertDateToSeason(date){var season='',year=date.getFullYear(),month=date.getMonth()+1,commonArrays=ListService.getCommonArrays(),i=commonArrays.seasons.length;//            console.log('convert: ', year, month);\nwhile(i--){if(month>Number(commonArrays.seasons[i].number)&&season===''){season={season:commonArrays.seasons[i+1].text,year:year};}//catch winter.\nif(i===0&&season===''){season={season:commonArrays.seasons[i].text,year:year};}}//            console.log('to: ', season);\nreturn season;}//add history entry to item.\nfunction itemHistory(item,updateHistory,type,episodeRating){console.log('item history: ',item,item.meta,episodeRating);//populate the history of when each part was 'checked' off.\nif(item.meta.history.length!==0){var latestHistory=item.meta.history[item.meta.history.length-1].value,length=type==='anime'?item.episodes-latestHistory:item.chapters-latestHistory;if(length>0&&(type==='anime'?item.reWatching===false:item.reReading===false)){for(var i=1;i<=length;i++){item.meta.history.push({date:Date.now(),value:latestHistory+i,rating:episodeRating||0,title:item.title,id:item._id});}}}else{if(updateHistory&&(type==='anime'?item.reWatching===false:item.reReading===false)){item.meta.history.push({date:Date.now(),value:type==='anime'?item.episodes:item.chapters,rating:episodeRating||0,title:item.title,id:item._id});}}return item;}//remove an entry from an items history.\nfunction deleteHistory(item,history){var temp=[];angular.forEach(item.meta.history,function(past){if(past.value!==history.value){temp.push(past);}});item.meta.history=temp;return item;}function itemRevisits(item,type){var anime={count:'reWatchCount',currentPart:'episodes',finalPart:'finalEpisode'},manga={count:'reReadCount',currentPart:'chapters',finalPart:'finalChapter'},repeating=type==='anime'?anime:manga,index=ListService.findWithAttr(item.meta.revisits,'value',item[repeating.count]+1);if(index===-1){item.meta.revisits.push({id:item.id,title:item.title,value:item[repeating.count]+1,rating:0,start:item.latest,end:item[repeating.currentPart]===item[repeating.finalPart]?item.latest:null});}else if(index>-1&&item[repeating.currentPart]===item[repeating.finalPart]){item.meta.revisits[index].end=item.latest;}return item;}//function to display relative time - using latest or updated date.\nfunction latestDate(latest,updated){//latest date display format.\n//          console.log(latest, updated);\nvar today=moment(new Date()),displayDate,diff;if(moment(latest).toISOString().substring(0,10)===moment(updated).toISOString().substring(0,10)){displayDate=moment(updated);diff=displayDate.fromNow();if(diff==='a day ago'){return'Yesterday at '+displayDate.format('HH:mm');}else if(diff.indexOf('days')>-1){return diff+' at '+displayDate.format('HH:mm');}else{return diff+'.';}}else{displayDate=moment(latest);diff=today.diff(displayDate,'days');//for 0 and 1 day(s) ago use the special term.\nif(diff===0){return'Today';}else if(diff===1){return'Yesterday';}else{return diff+' days ago.';}}}//build statistics item overview details.\nfunction buildOverview(items){var overview={ongoing:$filter('filter')(items,{status:false}).length,completed:$filter('filter')(items,{status:true}).length};//            console.log('overview ' , overview);\nreturn overview;}//calculate which month has the most anime completed in it.\nfunction maxCompleteMonth(items){var modeMap={},maxCount=0;for(var i=0;i<items.length;i++){if(items[i].end!==undefined&&items[i].end!==null){var end=items[i].end.substring(0,7);if(modeMap[end]===null||modeMap[end]===undefined){modeMap[end]=1;}else{modeMap[end]++;}if(modeMap[end]>maxCount){maxCount=modeMap[end];}}}return maxCount;}//calculate the rating values - max rated count and average rating.\nfunction getRatingValues(items){var tempRating=0,maxRatedCount=0,averageRating=0;angular.forEach(items,function(item){if(item.rating!==0){tempRating+=item.rating;maxRatedCount++;}});averageRating=tempRating/maxRatedCount;var values={maxRatedCount:maxRatedCount,averageRating:averageRating};//            console.log('values', values);\nreturn values;}//calculate which month has the most anime completed in it.\nfunction maxTagCount(items){var modeMap={},maxCount=0;angular.forEach(items,function(item){angular.forEach(item.tags,function(tag){var text=tag.text;if(modeMap[text]===null||modeMap[text]===undefined){modeMap[text]=1;}else{modeMap[text]++;}if(modeMap[text]>maxCount){maxCount=modeMap[text];}});});return maxCount;}//build stat tags including counts, averages etc.\nfunction buildStatTags(items,averageItemRating){var add=true,statTags=[],checkedRating,maxTagCount=obj.maxTagCount(items),itemCount=items.length;//is tag in array?\nangular.forEach(items,function(item){angular.forEach(item.tags,function(tag){for(var i=0,len=statTags.length;i<len;i++){if(statTags[i].tag===tag.text){add=false;statTags[i].count+=1;statTags[i].ratedCount+=item.rating===0?0:1;statTags[i].ratings.push(item.rating);statTags[i].ratingAdded+=item.rating;statTags[i].ratingAvg=statTags[i].ratingAdded===0?0:statTags[i].ratingAdded/statTags[i].ratedCount;statTags[i].ratingWeighted=obj.ratingsWeighted(statTags[i].ratings);}}// add if not in\nif(add===true){checkedRating=item.rating===0?0:1;statTags.push({tag:tag.text,count:1,ratedCount:checkedRating,ratings:[item.rating],ratingAdded:item.rating,ratingAvg:item.rating,ratingWeighted:0});}add=true;//reset add status.\n});//                    console.log(statTags);\n});return statTags;}//function to calculate the weighted mean ratings for the genre tags.\nfunction ratingsWeighted(ratings){var values=[],weights=[],unratedCount=0,total=0,count=0;/**\r\n\t             *  create array (weights) with key(rating).\r\n\t             */for(var i=0,len=ratings.length;i<len;i++){if(ratings[i]in values){weights[ratings[i]]++;}else{values.push(ratings[i]);weights[ratings[i]]=1;}}/**\r\n\t             *  using the key(rating) multiply by the value(weight).\r\n\t             *  calculated weighted total and count.\r\n\t             */for(var k in weights){if(typeof weights[k]!=='function'){if(!isNaN(weights[k])){total+=k*weights[k];count+=weights[k];}}if(k===0){unratedCount=weights[k];}}/* Weighted average.\r\n\t\t\t\t\t\t\t * total = (nth_rating_value * number_of_that_value + ...)\r\n\t\t\t\t\t\t\t * count = number of ratings.\r\n\t\t\t\t\t\t\t */return total/count;}//builds counts for number of items given for each rating.\nfunction buildRatingsDistribution(items){var maxCount=items.length,possibleValues=[10,9,8,7,6,5,4,3,2,1,0],ratingsDistribution=[],i=possibleValues.length;while(i--){var count=$filter('filter')(items,{rating:i},true).length;ratingsDistribution.push({number:i===0?'-':i,text:i===0?count+' entries unrated.':count+' entries rated '+i,colour:i>6?'#449d44':7>i&&i>3?'#31b0d5':i!==0?'#c9302c':'#000000',count:count,percentage:(count/maxCount*100).toFixed(2)});}//            console.log('RD: ', ratingsDistribution);\nreturn ratingsDistribution;}// 'sub-function' of the completeBy... functions.\nfunction endingYears(items){var years=[],itemYears=$filter('unique')(items,'end.substring(0,4)');//get unqiue years as items.\nitemYears=$filter('orderBy')(itemYears,'-end.substring(0,4)');//order desc.\nangular.forEach(itemYears,function(item){if(item.end!==undefined&&item.end!==null){years.push({year:item.end.substring(0,4)});}});return years;}//complete by month stats\nfunction completeByMonth(items){var monthDetails={},completeByMonthItems=[],maxCompleteMonth=0,itemYears=obj.endingYears(items),i=itemYears.length;//build comlpeteByMonths object.\nwhile(i--){//chuck the null end date. push the year part of the other end dates with months array.\nif(itemYears[i].year!==undefined&&itemYears[i].year!==null){completeByMonthItems.push({year:itemYears[i].year,months:[{number:'01',text:'January',count:$filter('endedMonth')(items,itemYears[i].year,'01').length},{number:'02',text:'February',count:$filter('endedMonth')(items,itemYears[i].year,'02').length},{number:'03',text:'March',count:$filter('endedMonth')(items,itemYears[i].year,'03').length},{number:'04',text:'April',count:$filter('endedMonth')(items,itemYears[i].year,'04').length},{number:'05',text:'May',count:$filter('endedMonth')(items,itemYears[i].year,'05').length},{number:'06',text:'June',count:$filter('endedMonth')(items,itemYears[i].year,'06').length},{number:'07',text:'July',count:$filter('endedMonth')(items,itemYears[i].year,'07').length},{number:'08',text:'August',count:$filter('endedMonth')(items,itemYears[i].year,'08').length},{number:'09',text:'September',count:$filter('endedMonth')(items,itemYears[i].year,'09').length},{number:'10',text:'October',count:$filter('endedMonth')(items,itemYears[i].year,'10').length},{number:'11',text:'November',count:$filter('endedMonth')(items,itemYears[i].year,'11').length},{number:'12',text:'December',count:$filter('endedMonth')(items,itemYears[i].year,'12').length}]});}}maxCompleteMonth=obj.maxCompleteMonth(items);monthDetails={months:completeByMonthItems,max:maxCompleteMonth};//            console.log('completeByMonthItems', completeByMonthItems);\nreturn monthDetails;}//complete by season stats.\nfunction completeBySeason(items){var seasonDetails={},completeBySeasonItems=[],maxCompleteSeason=0,itemYears=obj.endingYears(items),i=itemYears.length;//build completeBySeasonItems object.\nwhile(i--){//chuck the null end date. push the year part of the other end dates with seasons array.\nif(itemYears[i].year!==undefined&&itemYears[i].year!==null){completeBySeasonItems.push({year:itemYears[i].year,seasons:[{number:'03',text:'Winter',count:$filter('season')(items,itemYears[i].year,'Winter').length},{number:'06',text:'Spring',count:$filter('season')(items,itemYears[i].year,'Spring').length},{number:'09',text:'Summer',count:$filter('season')(items,itemYears[i].year,'Summer').length},{number:'12',text:'Fall',count:$filter('season')(items,itemYears[i].year,'Fall').length}]});}}//find maximum complete in a season.\nangular.forEach(completeBySeasonItems,function(item){var i=item.seasons.length;while(i--){if(item.seasons[i].count>maxCompleteSeason){maxCompleteSeason=item.seasons[i].count;}}});seasonDetails={seasons:completeBySeasonItems,max:maxCompleteSeason};//            console.log('completeBySeasonItems', seasonDetails);\nreturn seasonDetails;}//Temporary function to generate the season data for pre-exisiting items in db.\nfunction setSeason(items,year,season){var array=$filter('endedSeason')(items,year,season);angular.forEach(array,function(item){console.log(item.title);item.season=obj.convertDateToSeason(new Date(item.start));});return array;}}})();(function(){'use strict';angular.module('animeitems').service('ListService',ListService);ListService.$inject=['moment','$q'];function ListService(moment,$q){var service={checkForTagless:checkForTagless,concatenateTagArrays:concatenateTagArrays,findWithAttr:findWithAttr,getCommonArrays:getCommonArrays,getSelectListOptions:getSelectListOptions,groupItemsByProperties:groupItemsByProperties,manipulateString:manipulateString,numberOfPages:numberOfPages,stringReverse:stringReverse,weekEndingForDate:weekEndingForDate};return service;function stringReverse(string){return string.split('').reverse().join('');}//get number of pages for list.\nfunction numberOfPages(showingCount,pageSize,currentPage){var pageCount=Math.ceil(showingCount/pageSize);//reset number of pages to be the final page if the number of pages\n//becomes less than the one you are on.\nif(currentPage+1>=pageCount&&pageCount!==0){currentPage=pageCount-1;}if(pageCount!==0&&currentPage<0){currentPage=0;}var pagingDetails={currentPage:currentPage,pageCount:pageCount};return pagingDetails;}//find index of object with given attr.\nfunction findWithAttr(array,attr,value){if(array!==undefined){for(var i=0;i<array.length;i+=1){if(array[i][attr]===value){return i;}}}return-1;}/** Splitting array into multiple arrays by grouping by attributes.\r\n\t\t\t\t\t */function groupItemsByProperties(array,groupProperties){return $q(function(resolve,reject){var groupedArrays=groupBy(array,function(item){return getGroupProperties(item,groupProperties);});resolve(groupedArrays);});}//Retrieve the item values for grouping by\nfunction getGroupProperties(item,groups){var array=[];angular.forEach(groups,function(group){array.push(item[group]);});return array;}//Group the items into arrays using the values.\nfunction groupBy(array,f){var groups={};array.forEach(function(o){var group=JSON.stringify(f(o));groups[group]=groups[group]||[];groups[group].push(o);});return Object.keys(groups).map(function(group){return groups[group];});}function manipulateString(string,transform,onlyFirst){switch(transform.toLowerCase()){case'lower':if(onlyFirst)return string.charAt(0).toLowerCase()+string.slice(1);if(!onlyFirst)return string.toLowerCase();break;case'upper':if(onlyFirst)return string.charAt(0).toUpperCase()+string.slice(1);if(!onlyFirst)return string.toUpperCase();break;default:return string.toLowerCase();}}function weekEndingForDate(convertToSunday){var date=new Date(convertToSunday),day=date.getDay(),diff=date.getDate()-day+(day===0?0:7),temp=new Date(convertToSunday),wkEnd=new Date(temp.setDate(diff));return moment(wkEnd.toISOString()).endOf('day');}//returns the options for the various filters in list pages.\nfunction getSelectListOptions(controller){var selectListOptions={};if(controller!=='character'&&controller!=='topten'){selectListOptions.status=[{v:'',n:'All'},{v:false,n:'Ongoing'},{v:true,n:'Completed'}];selectListOptions.searchName='title';if(controller==='animeitem'||controller==='watch'){selectListOptions.onHold=[{v:'',n:'All'},{v:false,n:'Ongoing'},{v:true,n:'On Hold'}];selectListOptions.sortOptions=[{v:'title',n:'Title'},{v:'episodes',n:'Episodes'},{v:'start',n:'Start date'},{v:'end',n:'End date'},{v:['latest','meta.updated'],n:'Latest'},{v:'rating',n:'Rating'}];selectListOptions.sortOption=service.findWithAttr(selectListOptions.sortOptions,'n','Latest');selectListOptions.media=[{v:'',n:'All'},{v:false,n:'Online'},{v:true,n:'Disc'}];selectListOptions.mediaType='disc';selectListOptions.repeating=[{v:'',n:'All'},{v:false,n:'Not Re-watching'},{v:true,n:'Re-watching'}];selectListOptions.repeatType='reWatching';}else if(controller==='mangaitem'){selectListOptions.sortOptions=[{v:'title',n:'Title'},{v:'chapters',n:'Chapters'},{v:'volumes',n:'Volumes'},{v:'start',n:'Start date'},{v:'end',n:'End date'},{v:['latest','meta.updated'],n:'Latest'},{v:'rating',n:'Rating'}];selectListOptions.sortOption=service.findWithAttr(selectListOptions.sortOptions,'n','Latest');selectListOptions.media=[{v:'',n:'All'},{v:false,n:'Online'},{v:true,n:'Hardcopy'}];selectListOptions.mediaType='hardcopy';selectListOptions.repeating=[{v:'',n:'All'},{v:false,n:'Not Re-reading'},{v:true,n:'Re-reading'}];selectListOptions.repeatType='reReading';}}else{if(controller==='character'){selectListOptions.sortOptions=[{v:'name',n:'Name'},{v:'anime.title',n:'Anime'},{v:'manga.title',n:'Manga'},{v:'voice',n:'Voice'}];selectListOptions.media=[{v:'',n:'-- choose media type --'},{v:'none',n:'None'},{v:'anime',n:'Anime-only'},{v:'manga',n:'Manga-only'},{v:'both',n:'Both'}];}else if(controller==='topten'){selectListOptions.sortOptions=[{v:'name',n:'Name'}];selectListOptions.media=[{v:'',n:'All'},{v:'anime',n:'Anime'},{v:'manga',n:'Manga'},{v:'character',n:'Character'}];selectListOptions.mediaType='type';}selectListOptions.searchName='name';selectListOptions.sortOption=service.findWithAttr(selectListOptions.sortOptions,'n','Name');}//            console.log(selectListOptions);\nreturn selectListOptions;}function concatenateTagArrays(itemTags,tagArray){if(itemTags.length>0){var i=0,alreadyAdded=false;while(i<tagArray.length){for(var j=0;j<itemTags.length;j++){if(itemTags[j].text===tagArray[i].text){alreadyAdded=true;}}//add if isn't already in the array.\nif(alreadyAdded===false){itemTags.push(tagArray[i]);}i++;alreadyAdded=false;}//                console.log(itemTags);\nreturn itemTags;}else{//if there are no tags for item, then just return the new tags.\nreturn tagArray;}}//check to see if there are items with no tags.\nfunction checkForTagless(items){var areTagless=false;angular.forEach(items,function(item){if(item.tags.length===0){areTagless=true;}});return areTagless;}function getCommonArrays(controller){var commonArrays={},itemTypes=[{name:'anime'},{name:'manga'},{name:'character'}],seasons=[{number:'03',text:'Winter'},{number:'06',text:'Spring'},{number:'09',text:'Summer'},{number:'12',text:'Fall'}],months=[{number:'01',text:'January'},{number:'02',text:'February'},{number:'03',text:'March'},{number:'04',text:'April'},{number:'05',text:'May'},{number:'06',text:'June'},{number:'07',text:'July'},{number:'08',text:'August'},{number:'09',text:'September'},{number:'10',text:'October'},{number:'11',text:'November'},{number:'12',text:'December'}],categories=[{name:'Watch'},{name:'Read'},{name:'Play'},{name:'Other'}],days=[{name:'Any'},{name:'Monday'},{name:'Tuesday'},{name:'Wednesday'},{name:'Thursday'},{name:'Friday'},{name:'Saturday'},{name:'Sunday'}],summaryFunctions=[{name:'Average'},{name:'Highest'},{name:'Lowest'},{name:'Mode'}];commonArrays={months:months,seasons:seasons,categories:categories,days:days,summaryFunctions:summaryFunctions,itemTypes:itemTypes};return commonArrays;}}})();(function(){'use strict';angular.module('animeitems').factory('WatchAnime',WatchAnime);WatchAnime.$inject=['$resource'];function WatchAnime($resource){return $resource('animeitems/watch-list',{},{update:{method:'PUT'}});}})();'use strict';// Configuring the Articles module\nangular.module('characters').run(['Menus',function(Menus){// Set top bar menu items\nMenus.addMenuItem('topbar','Characters','characters','dropdown','/characters(/create)?');Menus.addSubMenuItem('topbar','characters','List Characters','characters');Menus.addSubMenuItem('topbar','characters','New Character','characters/create');}]);'use strict';//Setting up route\nangular.module('characters').config(['$stateProvider',function($stateProvider){// Characters state routing\n$stateProvider.state('listCharacters',{url:'/characters',templateUrl:'modules/characters/views/list-characters.client.view.html'}).state('createCharacter',{url:'/characters/create',templateUrl:'modules/characters/views/create-character.client.view.html'}).state('viewCharacter',{url:'/characters/:characterId',templateUrl:'modules/characters/views/view-character.client.view.html'}).state('editCharacter',{url:'/characters/:characterId/edit',templateUrl:'modules/characters/views/edit-character.client.view.html'});}]);(function(){'use strict';angular.module('characters').controller('CharactersController',CharactersController);CharactersController.$inject=['$scope','$stateParams','$location','Authentication','Characters','Animeitems','Mangaitems','fileUpload','$sce','$window','ListService','CharacterService','NotificationFactory','spinnerService','TagService'];function CharactersController($scope,$stateParams,$location,Authentication,Characters,Animeitems,Mangaitems,fileUpload,$sce,$window,ListService,CharacterService,NotificationFactory,spinnerService,TagService){var ctrl=this;ctrl.addTag=addTag;ctrl.authentication=Authentication;ctrl.create=create;ctrl.dropTag=dropTag;ctrl.filterConfig={isList:'list',//show list? or slider.\nshowingCount:0,sortType:'',sortReverse:false,searchTags:'',media:'',seriesFilter:'',tagsForFilter:[],taglessItem:false,areTagless:false,selectListOptions:{},statTags:[],voiceActors:[],series:[]};ctrl.find=find;ctrl.findAnime=findAnime;ctrl.findManga=findManga;ctrl.findOne=findOne;ctrl.findOneAnime=findOneAnime;ctrl.findOneManga=findOneManga;ctrl.imgPath='';//image path\nctrl.maxItemCount=0;//number of characters.\nctrl.pageConfig={currentPage:0,pageSize:10};ctrl.remove=remove;ctrl.removeTag=removeTag;ctrl.tagArray=[];// holding tags pre-submit\nctrl.tagArrayRemove=[];ctrl.trustAsResourceUrl=trustAsResourceUrl;ctrl.update=update;ctrl.uploadFile=uploadFile;ctrl.usedTags=[];//for typeahead array.\nctrl.whichController='character';//allow retreival of local resource\nfunction trustAsResourceUrl(url){return $sce.trustAsResourceUrl(url);}//For adding new tags.\nfunction addTag(){TagService.addTag(ctrl.tagArray,ctrl.newTag);ctrl.newTag='';}//Drop tag for new tags.\nfunction dropTag(text){TagService.dropTag(ctrl.tagArray,text);}//Drop tag for animeitem tags.\nfunction removeTag(text){TagService.dropTag(ctrl.mangaitem.tags,text);}// Create new Character\nfunction create(){//console.log(ctrl.tagArray);\nvar character=new Characters();// Create new Character object\ncharacter=new Characters({name:ctrl.name,image:ctrl.imgPath,anime:ctrl.anime!==undefined&&ctrl.anime!==null?ctrl.anime._id:ctrl.anime,manga:ctrl.manga!==undefined&&ctrl.manga!==null?ctrl.manga._id:ctrl.manga,voice:ctrl.voice,tags:ctrl.tagArray,user:ctrl.user});// Redirect after save\ncharacter.$save(function(response){$location.path('characters/'+response._id);NotificationFactory.success('Saved!','Character was saved successfully');},function(errorResponse){ctrl.error=errorResponse.data.message;NotificationFactory.error('Error!',errorResponse.data.message);});}// Remove existing Character\nfunction remove(character){//are you sure option...\nNotificationFactory.confirmation(function(){if(character){character.$remove();for(var i in ctrl.characters){if(ctrl.characters[i]===character){ctrl.characters.splice(i,1);}}}else{ctrl.character.$remove(function(){$location.path('characters');});}NotificationFactory.warning('Deleted!','Character was successfully deleted.');});}// Update existing Character\nfunction update(){var character=ctrl.character;//dropdown passes whole object, if-statements for lazy fix - setting them to _id.\nif(ctrl.character.manga!==null&&ctrl.character.manga!==undefined){character.manga=ctrl.character.manga._id;}//            console.log(ctrl.character.anime);\nif(ctrl.character.anime!==null&&ctrl.character.anime!==undefined){character.anime=ctrl.character.anime._id;}if(ctrl.tagArray!==undefined){character.tags=ListService.concatenateTagArrays(character.tags,ctrl.tagArray);}if(ctrl.imgPath!==undefined&&ctrl.imgPath!==null&&ctrl.imgPath!==''){character.image=ctrl.imgPath;}character.$update(function(){$location.path('characters');NotificationFactory.success('Saved!','Character was saved successfully');},function(errorResponse){ctrl.error=errorResponse.data.message;NotificationFactory.error('Error!',errorResponse.data.message);});}// Find a list of Characters\nfunction find(){ctrl.filterConfig.selectListOptions=ListService.getSelectListOptions(ctrl.whichController);spinnerService.loading('characters',Characters.query().$promise.then(function(result){ctrl.characters=result;ctrl.filterConfig.areTagless=ListService.checkForTagless(result);ctrl.filterConfig.statTags=CharacterService.buildCharacterTags(result);ctrl.filterConfig.voiceActors=CharacterService.buildVoiceActors(result);ctrl.filterConfig.series=CharacterService.buildSeriesList(result);console.log('find characters: ',ctrl.characters,ctrl.filterConfig);}));}// Find existing Character\nfunction findOne(){ctrl.character=Characters.get({characterId:$stateParams.characterId});}// Find a list of Animeitems\nfunction findAnime(){ctrl.animeitems=Animeitems.query();}// Find existing Animeitem\nfunction findOneAnime(anime){ctrl.animeitem=Animeitems.get({animeitemId:anime});}// Find a list of Mangaitems\nfunction findManga(){ctrl.mangaitems=Mangaitems.query();}// Find existing Animeitem\nfunction findOneManga(manga){ctrl.mangaitem=Mangaitems.get({mangaitemId:manga});}//image upload\nfunction uploadFile(){ctrl.imgPath='/modules/characters/img/'+ctrl.myFile.name;fileUpload.uploadFileToUrl(ctrl.myFile,'/fileUploadCharacter');}}})();(function(){'use strict';angular.module('characters').directive('characterBack',characterBack);function characterBack(){return function(scope,element,attrs){var url=attrs.characterBack;element.css({'background-image':'url('+url+')','background-size':'cover','background-repeat':'no-repeat','background-position':'center'});};}})();(function(){'use strict';angular.module('characters').directive('clearTagValues',clearTagValues);function clearTagValues(){return function(scope,element,attrs){element.bind('click',function(event){//            console.log('clear tags');\nscope.$apply(function(){scope.filterConfig.searchTags='';scope.filterConfig.characterTags='';scope.filterConfig.tagsForFilter=[];});});};}})();(function(){'use strict';angular.module('characters').directive('deleteSearchTag',deleteSearchTag);function deleteSearchTag(){return{restrict:'A',link:function link(scope,element,attrs){element.bind('click',function(event){scope.$apply(function(){var tag=attrs.deleteSearchTag;var index=scope.filterConfig.tagsForFilter.indexOf(tag);//                    console.log(tag, index);\nscope.filterConfig.searchTags=scope.filterConfig.searchTags.replace(tag+',','');scope.filterConfig.tagsForFilter.splice(index,1);//                    console.log(scope.searchTags, scope.tagsForFilter);\n});});}};}})();(function(){'use strict';angular.module('characters').directive('disableNgAnimate',disableNgAnimate);disableNgAnimate.$inject=['$animate'];function disableNgAnimate($animate){return{restrict:'A',link:function link(scope,element){$animate.enabled(false,element);}};}})();(function(){'use strict';angular.module('characters').directive('dropTag',dropTag);dropTag.$inject=['NotificationFactory'];function dropTag(NotificationFactory){return function(scope,element,attrs){element.bind('click',function(event){var text=attrs.dropTag;//are you sure option...\nNotificationFactory.confirmation(function(){scope.$apply(function(){var deletingItem=scope.tagArray;scope.$parent.tagArray=[];//                    console.log('dropping tag - ', text);\n//update the complete task.\nangular.forEach(deletingItem,function(tag){if(tag.text!==text){scope.$parent.tagArray.push(tag);}});});NotificationFactory.warning('Dropped!','Tag was successfully dropped');});});};}})();(function(){'use strict';angular.module('characters').directive('enterTag',enterTag);function enterTag(){return{restrict:'A',link:function link(scope,element,attrs){element.bind('keydown keypress',function(event){if(event.which===13){scope.$apply(function(){scope.$eval(attrs.enterTag);});event.preventDefault();}});}};}})();(function(){'use strict';angular.module('characters').directive('removeTag',removeTag);removeTag.$inject=['NotificationFactory'];function removeTag(NotificationFactory){return{restrict:'A',link:function link(scope,element,attrs){element.bind('click',function(event){var tag=attrs.removeTag,i,entry_type=scope.whichController;//are you sure option...\nNotificationFactory.confirmation(function(){scope.$apply(function(){var index;if(entry_type==='character'){for(i=0;i<scope.character.tags.length;i++){if(scope.character.tags[i].text===tag){index=i;}//                                console.log(index);\n}scope.$parent.character.tags.splice(index,1);}else if(entry_type==='animeitem'){for(i=0;i<scope.animeitem.tags.length;i++){if(scope.animeitem.tags[i].text===tag){index=i;}//                                console.log(index);\n}scope.$parent.animeitem.tags.splice(index,1);}else if(entry_type==='mangaitem'){for(i=0;i<scope.mangaitem.tags.length;i++){if(scope.mangaitem.tags[i].text===tag){index=i;}//                                console.log(index);\n}scope.$parent.mangaitem.tags.splice(index,1);}//                        console.log(index, tag);\n});NotificationFactory.warning('Deleted!','Tag was successfully deleted');});});}};}})();(function(){'use strict';angular.module('characters').directive('slider',slider);slider.$inject=['$timeout','$sce'];function slider($timeout,$sce){return{restrict:'AE',replace:true,scope:{slides:'=?',interval:'=?',filterConfig:'=?'},bindToController:true,controllerAs:'sliderController',templateUrl:'/modules/characters/templates/slider.html',controller:function controller($scope){var self=this,timer,_autoSlide;self.currentIndex=-1;//pre-first slide to stop 'cannot assign to undefined' error.\nself.enter=enter;self.goToSlide=goToSlide;self.interval=self.interval===undefined?3000:self.interval;//is there a custom interval?\nself.isFullscreen=false;self.leave=leave;self.next=next;self.prev=prev;self.repeater=self.slides===undefined?false:true;//is there a collection to iterate through?\nself.toggleFullscreen=toggleFullscreen;self.trustAsResourceUrl=trustAsResourceUrl;//allow retreival of local resource\nfunction trustAsResourceUrl(url){return $sce.trustAsResourceUrl(url);}//if no collection, make a dummy collection to cycle throught the children.\nif(!self.repeater){self.slides=[];//used to allow cycling.\nfor(var i=0;i<length;i++){self.slides.push({index:i});}}function goToSlide(slide){//              console.log('go to', slide);\nif(self.currentIndex!==slide){//reached end of slides?\nif(slide!==$scope.filteredSlides.length){self.currentIndex=slide;}else{self.currentIndex=0;}}else{if($scope.filteredSlides[self.currentIndex].locked){//unlock, i.e start timer.\n$scope.filteredSlides[self.currentIndex].locked=false;_autoSlide();}else{//lock, i.e. cancel timer.\n$scope.filteredSlides[self.currentIndex].locked=true;$timeout.cancel(timer);}}}function next(){if(self.currentIndex<$scope.filteredSlides.length-1){self.currentIndex+=1;}else{self.currentIndex=0;}}function prev(){if(self.currentIndex>0){self.currentIndex-=1;}else{self.currentIndex=$scope.filteredSlides.length-1;}}$scope.$watch('sliderController.currentIndex',function(){//  console.log('index', self.currentIndex, 'filtered slides ', $scope.filteredSlides);\nif(self.currentIndex>-1&&$scope.filteredSlides.length>0){$scope.filteredSlides.forEach(function(slide){slide.visible=false;// make every slide invisible\nslide.locked=false;// make every slide unlocked\n});$scope.filteredSlides[self.currentIndex].visible=true;// make the current slide visible\n}});_autoSlide=function autoSlide(){timer=$timeout(function(){self.next();timer=$timeout(_autoSlide,self.interval);},self.interval);};_autoSlide();$scope.$on('$destroy',function(){$timeout.cancel(timer);// when the scope is destroyed, cancel the timer\n});//Stop timer on enter.\nfunction enter(){//              console.log('entered');\nif($scope.filteredSlides[self.currentIndex].locked!==true){$timeout.cancel(timer);//                  console.log('cancelled');\n}}//Restart timer on leave.\nfunction leave(){//              console.log('left');\nif($scope.filteredSlides[self.currentIndex].locked!==true){timer=$timeout(_autoSlide,self.interval);//                  console.log('restarted');\n}}//Fullscreen capability\nfunction toggleFullscreen(){self.isFullscreen=!self.isFullscreen;}},link:function link(scope,elem,attrs,sliderController){scope.childElementCount=elem[0].childElementCount-1;}};}})();(function(){'use strict';angular.module('characters').filter('mediaFilter',mediaFilter);function mediaFilter(){return function(array,media){if(array!==undefined){return array.filter(function(item){if(media==='anime'){if(item.anime!==null&&item.manga===null){return true;}return false;}else if(media==='manga'){if(item.manga!==null&&item.anime===null){return true;}return false;}else if(media==='both'){if(item.anime!==null&&item.manga!==null){return true;}return false;}else if(media==='none'){if(item.anime===null&&item.manga===null){return true;}}else{return true;}});}};}})();(function(){'use strict';angular.module('characters').filter('seriesDetailFilter',seriesDetailFilter);function seriesDetailFilter(){return function(array,detailSeriesName){if(array!==undefined){return array.filter(function(item){if(detailSeriesName!==''){//filter stat series detail.\nif(item.anime!==null&&item.anime!==undefined){if(item.anime.title===detailSeriesName){return item;}}else if(item.manga!==null&&item.manga!==undefined){if(item.manga.title===detailSeriesName){return item;}}}else{return item;}});}};}})();(function(){'use strict';angular.module('characters').filter('seriesFilter',seriesFilter);function seriesFilter(){return function(array,series){if(array!==undefined){return array.filter(function(item){if(series!==''&&series!==undefined){//filter stat series detail.\nif(item.anime!==null&&item.anime!==undefined){return item.anime.title.toLowerCase().indexOf(series.toLowerCase())>-1;}else if(item.manga!==null&&item.manga!==undefined){return item.manga.title.toLowerCase().indexOf(series.toLowerCase())>-1;}}else{return item;}});}};}})();(function(){'use strict';angular.module('characters').filter('tagFilter',tagFilter);function tagFilter(){return function(array,searchTags,taglessItem){if(array!==undefined){return array.filter(function(item){//special tag filter\nvar found=false;var i=0;var tagsToSearch=[];var tagsForFilter;//if tagless is checked return tagless and nothing else.\nif(taglessItem===true){if(item.tags.length===0){return item;}}else{if(searchTags===undefined||searchTags===''){return true;}else{//get tags that are being looked for\ntagsForFilter=searchTags.substring(0,searchTags.length-1).split(',');//console.log(tagsForFilter);\n//get tags of items to filter\nangular.forEach(item.tags,function(tag){tagsToSearch.push(tag.text);});//filter: check in 'query' is in tags.\nfor(i=0;i<tagsForFilter.length;i++){if(tagsToSearch.indexOf(tagsForFilter[i])!==-1){found=true;}else{return false;}}return found;}}});}};}})();(function(){'use strict';angular.module('characters').service('CharacterService',CharacterService);CharacterService.$inject=['$q'];function CharacterService($q){//build the character gender distribution.\nthis.buildGenderDistribution=function(items,maxCount){return $q(function(resolve,reject){var check,gender=[];angular.forEach(items,function(item){if(item.tag==='male'){gender.push({type:'male',count:item.count,percentage:Number((item.count/maxCount*100).toFixed(2)),text:'% male.'});}else if(item.tag==='female'){gender.push({type:'female',count:item.count,percentage:Number((item.count/maxCount*100).toFixed(2)),text:'% female.'});}});gender.push({type:'unassigned',count:maxCount-gender[0].count-gender[1].count,percentage:Number(((maxCount-gender[0].count-gender[1].count/maxCount)*100).toFixed(2)),text:'% unassigned.'});//Fudge any rounding errors.\ncheck=gender[0].percentage+gender[1].percentage+gender[2].percentage;if(check>100){gender[2].percentage-=(check-100).toFixed(2);}else if(check<100){gender[2].percentage+=(100-check).toFixed(2);}resolve(gender);});};this.buildCharacterTags=function(items){var add=true,statTags=[];//is tag in array?\nangular.forEach(items,function(item){angular.forEach(item.tags,function(tag){for(var i=0;i<statTags.length;i++){if(statTags[i].tag===tag.text){add=false;statTags[i].count+=1;}}// add if not in\nif(add===true){statTags.push({tag:tag.text,count:1});}add=true;//reset add status.\n});//          console.log($scope.statTags);\n});return statTags;};this.buildRelatedCharacterTags=function(items,name){var add=true,tagDetailCollection=[],tagDetailResult=[];//get all character tag arrays that contain the chosen tag into a collection.\nangular.forEach(items,function(item){for(var i=0;i<item.tags.length;i++){if(item.tags[i].text===name){tagDetailCollection.push(item.tags);}}});//        console.log(tagDetailCollection);\nangular.forEach(tagDetailCollection,function(item){angular.forEach(item,function(bit){//              console.log(bit);\nfor(var i=0;i<tagDetailResult.length;i++){//if exists and not the search value - increment the count.\nif(tagDetailResult[i].name===bit.text&&bit.text!==name){add=false;tagDetailResult[i].count+=1;}}//add if true and not the tag we searched on.\nif(add===true&&bit.text!==name){tagDetailResult.push({name:bit.text,count:1});}add=true;});});//        console.log(tagDetailResult);\nreturn tagDetailResult;};this.buildVoiceActors=function(items){var add=true,voiceActors=[];//is voice actor in array?\nangular.forEach(items,function(item){for(var i=0;i<voiceActors.length;i++){if(voiceActors[i].name===item.voice){add=false;voiceActors[i].count+=1;}}// add if not in\nif(add===true){voiceActors.push({name:item.voice,count:1});}add=true;//reset add status.\n});return voiceActors;};this.buildSeriesList=function(items){var add=true,statSeries=[];//get series counts.\nangular.forEach(items,function(item){for(var i=0;i<statSeries.length;i++){if(item.anime){if(statSeries[i].name===item.anime.title){add=false;statSeries[i].count+=1;}}else if(item.manga){if(statSeries[i].name===item.manga.title){add=false;statSeries[i].count+=1;}}}// add if not in\nif(add===true){if(_typeof(item.anime)==='object'&&item.anime!==null){statSeries.push({_id:item.anime._id,name:item.anime.title,count:1});}else if(_typeof(item.manga)==='object'&&item.manga!==null){statSeries.push({_id:item.manga._id,name:item.manga.title,count:1});}}add=true;//reset add status.\n});return statSeries;};}})();(function(){'use strict';angular.module('characters').factory('Characters',CharacterFactory);CharacterFactory.$inject=['$resource'];function CharacterFactory($resource){return $resource('characters/:characterId',{characterId:'@_id'},{update:{method:'PUT'}});}})();(function(){'use strict';angular.module('characters').service('TagService',TagService);TagService.$inject=['$rootScope','NotificationFactory'];function TagService($rootScope,NotificationFactory){var service={};//Add newTag to tagArray\nservice.addTag=function(tagArray,newTag){if(newTag!==''&&newTag!==undefined){var i=0,alreadyAdded=false;if(tagArray.length>0){while(i<tagArray.length){if(tagArray[i].text===newTag){alreadyAdded=true;}i++;}//if not in array add it.\nif(alreadyAdded===false){tagArray.push({text:newTag});}}else{tagArray.push({text:newTag});}}};//Drop tag with text = text, from tagArray\nservice.dropTag=function(tagArray,text){//are you sure option...\nNotificationFactory.confirmation(function(){$rootScope.$apply(function(){var i=tagArray.length;while(i--){if(tagArray[i].text===text){tagArray.splice(i,1);NotificationFactory.warning('Dropped!','Tag was successfully dropped');break;}}});});};return service;}})();(function(){'use strict';angular.module('core').controller('HeaderController',HeaderController);HeaderController.$inject=['$scope','Authentication','Menus','$location'];function HeaderController($scope,Authentication,Menus,$location){var ctrl=this;ctrl.authentication=Authentication;ctrl.changeTheme=changeTheme;ctrl.isActive=isActive;ctrl.isCollapsed=false;ctrl.isTimedTheme=localStorage.getItem('timedTheme');ctrl.menu=Menus.getMenu('topbar');ctrl.saved=localStorage.getItem('theme');ctrl.styles=[{name:'Day',url:'dist/main-day.css'},{name:'Night',url:'dist/main-night.css'}];ctrl.theme=localStorage.getItem('theme')!==null?JSON.parse(ctrl.saved):ctrl.styles[1].url;ctrl.timedTheme=localStorage.getItem('timedTheme')!==null?JSON.parse(ctrl.isTimedTheme):false;ctrl.toggleCollapsibleMenu=toggleCollapsibleMenu;localStorage.setItem('theme',JSON.stringify(ctrl.theme));localStorage.setItem('timedTheme',JSON.stringify(ctrl.timedTheme));function toggleCollapsibleMenu(){ctrl.isCollapsed=!ctrl.isCollapsed;}// Collapsing the menu after navigation\n$scope.$on('$stateChangeSuccess',function(){ctrl.isCollapsed=false;});function isActive(viewLocation){return viewLocation===$location.path();}function changeTheme(){localStorage.setItem('timedTheme',JSON.stringify(ctrl.timedTheme));var timeOfDayTheme=localStorage.getItem('timedTheme');if(timeOfDayTheme==='false'){localStorage.setItem('theme',JSON.stringify(ctrl.theme));}else{var time=new Date().getHours();if(time>20||time<8){localStorage.setItem('theme',JSON.stringify(ctrl.styles[1].url));}else if(time>8){localStorage.setItem('theme',JSON.stringify(ctrl.styles[0].url));}}var storedValue=localStorage.getItem('theme'),link=document.getElementById('app-theme');link.href=storedValue.substr(1,storedValue.lastIndexOf('\\\"')-1);//remove quotes for whatever reason.\nctrl.theme=storedValue.substr(1,storedValue.lastIndexOf('\\\"')-1);//remove quotes for whatever reason. //set the dropdown to the correct value;\n}}})();(function(){'use strict';angular.module('core').directive('anywhereButHere',anywhereButHere);function anywhereButHere($document,$window){return{restrict:'A',link:function link(scope,element,attrs){element.data('thing',true);/** On click, check what you clicked and whether you can ignore it.\r\n               *    Based on checks false the ng-show of the anywhere-but-here element.\r\n               */angular.element($document[0].body).on('click',function(e){var inThing=angular.element(e.target).inheritedData('thing'),ignore=angular.element(e.target).attr('ignore-here');if(!inThing&&!ignore){scope.$apply(function(){scope[attrs.ngShow]=false;});}});}};}})();(function(){'use strict';angular.module('core').directive('clickPass',clickPass);clickPass.$inject=['$timeout'];function clickPass($timeout){return{restrict:'A',link:function link(scope,element,attrs){element.bind('click',function(event){$timeout(function(){event.stopPropagation();document.getElementById(attrs.clickPass).click();},0);});}};}})();(function(){'use strict';angular.module('core').directive('formatDate',formatDate);function formatDate(){return{require:'ngModel',link:function link(scope,elem,attr,modelCtrl){modelCtrl.$formatters.push(function(modelValue){return modelValue===null?null:new Date(modelValue);});}};}})();(function(){'use strict';angular.module('core').directive('loadingSpinner',loadingSpinner);loadingSpinner.$inject=['$http','spinnerService'];function loadingSpinner($http,spinnerService){return{restrict:'A',transclude:true,replace:true,templateUrl:'/modules/core/templates/loading-spinner.html',scope:{name:'@',size:'@?'},bindToController:'loadingSpinner',controller:function controller($scope){$scope.active=false;//            $scope.isLoading = function () {\n//                return $http.pendingRequests.length > 0;\n//            };\n//            $scope.$watch($scope.isLoading, function (v) {\n//                if ($scope.size === 'fullscreen') {\n//                    if(v) {\n//                        $scope.active = true;\n//                    } else {\n//                        $scope.active = false;\n//                    }\n//                }\n//            });\nvar api={name:$scope.name,show:function show(){$scope.active=true;},hide:function hide(){$scope.active=false;},toggle:function toggle(){$scope.active=!$scope.active;}};spinnerService._register(api);$scope.$on('$destroy',function(){spinnerService._unregister($scope.name);});}};}})();(function(){'use strict';angular.module('core').directive('myProgress',myProgress);function myProgress(){return function(scope,element,attrs){scope.$watch(attrs.myProgress,function(val){var type='checklist-progress';element.html('<div class=\"'+type+'\" style=\"width: '+val+'%;height: 100%\"></div>');});};}})();(function(){'use strict';angular.module('core').filter('calendarFilter',calendarFilter);function calendarFilter(){return function(array,datesSelected){if(array){return array.filter(function(item){//date filter\nif(item.date===null||item.date===undefined){if(datesSelected===false){return item;}return false;}var day=new Date().getDay(),diff=new Date().getDate()-day+(day===0?0:7),temp=new Date(),wkEnd=new Date(temp.setDate(diff)),currentWkEnd=wkEnd.toISOString().substring(0,10),iDate=new Date(item.date).toISOString(),itemDate={year:iDate.substr(0,4),month:iDate.substr(5,2),day:iDate.substr(8,2)},currentDate={year:currentWkEnd.substr(0,4),month:currentWkEnd.substr(5,2),day:currentWkEnd.substr(8,2)};if(datesSelected===false){if(itemDate.year<currentDate.year){return item;}else if(itemDate.year===currentDate.year){if(itemDate.month<currentDate.month){return item;}else if(itemDate.month===currentDate.month){if(itemDate.day<=currentDate.day){return item;}}}}else if(datesSelected===true){if(itemDate.year>currentDate.year){return item;}else if(itemDate.year===currentDate.year){if(itemDate.month>currentDate.month){return item;}else if(itemDate.month===currentDate.month){if(itemDate.day>currentDate.day){return item;}}}}});}};}})();(function(){'use strict';angular.module('core').filter('dateSuffix',dateSuffix);function dateSuffix($filter){var suffixes=['th','st','nd','rd'];return function(input){if(input!==undefined){var dtfilter=$filter('date')(input,'MMMM d'),day=parseInt(dtfilter.slice(-2)),relevantDigits=day<30?day%20:day%30,suffix=relevantDigits<=3?suffixes[relevantDigits]:suffixes[0],dateArray=dtfilter.split(' '),month=dateArray[0];return dateArray[1]+suffix+' '+month+' '+$filter('date')(input,'yyyy');}};}})();(function(){'use strict';angular.module('core').filter('dayFilter',dayFilter);function dayFilter(){return function(array,daySelected){return array.filter(function(item){//special day filter\n//            console.log(item);\nvar ds=daySelected;if(ds==='1'&&item.day==='Monday'){return item;}else if(ds==='2'&&item.day==='Tuesday'){return item;}else if(ds==='3'&&item.day==='Wednesday'){return item;}else if(ds==='4'&&item.day==='Thursday'){return item;}else if(ds==='5'&&item.day==='Friday'){return item;}else if(ds==='6'&&item.day==='Saturday'){return item;}else if(ds==='0'&&item.day==='Sunday'){return item;}else if(ds===''||ds===null||ds===undefined){return item;}else if(ds==='Any'&&item.day==='Any'){return item;}});};}})();(function(){'use strict';angular.module('core').filter('numberFixedLen',numberFixedLen);function numberFixedLen(){return function(n,len){var num=parseInt(n,10);len=parseInt(len,10);if(isNaN(num)||isNaN(len)){return n;}num=''+num;while(num.length<len){num='0'+num;}return num;};}})();(function(){'use strict';angular.module('core').service('FunctionService',FunctionService);FunctionService.$inject=['moment'];function FunctionService(moment){var obj={pad:pad};return obj;function pad(number,width,padChar){padChar=padChar||'0';number=number+'';return number.length>=width?number:new Array(width-number.length+1).join(padChar)+number;}}})();'use strict';//Menu service used for managing  menus\nangular.module('core').service('Menus',[function(){// Define a set of default roles\nthis.defaultRoles=['*'];// Define the menus object\nthis.menus={};// A private function for rendering decision \nvar shouldRender=function shouldRender(user){if(user){if(!!~this.roles.indexOf('*')){return true;}else{for(var userRoleIndex in user.roles){for(var roleIndex in this.roles){if(this.roles[roleIndex]===user.roles[userRoleIndex]){return true;}}}}}else{return this.isPublic;}return false;};// Validate menu existance\nthis.validateMenuExistance=function(menuId){if(menuId&&menuId.length){if(this.menus[menuId]){return true;}else{throw new Error('Menu does not exists');}}else{throw new Error('MenuId was not provided');}return false;};// Get the menu object by menu id\nthis.getMenu=function(menuId){// Validate that the menu exists\nthis.validateMenuExistance(menuId);// Return the menu object\nreturn this.menus[menuId];};// Add new menu object by menu id\nthis.addMenu=function(menuId,isPublic,roles){// Create the new menu\nthis.menus[menuId]={isPublic:isPublic||false,roles:roles||this.defaultRoles,items:[],shouldRender:shouldRender};// Return the menu object\nreturn this.menus[menuId];};// Remove existing menu object by menu id\nthis.removeMenu=function(menuId){// Validate that the menu exists\nthis.validateMenuExistance(menuId);// Return the menu object\ndelete this.menus[menuId];};// Add menu item object\nthis.addMenuItem=function(menuId,menuItemTitle,menuItemURL,menuItemType,menuItemUIRoute,isPublic,roles,position){// Validate that the menu exists\nthis.validateMenuExistance(menuId);// Push new menu item\nthis.menus[menuId].items.push({title:menuItemTitle,link:menuItemURL,menuItemType:menuItemType||'item',menuItemClass:menuItemType,uiRoute:menuItemUIRoute||'/'+menuItemURL,isPublic:isPublic===null||typeof isPublic==='undefined'?this.menus[menuId].isPublic:isPublic,roles:roles===null||typeof roles==='undefined'?this.menus[menuId].roles:roles,position:position||0,items:[],shouldRender:shouldRender});// Return the menu object\nreturn this.menus[menuId];};// Add submenu item object\nthis.addSubMenuItem=function(menuId,rootMenuItemURL,menuItemTitle,menuItemURL,menuItemUIRoute,isPublic,roles,position){// Validate that the menu exists\nthis.validateMenuExistance(menuId);// Search for menu item\nfor(var itemIndex in this.menus[menuId].items){if(this.menus[menuId].items[itemIndex].link===rootMenuItemURL){// Push new submenu item\nthis.menus[menuId].items[itemIndex].items.push({title:menuItemTitle,link:menuItemURL,uiRoute:menuItemUIRoute||'/'+menuItemURL,isPublic:isPublic===null||typeof isPublic==='undefined'?this.menus[menuId].items[itemIndex].isPublic:isPublic,roles:roles===null||typeof roles==='undefined'?this.menus[menuId].items[itemIndex].roles:roles,position:position||0,shouldRender:shouldRender});}}// Return the menu object\nreturn this.menus[menuId];};// Remove existing menu object by menu id\nthis.removeMenuItem=function(menuId,menuItemURL){// Validate that the menu exists\nthis.validateMenuExistance(menuId);// Search for menu item to remove\nfor(var itemIndex in this.menus[menuId].items){if(this.menus[menuId].items[itemIndex].link===menuItemURL){this.menus[menuId].items.splice(itemIndex,1);}}// Return the menu object\nreturn this.menus[menuId];};// Remove existing menu object by menu id\nthis.removeSubMenuItem=function(menuId,submenuItemURL){// Validate that the menu exists\nthis.validateMenuExistance(menuId);// Search for menu item to remove\nfor(var itemIndex in this.menus[menuId].items){for(var subitemIndex in this.menus[menuId].items[itemIndex].items){if(this.menus[menuId].items[itemIndex].items[subitemIndex].link===submenuItemURL){this.menus[menuId].items[itemIndex].items.splice(subitemIndex,1);}}}// Return the menu object\nreturn this.menus[menuId];};//Adding the topbar menu\nthis.addMenu('topbar');}]);(function(){'use strict';angular.module('core').factory('NotificationFactory',NotificationFactory);function NotificationFactory(){var self=this;/*global swal *//*global toastr */toastr.options={'closeButton':false,'debug':false,'newestOnTop':false,'progressBar':false,'positionClass':'toast-bottom-right','preventDuplicates':false,'onclick':null,'showDuration':'300','hideDuration':'1000','timeOut':'5000','extendedTimeOut':'1000','showEasing':'swing','hideEasing':'linear','showMethod':'fadeIn','hideMethod':'fadeOut'};return{success:function success(title,text){toastr.success(text,title,'Success');},warning:function warning(title,text){toastr.warning(text,title,'Warning');},error:function error(title,text){toastr.error(text,title,'Error');},popup:function popup(title,text,type){swal({title:title,text:text,type:type});},confirmation:function confirmation(thenDo){//are you sure option...\nswal({title:'Are you sure?',text:'Are you sure that you want to delete this?',type:'warning',showCancelButton:true,closeOnConfirm:true,confirmButtonText:'Yes, delete it!',confirmButtonColor:'#ec6c62'},thenDo);}};}})();(function(){'use strict';angular.module('core').factory('spinnerService',SpinnerService);SpinnerService.$inject=['$q'];function SpinnerService($q){var spinners={},queue={},loads={};return{spinners:spinners,// private method for spinner registration.\n_register:function _register(data){if(!data.hasOwnProperty('name')){throw new Error('Spinner must specify a name when registering with the spinner service.');}if(spinners.hasOwnProperty(data.name)){throw new Error('A spinner with the name \\''+data.name+'\\' has already been registered.');}spinners[data.name]=data;// Increase the spinner count.\nthis.count++;// Check if spinnerId was in the queue, if so then fire the\n// queued function.\nif(queue[data.name]){//            console.log(queue, loads);\nif(loads[data.name]){//                console.log(loads[data.name]);\nthis[queue[data.name]](data.name,loads[data.name]);delete loads[data.name];delete queue[data.name];}else{//                console.log('queued', queue);\nthis[queue[data.name]](data.name);delete queue[data.name];}}//        console.log(spinners);\n},_unregister:function _unregister(name){if(spinners.hasOwnProperty(name)){delete spinners[name];}},loading:function loading(name,optionsOrPromise){if(!this.spinners[name]){queue[name]='loading';loads[name]=optionsOrPromise;//            console.log('defer', loads[name]);\nreturn;}var spinner=spinners[name];spinner.show(name);optionsOrPromise=optionsOrPromise||{};//Check if it's promise\nif(optionsOrPromise.always||optionsOrPromise['finally']){optionsOrPromise={promise:optionsOrPromise};}var options=angular.extend({},optionsOrPromise);if(options.promise){if(options.promise.always){options.promise.always(function(){spinner.hide(name);});}else if(options.promise['finally']){options.promise['finally'](function(){spinner.hide(name);});}}},show:function show(name){//        console.log('show');\nif(!this.spinners[name]){queue[name]='show';return;}var spinner=spinners[name];if(!spinner){throw new Error('No spinner named \\''+name+'\\' is registered.');}spinner.show();},hide:function hide(name){//        console.log('hide');\nif(!this.spinners[name]){queue[name]='hide';return;}var spinner=spinners[name];if(!spinner){throw new Error('No spinner named \\''+name+'\\' is registered.');}spinner.hide();},toggle:function toggle(name){//        console.log('toggle');\nif(!this.spinners[name]){queue[name]='toggle';return;}var spinner=spinners[name];if(!spinner){throw new Error('No spinner named \\''+name+'\\' is registered.');}spinner.toggle();},count:0};}})();'use strict';// Setting up route\nangular.module('history').config(['$stateProvider','$urlRouterProvider',function($stateProvider,$urlRouterProvider){// Redirect to home view when route not found\n$urlRouterProvider.otherwise('/signin');// Home state routing\n$stateProvider.state('history',{url:'/history',templateUrl:'modules/history/views/history.client.view.html'});}]);(function(){'use strict';angular.module('history').controller('HistoryController',HistoryController);HistoryController.$inject=['$scope','$stateParams','$location','Authentication','AnimeHistory','MangaHistory','HistoryService','ListService','spinnerService'];function HistoryController($scope,$stateParams,$location,Authentication,AnimeHistory,MangaHistory,HistoryService,ListService,spinnerService){var ctrl=this,latestDate=new Date().setDate(new Date().getDate()-29);ctrl.authentication=Authentication;ctrl.buildHistory=buildHistory;ctrl.filterConfig={historyFilter:'Today'};ctrl.happenedWhen=happenedWhen;ctrl.historyGroups=[{name:'Today'},{name:'Yesterday'},{name:'This week'},{name:'Last week'},{name:'Two weeks ago'},{name:'Three weeks ago'},{name:'Four weeks ago'}];ctrl.view='Anime';function buildHistory(){spinnerService.loading('history',AnimeHistory.query({latest:latestDate}).$promise.then(function(result){return HistoryService.buildHistoryList(result);}).then(function(result){//  console.log('build anime history: ', result);\nctrl.animeHistory=result;return MangaHistory.query({latest:latestDate}).$promise;}).then(function(result){//    console.log('manga', result);\nreturn HistoryService.buildHistoryList(result);}).then(function(result){//                    console.log('build manga history: ', result);\nctrl.mangaHistory=result;}));}//Needed to catch 'Character' setting and skip it.\n$scope.$watch('view',function(newValue){if(ctrl.view!==undefined){if(newValue!=='Anime'&&newValue!=='Manga'){ctrl.view='Anime';}}});function happenedWhen(when){return HistoryService.happenedWhen(when);}}})();(function(){'use strict';angular.module('tasks').controller('ViewHistoryController',ViewHistoryController);ViewHistoryController.$inject=['$scope','data','$stateParams','Authentication','ItemService','NotificationFactory','spinnerService','$uibModalInstance'];function ViewHistoryController($scope,data,$stateParams,Authentication,ItemService,NotificationFactory,spinnerService,$uibModalInstance){var ctrl=this,historyStore=[];ctrl.cancel=cancel;ctrl.deleteHistory=deleteHistory;ctrl.submit=submit;ctrl.type=data.type;ctrl.updated=false;ctrl.viewItem=data.viewItem;function deleteHistory(item,history){//are you sure option...\nNotificationFactory.confirmation(function(){if(historyStore.length===0){historyStore=ctrl.viewItem.meta.history;}ctrl.viewItem=ItemService.deleteHistory(item,history);ctrl.updated=true;});}function submit(){$uibModalInstance.close(ctrl.updated);}function cancel(){if(ctrl.updated){ctrl.viewItem.meta.history=historyStore;}$uibModalInstance.dismiss();}}})();(function(){'use strict';angular.module('history').filter('historySeparator',historySeparator);historySeparator.$inject=['HistoryService','moment'];function historySeparator(HistoryService,moment){return function(array,level,timeframe){var itemDate,attr=level==='group'?'latest':'date';if(array!==undefined){return array.filter(function(item){itemDate=moment(item[attr]).startOf('day');return HistoryService.filterItemHistory(timeframe.toLowerCase(),itemDate)?item:false;});}};}})();(function(){'use strict';//History service used to communicate Animeitems REST endpoints\nangular.module('history').factory('AnimeHistory',AnimeHistory);AnimeHistory.$inject=['$resource'];function AnimeHistory($resource){return $resource('history/anime/:latest',{latest:'@_latest'},{update:{method:'PUT'}});}})();(function(){'use strict';angular.module('history').service('HistoryService',HistoryService);HistoryService.$inject=['moment','$q'];function HistoryService(moment,$q){var service={buildHistoryList:buildHistoryList,extractHistory:extractHistory,filterItemHistory:filterItemHistory,getEndsOfWeek:getEndsOfWeek,getSetDaysAgo:getSetDaysAgo,groupItemHistory:groupItemHistory,happenedWhen:happenedWhen,today:moment(new Date()).startOf('day'),weekBeginning:weekBeginning,weekEnding:weekEnding},endsOfWeek=getEndsOfWeek(),mondays=endsOfWeek.mondays,sundays=endsOfWeek.sundays;return service;// getting mondays and sundays for this, last, two and three weeks ago.\nfunction getEndsOfWeek(){var endsOfWeek=[],thisMonday=service.weekBeginning(),thisSunday=service.weekEnding();endsOfWeek={mondays:[thisMonday,service.getSetDaysAgo(thisMonday,7),service.getSetDaysAgo(thisMonday,14),service.getSetDaysAgo(thisMonday,21),service.getSetDaysAgo(thisMonday,28)],sundays:[thisSunday,service.getSetDaysAgo(thisSunday,7),service.getSetDaysAgo(thisSunday,14),service.getSetDaysAgo(thisSunday,21),service.getSetDaysAgo(thisSunday,28)]};return endsOfWeek;}//get 'daysAgo' days ago from 'thisEnd' date.\nfunction getSetDaysAgo(thisEnd,daysAgo){var newDate=moment(thisEnd).subtract(daysAgo,'days');return newDate;}//get 'this' monday.\nfunction weekBeginning(){var date=new Date(),day=date.getDay(),diff=date.getDate()-day+(day===0?-6:1),temp=new Date(),wkBeg=new Date(temp.setDate(diff));return moment(wkBeg.toISOString()).startOf('day');}//get 'this' sunday.\nfunction weekEnding(){var date=new Date(),day=date.getDay(),diff=date.getDate()-day+(day===0?0:7),temp=new Date(),wkEnd=new Date(temp.setDate(diff));return moment(wkEnd.toISOString()).endOf('day');}function buildHistoryList(items){var deferred=$q.defer(),promise=service.extractHistory(items).then(function(result){//                console.log('extract history: ', result);\nresult.sort(function(a,b){var dateA=a.date,dateB=b.date;if(dateA>dateB)return-1;if(dateA<dateB)return 1;if(dateA===dateB)return 0;});return service.groupItemHistory(result);}).then(function(result){//                console.log('grouped', result);\ndeferred.resolve(result);});return deferred.promise;}function extractHistory(items){var deferred=$q.defer(),itemHistory=[],today=moment(new Date()).startOf('day');angular.forEach(items,function(item){angular.forEach(item.meta.history,function(history){var cutoff=moment(history.date).startOf('day'),diff=today.diff(cutoff,'days');//                console.log(diff);\nif(diff<29){itemHistory.push({date:history.date,value:history.value,title:item.title,id:item._id});}});});deferred.resolve(itemHistory);return deferred.promise;}function groupItemHistory(itemHistory){var deferred=$q.defer(),index,prevItem,item,group,length=itemHistory.length,groupedHistory=[];for(var i=0;i<length;i++){item=itemHistory[i];if(i===0){groupedHistory.push({title:item.title,items:[],count:1,latest:item.date,oldest:item.date});groupedHistory[0].items.push(item);}else if(i!==0){prevItem=itemHistory[i-1];index=groupedHistory.length-1;if(prevItem.title===item.title){groupedHistory[index].items.push(item);groupedHistory[index].count++;groupedHistory[index].oldest=item.date;}else if(prevItem.title!==item.title){group={title:item.title,items:[],count:1,latest:item.date,oldest:item.date};group.items.push(item);groupedHistory.push(group);}}}deferred.resolve(groupedHistory);return deferred.promise;}function filterItemHistory(timeframe,itemDate){var diff=service.today.diff(itemDate,'days');switch(timeframe){case'today':return diff===0;case'yesterday':return diff===1;case'this week':return mondays[0]<=itemDate&&itemDate<=sundays[0];case'last week':return mondays[1]<=itemDate&&itemDate<=sundays[1];case'two weeks ago':return mondays[2]<=itemDate&&itemDate<=sundays[2];case'three weeks ago':return mondays[3]<=itemDate&&itemDate<=sundays[3];case'four weeks ago':return mondays[4]<=itemDate&&itemDate<=sundays[4];}}/** function to display relative time.\r\n     *  Using diff because fromNow will create conflicts between\r\n     *  the item date and the 'group date'.\r\n     */function happenedWhen(when){//          console.log(latest, updated);\nvar today=moment(new Date()).startOf('day'),thisDate=moment(when).startOf('day'),diff=today.diff(thisDate,'days');//for 0 and 1 day(s) ago use the special term.\nif(diff===0){return'Today at '+moment(when).format('HH:mm');}else if(diff===1){return'Yesterday at '+moment(when).format('HH:mm');}else{return diff+' days ago at '+moment(when).format('HH:mm');}}}})();(function(){'use strict';angular.module('history').factory('MangaHistory',MangaHistory);MangaHistory.$inject=['$resource'];function MangaHistory($resource){return $resource('history/manga/:latest',{latest:'@_latest'},{update:{method:'PUT'}});}})();'use strict';// Configuring the Articles module\nangular.module('mangaitems').run(['Menus',function(Menus){// Set top bar menu items\nMenus.addMenuItem('topbar','Mangaitems','mangaitems','dropdown','/mangaitems(/create)?');Menus.addSubMenuItem('topbar','mangaitems','List Mangaitems','mangaitems');Menus.addSubMenuItem('topbar','mangaitems','New Mangaitem','mangaitems/create');}]);'use strict';//Setting up route\nangular.module('mangaitems').config(['$stateProvider',function($stateProvider){// Mangaitems state routing\n$stateProvider.state('listMangaitems',{url:'/mangaitems',templateUrl:'modules/mangaitems/views/list-mangaitems.client.view.html'}).state('createMangaitem',{url:'/mangaitems/create',templateUrl:'modules/mangaitems/views/create-mangaitem.client.view.html'}).state('viewMangaitem',{url:'/mangaitems/:mangaitemId',templateUrl:'modules/mangaitems/views/view-mangaitem.client.view.html'}).state('editMangaitem',{url:'/mangaitems/:mangaitemId/edit',templateUrl:'modules/mangaitems/views/edit-mangaitem.client.view.html'});}]);(function(){'use strict';angular.module('mangaitems').controller('MangaitemsController',MangaitemsController);MangaitemsController.$inject=['$scope','$stateParams','$location','Authentication','Mangaitems','Animeitems','fileUpload','$sce','$window','ItemService','ListService','NotificationFactory','MangaFactory','spinnerService','TagService','$uibModal'];function MangaitemsController($scope,$stateParams,$location,Authentication,Mangaitems,Animeitems,fileUpload,$sce,$window,ItemService,ListService,NotificationFactory,MangaFactory,spinnerService,TagService,$uibModal){var ctrl=this;ctrl.addTag=addTag;ctrl.authentication=Authentication;ctrl.chapters=0;ctrl.create=create;ctrl.dropTag=dropTag;ctrl.filterConfig={showingCount:0,sortType:'',sortReverse:true,ratingLevel:undefined,ratingActions:{maxRating:10,percent:undefined,overStar:null},searchTags:'',tagsForFilter:[],taglessItem:false,areTagless:false,selectListOptions:{},statTags:[],viewItem:''};ctrl.finalNumbers=false;//default show status of final number fields in edit view.\nctrl.find=find;ctrl.findAnime=findAnime;ctrl.findOne=findOne;ctrl.imgPath='';//image path\nctrl.itemUpdate=new Date();// today's date as 'yyyy-MM-dd' for the auto-pop of 'latest' in edit page.\nctrl.latest=ctrl.itemUpdate;ctrl.latestDate=latestDate;ctrl.pageConfig={currentPage:0,pageSize:10};ctrl.remove=remove;ctrl.removeTag=removeTag;ctrl.start=ctrl.itemUpdate;ctrl.tagArray=[];// holding tags pre-submit\nctrl.tagArrayRemove=[];ctrl.tickOff=tickOff;ctrl.trustAsResourceUrl=trustAsResourceUrl;ctrl.update=update;ctrl.uploadFile=uploadFile;ctrl.usedTags=[];//for typeahead array.\nctrl.viewItemHistory=viewItemHistory;ctrl.volumes=0;ctrl.whichController='mangaitem';//allow retreival of local resource\nfunction trustAsResourceUrl(url){return $sce.trustAsResourceUrl(url);}//For adding new tags.\nfunction addTag(){TagService.addTag(ctrl.tagArray,ctrl.newTag);ctrl.newTag='';}//Drop tag for new tags.\nfunction dropTag(text){TagService.dropTag(ctrl.tagArray,text);}//Drop tag for animeitem tags.\nfunction removeTag(text){TagService.dropTag(ctrl.mangaitem.tags,text);}// Create new Mangaitem\nfunction create(){var mangaitem=new Mangaitems();//Handle situation if objects not selected.\n// Create new Mangaitem object\nmangaitem=new Mangaitems({title:ctrl.title,chapters:ctrl.chapters,volumes:ctrl.volumes,start:ctrl.start,latest:ctrl.latest,finalChapter:ctrl.finalChapter,finalVolume:ctrl.finalVolume,hardcopy:ctrl.hardcopy,anime:ctrl.anime!==undefined&&ctrl.anime!==null?ctrl.anime._id:ctrl.anime,tags:ctrl.tagArray,user:ctrl.user});// Redirect after save\nmangaitem.$save(function(response){$location.path('/mangaitems/'+response._id);NotificationFactory.success('Saved!','Manga was saved successfully');},function(errorResponse){ctrl.error=errorResponse.data.message;NotificationFactory.error('Error!',errorResponse.data.message);});}// Remove existing Mangaitem\nfunction remove(mangaitem){//are you sure option...\nNotificationFactory.confirmation(function(){if(mangaitem){mangaitem.$remove();for(var i in ctrl.mangaitems){if(ctrl.mangaitems[i]===mangaitem){ctrl.mangaitems.splice(i,1);}}}else{ctrl.mangaitem.$remove(function(){$location.path('/mangaitems');});}NotificationFactory.warning('Deleted!','Manga was successfully deleted.');});}// Update existing Mangaitem\nfunction update(){var mangaitem=ctrl.mangaitem;ctrl.mangaitem=undefined;MangaFactory.update(mangaitem,ctrl.tagArray,ctrl.updateHistory,ctrl.imgPath);}function tickOff(item){item.chapters+=1;item.latest=new Date();//update latest.\nctrl.updateHistory=true;//add to history.\nctrl.mangaitem=item;ctrl.update();}// Find a list of Mangaitems\nfunction find(){ctrl.filterConfig.selectListOptions=ListService.getSelectListOptions(ctrl.whichController);spinnerService.loading('manga',Mangaitems.query().$promise.then(function(result){ctrl.mangaitems=result;ctrl.filterConfig.areTagless=ListService.checkForTagless(result);ctrl.filterConfig.statTags=ItemService.buildStatTags(result,0);}));}// Find existing Mangaitem\nfunction findOne(){Mangaitems.get({mangaitemId:$stateParams.mangaitemId}).$promise.then(function(result){ctrl.mangaitem=result;//            console.log(ctrl.mangaitem);\n});}// Find a list of Animeitems for dropdowns.\nfunction findAnime(){ctrl.animeitems=Animeitems.query();}//image upload\nfunction uploadFile(){ctrl.imgPath='/modules/mangaitems/img/'+ctrl.myFile.name;fileUpload.uploadFileToUrl(ctrl.myFile,'/fileUpload');}//latest date display format.\nfunction latestDate(latest,updated){return ItemService.latestDate(latest,updated);}function viewItemHistory(){var modalInstance=$uibModal.open({animation:true,templateUrl:'/modules/history/views/item-history.html',controller:'ViewHistoryController as viewHistory',size:'lg',resolve:{data:function data(){return{viewItem:ctrl.filterConfig.viewItem,type:'manga'};}}}).result.then(function(result){console.log('closed history: ',result,ctrl.filterConfig.viewItem.meta);if(result){ctrl.mangaitem=ctrl.filterConfig.viewItem;ctrl.update();}});}}})();(function(){'use strict';angular.module('tasks').directive('mangaItemModel',mangaItemModel);function mangaItemModel(){return{restrict:'A',replace:true,templateUrl:'modules/mangaitems/templates/manga-item.html'};}})();(function(){'use strict';angular.module('mangaitems').factory('MangaFactory',MangaFactory);MangaFactory.$inject=['Mangaitems','ListService','ItemService','NotificationFactory','$location'];function MangaFactory(Mangaitems,ListService,ItemService,NotificationFactory,$location){return{update:function update(item,tagArray,updateHistory,imgPath){var mangaitem=item;console.log(mangaitem);//dropdown passes whole object, if-statements for lazy fix - setting them to _id.\nif(item.anime!==null&&item.anime!==undefined){mangaitem.anime=item.anime._id;}if(tagArray!==undefined){mangaitem.tags=ListService.concatenateTagArrays(mangaitem.tags,tagArray);}//update the item history.\nmangaitem=ItemService.itemHistory(mangaitem,updateHistory,'manga');if(imgPath!==undefined&&imgPath!==null&&imgPath!==''){mangaitem.image=imgPath;}//console.log($scope.imgPath);\n//console.log(mangaitem.image);\n//handle end date\nif(mangaitem.chapters===mangaitem.finalChapter&&mangaitem.finalChapter!==0){if(mangaitem.end===undefined||mangaitem.end===null){mangaitem.volumes=mangaitem.finalVolume;mangaitem.end=mangaitem.latest;//console.log(animeitem.end);\n}}else if(mangaitem.reReading===false){mangaitem.end=null;}//handle status: completed.\nif(mangaitem.end!==undefined&&mangaitem.end!==null){mangaitem.status=true;}else{mangaitem.status=false;}//handle re-reading, re-read count.\nif(mangaitem.reReading===true&&mangaitem.chapters===mangaitem.finalChapter){mangaitem.volumes=mangaitem.finalVolume;mangaitem.reReadCount+=1;mangaitem.reReading=false;}mangaitem.$update(function(){if(window.location.href.indexOf('tasks')===-1)$location.path('/mangaitems');NotificationFactory.success('Saved!','Manga was saved successfully');},function(errorResponse){var error=errorResponse.data.message;NotificationFactory.error('Error!',errorResponse.data.message);});}};}})();(function(){'use strict';//Mangaitems service used to communicate Mangaitems REST endpoints\nangular.module('mangaitems').factory('Mangaitems',MangaitemsFactory);MangaitemsFactory.$inject=['$resource'];function MangaitemsFactory($resource){return $resource('mangaitems/:mangaitemId',{mangaitemId:'@_id'},{update:{method:'PUT'}});}})();'use strict';// Configuring the Articles module\nangular.module('orders').run(['Menus',function(Menus){// Set top bar menu items\nMenus.addMenuItem('topbar','Orders','orders','dropdown','/orders(/create)?');Menus.addSubMenuItem('topbar','orders','List Orders','orders');Menus.addSubMenuItem('topbar','orders','New Order','orders/create');}]);'use strict';//Setting up route\nangular.module('orders').config(['$stateProvider',function($stateProvider){// Orders state routing\n$stateProvider.state('listOrders',{url:'/orders',templateUrl:'modules/orders/views/list-orders.client.view.html'}).state('createOrder',{url:'/orders/create',templateUrl:'modules/orders/views/create-order.client.view.html'}).state('viewOrder',{url:'/orders/:orderId',templateUrl:'modules/orders/views/view-order.client.view.html'}).state('editOrder',{url:'/orders/:orderId/edit',templateUrl:'modules/orders/views/create-order.client.view.html'});}]);'use strict';var CompleteOrdersController=function(){function CompleteOrdersController($scope,$uibModalInstance,order){this.$scope=$scope;this.$uibModalInstance=$uibModalInstance;this.order=order;this.newPrice={company:'',price:null};}CompleteOrdersController.prototype.editOrder=function(index){var item=this.order.nextVolume.prices[index];this.newPrice.company=item.company;this.newPrice.price=item.price;this.order.nextVolume.prices.splice(index,1);};CompleteOrdersController.prototype.completeOrder=function(){this.order.nextVolume.prices.push({company:this.newPrice.company,date:this.newPrice.date,price:this.newPrice.price,rrp:this.order.rrp,paid:true});this.$uibModalInstance.close(this.order);};CompleteOrdersController.prototype.cancel=function(){this.$uibModalInstance.dismiss('cancel');};CompleteOrdersController.controllerId='CompleteOrdersController';CompleteOrdersController.$inject=['$scope','$uibModalInstance','order'];return CompleteOrdersController;}();angular.module('orders').controller(CompleteOrdersController.controllerId,CompleteOrdersController);'use strict';var CreateOrdersController=function(){function CreateOrdersController($scope,$stateParams,$location,Authentication,$q,Orders,Mangaitems,$uibModal,NotificationFactory){this.$scope=$scope;this.$stateParams=$stateParams;this.$location=$location;this.Authentication=Authentication;this.$q=$q;this.Orders=Orders;this.Mangaitems=Mangaitems;this.$uibModal=$uibModal;this.NotificationFactory=NotificationFactory;this.isCreateMode=this.$stateParams.orderId===undefined;this.order={};this.orderCopy={series:'',nextVolume:{volume:1,date:Date.now(),rrp:0.00,prices:[]},rrp:0.00,orderHistory:[]};this.authentication=this.Authentication;this.stepConfig={stepHeaders:[{text:'Set next order'},{text:'Set prices'}],currentStep:1,stepCount:2,items:[]};this.init();}CreateOrdersController.prototype.init=function(){var _this=this;angular.copy(this.orderCopy,this.order);if(this.isCreateMode){console.log('create mode');this.Mangaitems.query().$promise.then(function(result){_this.stepConfig.items=result;console.log('items: ',result);});}else{console.log('edit mode');this.findOne();}console.log('init done: ');};CreateOrdersController.prototype.takeStep=function(step,direction){console.log('stepping: ',step,direction);this.stepConfig.currentStep=direction?step+1:step-1;};CreateOrdersController.prototype.processOrder=function(){if(this.order.nextVolume.volume>0){var temp=angular.copy(this.order.nextVolume);this.order.orderHistory.push(this.order.nextVolume);this.order.nextVolume={volume:temp.volume+1,date:null,rrp:this.order.rrp,prices:[]};this.update();}};CreateOrdersController.prototype.cancel=function(){this.$location.path('orders');};CreateOrdersController.prototype.create=function(){var _this=this;var order=new this.Orders({series:this.order.series._id,nextVolume:{date:this.order.nextVolume.date,volume:this.order.nextVolume.volume,rrp:this.order.nextVolume.rrp,prices:this.order.nextVolume.prices},rrp:this.order.rrp,orderHistory:this.order.orderHistory});order.$save(function(response){_this.$location.path('orders/'+response._id);_this.NotificationFactory.success('Saved!','New Order was successfully saved!');angular.copy(_this.orderCopy,_this.order);},function(errorResponse){this.error=errorResponse.data.message;this.NotificationFactory.error('Error!','Order failed to save!');});};CreateOrdersController.prototype.update=function(){var _this=this;var order=this.order;order.$update(function(){_this.$location.path('orders/'+order._id);_this.NotificationFactory.success('Saved!','Order was successfully saved!');},function(errorResponse){this.error=errorResponse.data.message;this.NotificationFactory.error('Error!','Order failed to save!');});};CreateOrdersController.prototype.openBoughtDialog=function(){var _this=this;var modalInstance=this.$uibModal.open({animation:true,templateUrl:'/modules/orders/views/complete-order.client.view.html',controller:'CompleteOrdersController as modal',size:'md',resolve:{order:function order(){return _this.order;}}});modalInstance.result.then(function(result){console.log(result);_this.order=result;_this.processOrder();});};CreateOrdersController.prototype.findOne=function(){this.order=this.Orders.get({orderId:this.$stateParams.orderId});console.log('found one: ',this.order);};CreateOrdersController.controllerId='CreateOrdersController';CreateOrdersController.$inject=['$scope','$stateParams','$location','Authentication','$q','Orders','Mangaitems','$uibModal','NotificationFactory'];return CreateOrdersController;}();angular.module('orders').controller(CreateOrdersController.controllerId,CreateOrdersController);'use strict';var OrderHistoryController=function(){function OrderHistoryController($scope,$uibModalInstance,order,$filter){this.$scope=$scope;this.$uibModalInstance=$uibModalInstance;this.order=order;this.$filter=$filter;this.processHistory();}OrderHistoryController.prototype.processHistory=function(){var _this=this;angular.forEach(this.order.orderHistory,function(item){console.log('order history: ',item);var len=item.prices.length;for(var i=0;i<len;i++){if(item.prices[i].paid){var cost=_this.$filter('number')(item.prices[i].price,2),rrp=_this.$filter('number')(item.prices[i].rrp,2);item.purchaseDate=item.prices[i].date;item.paid=cost;item.rrpInstance=rrp;item.saving=(cost/rrp*100).toFixed(2);}}});};OrderHistoryController.prototype.cancel=function(){this.$uibModalInstance.dismiss('cancel');};OrderHistoryController.controllerId='OrderHistoryController';OrderHistoryController.$inject=['$scope','$uibModalInstance','order','$filter'];return OrderHistoryController;}();angular.module('orders').controller(OrderHistoryController.controllerId,OrderHistoryController);'use strict';var OrdersController=function(){function OrdersController($scope,$stateParams,$location,Authentication,Orders,spinnerService,$uibModal){this.$scope=$scope;this.$stateParams=$stateParams;this.$location=$location;this.Authentication=Authentication;this.Orders=Orders;this.spinnerService=spinnerService;this.$uibModal=$uibModal;this.authentication=this.Authentication;this.order=undefined;this.orders=[];this.pageConfig={currentPage:0,pageSize:10};this.init();}OrdersController.prototype.init=function(){console.log('init: ',this.$stateParams);if(this.$stateParams.orderId){console.log('find one');this.findOne();}else{console.log('find all');this.find();}};OrdersController.prototype.remove=function(order){if(order){order.$remove();for(var i=0,length=this.order.length;i<length;i++){if(this.orders[i]===order){this.orders.splice(i,1);return;}}}else{this.order.$remove(function(){this.$location.path('orders');});}};OrdersController.prototype.find=function(){var _this=this;this.spinnerService.loading('orders',this.Orders.query().$promise.then(function(result){_this.orders=result;}));};OrdersController.prototype.findOne=function(){var _this=this;this.spinnerService.loading('orders',this.Orders.get({orderId:this.$stateParams.orderId}).$promise.then(function(result){_this.order=result;}));};OrdersController.prototype.openOrderHistoryDialog=function(){var _this=this;var modalInstance=this.$uibModal.open({animation:true,templateUrl:'/modules/orders/views/order-history.client.view.html',controller:'OrderHistoryController as modal',size:'md',resolve:{order:function order(){return _this.order;}}});};OrdersController.controllerId='OrdersController';OrdersController.$inject=['$scope','$stateParams','$location','Authentication','Orders','spinnerService','$uibModal'];return OrdersController;}();angular.module('orders').controller(OrdersController.controllerId,OrdersController);(function(){'use strict';angular.module('orders').factory('Orders',OrdersFactory);OrdersFactory.$inject=['$resource'];function OrdersFactory($resource){return $resource('orders/:orderId',{orderId:'@_id'},{update:{method:'PUT'}});}})();'use strict';// Setting up route\nangular.module('ratings').config(['$stateProvider','$urlRouterProvider',function($stateProvider,$urlRouterProvider){// Redirect to home view when route not found\n$urlRouterProvider.otherwise('/signin');// Home state routing\n$stateProvider.state('ratings',{url:'/ratings',templateUrl:'modules/ratings/views/ratings.client.view.html'});}]);(function(){'use strict';angular.module('ratings').controller('RatingsController',RatingsController);RatingsController.$inject=['$scope','$stateParams','$location','Authentication','Animeitems','Mangaitems','ListService','NotificationFactory','StatisticsService','spinnerService'];function RatingsController($scope,$stateParams,$location,Authentication,Animeitems,Mangaitems,ListService,NotificationFactory,StatisticsService,spinnerService){var ctrl=this;ctrl.authentication=Authentication;ctrl.episodeScore=episodeScore;ctrl.find=find;ctrl.go=go;ctrl.hoveringOver=hoveringOver;ctrl.itemScore=itemScore;ctrl.maxRating=10;ctrl.modelOptions={debounce:700};ctrl.pageConfig={currentPage:0,pageSize:20};ctrl.ratingLevel=undefined;//default rating filter\nctrl.sortReverse=true;ctrl.sortType='rating';ctrl.view='Anime';ctrl.viewEpisodeRatings=viewEpisodeRatings;ctrl.viewItem=undefined;//rating 'tooltip' function\nfunction hoveringOver(value){ctrl.overStar=value;ctrl.percent=100*(value/ctrl.maxRating);}function go(id){$location.path('/mangaitems/'+id);}function getItems(view){if(view==='Anime'){spinnerService.loading('rating',Animeitems.query().$promise.then(function(result){ctrl.items=result;}));}else if(view==='Manga'){spinnerService.loading('rating',Mangaitems.query().$promise.then(function(result){ctrl.items=result;}));}ctrl.viewItem=undefined;}function find(view){if(view==='Anime'||view==='Manga'){getItems(view);}else{ctrl.view='Anime';getItems(ctrl.view);}}//apply new score.\nfunction itemScore(item,score){if(item.rating!==score){item.rating=score;item.$update(function(){$location.path('ratings');NotificationFactory.success('Saved!','New rating was saved successfully');},function(errorResponse){ctrl.error=errorResponse.data.message;NotificationFactory.error('Error!','Your change failed!');});//                console.log('update');\n}return false;}/** Episode rating functions below here.\r\n     */function viewEpisodeRatings(item){ctrl.viewItem=ctrl.viewItem!==item?item:undefined;ctrl.isEqual=ctrl.viewItem===item?true:false;ctrl.search=ctrl.viewItem===item?item.title:'';if(ctrl.viewItem!==undefined){spinnerService.loading('summary',StatisticsService.buildSummaryFunctions(ctrl.viewItem.meta.history).then(function(result){ctrl.summaryFunctions=result;}));}}function episodeScore(finished){//            console.log('finished: ', finished, ctrl.viewItem.meta.history);\nif(finished){var item=ctrl.viewItem;item.$update(function(){$location.path('ratings');NotificationFactory.success('Saved!','New episode rating was saved successfully');spinnerService.loading('summary',StatisticsService.buildSummaryFunctions(ctrl.viewItem.meta.history).then(function(result){ctrl.summaryFunctions=result;}));},function(errorResponse){ctrl.error=errorResponse.data.message;NotificationFactory.error('Error!','Your change failed!');});}}}})();(function(){'use strict';angular.module('ratings').directive('focusOnShow',focusOnShow);function focusOnShow($timeout){return function(scope,element,attrs){scope.$watch(attrs.focusOnShow,function(newValue){//            console.log('preview changed!')\n$timeout(function(){var myValue=newValue&&element[0].focus();return myValue;});},true);};}})();'use strict';// Setting up route\nangular.module('statistics').config(['$stateProvider','$urlRouterProvider',function($stateProvider,$urlRouterProvider){// Redirect to home view when route not found\n$urlRouterProvider.otherwise('/signin');// Home state routing\n$stateProvider.state('statistics',{url:'/statistics',templateUrl:'modules/statistics/views/statistics.client.view.html'});}]);(function(){'use strict';angular.module('statistics').controller('StatisticsController',StatisticsController);StatisticsController.$inject=['$scope','$stateParams','$location','Authentication','Animeitems','Mangaitems','Characters','Toptens','ListService','ItemService','CharacterService','StatisticsService','$filter','spinnerService'];function StatisticsController($scope,$stateParams,$location,Authentication,Animeitems,Mangaitems,Characters,Toptens,ListService,ItemService,CharacterService,StatisticsService,$filter,spinnerService){var ctrl=this,filter=$filter('filter');ctrl.authentication=Authentication;ctrl.colours={red:'#c9302c',green:'#449d44',blue:'#31b0d5'};//'red'; '#d9534f'; ////'green';'#5cb85c'; ////'blue';'#5bc0de'; //\nctrl.commonArrays=ListService.getCommonArrays('statistics');ctrl.dataStore={anime:[],manga:[],character:[],toptens:{anime:{},manga:{},character:{}}};ctrl.detail={isVisible:false,year:'',division:'',divisionText:'',history:'months',summary:{type:'',isVisible:false},isEpisodeRatings:false};ctrl.filterConfig={show:{tag:false,series:false,voice:false},sort:{episodeRating:{type:'title',reverse:false},tag:{type:'ratingWeighted',reverse:true},tagDetail:{type:'count',reverse:true},series:{type:'count',reverse:true},voice:{type:'count',reverse:true},topten:{type:'count',reverse:true}},search:{tag:'',tagDetail:'',series:'',voice:'',topten:''},topten:{isRanked:false,isFavourite:false}};ctrl.find=find;ctrl.gender={};//holds gender summary details.\nctrl.generateSeasons=generateSeasons;ctrl.getFilteredItems=getFilteredItems;ctrl.getToptenItemStatistics=getToptenItemStatistics;ctrl.historyDetail=historyDetail;ctrl.historyDetails={};ctrl.overview={};//holds summary/overview details.\nctrl.ratingsDistribution=[];//counts for each rating.\nctrl.statSeries=[];//for series statistics;\nctrl.statTags=[];//for tag statistics;\nctrl.tableDetail=tableDetail;ctrl.tableDetails={};ctrl.taglessItem=false;//filter variable for showing tagless items.\nctrl.toptens={type:'anime',anime:{listCount:0,items:[]},manga:{listCount:0,items:[]},character:{listCount:0,items:[]},detail:{items:[]}};ctrl.view='Anime';ctrl.voiceActors=[];//for voice actor list;\nfunction getItemStatistics(view,items){if(view==='Anime'||view==='Manga'){ctrl.overview=ItemService.buildOverview(items);ctrl.historyDetails.months=ItemService.completeByMonth(items);if(view==='Anime')ctrl.historyDetails.seasons=ItemService.completeBySeason(items);ctrl.ratingValues=ItemService.getRatingValues(items);ctrl.ratingsDistribution=ItemService.buildRatingsDistribution(items);ctrl.statTags=ItemService.buildStatTags(items,ctrl.ratingValues.averageRating);}else if(view==='Character'){ctrl.statTags=CharacterService.buildCharacterTags(items);ctrl.statSeries=CharacterService.buildSeriesList(items);ctrl.voiceActors=CharacterService.buildVoiceActors(items);CharacterService.buildGenderDistribution(ctrl.statTags,items.length).then(function(result){ctrl.gender=result;ctrl.gender[0].colour=ctrl.colours.red;ctrl.gender[1].colour=ctrl.colours.green;ctrl.gender[2].colour=ctrl.colours.blue;});}else if(view==='Topten'){StatisticsService.buildToptenModeList(items,ctrl.toptens.type).then(function(result){ctrl.toptens.detail.items=result.sort(function(a,b){if(a.count<b.count)return 1;if(a.count>b.count)return-1;return 0;});});console.log('topten stat process: ',items,ctrl.toptens);}}//handle getting view items and setting view specific defaults.\nfunction getItems(view){//reset defaults that are shared between views.\nctrl.detail.history='months';ctrl.filterConfig.search.tag='';ctrl.detail.isVisible=false;ctrl.detail.isEpisodeRatings=false;ctrl.statTags=[];//clear to stop multiple views tags appearing.\nctrl.ratingsDistribution=[];if(view==='Anime'){ctrl.filterConfig.sort.tag.type='ratingWeighted';//stat tag sort\nif(ctrl.dataStore.anime.length===0){spinnerService.loading('items',Animeitems.query().$promise.then(function(result){ctrl.dataStore.anime=result;ctrl.items=result;getItemStatistics(view,result);}));}else{ctrl.items=ctrl.dataStore.anime;getItemStatistics(view,ctrl.dataStore.anime);console.log('from cache - anime');}}else if(view==='Manga'){ctrl.filterConfig.sort.tag.type='ratingWeighted';//stat tag sort\nif(ctrl.dataStore.manga.length===0){spinnerService.loading('items',Mangaitems.query().$promise.then(function(result){ctrl.dataStore.manga=result;ctrl.items=result;getItemStatistics(view,result);}));}else{ctrl.items=ctrl.dataStore.manga;getItemStatistics(view,ctrl.dataStore.manga);console.log('from cache - anime');}}else if(view==='Character'){ctrl.filterConfig.sort.tag.type='count';//stat tag sort\nif(ctrl.dataStore.character.length===0){spinnerService.loading('character',Characters.query().$promise.then(function(result){ctrl.dataStore.character=result;ctrl.items=result;getItemStatistics(view,result);}));}else{ctrl.items=ctrl.dataStore.character;getItemStatistics(view,ctrl.dataStore.character);console.log('from cache - character');}}else if(view==='Topten'){if(ctrl.dataStore.toptens.anime.totalListCount===undefined){spinnerService.loading('topten',Toptens.query().$promise.then(function(result){return ListService.groupItemsByProperties(result,['type']);}).then(function(result){for(var i=0,type='';i<3;i++){type=result[i][0].type;ctrl.dataStore.toptens[type].items=result[i];ctrl.dataStore.toptens[type].totalListCount=result[i].length;}return StatisticsService.buildToptenDataStructure(ctrl.toptens,result);}).then(function(result){ctrl.toptens=result;getItemStatistics(view,result[ctrl.toptens.type].items);console.log('topten arrays: ',ctrl.toptens);}));}else{getItemStatistics(view,ctrl.toptens[ctrl.toptens.type].items);console.log('from cache - topten');}}console.log('dataStore check: ',ctrl.dataStore);}function find(view){getItems(view);}function getToptenItemStatistics(view,toptenType){console.log('get topten stats: ',toptenType);var filteredItems=ctrl.dataStore.toptens[toptenType].items;if(ctrl.filterConfig.topten.isRanked)filteredItems=filter(filteredItems,{isRanked:true});if(ctrl.filterConfig.topten.isFavourite)filteredItems=filter(filteredItems,{isFavourite:true});console.log('post filtering: ',filteredItems);if(filteredItems.length>0){ctrl.toptens[toptenType].items=[];//clear items so you won't get repeats.\nStatisticsService.buildToptenDataStructure(ctrl.toptens,[filteredItems]).then(function(result){ctrl.toptens=result;console.log('topten data structure - result: ',result,ctrl.toptens);getItemStatistics(view,result[toptenType].items);});}else{ctrl.toptens[toptenType].listCount=0;ctrl.toptens.detail.items=filteredItems;}}//Builds ratings aggregates.\nfunction getSummaryFunctions(array){spinnerService.loading('detail',StatisticsService.buildSummaryFunctions(array).then(function(result){ctrl.historyDetails.summaryFunctions=result;console.log('got summary functions: ',ctrl.detail,ctrl.historyDetails);}));if(ctrl.detail.summary.isVisible===true){spinnerService.loading('detail',StatisticsService.buildYearSummary(array,ctrl.detail.year,ctrl.detail.summary.type).then(function(result){ctrl.historyDetails.yearSummary=result;console.log('got year summary: ',ctrl.detail,ctrl.historyDetails);}));}if(ctrl.detail.isEpisodeRatings&&array[0].meta.episodeSummaryFunctions===undefined){//If the first item has it already, they all do and this is pointless.\nspinnerService.loading('detail',StatisticsService.buildEpisodeSummaries(array).then(function(result){console.log(array);}));}//            console.log(array, $scope.historyDetails);\n}function historyDetail(year,division,divisionText,summaryType){ctrl.detail.isVisible=true;ctrl.detail.year=year;ctrl.detail.division=division;ctrl.detail.divisionText=divisionText;ctrl.detail.summary.type=summaryType;ctrl.detail.summary.isVisible=summaryType===undefined?false:true;ctrl.getFilteredItems();}function tableDetail(type,name){if(ctrl.tableDetails[type]===name){ctrl.filterConfig.search[type]='';ctrl.filterConfig.show[type]=false;ctrl.tableDetails[type]='';if(type==='tag')ctrl.tableDetails.isEqual=false;}else{ctrl.filterConfig.search[type]=name;ctrl.tableDetails[type]=name;ctrl.filterConfig.show[type]=true;if(type==='tag'){ctrl.tagDetailResult=CharacterService.buildRelatedCharacterTags(ctrl.items,name);ctrl.tableDetails.isEqual=true;}}}function getFilteredItems(historyChange){if(historyChange){ctrl.detail.isVisible=false;ctrl.detail.summary.isVisible=false;if(ctrl.detail.history==='months')ctrl.detail.isEpisodeRatings=false;}var filtered=$filter('statisticsDetailFilter')(ctrl.items,ctrl.detail.history,ctrl.detail.year,ctrl.detail.division);getSummaryFunctions(filtered);}/** Using the start date of confirmed 'in-season' shows\r\n       *  to populate the new season attrs. that will work with the new\r\n       *  filters in the hopes accuracy and speed will increase.\r\n       */function generateSeasons(){if(ctrl.view==='Anime'){var array=ItemService.setSeason(ctrl.items,ctrl.detailSeasonYear,ctrl.detailSeason);angular.forEach(array,function(item){item.$update(function(){console.log(item);},function(errorResponse){ctrl.error=errorResponse.data.message;});});}}}})();(function(){'use strict';angular.module('statistics').directive('detectFlood',detectFlood);detectFlood.$inject=['$timeout'];function detectFlood($timeout){return{restrict:'A',link:function link(scope,element,attrs){var el=element[0];function overflowCheck(){if(el.scrollWidth>el.offsetWidth){el.classList.add('flooded');}else{el.classList.remove('flooded');}}overflowCheck();scope.$watch(function(){return{width:el.offsetWidth};},function(){//                    console.log('detect flood?');\noverflowCheck();},true);}};}})();(function(){'use strict';angular.module('statistics').directive('percentageBarContainer',percentageBarContainer);function percentageBarContainer(){return{restrict:'A',replace:true,scope:{border:'@?'},transclude:true,bindToController:true,template:'<div class=\"relative {{percentageBarContainer.border}}\" style=\"height: 20px;\" ng-transclude></div>',controllerAs:'percentageBarContainer',controller:function controller($scope){}};}})();(function(){'use strict';angular.module('statistics').directive('percentageBar',percentageBar);function percentageBar(){return{restrict:'A',replace:true,scope:{type:'@?',percentage:'@',colour:'@?',display:'@?'},require:'^percentageBarContainer',templateUrl:'/modules/statistics/templates/percentage-bar.html',link:function link(scope,element,attrs,percentageBarContainerCtrl){}};}})();(function(){'use strict';angular.module('statistics').directive('tabContainer',tabContainer);function tabContainer(){return{restrict:'A',transclude:true,replace:true,scope:{model:'=ngModel'},templateUrl:'/modules/statistics/templates/tab-container.html',require:'?ngModel',bindToController:true,controllerAs:'tabContainer',controller:function controller($scope){var self=this;self.tabs=[];self.currentTab=undefined;self.listShift=0;self.addTab=function addTab(tab){self.tabs.push(tab);if(self.tabs.length===1){tab.active=true;}};self.disable=function(disabledTab){if(disabledTab.active){angular.forEach(self.tabs,function(tab){if(!tab.disabled){self.select(tab);return;}});}};self.select=function(selectedTab){if(!selectedTab.disabled){angular.forEach(self.tabs,function(tab){if(tab.active&&tab!==selectedTab){tab.active=false;}});selectedTab.active=true;self.currentTab=$scope.tabContainer.model===undefined?undefined:selectedTab.heading;}};self.shiftTabs=function(direction){switch(direction){case'origin'://                        console.log(self.listShift, (self.listShift - 100));\nif(self.listShift+100>0){self.listShift=0;}else{self.listShift+=100;}break;case'offset':if(self.listShift-100<$scope.elWidth-$scope.ulWidth){self.listShift=$scope.elWidth-$scope.ulWidth;}else{self.listShift-=100;}break;}};},link:function link(scope,element,attrs,model){var el=element[0],ul=el.children[0].children[0];scope.elWidth=el.offsetWidth;scope.ulWidth=ul.offsetWidth;scope.$watch('tabContainer.currentTab',function(newValue){if(newValue!==undefined&&model.$viewValue!==undefined){model.$setViewValue(newValue);}});scope.$watch(function(){return{width:el.offsetWidth};},function(){scope.elWidth=el.offsetWidth;},true);scope.$watch(function(){return{width:ul.offsetWidth};},function(){scope.ulWidth=ul.offsetWidth;},true);scope.$watch('tabContainer.listShift',function(newValue){if(newValue!==undefined){var shift=newValue===0?'':'px';ul.style.left=newValue+shift;}});}};}})();(function(){'use strict';angular.module('statistics').directive('tabView',tabView);function tabView(){return{restrict:'A',transclude:true,replace:true,template:'<div class=\"tab-view\" role=\"tabpanel\" ng-show=\"active\" ng-transclude></div>',require:'^tabContainer',scope:{heading:'@',disabled:'='},link:function link(scope,element,attrs,tabContainerCtrl){scope.active=false;tabContainerCtrl.addTab(scope);scope.$watch('disabled',function(newValue){if(newValue!==undefined){if(newValue){console.log(scope.heading,newValue);tabContainerCtrl.disable(scope);}}});}};}})();(function(){'use strict';//Statistics service\nangular.module('statistics').service('StatisticsService',StatisticsService);StatisticsService.$inject=['$filter','ListService','$q'];function StatisticsService($filter,ListService,$q){var service={buildEpisodeSummaries:buildEpisodeSummaries,buildSummaryFunctions:buildSummaryFunctions,buildToptenDataStructure:buildToptenDataStructure,buildToptenModeList:buildToptenModeList,buildYearSummary:buildYearSummary,getModeMap:getModeMap,occuranceCounter:occuranceCounter};return service;function buildSummaryFunctions(array){return $q(function(resolve,reject){if(array!==undefined){var i=array.length,highestRating=0,lowestRating=10,averageRating=0,modeRating={},ratings={count:0,sum:0};while(i--){//                console.log(array[i]);\nhighestRating=array[i].rating>highestRating?array[i].rating:highestRating;lowestRating=0<array[i].rating&&array[i].rating<lowestRating?array[i].rating:lowestRating;ratings.count+=array[i].rating>0?1:0;ratings.sum+=array[i].rating;averageRating=(ratings.sum/ratings.count).toFixed(2);modeRating=service.getModeMap(array,'rating',0);}resolve([{metric:'Average rating',value:averageRating},{metric:'Highest rating',value:highestRating},{metric:'Lowest rating',value:lowestRating===10?0:lowestRating},{metric:'Mode rating',value:modeRating.value===undefined?0:modeRating.value}]);}});}function processYearSummary(summary,array){var i=array.length;if(summary.length<1){while(i--){summary.push({metric:array[i].metric,values:[]});}summary.reverse();}i=array.length;for(var j=0;j<i;j++){summary[j].values.push({value:array[j].value});}return summary;}function buildYearSummary(array,year,type){return $q(function(resolve,reject){var filter=type==='months'?'endedMonth':'season',attr=type==='months'?'number':'text',commonArrays=ListService.getCommonArrays(),i=commonArrays[type].length,yearSummary=[],results=[];for(var j=0;j<i;j++){var filteredArray=$filter(filter)(array,year,commonArrays[type][j][attr]),promise=service.buildSummaryFunctions(filteredArray);results.push(promise);}angular.forEach(results,function(promise){promise.then(function(result){yearSummary=processYearSummary(yearSummary,result);});});resolve(yearSummary);});}function buildEpisodeSummaries(array){return $q(function(resolve,reject){angular.forEach(array,function(item){service.buildSummaryFunctions(item.meta.history).then(function(result){item.meta.episodeSummaryFunctions=result;});});resolve(array);});}function getModeMap(array,attr,ignore){var modeMap={},max={count:0,value:''};for(var i=0;i<array.length;i++){var value=array[i][attr];if(modeMap[value]===null||modeMap[value]===undefined){modeMap[value]=1;}else{modeMap[value]++;}if(modeMap[value]>max.count){//Ignore is a value you might not care about e.g. 0;\nif(ignore!==value){max.count=modeMap[value];max.value=value;}}}//        console.log(max);\nreturn max;}function occuranceCounter(array,attr){return $q(function(resolve,reject){var occuranceCounter=[];ListService.groupItemsByProperties(array,[attr]).then(function(result){for(var i=0,len=result.length;i<len;i++){occuranceCounter.push({value:result[i][0][attr],count:result[i].length});}});resolve(occuranceCounter);});}function buildToptenDataStructure(obj,arrayOfArrays){return $q(function(resolve,reject){angular.forEach(arrayOfArrays,function(array){var type=array[0].type,listType=type+'List',len=array.length;obj[type].listCount=len;for(var i=0;i<len;i++){var itemLen=array[i][listType].length;for(var j=0;j<itemLen;j++){obj[type].items.push(array[i][listType][j]);}}});resolve(obj);});}function buildToptenModeList(array,type){var attr=type==='character'?'name':'title';return service.occuranceCounter(array,attr);}}})();'use strict';//// Configuring the Articles module\n//angular.module('tasks').run(['Menus',\n//\tfunction(Menus) {\n//\t\t// Set top bar menu items\n//\t\tMenus.addMenuItem('topbar', 'Tasks', 'tasks', 'dropdown', '/tasks(/create)?');\n//\t\tMenus.addSubMenuItem('topbar', 'tasks', 'List Tasks', 'tasks');\n//\t\tMenus.addSubMenuItem('topbar', 'tasks', 'New Task', 'tasks/create');\n//\t}\n//]);\n'use strict';//Setting up route\nangular.module('tasks').config(['$stateProvider',function($stateProvider){// Tasks state routing\n$stateProvider.state('listTasks',{url:'/tasks',templateUrl:'modules/tasks/views/list-tasks.client.view.html'}).state('createTask',{url:'/tasks/create',templateUrl:'modules/tasks/views/create-task.client.view.html'}).state('viewTask',{url:'/tasks/:taskId',templateUrl:'modules/tasks/views/view-task.client.view.html'}).state('editTask',{url:'/tasks/:taskId/edit',templateUrl:'modules/tasks/views/edit-task.client.view.html'});}]);(function(){'use strict';angular.module('tasks').controller('CreateTaskController',CreateTaskController);CreateTaskController.$inject=['$scope','data','$stateParams','$location','Authentication','Tasks','ListService','NotificationFactory','TaskFactory','spinnerService','$uibModalInstance','Animeitems','Mangaitems'];function CreateTaskController($scope,data,$stateParams,$location,Authentication,Tasks,ListService,NotificationFactory,TaskFactory,spinnerService,$uibModalInstance,Animeitems,Mangaitems){var ctrl=this,newTaskModel={};ctrl.addChecklistItem=addChecklistItem;ctrl.backStep=backStep;ctrl.cancel=cancel;ctrl.commonArrays=data.commonArrays;ctrl.create=create;ctrl.dropChecklistItem=dropChecklistItem;ctrl.stepConfig={currentStep:1,stepCount:2};ctrl.submit=submit;ctrl.takeStep=takeStep;function setNewTask(){ctrl.newTask={description:'',link:{linked:false,type:'',anime:undefined,manga:undefined},day:'',date:new Date(),repeat:0,category:'',daily:false,checklist:false,checklistItems:[],isAddTask:false};}setNewTask();angular.copy(ctrl.newTask,newTaskModel);//for adding/removing options.\nfunction addChecklistItem(){if(ctrl.newTask.checklistItem!==''&&ctrl.newTask.checklistItem!==undefined){var i=0;var alreadyAdded=false;if(ctrl.newTask.checklistItems.length>0){while(i<ctrl.newTask.checklistItems.length){if(ctrl.newTask.checklistItems[i].text===ctrl.newTask.checklistItem){alreadyAdded=true;}i++;}//if not in array add it.\nif(alreadyAdded===false){ctrl.newTask.checklistItems.push({text:ctrl.newTask.checklistItem,complete:false});}}else{ctrl.newTask.checklistItems.push({text:ctrl.newTask.checklistItem,complete:false});}}ctrl.newTask.checklistItem='';}function dropChecklistItem(text){var deletingItem=ctrl.newTask.checklistItems;ctrl.newTask.checklistItems=[];//update the task.\nangular.forEach(deletingItem,function(item){if(item.text!==text){ctrl.newTask.checklistItems.push(item);}});}// Create new Task\nfunction create(){//            console.log(this.newTask);\n// Create new Task object\nvar task=new Tasks({description:ctrl.newTask.description,link:{linked:ctrl.newTask.link.linked,type:ctrl.newTask.link.linked===false?'':ctrl.newTask.category==='Watch'?'anime':'manga',anime:ctrl.newTask.link.anime===undefined?undefined:ctrl.newTask.link.anime._id,manga:ctrl.newTask.link.manga===undefined?undefined:ctrl.newTask.link.manga._id},day:ctrl.newTask.daily===true?'Any':ctrl.newTask.day,date:ctrl.newTask.date===''?new Date():ctrl.newTask.date,repeat:ctrl.newTask.link.linked===false?ctrl.newTask.repeat:ctrl.newTask.category==='Watch'?ctrl.newTask.link.anime.finalEpisode:1,completeTimes:ctrl.newTask.link.linked===false?0:ctrl.newTask.category==='Watch'?ctrl.newTask.link.anime.episodes:0,updateCheck:new Date().getDay()===1?true:false,complete:false,category:ctrl.newTask.category===''?'Other':ctrl.newTask.category,daily:ctrl.newTask.daily,checklist:ctrl.newTask.checklist,checklistItems:ctrl.newTask.checklistItems});//\t\t\t// Redirect after save\ntask.$save(function(response){$location.path('tasks');NotificationFactory.success('Saved!','New Task was successfully saved!');},function(errorResponse){ctrl.error=errorResponse.data.message;console.log(errorResponse);NotificationFactory.error('Error!','New Task failed to save!');});}function backStep(step){ctrl.stepConfig.currentStep-=1;}function takeStep(step){var check=process(step);if(check.valid){ctrl.stepConfig.currentStep+=1;}else{NotificationFactory.popup('Attention!',check.message,'warning');}}function submit(){ctrl.create();$uibModalInstance.close();}function cancel(){$uibModalInstance.dismiss();}function process(step){switch(step){case 1:if(ctrl.newTask.link.linked===true){var category=ctrl.newTask.category;if(category==='Watch'){ctrl.linkItems=Animeitems.query({status:0});ctrl.linkType='anime';ctrl.newTask.checklistItems=[];ctrl.newTask.checklist=false;}else if(category==='Read'){ctrl.linkItems=Mangaitems.query({status:0});ctrl.linkType='manga';}else{return{valid:false,message:'Category must be either Watch or Read for linked items!'};}}else{//Ensure that stuff is cleared when not linked.\nctrl.linkType='';ctrl.newTask.link.anime=undefined;ctrl.newTask.link.manga=undefined;}return{valid:true};}}}})();(function(){'use strict';angular.module('tasks').controller('ScheduleCalendarTaskController',ScheduleCalendarTaskController);ScheduleCalendarTaskController.$inject=['$scope','$uibModalInstance','moment','data','ListService','TaskFactory'];function ScheduleCalendarTaskController($scope,$uibModalInstance,moment,data,ListService,TaskFactory){var ctrl=this,refresh=false,timeDiff=Math.abs(new Date(data.date).getTime()-new Date().getTime());ctrl.cancel=cancel;ctrl.date=new Date(data.date);ctrl.day=ctrl.date.getDay()>0?ctrl.date.getDay()-1:6;ctrl.days=data.days;ctrl.daysFromToday=Math.ceil(timeDiff/(1000*3600*24));ctrl.events=[];ctrl.init=init;ctrl.insertChecklistItem=insertChecklistItem;ctrl.removeTask=removeTask;ctrl.tickOff=tickOff;ctrl.tickOffChecklist=tickOffChecklist;ctrl.today=new Date();ctrl.updateTask=updateTask;console.log('data: ',data,'days: ',ctrl.days,ctrl.day,ctrl.date);function init(){var weekEnds=new Date(ListService.weekEndingForDate(ctrl.date));angular.forEach(data.events,function(event){if(new Date(event.date)<weekEnds&&(event.day.substring(0,3)===ctrl.days[ctrl.day].text||event.day==='Any')){// console.log('daysFromToday: ', ctrl.daysFromToday);\nif(!event.daily){//in weeks\n// console.log('weeks: ', event.completeTimes, Math.floor(ctrl.daysFromToday / 7), event.repeat);\nif(event.completeTimes+Math.floor(ctrl.daysFromToday/7)<=event.repeat||event.repeat===0){ctrl.events.push(event);}}else if(event.daily){//in days\n// console.log('days: ', event.completeTimes, ctrl.daysFromToday, event.repeat);\nif(event.completeTimes+ctrl.daysFromToday<=event.repeat||event.repeat===0){ctrl.events.push(event);}}}});ctrl.events.sort(function(a,b){var aDate=a.date,bDate=b.date;return aDate<bDate?1:aDate>bDate?-1:0;});}ctrl.init();function removeTask(task){TaskFactory.removeTask(task,ctrl.events,true);}//Update task.\nfunction updateTask(task){TaskFactory.updateTask(task);}//Add new checklist item.\nfunction insertChecklistItem(task,newChecklistItem){TaskFactory.insertChecklistItem(task,newChecklistItem);}//Tick off a task.\nfunction tickOff(task){TaskFactory.tickOff(task).then(function(result){// console.log('update task res - tickOff: ', result);\nrefresh=result.refresh;});}//Tick of a checklist item.\nfunction tickOffChecklist(task,index){TaskFactory.tickOffChecklist(task,index).then(function(result){// console.log('update task res - tickOffChecklist: ', result);\nrefresh=result.refresh;});}function cancel(){$uibModalInstance.close(refresh);}}})();(function(){'use strict';// Tasks controller\nangular.module('tasks').controller('TasksController',TasksController);TasksController.$inject=['$scope','$timeout','$stateParams','$location','Authentication','Tasks','ListService','NotificationFactory','TaskFactory','spinnerService','$uibModal','moment'];function TasksController($scope,$timeout,$stateParams,$location,Authentication,Tasks,ListService,NotificationFactory,TaskFactory,spinnerService,$uibModal,moment){var ctrl=this,today=new Date(),day=today.getDay();ctrl.authentication=Authentication;ctrl.commonArrays=ListService.getCommonArrays();ctrl.createTask=createTask;ctrl.dateOptions={dateDisabled:false,formatYear:'yy',maxDate:new Date(2020,5,22),minDate:new Date(),startingDay:1};ctrl.filterConfig={view:'list',showingCount:0,sortType:'',sortReverse:true,search:{description:'',day:''},datesSelected:false};ctrl.insertChecklistItem=insertChecklistItem;ctrl.pageConfig={currentPage:0,pageSize:10};ctrl.refreshItems=refreshItems;ctrl.removeTask=removeTask;ctrl.setTabFilterDay=setTabFilterDay;ctrl.tabFilter=tabFilter;ctrl.tickOff=tickOff;ctrl.tickOffChecklist=tickOffChecklist;ctrl.updateTask=updateTask;ctrl.weekBeginning=weekBeginning;ctrl.whichController='task';function tabFilter(tabName){ctrl.filterConfig.search.day=tabName;}function weekBeginning(){return TaskFactory.getWeekBeginning();}function createTask(){var modalInstance=$uibModal.open({animation:true,templateUrl:'/modules/tasks/views/create-task.client.view.html',controller:'CreateTaskController as taskCreate',size:'lg',resolve:{data:function data(){return{commonArrays:ctrl.commonArrays};}}}).result.then(function(result){console.log('closed create task: ',result);find();});}// Remove existing Task\nfunction removeTask(task){TaskFactory.removeTask(task,ctrl.tasks,true);}//Update task.\nfunction updateTask(task){TaskFactory.updateTask(task);}//Add new checklist item.\nfunction insertChecklistItem(task,newChecklistItem){TaskFactory.insertChecklistItem(task,newChecklistItem);}//Tick off a task.\nfunction tickOff(task){TaskFactory.tickOff(task).then(function(result){// console.log('update task res - tickOff: ', result);\nif(result.refresh)find();});}//Tick of a checklist item.\nfunction tickOffChecklist(task,index){TaskFactory.tickOffChecklist(task,index).then(function(result){// console.log('update task res - tickOffChecklist: ', result);\nif(result.refresh)find();});}//Defaults the tab filter to the current day of the week.\nfunction setTabFilterDay(day){var index=day===0?7:day;//Adjust for Sunday.\nctrl.filterConfig.search.day=ctrl.commonArrays.days[index].name;console.log(day,ctrl.filterConfig.search.day);}ctrl.setTabFilterDay(day);//check things\nfunction checkStatus(){if(day===1){console.log('monday',day);angular.forEach(ctrl.tasks,function(task){//has it been updated today?\nif(task.updateCheck===false){console.log('updating - ',task.description);var type=task.link.type;if(task.link.linked===false||type==='manga'){//has it reached the necessary number of repeats?\nif(task.completeTimes!==task.repeat){console.log('not complete',task.description);task.complete=false;task.updateCheck=true;TaskFactory.updateTask(task);}else if(task.completeTimes===task.repeat){console.log('complete - delete',task.description);TaskFactory.removeTask(task,ctrl.tasks);}}else if(task.link.type==='anime'){console.log('linked');var parts={single:'episodes',all:'finalEpisode'};if(task.link[type][parts.single]!==task.link[type][parts.all]){console.log('linked not complete',task.description);task.complete=false;task.updateCheck=true;TaskFactory.updateTask(task);}else if(task.link[type][parts.single]===task.link[type][parts.all]){console.log('linked complete - delete',task.description);TaskFactory.removeTask(task,ctrl.tasks);}}}});}else{console.log('not monday',day);angular.forEach(ctrl.tasks,function(task){var change=task.updateCheck===false?false:true;task.updateCheck=false;//is it a daily task?\nif(task.daily===true){console.log('daily',task.description);//has it reached the necessary number of repeats?\nif(task.completeTimes!==task.repeat){console.log('not complete',task.description);var refresh=today.toISOString().slice(0,10);//has it been refreshed today?\nif(task.dailyRefresh.slice(0,10)!==refresh){console.log('not complete - update',task.description);task.complete=false;task.dailyRefresh=refresh;TaskFactory.updateTask(task);}}else if(task.completeTimes===task.repeat){console.log('complete - delete',task.description);TaskFactory.removeTask(task,ctrl.tasks);}}else if(task.daily===false&&change){console.log('weekly update: ',task.description);TaskFactory.updateTask(task);}});}find();}// Find a list of Tasks\nfunction find(check){$timeout(function(){spinnerService.loading('tasks',Tasks.query().$promise.then(function(result){console.log('found! : ',result);ctrl.tasks=result;if(check===true)checkStatus();}));},250);}find(true);function refreshItems(){find();NotificationFactory.warning('Refreshed!','Task list refreshed!');}}})();(function(){'use strict';angular.module('tasks').controller('UpdateAnimeTaskController',UpdateAnimeTaskController);UpdateAnimeTaskController.$inject=['$scope','$uibModalInstance','data','FunctionService'];function UpdateAnimeTaskController($scope,$uibModalInstance,data,FunctionService){var ctrl=this;ctrl.cancel=cancel;ctrl.episodeCompleted=data.item.link.anime.episodes+1;ctrl.episodeNumber=FunctionService.pad(ctrl.episodeCompleted,3);ctrl.episodeRating=0;ctrl.item=data.item;ctrl.isComplete=ctrl.episodeCompleted===ctrl.item.link.anime.finalEpisode&&ctrl.item.link.anime.finalEpisode!==0;ctrl.ratingLimit=10;ctrl.stepConfig={currentStep:1,stepCount:1};ctrl.submit=submit;function submit(){$uibModalInstance.close({task:ctrl.item,episodeRating:ctrl.episodeRating});}function cancel(){$uibModalInstance.dismiss('cancel');}}})();(function(){'use strict';angular.module('tasks').controller('UpdateMangaTaskController',UpdateMangaTaskController);UpdateMangaTaskController.$inject=['$scope','$uibModalInstance','data'];function UpdateMangaTaskController($scope,$uibModalInstance,data){var ctrl=this;ctrl.cancel=cancel;ctrl.item=data.item;ctrl.stepConfig={currentStep:1,stepCount:1};ctrl.submit=submit;console.log('update linked manga item: ',ctrl.item);function submit(){$uibModalInstance.close(ctrl.item);}function cancel(){$uibModalInstance.dismiss('cancel');}}})();(function(){'use strict';angular.module('tasks').directive('loseInterest',loseInterest);function loseInterest($document,$window){return{restrict:'A',link:function link(scope,element,attrs){element.data('interesting',true);/** On click, check what you clicked and whether you can ignore it.\r\n             *    Based on checks false the ng-show of the anywhere-but-here element.\r\n             */angular.element($document[0].body).on('click',function(e){var interesting=angular.element(e.target).inheritedData('interesting'),elm=angular.element(e.target)[0].tagName,alsoInteresting=elm==='A'||elm==='I';//console.log(elm);\nif(!interesting&&!alsoInteresting){scope.$apply(function(){scope.collapseFilters();});}});}};}})();(function(){'use strict';angular.module('tasks').directive('scheduleCalendar',scheduleCalendar);scheduleCalendar.$inject=['$uibModal','moment','ListService'];function scheduleCalendar($uibModal,moment,ListService){function _removeTime(date){return date.day(1).hour(12).minute(0).second(0).millisecond(0);}function _buildMonth(scope,start,month){scope.weeks=[];var done=false,date=moment(start),monthIndex=date.month(),count=0;while(!done){var days=_buildWeek(moment(date),month);if(ListService.findWithAttr(days,'isCurrentMonth',true)>-1){scope.weeks.push({days:days});}date.add(1,'w');done=count++>2&&monthIndex!==date.month();monthIndex=date.month();}}function _buildWeek(date,month){var days=[];for(var i=0;i<7;i++){days.push({name:date.format('dd').substring(0,1),number:date.date(),isCurrentMonth:date.month()===month.month(),isToday:date.isSame(new Date(),'day'),date:date});date=moment(date);date.add(1,'d');}return days;}function _displayEvents(events,date,days){var modalInstance=$uibModal.open({animation:true,templateUrl:'/modules/tasks/views/schedule-calendar-task.client.view.html',controller:'ScheduleCalendarTaskController as ctrl',size:'lg',resolve:{data:function data(){return{events:events,date:date,days:days};}}}).result.then(function(result){console.log('closed - require refresh: ',result);});}return{restrict:'A',templateUrl:'modules/tasks/templates/schedule-calendar.html',scope:{events:'='},link:function link(scope){scope.days=[{text:'Mon'},{text:'Tue'},{text:'Wed'},{text:'Thu'},{text:'Fri'},{text:'Sat'},{text:'Sun'}];scope.selected=moment(new Date());scope.month=moment(scope.selected);var start=moment(_removeTime(angular.copy(scope.selected)));start.date(-6);_removeTime(start.day(0));_buildMonth(scope,start,scope.month);scope.select=function(day){if(scope.selected===day.date){_displayEvents(scope.events,day.date,scope.days);}scope.selected=day.date;};scope.next=function(){var next=moment(scope.month);_removeTime(next.month(next.month()+1).date(0));scope.month.month(scope.month.month()+1);_buildMonth(scope,next,scope.month);};scope.previous=function(){var previous=moment(scope.month);_removeTime(previous.month(previous.month()-1).date(0));scope.month.month(scope.month.month()-1);_buildMonth(scope,previous,scope.month);};}};}})();(function(){'use strict';angular.module('tasks').directive('shadowModel',shadowModel);function shadowModel(){return{scope:true,link:function link(scope,el,att){console.log('shadow: ',scope);scope[att.shadow]=angular.copy(scope[att.shadow]);}};}})();(function(){'use strict';angular.module('tasks').directive('taskItemModel',taskItemModel);function taskItemModel(){return{restrict:'A',replace:true,templateUrl:'modules/tasks/templates/task-item.html'};}})();(function(){'use strict';angular.module('tasks').directive('passClick',passClick);function passClick(){return{restrict:'A',link:function link(scope,element,attrs){element.bind('click',function(event){var passTo=document.getElementById(attrs.passClick);passTo.focus();passTo.click();});}};}})();(function(){'use strict';angular.module('tasks').factory('TaskFactory',TaskFactory);TaskFactory.$inject=['$q','Animeitems','Mangaitems','AnimeFactory','MangaFactory','NotificationFactory','ListService','$uibModal'];function TaskFactory($q,Animeitems,Mangaitems,AnimeFactory,MangaFactory,NotificationFactory,ListService,$uibModal){var obj={getWeekBeginning:getWeekBeginning,insertChecklistItem:insertChecklistItem,removeTask:removeTask,updateAnimeitem:updateAnimeitem,updateMangaitem:updateMangaitem,updateTask:updateTask,tickOff:tickOff,tickOffChecklist:tickOffChecklist};return obj;function getWeekBeginning(){var newDate=new Date(),day=newDate.getDay(),diff=newDate.getDate()-day+(day===0?-6:1);// adjust when day is sunday\nvar wkBeg=new Date();return new Date(wkBeg.setDate(diff));}function updateAnimeitem(task,episodeRating){return $q(function(resolve,reject){var query=Animeitems.get({animeitemId:task.link.anime._id});query.$promise.then(function(data){console.log('update animeitem for ',task,data);data.episodes+=1;data.rating=task.link.anime.rating||data.rating;data.latest=new Date();AnimeFactory.update(data,undefined,true,undefined,episodeRating);resolve(data);});});}function updateMangaitem(task,chapters,volumes){return $q(function(resolve,reject){var query=Mangaitems.get({mangaitemId:task.link.manga._id});query.$promise.then(function(data){//console.log(data);\ndata.chapters=chapters;data.volumes=volumes;data.latest=new Date();MangaFactory.update(data,undefined,true,undefined);resolve(data);});});}/** Task Update,Edit,Delete and other functions below here.\r\n  \t\t\t\t */// Update existing Task\nfunction updateTask(task,refresh){return $q(function(resolve,reject){//console.log('update');\nif(task.link.anime){task.link.anime=task.link.anime._id;}else if(task.link.manga){task.link.manga=task.link.manga._id;}task.$update(function(){NotificationFactory.success('Saved!','Task was successfully updated!');//Refresh items if the callee wasn't checkStatus.\nconsole.log('update, refresh items ? ',refresh);resolve({refresh:refresh});},function(errorResponse){var errorMessage=errorResponse.data.message;reject(errorMessage);//console.log(errorResponse);\nNotificationFactory.error('Error!','Task failed to save!');});});}//Remove a task.\nfunction removeTask(task,tasks,userCheck){if(userCheck){//console.log('launch');\nNotificationFactory.confirmation(function remove(){removeTaskProcess(task,tasks);});}else{removeTaskProcess(task,tasks);}}function removeTaskProcess(task,tasks){if(task){task.$remove();for(var i in tasks){if(tasks[i]===task){tasks.splice(i,1);}}NotificationFactory.warning('Deleted!','Task was successfully deleted.');}}//Linked manga need special options dialog.\nfunction launchMangaUpdateDialog(task,checklistIndex){var modalInstance=$uibModal.open({animation:true,templateUrl:'/modules/tasks/views/update-manga-task.client.view.html',controller:'UpdateMangaTaskController as ctrl',size:'md',resolve:{data:function data(){return{item:angular.copy(task),itemOriginal:task};}}});return modalInstance;}//Linked anime need special options dialog.\nfunction launchAnimeUpdateDialog(task,checklistIndex){var modalInstance=$uibModal.open({animation:true,templateUrl:'/modules/tasks/views/update-anime-task.client.view.html',controller:'UpdateAnimeTaskController as ctrl',size:'md',resolve:{data:function data(){return{item:angular.copy(task),itemOriginal:task};}}});return modalInstance;}//Completes a task.\nfunction tickOff(task){return $q(function(resolve,reject){var isLinked=task.link.linked;//Is it linked?\nif(!isLinked){task.completeTimes+=1;}else if(isLinked){/** Anime or manga?\r\n  \t\t\t\t         *   Update the item value AND the complete/repeat values.\r\n  \t\t\t\t         */if(task.link.type==='anime'){task.complete=false;var animeDialog=launchAnimeUpdateDialog(task);animeDialog.result.then(function(result){console.log('update anime task result: ',result);task=result.task;task.completeTimes=task.link.anime.episodes+1;task.complete=true;task.repeat=task.link.anime.finalEpisode;obj.updateAnimeitem(task,result.episodeRating).then(function(result){return obj.updateTask(task,true);}).then(function(result){console.log('update anime into update task: ',result);resolve(result);});});}else if(task.link.type==='manga'){task.complete=false;var dialog=launchMangaUpdateDialog(task);dialog.result.then(function(result){task=result;task.completeTimes+=1;task.complete=true;obj.updateMangaitem(task,task.link.manga.chapters,task.link.manga.volumes).then(function(result){console.log('updated manga: ',result);return obj.updateTask(task,true);}).then(function(result){console.log('update manga into update task: ',result);resolve(result);});});}}if(!isLinked){obj.updateTask(task,isLinked).then(function(result){console.log('update task resolve: ',result);resolve(result);});}});}//Completes a checklist item.\nfunction tickOffChecklist(task,index){return $q(function(resolve,reject){//update the option for the task.\nvar isLinked=task.link.linked;if(isLinked&&task.link.type==='manga'){task.checklistItems[index].complete=false;var dialog=launchMangaUpdateDialog(task,index);dialog.result.then(function(result){task=result;task.checklistItems[index].complete=true;if(ListService.findWithAttr(task.checklistItems,'complete',false)===-1){task.completeTimes+=1;task.complete=true;}obj.updateMangaitem(task,task.link.manga.chapters,task.link.manga.volumes).then(function(result){console.log('updated manga: ',result);return obj.updateTask(task,true);}).then(function(result){console.log('update manga into update task: ',result);resolve(result);});});}else if(!isLinked){if(ListService.findWithAttr(task.checklistItems,'complete',false)===-1){task.completeTimes+=1;task.complete=true;}//console.log('tickoff checklist: ', task);\nobj.updateTask(task,isLinked).then(function(result){console.log('update task resolve: ',result);resolve(result);});}});}//Add additional items to a checklist.\nfunction insertChecklistItem(task,newChecklistItem){if(newChecklistItem!==''&&newChecklistItem!==undefined){var alreadyAdded=false;//find the item and insert the option.\nangular.forEach(task.checklistItems,function(item){if(item===newChecklistItem){alreadyAdded=true;}});//if not in array add it.\nif(alreadyAdded===false){task.checklistItems.push({text:newChecklistItem,complete:false});}else if(alreadyAdded===true){NotificationFactory.popup('Option already exists.','Please re-name and try again.','error');}}obj.updateTask(task);}}})();(function(){'use strict';//Tasks service used to communicate Tasks REST endpoints\nangular.module('tasks').factory('Tasks',Tasks);Tasks.$inject=['$resource'];function Tasks($resource){return $resource('tasks/:taskId',{taskId:'@_id'},{update:{method:'PUT'}});}})();'use strict';// Configuring the Articles module\nangular.module('toptens').run(['Menus',function(Menus){// Set top bar menu items\nMenus.addMenuItem('topbar','Toptens','toptens','dropdown','/toptens(/create)?');Menus.addSubMenuItem('topbar','toptens','List Toptens','toptens');Menus.addSubMenuItem('topbar','toptens','New Topten','toptens/create');}]);'use strict';//Setting up route\nangular.module('toptens').config(['$stateProvider',function($stateProvider){// Toptens state routing\n$stateProvider.state('listToptens',{url:'/toptens',templateUrl:'modules/toptens/views/list-toptens.client.view.html'}).state('createTopten',{url:'/toptens/create',templateUrl:'modules/toptens/views/create-topten.client.view.html'}).state('viewTopten',{url:'/toptens/:toptenId',templateUrl:'modules/toptens/views/view-topten.client.view.html'}).state('editTopten',{url:'/toptens/:toptenId/edit',templateUrl:'modules/toptens/views/create-topten.client.view.html'});}]);(function(){'use strict';angular.module('toptens').controller('CreateToptenController',CreateToptenController);CreateToptenController.$inject=['$scope','$stateParams','$location','Authentication','Toptens','ListService','Animeitems','Mangaitems','Characters','NotificationFactory','CharacterService','ItemService','$filter'];function CreateToptenController($scope,$stateParams,$location,Authentication,Toptens,ListService,Animeitems,Mangaitems,Characters,NotificationFactory,CharacterService,ItemService,$filter){var ctrl=this,toptenCopy={name:'',description:'',type:'',isFavourite:false,isRanked:false,animeList:[],mangaList:[],characterList:[],conditions:{limit:null,series:[],tags:[],season:null,year:null}};ctrl.authentication=Authentication;ctrl.cancel=cancel;ctrl.create=create;ctrl.commonArrays=ListService.getCommonArrays();ctrl.imgSize={height:'50px',width:'100px'};ctrl.isCreate=true;ctrl.pushCondition=pushCondition;ctrl.pushItem=pushItem;ctrl.removeCondition=removeCondition;ctrl.removeItem=removeItem;ctrl.stepConfig={steps:[1,2,3,4,5,6,7,8,9,10],stepHeaders:[{text:'Select attributes'},{text:'Set conditions'},{text:'Populate list'}],currentStep:1,stepCount:3,listGen:{itemsCached:[],items:[],displayList:[],seriesList:[],typeDisplay:'',toptenItem:'',seriesLimit:'',tagLimit:'',series:[],tags:[]},limitMin:0,swapping:{one:'',two:''}};ctrl.swappingItems=swappingItems;ctrl.takeStep=takeStep;ctrl.topten={};angular.copy(toptenCopy,ctrl.topten);ctrl.update=update;ctrl.years=[];// Create new Topten\nfunction create(){// console.log(ctrl.topten, ctrl.topten);\n// Create new Topten object\nvar topten=new Toptens();topten=new Toptens({name:ctrl.topten.name,description:ctrl.topten.description,type:ctrl.topten.type,isFavourite:ctrl.topten.isFavourite,isRanked:ctrl.topten.isRanked,animeList:ctrl.topten.animeList.length>0?ctrl.topten.animeList:null,characterList:ctrl.topten.characterList.length>0?ctrl.topten.characterList:null,mangaList:ctrl.topten.mangaList.length>0?ctrl.topten.mangaList:null,conditions:{limit:ctrl.topten.conditions.limit,series:ctrl.topten.conditions.series,tags:ctrl.topten.conditions.tags,season:ctrl.topten.conditions.season,year:ctrl.topten.conditions.year}});// Redirect after save\ntopten.$save(function(response){$location.path('toptens/'+response._id);NotificationFactory.success('Saved!','New List was successfully saved!');// Clear form fields\nangular.copy(toptenCopy,ctrl.topten);},function(errorResponse){ctrl.error=errorResponse.data.message;NotificationFactory.error('Error!','Something went wrong!');});}// Update existing Topten\nfunction update(){var topten=ctrl.topten;topten.$update(function(){$location.path('toptens/'+topten._id);NotificationFactory.success('Updated!','List update was successful!');},function(errorResponse){ctrl.error=errorResponse.data.message;NotificationFactory.error('Error!','Something went wrong!');});}function typeSetItemPopulate(){var type=ListService.manipulateString(ctrl.topten.type,'upper',true);switch(type){case'Anime':Animeitems.query().$promise.then(function(result){ctrl.stepConfig.listGen.items=result;ctrl.stepConfig.listGen.typeDisplay='title';ctrl.stepConfig.listGen.tags=CharacterService.buildCharacterTags(result);ctrl.years=ItemService.endingYears(result);});break;case'Manga':Mangaitems.query().$promise.then(function(result){ctrl.stepConfig.listGen.items=result;ctrl.stepConfig.listGen.typeDisplay='title';ctrl.stepConfig.listGen.tags=CharacterService.buildCharacterTags(result);});break;case'Character':Characters.query().$promise.then(function(result){ctrl.stepConfig.listGen.items=result;ctrl.stepConfig.listGen.typeDisplay='name';ctrl.stepConfig.listGen.tags=CharacterService.buildCharacterTags(result);ctrl.stepConfig.listGen.series=CharacterService.buildSeriesList(result);var getYears=[];angular.forEach(result,function(item){if(item.anime){getYears.push(item.anime);}});ctrl.years=ItemService.endingYears(getYears);});break;}// console.log('type set: ', ctrl.stepConfig.listGen);\n}//Processing on step submits.\nfunction process(number,direction,callback){// console.log(number, direction);\nswitch(number){case 1:if(ctrl.topten.type!==''&&ctrl.isCreate){typeSetItemPopulate();callback();}else if(ctrl.topten.type!==''&&!ctrl.isCreate){if(ctrl.stepConfig.listGen.displayList.length<1){angular.forEach(ctrl.topten[ctrl.topten.type+'List'],function(item){var index=ListService.findWithAttr(ctrl.stepConfig.listGen.items,'_id',item._id);ctrl.stepConfig.listGen.displayList.push(ctrl.stepConfig.listGen.items[index]);});ctrl.stepConfig.limitMin=ctrl.stepConfig.listGen.displayList.length;}callback();}else if(ctrl.topten.type===''){NotificationFactory.popup('Invalid form','You MUST select a type to continue.','error');}break;case 2:if(direction){var i=0,j=0,length;angular.copy(ctrl.stepConfig.listGen.items,ctrl.stepConfig.listGen.itemsCached);// console.log('pre conditions: ', ctrl.stepConfig.listGen.items.length, ctrl.stepConfig.listGen.itemsCached.length);\nif(ctrl.topten.type==='anime'){if(ctrl.topten.conditions.season){if(ctrl.topten.conditions.year){ctrl.stepConfig.listGen.items=$filter('season')(ctrl.stepConfig.listGen.items,ctrl.topten.conditions.year,ctrl.topten.conditions.season);}else{NotificationFactory.popup('Invalid form','A year MUST be selected when selecting a season.','error');break;}}else{if(ctrl.topten.conditions.year){ctrl.stepConfig.listGen.items=$filter('filter')(ctrl.stepConfig.listGen.items,{season:{year:ctrl.topten.conditions.year}});}}}else if(ctrl.topten.type==='character'){if(ctrl.topten.conditions.season){if(ctrl.topten.conditions.year){ctrl.stepConfig.listGen.items=$filter('seasonForCharacterAnime')(ctrl.stepConfig.listGen.items,ctrl.topten.conditions.year,ctrl.topten.conditions.season);}else{NotificationFactory.popup('Invalid form','A year MUST be selected when selecting a season.','error');break;}}else{if(ctrl.topten.conditions.year){ctrl.stepConfig.listGen.items=$filter('filter')(ctrl.stepConfig.listGen.items,{anime:{season:{year:ctrl.topten.conditions.year}}});}}}if(ctrl.topten.conditions.series.length>0){i=ctrl.stepConfig.listGen.items.length;while(i--){var remove=true,attr=ctrl.stepConfig.listGen.items[i].anime!==null?'anime':ctrl.stepConfig.listGen.items[i].anime!==null?'manga':null;length=ctrl.topten.conditions.series.length;//  console.log('tag while: ', i, length, attr);\nif(attr!==null){// console.log('tag item: ', ctrl.stepConfig.listGen.items[i]);\nfor(j=0;j<length;j++){var series=ctrl.topten.conditions.series[j];// console.log(ctrl.stepConfig.listGen.items[i][attr].title, series.name, ctrl.stepConfig.listGen.items[i][attr].title.indexOf(series.name));\nif(ctrl.stepConfig.listGen.items[i][attr].title.indexOf(series.name)>-1){remove=false;}}if(remove){// console.log('remove as remove: ' + remove);\nctrl.stepConfig.listGen.items.splice(i,1);}}else{// console.log('straight remove');\nctrl.stepConfig.listGen.items.splice(i,1);}}}if(ctrl.topten.conditions.tags.length>0){i=ctrl.stepConfig.listGen.items.length;while(i--){var count=0;length=ctrl.topten.conditions.tags.length;// console.log('tag while: ', i, length);\nif(ctrl.stepConfig.listGen.items[i].tags.length>0){// console.log('tag item: ', ctrl.stepConfig.listGen.items[i].tags);\nfor(j=0;j<length;j++){var tag=ctrl.topten.conditions.tags[j];// console.log('tag round: ' + i + '-' + j, ctrl.stepConfig.listGen.items[i].tags, tag.tag, ListService.findWithAttr(ctrl.stepConfig.listGen.items[i].tags, 'text', tag.tag));\nif(ListService.findWithAttr(ctrl.stepConfig.listGen.items[i].tags,'text',tag.tag)>-1){count++;}}if(count!==length){// console.log('remove as count: ' + count + ' > length: ' + length);\nctrl.stepConfig.listGen.items.splice(i,1);}}else{// console.log('straight remove');\nctrl.stepConfig.listGen.items.splice(i,1);}}}// console.log('post conditions: ', ctrl.stepConfig.listGen.items.length, ctrl.stepConfig.listGen.itemsCached.length);\n}callback();break;case 3:if(!direction){ctrl.stepConfig.listGen.items=angular.copy(ctrl.stepConfig.listGen.itemsCached);}callback();break;}}function pushItem(item){if(ctrl.topten.conditions.limit===null||ctrl.topten.conditions.limit===0||ctrl.topten.conditions.limit>ctrl.stepConfig.listGen.displayList.length){var index=ctrl.topten[ctrl.topten.type+'List'].indexOf(item._id);if(!ctrl.isCreate&&index===-1){index=ListService.findWithAttr(ctrl.topten[ctrl.topten.type+'List'],'_id',item._id);}if(index===-1){ctrl.topten[ctrl.topten.type+'List'].push(item._id);ctrl.stepConfig.listGen.displayList.push(item);}else{NotificationFactory.warning('Duplicate!','Item has already been added to list.');}}else{NotificationFactory.error('Full!','Item list has reached the defined capacity.');}ctrl.stepConfig.listGen.toptenItem='';}function removeItem(item){//For display array.\nvar index=ctrl.stepConfig.listGen.displayList.indexOf(item);ctrl.stepConfig.listGen.displayList.splice(index,1);//For topten list.\nindex=ctrl.topten[ctrl.topten.type+'List'].indexOf(item._id);if(!ctrl.isCreate&&index===-1){index=ListService.findWithAttr(ctrl.topten[ctrl.topten.type+'List'],'_id',item._id);}ctrl.topten[ctrl.topten.type+'List'].splice(index,1);NotificationFactory.warning('Removed!','Item has been removed from list.');}function pushCondition(type,item){var index,indexTwo;switch(type){case'series':index=ListService.findWithAttr(ctrl.topten.conditions.series,'name',item.name);if(index===-1){ctrl.topten.conditions.series.push(item);}else{NotificationFactory.warning('Duplicate!','Series has already been added to list.');}ctrl.stepConfig.listGen.seriesLimit='';break;case'tag':index=ListService.findWithAttr(ctrl.topten.conditions.tags,'tag',item.tag);if(index===-1){ctrl.topten.conditions.tags.push(item);}else{NotificationFactory.warning('Duplicate!','Tag has already been added to list.');}ctrl.stepConfig.listGen.tagLimit='';break;}}function removeCondition(type,item){var index,indexTwo;switch(type){case'series':index=ListService.findWithAttr(ctrl.topten.conditions.series,'name',item.name);ctrl.topten.conditions.series.splice(index,1);NotificationFactory.warning('Removed!','Series has been removed from list.');break;case'tag':index=ctrl.topten.conditions.tags.indexOf(item);ctrl.topten.conditions.tags.splice(index,1);NotificationFactory.warning('Removed!','Tag has been removed from list.');break;}}//Step related functions:\nfunction takeStep(number,direction){process(number,direction,function(){ctrl.stepConfig.currentStep=direction?number+1:number-1;});// console.log('step: ', ctrl.stepConfig, ctrl.topten);\n}function cancel(){$location.path('toptens');}function inital(){// console.log('state params: ', $stateParams);\nif($stateParams.toptenId!==undefined){ctrl.isCreate=false;Toptens.get({toptenId:$stateParams.toptenId}).$promise.then(function(result){ctrl.topten=result;// console.log('topten: ', result);\ntypeSetItemPopulate();});}}inital();function swappingItems(index){// console.log('item selected: ', index);\nif(ctrl.stepConfig.swapping.one===''){ctrl.stepConfig.swapping.one=index;}else if(ctrl.stepConfig.swapping.one===index){ctrl.stepConfig.swapping.one='';}else{ctrl.stepConfig.swapping.two=index;//Re-order display list.\nvar temp=ctrl.stepConfig.listGen.displayList[ctrl.stepConfig.swapping.one];ctrl.stepConfig.listGen.displayList[ctrl.stepConfig.swapping.one]=ctrl.stepConfig.listGen.displayList[ctrl.stepConfig.swapping.two];ctrl.stepConfig.listGen.displayList[ctrl.stepConfig.swapping.two]=temp;//Re-order topten item list.\ntemp=ctrl.topten[ctrl.topten.type+'List'][ctrl.stepConfig.swapping.one];ctrl.topten[ctrl.topten.type+'List'][ctrl.stepConfig.swapping.one]=ctrl.topten[ctrl.topten.type+'List'][ctrl.stepConfig.swapping.two];ctrl.topten[ctrl.topten.type+'List'][ctrl.stepConfig.swapping.two]=temp;//Clear.\nctrl.stepConfig.swapping.one='';ctrl.stepConfig.swapping.two='';}}}})();(function(){'use strict';angular.module('toptens').controller('StatisticsTopten',StatisticsTopten);StatisticsTopten.$inject=['$scope','$uibModalInstance','list','CharacterService'];function StatisticsTopten($scope,$uibModalInstance,list,CharacterService){var ctrl=this;ctrl.cancel=cancel;ctrl.list=list;ctrl.toptenInfo={tags:[],series:[]};function process(){var listType=ctrl.list.type+'List';ctrl.toptenInfo.tags=CharacterService.buildCharacterTags(ctrl.list[listType]);if(ctrl.list.type==='character'){ctrl.toptenInfo.series=CharacterService.buildSeriesList(ctrl.list[listType]);}}process();function cancel(){$uibModalInstance.dismiss('cancel');}}})();(function(){'use strict';angular.module('toptens').controller('ToptensController',ToptensController);ToptensController.$inject=['$scope','$stateParams','$location','Authentication','$uibModal','Toptens','NotificationFactory','ListService','spinnerService'];function ToptensController($scope,$stateParams,$location,Authentication,$uibModal,Toptens,NotificationFactory,ListService,spinnerService){var ctrl=this;ctrl.authentication=Authentication;ctrl.filterConfig={showingCount:0,expandFilters:false,sortType:'',sortReverse:false,ratingLevel:undefined,search:{},searchTags:'',tagsForFilter:[],taglessItem:false,areTagless:false,selectListOptions:{},commonArrays:ListService.getCommonArrays()};ctrl.find=find;ctrl.findOne=findOne;ctrl.openListStats=openListStats;ctrl.pageConfig={currentPage:0,pageSize:10};ctrl.remove=remove;ctrl.viewConfig={displayType:'',linkSuffix:'',tags:[],series:[]};ctrl.whichController='topten';// Remove existing Topten\nfunction remove(topten){NotificationFactory.confirmation(function(){if(topten){topten.$remove();for(var i in ctrl.toptens){if(ctrl.toptens[i]===topten){ctrl.toptens.splice(i,1);}}}else{ctrl.topten.$remove(function(){$location.path('toptens');});}NotificationFactory.warning('Deleted!','Anime was successfully deleted.');});}// Find a list of Toptens\nfunction find(){ctrl.filterConfig.selectListOptions=ListService.getSelectListOptions(ctrl.whichController);spinnerService.loading('topten',Toptens.query().$promise.then(function(result){ctrl.toptens=result;}));console.log(ctrl.toptens);}// Find existing Topten\nfunction findOne(){Toptens.get({toptenId:$stateParams.toptenId}).$promise.then(function(result){ctrl.topten=result;ctrl.viewConfig.displayType=ctrl.topten.type==='character'?'name':'title';ctrl.viewConfig.linkSuffix=ctrl.topten.type==='character'?'s':'items';});}function openListStats(){var modalInstance=$uibModal.open({animation:true,templateUrl:'/modules/toptens/views/statistics-topten.client.view.html',controller:'StatisticsTopten as ctrl',size:'lg',resolve:{list:function list(){return ctrl.topten;}}});}}})();(function(){'use strict';angular.module('toptens').directive('horizontalListItem',horizontalListItem);function horizontalListItem(){return{restrict:'A',replace:true,transclude:true,scope:{},templateUrl:'/modules/toptens/templates/horizontal-list-item.html',require:'^horizontalList',link:function link(scope,element,attr,horizontalListCtrl){scope.isVisible=false;scope.itemWidth=horizontalListCtrl.itemWidth;scope.position=element.index();horizontalListCtrl.register(scope);}};}})();(function(){'use strict';angular.module('toptens').directive('horizontalList',horizontalList);function horizontalList(){return{restrict:'A',transclude:true,require:'horizontalList',scope:{},templateUrl:'/modules/toptens/templates/horizontal-list.html',bindToController:true,controllerAs:'horizontalList',controller:function controller($scope){var self=this;self.clicks=0;self.items=[];self.moveItems=moveItems;self.register=register;self.shift=0;function register(item){self.items.push(item);if([0,1,2].indexOf(item.position)>-1){item.isVisible=true;}}function setVisibility(){var values=[],check=self.clicks*3;for(var i=0;i<3;i++){values.push(check+i);}angular.forEach(self.items,function(item){item.isVisible=values.indexOf(item.position)>-1;});}function moveItems(direction){if(direction==='left'){if(self.clicks-1<0){self.clicks=0;}else{self.clicks-=1;}setVisibility();}else if(direction==='right'){if(self.clicks+1<Math.ceil(self.items.length/3)){self.clicks+=1;}setVisibility();}}},link:function link(scope,element,attr,ctrl){var el=element[0],child=el.children[0];scope.settings={child:child,style:child.style,value:0};function listSettings(){ctrl.shift=-el.offsetWidth;ctrl.itemWidth=el.offsetWidth/3;angular.forEach(ctrl.items,function(item){item.itemWidth=ctrl.itemWidth;});}listSettings();window.addEventListener('resize',function(e){if(el.offsetWidth!==Math.abs(ctrl.shift)){listSettings();scope.$apply();}});}};}})();(function(){'use strict';angular.module('toptens').directive('ngMax',ngMax);function ngMax(){return{restrict:'A',require:'ngModel',link:function link(scope,elem,attr,ctrl){scope.$watch(attr.ngMax,function(){if(ctrl.$isDirty)ctrl.$setViewValue(ctrl.$viewValue);});var isEmpty=function isEmpty(value){return angular.isUndefined(value)||value===''||value===null;};var maxValidator=function maxValidator(value){var max=scope.$eval(attr.ngMax)||Infinity;if(!isEmpty(value)&&value>max){ctrl.$setValidity('ngMax',false);return undefined;}else{ctrl.$setValidity('ngMax',true);return value;}};ctrl.$parsers.push(maxValidator);ctrl.$formatters.push(maxValidator);}};}})();(function(){'use strict';angular.module('toptens').directive('ngMin',ngMin);function ngMin(){return{restrict:'A',require:'ngModel',link:function link(scope,elem,attr,ctrl){scope.$watch(attr.ngMin,function(){if(ctrl.$isDirty)ctrl.$setViewValue(ctrl.$viewValue);});var isEmpty=function isEmpty(value){return angular.isUndefined(value)||value===''||value===null;};var minValidator=function minValidator(value){var min=scope.$eval(attr.ngMin)||0;if(!isEmpty(value)&&value<min){ctrl.$setValidity('ngMin',false);return undefined;}else{ctrl.$setValidity('ngMin',true);return value;}};ctrl.$parsers.push(minValidator);ctrl.$formatters.push(minValidator);}};}})();(function(){'use strict';angular.module('toptens').directive('oneStep',oneStep);function oneStep(){return{restrict:'A',replace:true,transclude:true,scope:{},require:'^steps',templateUrl:'/modules/toptens/templates/step.html',link:function link(scope,elm,attrs,stepsController){scope.active=false;scope.stepNumber=elm.index()+1;stepsController.register(scope);}};}})();(function(){'use strict';angular.module('toptens').directive('stepControls',stepControls);function stepControls(){return{restrict:'A',replace:true,transclude:true,template:'<div class=\"step-controls step-button-group padding-5\" ng-transclude>'+'</div>'};}})();(function(){'use strict';angular.module('toptens').directive('steps',steps);function steps(){return{restrict:'A',transclude:true,scope:{stepConfig:'='},template:'<div class=\"steps\" ng-transclude>'+'</div>',bindToController:true,controllerAs:'steps',controller:function controller($scope){var self=this;self.register=register;self.steps=[];function register(step){self.steps.push(step);if(step.stepNumber===1){step.active=true;}}},link:function link(scope,element,attrs,stepsController){scope.$watch('steps.stepConfig.currentStep',function(newValue){if(newValue!==undefined){console.log('steps: ',newValue);angular.forEach(stepsController.steps,function(step){if(step.stepNumber!==newValue){step.active=false;}else{step.active=true;}});}});}};}})();(function(){'use strict';angular.module('toptens').directive('sticky',sticky);function sticky(){return{restrict:'A',scope:{},link:function link(scope,element,attrs){window.addEventListener('scroll',function(evt){var stickyClass='sticky-scroll-top',stickyInnerClass='sticky-inner-container',scrollTop=document.body.scrollTop,elm=element[0],inner=elm.children[0],viewportOffset=elm.getBoundingClientRect(),distance_from_top=viewportOffset.top;// This value is your scroll distance from the top\n// The element has scrolled to the top of the page. Set appropriate style.\nif(distance_from_top<56){//                    console.log('top hit : ', distance_from_top);\nelm.classList.add(stickyClass);inner.classList.add(stickyInnerClass);}// The element has not reached the top.\nif(distance_from_top>55||scrollTop<10){//                    console.log('we are at: ', distance_from_top);\nelm.classList.remove(stickyClass);inner.classList.remove(stickyInnerClass);}});}};}})();(function(){'use strict';angular.module('toptens').filter('toptenFilter',toptenFilter);function toptenFilter(){return function(array,displayType,value){if(array!==undefined){return array.filter(function(item){if(item[displayType].toLowerCase().indexOf(value.toLowerCase())>-1){return item;}});}};}})();(function(){'use strict';//Toptens service used to communicate Toptens REST endpoints\nangular.module('toptens').factory('Toptens',ToptensFactory);ToptensFactory.$inject=['$resource'];function ToptensFactory($resource){return $resource('toptens/:toptenId',{toptenId:'@_id'},{update:{method:'PUT'}});}})();'use strict';// Config HTTP Error Handling\nangular.module('users').config(['$httpProvider',function($httpProvider){// Set the httpProvider \"not authorized\" interceptor\n$httpProvider.interceptors.push(['$q','$location','Authentication',function($q,$location,Authentication){return{responseError:function responseError(rejection){switch(rejection.status){case 401:// Deauthenticate the global user\nAuthentication.user=null;// Redirect to signin page\n$location.path('signin');break;case 403:// Add unauthorized behaviour \nbreak;}return $q.reject(rejection);}};}]);}]);'use strict';// Setting up route\nangular.module('users').config(['$stateProvider',function($stateProvider){// Users state routing\n$stateProvider.state('profile',{url:'/settings/profile',templateUrl:'modules/users/views/settings/edit-profile.client.view.html'}).state('password',{url:'/settings/password',templateUrl:'modules/users/views/settings/change-password.client.view.html'}).state('accounts',{url:'/settings/accounts',templateUrl:'modules/users/views/settings/social-accounts.client.view.html'}).//\t\tstate('signup', {\n//\t\t\turl: '/signup',\n//\t\t\ttemplateUrl: 'modules/users/views/authentication/signup.client.view.html'\n//\t\t}).\nstate('signin',{url:'/signin',templateUrl:'modules/users/views/authentication/signin.client.view.html'}).state('forgot',{url:'/password/forgot',templateUrl:'modules/users/views/password/forgot-password.client.view.html'}).state('reset-invalid',{url:'/password/reset/invalid',templateUrl:'modules/users/views/password/reset-password-invalid.client.view.html'}).state('reset-success',{url:'/password/reset/success',templateUrl:'modules/users/views/password/reset-password-success.client.view.html'}).state('reset',{url:'/password/reset/:token',templateUrl:'modules/users/views/password/reset-password.client.view.html'});}]);(function(){'use strict';angular.module('users').controller('AuthenticationController',AuthenticationController);AuthenticationController.$inject=['$scope','$http','$location','Authentication'];function AuthenticationController($scope,$http,$location,Authentication){var ctrl=this;ctrl.authentication=Authentication;ctrl.signin=signin;ctrl.signup=signup;function signup(){$http.post('/auth/signup',ctrl.credentials).success(function(response){// If successful we assign the response to the global user model\nctrl.authentication.user=response;// And redirect to the index page\n$location.path('/signin');}).error(function(response){ctrl.error=response.message;});}function signin(){ctrl.credentials.username='username';$http.post('/auth/signin',ctrl.credentials).success(function(response){// If successful we assign the response to the global user model\nctrl.authentication.user=response;ctrl.loginBody=true;// And redirect to the index page\n$location.path('/tasks');}).error(function(response){ctrl.error=response.message;});}}})();'use strict';angular.module('users').controller('PasswordController',['$scope','$stateParams','$http','$location','Authentication',function($scope,$stateParams,$http,$location,Authentication){$scope.authentication=Authentication;//If user is signed in then redirect back home\nif($scope.authentication.user)$location.path('/');// Submit forgotten password account id\n$scope.askForPasswordReset=function(){$scope.success=$scope.error=null;$http.post('/auth/forgot',$scope.credentials).success(function(response){// Show user success message and clear form\n$scope.credentials=null;$scope.success=response.message;}).error(function(response){// Show user error message and clear form\n$scope.credentials=null;$scope.error=response.message;});};// Change user password\n$scope.resetUserPassword=function(){$scope.success=$scope.error=null;$http.post('/auth/reset/'+$stateParams.token,$scope.passwordDetails).success(function(response){// If successful show success message and clear form\n$scope.passwordDetails=null;// Attach user profile\nAuthentication.user=response;// And redirect to the index page\n$location.path('/password/reset/success');}).error(function(response){$scope.error=response.message;});};}]);'use strict';angular.module('users').controller('SettingsController',['$scope','$http','$location','Users','Authentication',function($scope,$http,$location,Users,Authentication){$scope.user=Authentication.user;// If user is not signed in then redirect back home\nif(!$scope.user)$location.path('/');// Check if there are additional accounts \n$scope.hasConnectedAdditionalSocialAccounts=function(provider){for(var i in $scope.user.additionalProvidersData){return true;}return false;};// Check if provider is already in use with current user\n$scope.isConnectedSocialAccount=function(provider){return $scope.user.provider===provider||$scope.user.additionalProvidersData&&$scope.user.additionalProvidersData[provider];};// Remove a user social account\n$scope.removeUserSocialAccount=function(provider){$scope.success=$scope.error=null;$http.delete('/users/accounts',{params:{provider:provider}}).success(function(response){// If successful show success message and clear form\n$scope.success=true;$scope.user=Authentication.user=response;}).error(function(response){$scope.error=response.message;});};// Update a user profile\n$scope.updateUserProfile=function(isValid){if(isValid){$scope.success=$scope.error=null;var user=new Users($scope.user);user.$update(function(response){$scope.success=true;Authentication.user=response;},function(response){$scope.error=response.data.message;});}else{$scope.submitted=true;}};// Change user password\n$scope.changeUserPassword=function(){$scope.success=$scope.error=null;$http.post('/users/password',$scope.passwordDetails).success(function(response){// If successful show success message and clear form\n$scope.success=true;$scope.passwordDetails=null;}).error(function(response){$scope.error=response.message;});};}]);(function(){'use strict';// Authentication service for user variables\nangular.module('users').factory('Authentication',AuthenticationFactory);function AuthenticationFactory(){var _this=this;_this._data={user:window.user};return _this._data;}})();(function(){'use strict';// Users service used for communicating with the users REST endpoint\nangular.module('users').factory('Users',UsersFactory);UsersFactory.$inject=['$resource'];function UsersFactory($resource){return $resource('users',{},{update:{method:'PUT'}});}})();//# sourceMappingURL=application.js.map\n//# sourceMappingURL=application.js.map\n//# sourceMappingURL=application.js.map\n//# sourceMappingURL=application.js.map\n//# sourceMappingURL=application.js.map\n//# sourceMappingURL=application.js.map\n"]}